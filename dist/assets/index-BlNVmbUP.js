(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Lb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var md={exports:{}},ml={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy;function gw(){if(Fy)return ml;Fy=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:l}}return ml.Fragment=e,ml.jsx=t,ml.jsxs=t,ml}var Gy;function yw(){return Gy||(Gy=1,md.exports=gw()),md.exports}var T=yw(),gd={exports:{}},Se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function bw(){if(Yy)return Se;Yy=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(E){return E===null||typeof E!="object"?null:(E=y&&E[y]||E["@@iterator"],typeof E=="function"?E:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,M={};function C(E,V,Y){this.props=E,this.context=V,this.refs=M,this.updater=Y||v}C.prototype.isReactComponent={},C.prototype.setState=function(E,V){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,V,"setState")},C.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function _(){}_.prototype=C.prototype;function $(E,V,Y){this.props=E,this.context=V,this.refs=M,this.updater=Y||v}var U=$.prototype=new _;U.constructor=$,S(U,C.prototype),U.isPureReactComponent=!0;var J=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function H(E,V,Y,N,G,ie){return Y=ie.ref,{$$typeof:n,type:E,key:V,ref:Y!==void 0?Y:null,props:ie}}function te(E,V){return H(E.type,V,void 0,void 0,void 0,E.props)}function se(E){return typeof E=="object"&&E!==null&&E.$$typeof===n}function ze(E){var V={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(Y){return V[Y]})}var _e=/\/+/g;function Re(E,V){return typeof E=="object"&&E!==null&&E.key!=null?ze(""+E.key):V.toString(36)}function ge(){}function ye(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(ge,ge):(E.status="pending",E.then(function(V){E.status==="pending"&&(E.status="fulfilled",E.value=V)},function(V){E.status==="pending"&&(E.status="rejected",E.reason=V)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function ne(E,V,Y,N,G){var ie=typeof E;(ie==="undefined"||ie==="boolean")&&(E=null);var ee=!1;if(E===null)ee=!0;else switch(ie){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(E.$$typeof){case n:case e:ee=!0;break;case g:return ee=E._init,ne(ee(E._payload),V,Y,N,G)}}if(ee)return G=G(E),ee=N===""?"."+Re(E,0):N,J(G)?(Y="",ee!=null&&(Y=ee.replace(_e,"$&/")+"/"),ne(G,V,Y,"",function(Le){return Le})):G!=null&&(se(G)&&(G=te(G,Y+(G.key==null||E&&E.key===G.key?"":(""+G.key).replace(_e,"$&/")+"/")+ee)),V.push(G)),1;ee=0;var Ae=N===""?".":N+":";if(J(E))for(var de=0;de<E.length;de++)N=E[de],ie=Ae+Re(N,de),ee+=ne(N,V,Y,ie,G);else if(de=b(E),typeof de=="function")for(E=de.call(E),de=0;!(N=E.next()).done;)N=N.value,ie=Ae+Re(N,de++),ee+=ne(N,V,Y,ie,G);else if(ie==="object"){if(typeof E.then=="function")return ne(ye(E),V,Y,N,G);throw V=String(E),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ee}function O(E,V,Y){if(E==null)return E;var N=[],G=0;return ne(E,N,"","",function(ie){return V.call(Y,ie,G++)}),N}function X(E){if(E._status===-1){var V=E._result;V=V(),V.then(function(Y){(E._status===0||E._status===-1)&&(E._status=1,E._result=Y)},function(Y){(E._status===0||E._status===-1)&&(E._status=2,E._result=Y)}),E._status===-1&&(E._status=0,E._result=V)}if(E._status===1)return E._result.default;throw E._result}var W=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)};function ce(){}return Se.Children={map:O,forEach:function(E,V,Y){O(E,function(){V.apply(this,arguments)},Y)},count:function(E){var V=0;return O(E,function(){V++}),V},toArray:function(E){return O(E,function(V){return V})||[]},only:function(E){if(!se(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Se.Component=C,Se.Fragment=t,Se.Profiler=o,Se.PureComponent=$,Se.StrictMode=i,Se.Suspense=d,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Se.__COMPILER_RUNTIME={__proto__:null,c:function(E){return I.H.useMemoCache(E)}},Se.cache=function(E){return function(){return E.apply(null,arguments)}},Se.cloneElement=function(E,V,Y){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var N=S({},E.props),G=E.key,ie=void 0;if(V!=null)for(ee in V.ref!==void 0&&(ie=void 0),V.key!==void 0&&(G=""+V.key),V)!R.call(V,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&V.ref===void 0||(N[ee]=V[ee]);var ee=arguments.length-2;if(ee===1)N.children=Y;else if(1<ee){for(var Ae=Array(ee),de=0;de<ee;de++)Ae[de]=arguments[de+2];N.children=Ae}return H(E.type,G,void 0,void 0,ie,N)},Se.createContext=function(E){return E={$$typeof:u,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:l,_context:E},E},Se.createElement=function(E,V,Y){var N,G={},ie=null;if(V!=null)for(N in V.key!==void 0&&(ie=""+V.key),V)R.call(V,N)&&N!=="key"&&N!=="__self"&&N!=="__source"&&(G[N]=V[N]);var ee=arguments.length-2;if(ee===1)G.children=Y;else if(1<ee){for(var Ae=Array(ee),de=0;de<ee;de++)Ae[de]=arguments[de+2];G.children=Ae}if(E&&E.defaultProps)for(N in ee=E.defaultProps,ee)G[N]===void 0&&(G[N]=ee[N]);return H(E,ie,void 0,void 0,null,G)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(E){return{$$typeof:f,render:E}},Se.isValidElement=se,Se.lazy=function(E){return{$$typeof:g,_payload:{_status:-1,_result:E},_init:X}},Se.memo=function(E,V){return{$$typeof:p,type:E,compare:V===void 0?null:V}},Se.startTransition=function(E){var V=I.T,Y={};I.T=Y;try{var N=E(),G=I.S;G!==null&&G(Y,N),typeof N=="object"&&N!==null&&typeof N.then=="function"&&N.then(ce,W)}catch(ie){W(ie)}finally{I.T=V}},Se.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Se.use=function(E){return I.H.use(E)},Se.useActionState=function(E,V,Y){return I.H.useActionState(E,V,Y)},Se.useCallback=function(E,V){return I.H.useCallback(E,V)},Se.useContext=function(E){return I.H.useContext(E)},Se.useDebugValue=function(){},Se.useDeferredValue=function(E,V){return I.H.useDeferredValue(E,V)},Se.useEffect=function(E,V,Y){var N=I.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return N.useEffect(E,V)},Se.useId=function(){return I.H.useId()},Se.useImperativeHandle=function(E,V,Y){return I.H.useImperativeHandle(E,V,Y)},Se.useInsertionEffect=function(E,V){return I.H.useInsertionEffect(E,V)},Se.useLayoutEffect=function(E,V){return I.H.useLayoutEffect(E,V)},Se.useMemo=function(E,V){return I.H.useMemo(E,V)},Se.useOptimistic=function(E,V){return I.H.useOptimistic(E,V)},Se.useReducer=function(E,V,Y){return I.H.useReducer(E,V,Y)},Se.useRef=function(E){return I.H.useRef(E)},Se.useState=function(E){return I.H.useState(E)},Se.useSyncExternalStore=function(E,V,Y){return I.H.useSyncExternalStore(E,V,Y)},Se.useTransition=function(){return I.H.useTransition()},Se.version="19.1.0",Se}var Ky;function Oh(){return Ky||(Ky=1,gd.exports=bw()),gd.exports}var q=Oh();const K=Lb(q);var yd={exports:{}},gl={},bd={exports:{}},vd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy;function vw(){return Jy||(Jy=1,function(n){function e(O,X){var W=O.length;O.push(X);e:for(;0<W;){var ce=W-1>>>1,E=O[ce];if(0<o(E,X))O[ce]=X,O[W]=E,W=ce;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var X=O[0],W=O.pop();if(W!==X){O[0]=W;e:for(var ce=0,E=O.length,V=E>>>1;ce<V;){var Y=2*(ce+1)-1,N=O[Y],G=Y+1,ie=O[G];if(0>o(N,W))G<E&&0>o(ie,N)?(O[ce]=ie,O[G]=W,ce=G):(O[ce]=N,O[Y]=W,ce=Y);else if(G<E&&0>o(ie,W))O[ce]=ie,O[G]=W,ce=G;else break e}}return X}function o(O,X){var W=O.sortIndex-X.sortIndex;return W!==0?W:O.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var d=[],p=[],g=1,y=null,b=3,v=!1,S=!1,M=!1,C=!1,_=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function J(O){for(var X=t(p);X!==null;){if(X.callback===null)i(p);else if(X.startTime<=O)i(p),X.sortIndex=X.expirationTime,e(d,X);else break;X=t(p)}}function I(O){if(M=!1,J(O),!S)if(t(d)!==null)S=!0,R||(R=!0,Re());else{var X=t(p);X!==null&&ne(I,X.startTime-O)}}var R=!1,H=-1,te=5,se=-1;function ze(){return C?!0:!(n.unstable_now()-se<te)}function _e(){if(C=!1,R){var O=n.unstable_now();se=O;var X=!0;try{e:{S=!1,M&&(M=!1,$(H),H=-1),v=!0;var W=b;try{t:{for(J(O),y=t(d);y!==null&&!(y.expirationTime>O&&ze());){var ce=y.callback;if(typeof ce=="function"){y.callback=null,b=y.priorityLevel;var E=ce(y.expirationTime<=O);if(O=n.unstable_now(),typeof E=="function"){y.callback=E,J(O),X=!0;break t}y===t(d)&&i(d),J(O)}else i(d);y=t(d)}if(y!==null)X=!0;else{var V=t(p);V!==null&&ne(I,V.startTime-O),X=!1}}break e}finally{y=null,b=W,v=!1}X=void 0}}finally{X?Re():R=!1}}}var Re;if(typeof U=="function")Re=function(){U(_e)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,ye=ge.port2;ge.port1.onmessage=_e,Re=function(){ye.postMessage(null)}}else Re=function(){_(_e,0)};function ne(O,X){H=_(function(){O(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(O){switch(b){case 1:case 2:case 3:var X=3;break;default:X=b}var W=b;b=X;try{return O()}finally{b=W}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(O,X){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var W=b;b=O;try{return X()}finally{b=W}},n.unstable_scheduleCallback=function(O,X,W){var ce=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ce+W:ce):W=ce,O){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=W+E,O={id:g++,callback:X,priorityLevel:O,startTime:W,expirationTime:E,sortIndex:-1},W>ce?(O.sortIndex=W,e(p,O),t(d)===null&&O===t(p)&&(M?($(H),H=-1):M=!0,ne(I,W-ce))):(O.sortIndex=E,e(d,O),S||v||(S=!0,R||(R=!0,Re()))),O},n.unstable_shouldYield=ze,n.unstable_wrapCallback=function(O){var X=b;return function(){var W=b;b=X;try{return O.apply(this,arguments)}finally{b=W}}}}(vd)),vd}var Xy;function xw(){return Xy||(Xy=1,bd.exports=vw()),bd.exports}var xd={exports:{}},_t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function Sw(){if(Zy)return _t;Zy=1;var n=Oh();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(d,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:d,containerInfo:p,implementation:g}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,_t.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(d,p,null,g)},_t.flushSync=function(d){var p=u.T,g=i.p;try{if(u.T=null,i.p=2,d)return d()}finally{u.T=p,i.p=g,i.d.f()}},_t.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(d,p))},_t.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},_t.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,y=f(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,v=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?i.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:v}):g==="script"&&i.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:v,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},_t.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=f(p.as,p.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(d)},_t.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=f(g,p.crossOrigin);i.d.L(d,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},_t.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=f(p.as,p.crossOrigin);i.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(d)},_t.requestFormReset=function(d){i.d.r(d)},_t.unstable_batchedUpdates=function(d,p){return d(p)},_t.useFormState=function(d,p,g){return u.H.useFormState(d,p,g)},_t.useFormStatus=function(){return u.H.useHostTransitionStatus()},_t.version="19.1.0",_t}var Wy;function qb(){if(Wy)return xd.exports;Wy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),xd.exports=Sw(),xd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0;function ww(){if(e0)return gl;e0=1;var n=xw(),e=Oh(),t=qb();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(i(188))}function d(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var a=r,c=s;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return f(h),r;if(m===c)return f(h),s;m=m.sibling}throw Error(i(188))}if(a.return!==c.return)a=h,c=m;else{for(var x=!1,w=h.child;w;){if(w===a){x=!0,a=h,c=m;break}if(w===c){x=!0,c=h,a=m;break}w=w.sibling}if(!x){for(w=m.child;w;){if(w===a){x=!0,a=m,c=h;break}if(w===c){x=!0,c=m,a=h;break}w=w.sibling}if(!x)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?r:s}function p(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=p(r),s!==null)return s;r=r.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),$=Symbol.for("react.consumer"),U=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),ze=Symbol.for("react.memo_cache_sentinel"),_e=Symbol.iterator;function Re(r){return r===null||typeof r!="object"?null:(r=_e&&r[_e]||r["@@iterator"],typeof r=="function"?r:null)}var ge=Symbol.for("react.client.reference");function ye(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ge?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case C:return"Profiler";case M:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList";case se:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case v:return"Portal";case U:return(r.displayName||"Context")+".Provider";case $:return(r._context.displayName||"Context")+".Consumer";case J:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case H:return s=r.displayName||null,s!==null?s:ye(r.type)||"Memo";case te:s=r._payload,r=r._init;try{return ye(r(s))}catch{}}return null}var ne=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},ce=[],E=-1;function V(r){return{current:r}}function Y(r){0>E||(r.current=ce[E],ce[E]=null,E--)}function N(r,s){E++,ce[E]=r.current,r.current=s}var G=V(null),ie=V(null),ee=V(null),Ae=V(null);function de(r,s){switch(N(ee,s),N(ie,r),N(G,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?xy(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=xy(s),r=Sy(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Y(G),N(G,r)}function Le(){Y(G),Y(ie),Y(ee)}function Xt(r){r.memoizedState!==null&&N(Ae,r);var s=G.current,a=Sy(s,r.type);s!==a&&(N(ie,r),N(G,a))}function rr(r){ie.current===r&&(Y(G),Y(ie)),Ae.current===r&&(Y(Ae),cl._currentValue=W)}var xi=Object.prototype.hasOwnProperty,Si=n.unstable_scheduleCallback,wi=n.unstable_cancelCallback,ic=n.unstable_shouldYield,Pl=n.unstable_requestPaint,Dt=n.unstable_now,Ql=n.unstable_getCurrentPriorityLevel,yn=n.unstable_ImmediatePriority,Fl=n.unstable_UserBlockingPriority,us=n.unstable_NormalPriority,It=n.unstable_LowPriority,ir=n.unstable_IdlePriority,sc=n.log,oc=n.unstable_setDisableYieldValue,$n=null,Ht=null;function zn(r){if(typeof sc=="function"&&oc(r),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode($n,r)}catch{}}var Mt=Math.clz32?Math.clz32:Ar,Er=Math.log,Gl=Math.LN2;function Ar(r){return r>>>=0,r===0?32:31-(Er(r)/Gl|0)|0}var cs=256,fs=4194304;function Pn(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ti(r,s,a){var c=r.pendingLanes;if(c===0)return 0;var h=0,m=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var w=c&134217727;return w!==0?(c=w&~m,c!==0?h=Pn(c):(x&=w,x!==0?h=Pn(x):a||(a=w&~r,a!==0&&(h=Pn(a))))):(w=c&~m,w!==0?h=Pn(w):x!==0?h=Pn(x):a||(a=c&~r,a!==0&&(h=Pn(a)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:h}function Mi(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function vo(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _n(){var r=cs;return cs<<=1,(cs&4194048)===0&&(cs=256),r}function Yl(){var r=fs;return fs<<=1,(fs&62914560)===0&&(fs=4194304),r}function xo(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function Or(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Kl(r,s,a,c,h,m){var x=r.pendingLanes;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=a,r.entangledLanes&=a,r.errorRecoveryDisabledLanes&=a,r.shellSuspendCounter=0;var w=r.entanglements,k=r.expirationTimes,B=r.hiddenUpdates;for(a=x&~a;0<a;){var P=31-Mt(a),F=1<<P;w[P]=0,k[P]=-1;var j=B[P];if(j!==null)for(B[P]=null,P=0;P<j.length;P++){var L=j[P];L!==null&&(L.lane&=-536870913)}a&=~F}c!==0&&xe(r,c,0),m!==0&&h===0&&r.tag!==0&&(r.suspendedLanes|=m&~(x&~s))}function xe(r,s,a){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-Mt(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|a&4194090}function We(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var c=31-Mt(a),h=1<<c;h&s|r[c]&s&&(r[c]|=s),a&=~h}}function it(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ct(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ci(){var r=X.p;return r!==0?r:(r=window.event,r===void 0?32:Uy(r.type))}function ct(r,s){var a=X.p;try{return X.p=r,s()}finally{X.p=a}}var et=Math.random().toString(36).slice(2),tt="__reactFiber$"+et,Fe="__reactProps$"+et,pt="__reactContainer$"+et,ds="__reactEvents$"+et,sr="__reactListeners$"+et,lp="__reactHandles$"+et,ap="__reactResources$"+et,So="__reactMarker$"+et;function lc(r){delete r[tt],delete r[Fe],delete r[ds],delete r[sr],delete r[lp]}function hs(r){var s=r[tt];if(s)return s;for(var a=r.parentNode;a;){if(s=a[pt]||a[tt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=Cy(r);r!==null;){if(a=r[tt])return a;r=Cy(r)}return s}r=a,a=r.parentNode}return null}function ps(r){if(r=r[tt]||r[pt]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function wo(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function ms(r){var s=r[ap];return s||(s=r[ap]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function mt(r){r[So]=!0}var up=new Set,cp={};function ki(r,s){gs(r,s),gs(r+"Capture",s)}function gs(r,s){for(cp[r]=s,r=0;r<s.length;r++)up.add(s[r])}var a1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fp={},dp={};function u1(r){return xi.call(dp,r)?!0:xi.call(fp,r)?!1:a1.test(r)?dp[r]=!0:(fp[r]=!0,!1)}function Jl(r,s,a){if(u1(s))if(a===null)r.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+a)}}function Xl(r,s,a){if(a===null)r.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+a)}}function or(r,s,a,c){if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttributeNS(s,a,""+c)}}var ac,hp;function ys(r){if(ac===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);ac=s&&s[1]||"",hp=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ac+r+hp}var uc=!1;function cc(r,s){if(!r||uc)return"";uc=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(L){var j=L}Reflect.construct(r,[],F)}else{try{F.call()}catch(L){j=L}r.call(F.prototype)}}else{try{throw Error()}catch(L){j=L}(F=r())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(L){if(L&&j&&typeof L.stack=="string")return[L.stack,j.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),x=m[0],w=m[1];if(x&&w){var k=x.split(`
`),B=w.split(`
`);for(h=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(c===k.length||h===B.length)for(c=k.length-1,h=B.length-1;1<=c&&0<=h&&k[c]!==B[h];)h--;for(;1<=c&&0<=h;c--,h--)if(k[c]!==B[h]){if(c!==1||h!==1)do if(c--,h--,0>h||k[c]!==B[h]){var P=`
`+k[c].replace(" at new "," at ");return r.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",r.displayName)),P}while(1<=c&&0<=h);break}}}finally{uc=!1,Error.prepareStackTrace=a}return(a=r?r.displayName||r.name:"")?ys(a):""}function c1(r){switch(r.tag){case 26:case 27:case 5:return ys(r.type);case 16:return ys("Lazy");case 13:return ys("Suspense");case 19:return ys("SuspenseList");case 0:case 15:return cc(r.type,!1);case 11:return cc(r.type.render,!1);case 1:return cc(r.type,!0);case 31:return ys("Activity");default:return""}}function pp(r){try{var s="";do s+=c1(r),r=r.return;while(r);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function bn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function mp(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function f1(r){var s=mp(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,m=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return h.call(this)},set:function(x){c=""+x,m.call(this,x)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Zl(r){r._valueTracker||(r._valueTracker=f1(r))}function gp(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return r&&(c=mp(r)?r.checked?"true":"false":r.value),r=c,r!==a?(s.setValue(r),!0):!1}function Wl(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var d1=/[\n"\\]/g;function vn(r){return r.replace(d1,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function fc(r,s,a,c,h,m,x,w){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),s!=null?x==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+bn(s)):r.value!==""+bn(s)&&(r.value=""+bn(s)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),s!=null?dc(r,x,bn(s)):a!=null?dc(r,x,bn(a)):c!=null&&r.removeAttribute("value"),h==null&&m!=null&&(r.defaultChecked=!!m),h!=null&&(r.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+bn(w):r.removeAttribute("name")}function yp(r,s,a,c,h,m,x,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;a=a!=null?""+bn(a):"",s=s!=null?""+bn(s):a,w||s===r.value||(r.value=s),r.defaultValue=s}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=w?r.checked:!!c,r.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x)}function dc(r,s,a){s==="number"&&Wl(r.ownerDocument)===r||r.defaultValue===""+a||(r.defaultValue=""+a)}function bs(r,s,a,c){if(r=r.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<r.length;a++)h=s.hasOwnProperty("$"+r[a].value),r[a].selected!==h&&(r[a].selected=h),h&&c&&(r[a].defaultSelected=!0)}else{for(a=""+bn(a),s=null,h=0;h<r.length;h++){if(r[h].value===a){r[h].selected=!0,c&&(r[h].defaultSelected=!0);return}s!==null||r[h].disabled||(s=r[h])}s!==null&&(s.selected=!0)}}function bp(r,s,a){if(s!=null&&(s=""+bn(s),s!==r.value&&(r.value=s),a==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=a!=null?""+bn(a):""}function vp(r,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(i(92));if(ne(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=bn(s),r.defaultValue=a,c=r.textContent,c===a&&c!==""&&c!==null&&(r.value=c)}function vs(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var h1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xp(r,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,a):typeof a!="number"||a===0||h1.has(s)?s==="float"?r.cssFloat=a:r[s]=(""+a).trim():r[s]=a+"px"}function Sp(r,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var h in s)c=s[h],s.hasOwnProperty(h)&&a[h]!==c&&xp(r,h,c)}else for(var m in s)s.hasOwnProperty(m)&&xp(r,m,s[m])}function hc(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var p1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),m1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ea(r){return m1.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var pc=null;function mc(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var xs=null,Ss=null;function wp(r){var s=ps(r);if(s&&(r=s.stateNode)){var a=r[Fe]||null;e:switch(r=s.stateNode,s.type){case"input":if(fc(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+vn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==r&&c.form===r.form){var h=c[Fe]||null;if(!h)throw Error(i(90));fc(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===r.form&&gp(c)}break e;case"textarea":bp(r,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&bs(r,!!a.multiple,s,!1)}}}var gc=!1;function Tp(r,s,a){if(gc)return r(s,a);gc=!0;try{var c=r(s);return c}finally{if(gc=!1,(xs!==null||Ss!==null)&&(Va(),xs&&(s=xs,r=Ss,Ss=xs=null,wp(s),r)))for(s=0;s<r.length;s++)wp(r[s])}}function To(r,s){var a=r.stateNode;if(a===null)return null;var c=a[Fe]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yc=!1;if(lr)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){yc=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{yc=!1}var Nr=null,bc=null,ta=null;function Mp(){if(ta)return ta;var r,s=bc,a=s.length,c,h="value"in Nr?Nr.value:Nr.textContent,m=h.length;for(r=0;r<a&&s[r]===h[r];r++);var x=a-r;for(c=1;c<=x&&s[a-c]===h[m-c];c++);return ta=h.slice(r,1<c?1-c:void 0)}function na(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ra(){return!0}function Cp(){return!1}function Zt(r){function s(a,c,h,m,x){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(a=r[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ra:Cp,this.isPropagationStopped=Cp,this}return g(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),s}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ia=Zt(Ei),Co=g({},Ei,{view:0,detail:0}),g1=Zt(Co),vc,xc,ko,sa=g({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ko&&(ko&&r.type==="mousemove"?(vc=r.screenX-ko.screenX,xc=r.screenY-ko.screenY):xc=vc=0,ko=r),vc)},movementY:function(r){return"movementY"in r?r.movementY:xc}}),kp=Zt(sa),y1=g({},sa,{dataTransfer:0}),b1=Zt(y1),v1=g({},Co,{relatedTarget:0}),Sc=Zt(v1),x1=g({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),S1=Zt(x1),w1=g({},Ei,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),T1=Zt(w1),M1=g({},Ei,{data:0}),Ep=Zt(M1),C1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function A1(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=E1[r])?!!s[r]:!1}function wc(){return A1}var O1=g({},Co,{key:function(r){if(r.key){var s=C1[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=na(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?k1[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wc,charCode:function(r){return r.type==="keypress"?na(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?na(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),N1=Zt(O1),R1=g({},sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ap=Zt(R1),D1=g({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wc}),z1=Zt(D1),_1=g({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),B1=Zt(_1),j1=g({},sa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),L1=Zt(j1),q1=g({},Ei,{newState:0,oldState:0}),V1=Zt(q1),U1=[9,13,27,32],Tc=lr&&"CompositionEvent"in window,Eo=null;lr&&"documentMode"in document&&(Eo=document.documentMode);var I1=lr&&"TextEvent"in window&&!Eo,Op=lr&&(!Tc||Eo&&8<Eo&&11>=Eo),Np=" ",Rp=!1;function Dp(r,s){switch(r){case"keyup":return U1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ws=!1;function H1(r,s){switch(r){case"compositionend":return zp(s);case"keypress":return s.which!==32?null:(Rp=!0,Np);case"textInput":return r=s.data,r===Np&&Rp?null:r;default:return null}}function $1(r,s){if(ws)return r==="compositionend"||!Tc&&Dp(r,s)?(r=Mp(),ta=bc=Nr=null,ws=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Op&&s.locale!=="ko"?null:s.data;default:return null}}var P1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _p(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!P1[r.type]:s==="textarea"}function Bp(r,s,a,c){xs?Ss?Ss.push(c):Ss=[c]:xs=c,s=Qa(s,"onChange"),0<s.length&&(a=new ia("onChange","change",null,a,c),r.push({event:a,listeners:s}))}var Ao=null,Oo=null;function Q1(r){my(r,0)}function oa(r){var s=wo(r);if(gp(s))return r}function jp(r,s){if(r==="change")return s}var Lp=!1;if(lr){var Mc;if(lr){var Cc="oninput"in document;if(!Cc){var qp=document.createElement("div");qp.setAttribute("oninput","return;"),Cc=typeof qp.oninput=="function"}Mc=Cc}else Mc=!1;Lp=Mc&&(!document.documentMode||9<document.documentMode)}function Vp(){Ao&&(Ao.detachEvent("onpropertychange",Up),Oo=Ao=null)}function Up(r){if(r.propertyName==="value"&&oa(Oo)){var s=[];Bp(s,Oo,r,mc(r)),Tp(Q1,s)}}function F1(r,s,a){r==="focusin"?(Vp(),Ao=s,Oo=a,Ao.attachEvent("onpropertychange",Up)):r==="focusout"&&Vp()}function G1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return oa(Oo)}function Y1(r,s){if(r==="click")return oa(s)}function K1(r,s){if(r==="input"||r==="change")return oa(s)}function J1(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var on=typeof Object.is=="function"?Object.is:J1;function No(r,s){if(on(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!xi.call(s,h)||!on(r[h],s[h]))return!1}return!0}function Ip(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Hp(r,s){var a=Ip(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=s&&c>=s)return{node:a,offset:s-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ip(a)}}function $p(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?$p(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Pp(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Wl(r.document);s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Wl(r.document)}return s}function kc(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var X1=lr&&"documentMode"in document&&11>=document.documentMode,Ts=null,Ec=null,Ro=null,Ac=!1;function Qp(r,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ac||Ts==null||Ts!==Wl(c)||(c=Ts,"selectionStart"in c&&kc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ro&&No(Ro,c)||(Ro=c,c=Qa(Ec,"onSelect"),0<c.length&&(s=new ia("onSelect","select",null,s,a),r.push({event:s,listeners:c}),s.target=Ts)))}function Ai(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var Ms={animationend:Ai("Animation","AnimationEnd"),animationiteration:Ai("Animation","AnimationIteration"),animationstart:Ai("Animation","AnimationStart"),transitionrun:Ai("Transition","TransitionRun"),transitionstart:Ai("Transition","TransitionStart"),transitioncancel:Ai("Transition","TransitionCancel"),transitionend:Ai("Transition","TransitionEnd")},Oc={},Fp={};lr&&(Fp=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function Oi(r){if(Oc[r])return Oc[r];if(!Ms[r])return r;var s=Ms[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in Fp)return Oc[r]=s[a];return r}var Gp=Oi("animationend"),Yp=Oi("animationiteration"),Kp=Oi("animationstart"),Z1=Oi("transitionrun"),W1=Oi("transitionstart"),eS=Oi("transitioncancel"),Jp=Oi("transitionend"),Xp=new Map,Nc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nc.push("scrollEnd");function Bn(r,s){Xp.set(r,s),ki(s,[r])}var Zp=new WeakMap;function xn(r,s){if(typeof r=="object"&&r!==null){var a=Zp.get(r);return a!==void 0?a:(s={value:r,source:s,stack:pp(s)},Zp.set(r,s),s)}return{value:r,source:s,stack:pp(s)}}var Sn=[],Cs=0,Rc=0;function la(){for(var r=Cs,s=Rc=Cs=0;s<r;){var a=Sn[s];Sn[s++]=null;var c=Sn[s];Sn[s++]=null;var h=Sn[s];Sn[s++]=null;var m=Sn[s];if(Sn[s++]=null,c!==null&&h!==null){var x=c.pending;x===null?h.next=h:(h.next=x.next,x.next=h),c.pending=h}m!==0&&Wp(a,h,m)}}function aa(r,s,a,c){Sn[Cs++]=r,Sn[Cs++]=s,Sn[Cs++]=a,Sn[Cs++]=c,Rc|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function Dc(r,s,a,c){return aa(r,s,a,c),ua(r)}function ks(r,s){return aa(r,null,null,s),ua(r)}function Wp(r,s,a){r.lanes|=a;var c=r.alternate;c!==null&&(c.lanes|=a);for(var h=!1,m=r.return;m!==null;)m.childLanes|=a,c=m.alternate,c!==null&&(c.childLanes|=a),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(h=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,h&&s!==null&&(h=31-Mt(a),r=m.hiddenUpdates,c=r[h],c===null?r[h]=[s]:c.push(s),s.lane=a|536870912),m):null}function ua(r){if(50<nl)throw nl=0,Vf=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Es={};function tS(r,s,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(r,s,a,c){return new tS(r,s,a,c)}function zc(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ar(r,s){var a=r.alternate;return a===null?(a=ln(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&65011712,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a.refCleanup=r.refCleanup,a}function em(r,s){r.flags&=65011714;var a=r.alternate;return a===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,s=a.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function ca(r,s,a,c,h,m){var x=0;if(c=r,typeof r=="function")zc(r)&&(x=1);else if(typeof r=="string")x=rw(r,a,G.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case se:return r=ln(31,a,s,h),r.elementType=se,r.lanes=m,r;case S:return Ni(a.children,h,m,s);case M:x=8,h|=24;break;case C:return r=ln(12,a,s,h|2),r.elementType=C,r.lanes=m,r;case I:return r=ln(13,a,s,h),r.elementType=I,r.lanes=m,r;case R:return r=ln(19,a,s,h),r.elementType=R,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case _:case U:x=10;break e;case $:x=9;break e;case J:x=11;break e;case H:x=14;break e;case te:x=16,c=null;break e}x=29,a=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=ln(x,a,s,h),s.elementType=r,s.type=c,s.lanes=m,s}function Ni(r,s,a,c){return r=ln(7,r,c,s),r.lanes=a,r}function _c(r,s,a){return r=ln(6,r,null,s),r.lanes=a,r}function Bc(r,s,a){return s=ln(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var As=[],Os=0,fa=null,da=0,wn=[],Tn=0,Ri=null,ur=1,cr="";function Di(r,s){As[Os++]=da,As[Os++]=fa,fa=r,da=s}function tm(r,s,a){wn[Tn++]=ur,wn[Tn++]=cr,wn[Tn++]=Ri,Ri=r;var c=ur;r=cr;var h=32-Mt(c)-1;c&=~(1<<h),a+=1;var m=32-Mt(s)+h;if(30<m){var x=h-h%5;m=(c&(1<<x)-1).toString(32),c>>=x,h-=x,ur=1<<32-Mt(s)+h|a<<h|c,cr=m+r}else ur=1<<m|a<<h|c,cr=r}function jc(r){r.return!==null&&(Di(r,1),tm(r,1,0))}function Lc(r){for(;r===fa;)fa=As[--Os],As[Os]=null,da=As[--Os],As[Os]=null;for(;r===Ri;)Ri=wn[--Tn],wn[Tn]=null,cr=wn[--Tn],wn[Tn]=null,ur=wn[--Tn],wn[Tn]=null}var $t=null,Je=null,je=!1,zi=null,Qn=!1,qc=Error(i(519));function _i(r){var s=Error(i(418,""));throw _o(xn(s,r)),qc}function nm(r){var s=r.stateNode,a=r.type,c=r.memoizedProps;switch(s[tt]=r,s[Fe]=c,a){case"dialog":Ee("cancel",s),Ee("close",s);break;case"iframe":case"object":case"embed":Ee("load",s);break;case"video":case"audio":for(a=0;a<il.length;a++)Ee(il[a],s);break;case"source":Ee("error",s);break;case"img":case"image":case"link":Ee("error",s),Ee("load",s);break;case"details":Ee("toggle",s);break;case"input":Ee("invalid",s),yp(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Zl(s);break;case"select":Ee("invalid",s);break;case"textarea":Ee("invalid",s),vp(s,c.value,c.defaultValue,c.children),Zl(s)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||vy(s.textContent,a)?(c.popover!=null&&(Ee("beforetoggle",s),Ee("toggle",s)),c.onScroll!=null&&Ee("scroll",s),c.onScrollEnd!=null&&Ee("scrollend",s),c.onClick!=null&&(s.onclick=Fa),s=!0):s=!1,s||_i(r)}function rm(r){for($t=r.return;$t;)switch($t.tag){case 5:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:$t=$t.return}}function Do(r){if(r!==$t)return!1;if(!je)return rm(r),je=!0,!1;var s=r.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=r.type,a=!(a!=="form"&&a!=="button")||td(r.type,r.memoizedProps)),a=!a),a&&Je&&_i(r),rm(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(a=r.data,a==="/$"){if(s===0){Je=Ln(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;r=r.nextSibling}Je=null}}else s===27?(s=Je,Fr(r.type)?(r=sd,sd=null,Je=r):Je=s):Je=$t?Ln(r.stateNode.nextSibling):null;return!0}function zo(){Je=$t=null,je=!1}function im(){var r=zi;return r!==null&&(tn===null?tn=r:tn.push.apply(tn,r),zi=null),r}function _o(r){zi===null?zi=[r]:zi.push(r)}var Vc=V(null),Bi=null,fr=null;function Rr(r,s,a){N(Vc,s._currentValue),s._currentValue=a}function dr(r){r._currentValue=Vc.current,Y(Vc)}function Uc(r,s,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===a)break;r=r.return}}function Ic(r,s,a,c){var h=r.child;for(h!==null&&(h.return=r);h!==null;){var m=h.dependencies;if(m!==null){var x=h.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=h;for(var k=0;k<s.length;k++)if(w.context===s[k]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Uc(m.return,a,r),c||(x=null);break e}m=w.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(i(341));x.lanes|=a,m=x.alternate,m!==null&&(m.lanes|=a),Uc(x,a,r),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===r){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function Bo(r,s,a,c){r=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var w=h.type;on(h.pendingProps.value,x.value)||(r!==null?r.push(w):r=[w])}}else if(h===Ae.current){if(x=h.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(r!==null?r.push(cl):r=[cl])}h=h.return}r!==null&&Ic(s,r,a,c),s.flags|=262144}function ha(r){for(r=r.firstContext;r!==null;){if(!on(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ji(r){Bi=r,fr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function zt(r){return sm(Bi,r)}function pa(r,s){return Bi===null&&ji(r),sm(r,s)}function sm(r,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},fr===null){if(r===null)throw Error(i(308));fr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else fr=fr.next=s;return a}var nS=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(a,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(a){return a()})}},rS=n.unstable_scheduleCallback,iS=n.unstable_NormalPriority,ft={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hc(){return{controller:new nS,data:new Map,refCount:0}}function jo(r){r.refCount--,r.refCount===0&&rS(iS,function(){r.controller.abort()})}var Lo=null,$c=0,Ns=0,Rs=null;function sS(r,s){if(Lo===null){var a=Lo=[];$c=0,Ns=Ff(),Rs={status:"pending",value:void 0,then:function(c){a.push(c)}}}return $c++,s.then(om,om),s}function om(){if(--$c===0&&Lo!==null){Rs!==null&&(Rs.status="fulfilled");var r=Lo;Lo=null,Ns=0,Rs=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function oS(r,s){var a=[],c={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(c.status="rejected",c.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),c}var lm=O.S;O.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&sS(r,s),lm!==null&&lm(r,s)};var Li=V(null);function Pc(){var r=Li.current;return r!==null?r:Ge.pooledCache}function ma(r,s){s===null?N(Li,Li.current):N(Li,s.pool)}function am(){var r=Pc();return r===null?null:{parent:ft._currentValue,pool:r}}var qo=Error(i(460)),um=Error(i(474)),ga=Error(i(542)),Qc={then:function(){}};function cm(r){return r=r.status,r==="fulfilled"||r==="rejected"}function ya(){}function fm(r,s,a){switch(a=r[a],a===void 0?r.push(s):a!==s&&(s.then(ya,ya),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,hm(r),r;default:if(typeof s.status=="string")s.then(ya,ya);else{if(r=Ge,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=c}},function(c){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,hm(r),r}throw Vo=s,qo}}var Vo=null;function dm(){if(Vo===null)throw Error(i(459));var r=Vo;return Vo=null,r}function hm(r){if(r===qo||r===ga)throw Error(i(483))}var Dr=!1;function Fc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gc(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function zr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function _r(r,s,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(qe&2)!==0){var h=c.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),c.pending=s,s=ua(r),Wp(r,null,a),s}return aa(r,c,s,a),ua(r)}function Uo(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,We(r,a)}}function Yc(r,s){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?h=m=s:m=m.next=s}else h=m=s;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}var Kc=!1;function Io(){if(Kc){var r=Rs;if(r!==null)throw r}}function Ho(r,s,a,c){Kc=!1;var h=r.updateQueue;Dr=!1;var m=h.firstBaseUpdate,x=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var k=w,B=k.next;k.next=null,x===null?m=B:x.next=B,x=k;var P=r.alternate;P!==null&&(P=P.updateQueue,w=P.lastBaseUpdate,w!==x&&(w===null?P.firstBaseUpdate=B:w.next=B,P.lastBaseUpdate=k))}if(m!==null){var F=h.baseState;x=0,P=B=k=null,w=m;do{var j=w.lane&-536870913,L=j!==w.lane;if(L?(Ne&j)===j:(c&j)===j){j!==0&&j===Ns&&(Kc=!0),P!==null&&(P=P.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var be=r,pe=w;j=s;var He=a;switch(pe.tag){case 1:if(be=pe.payload,typeof be=="function"){F=be.call(He,F,j);break e}F=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=pe.payload,j=typeof be=="function"?be.call(He,F,j):be,j==null)break e;F=g({},F,j);break e;case 2:Dr=!0}}j=w.callback,j!==null&&(r.flags|=64,L&&(r.flags|=8192),L=h.callbacks,L===null?h.callbacks=[j]:L.push(j))}else L={lane:j,tag:w.tag,payload:w.payload,callback:w.callback,next:null},P===null?(B=P=L,k=F):P=P.next=L,x|=j;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;L=w,w=L.next,L.next=null,h.lastBaseUpdate=L,h.shared.pending=null}}while(!0);P===null&&(k=F),h.baseState=k,h.firstBaseUpdate=B,h.lastBaseUpdate=P,m===null&&(h.shared.lanes=0),Hr|=x,r.lanes=x,r.memoizedState=F}}function pm(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function mm(r,s){var a=r.callbacks;if(a!==null)for(r.callbacks=null,r=0;r<a.length;r++)pm(a[r],s)}var Ds=V(null),ba=V(0);function gm(r,s){r=vr,N(ba,r),N(Ds,s),vr=r|s.baseLanes}function Jc(){N(ba,vr),N(Ds,Ds.current)}function Xc(){vr=ba.current,Y(Ds),Y(ba)}var Br=0,Te=null,Ue=null,st=null,va=!1,zs=!1,qi=!1,xa=0,$o=0,_s=null,lS=0;function nt(){throw Error(i(321))}function Zc(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!on(r[a],s[a]))return!1;return!0}function Wc(r,s,a,c,h,m){return Br=m,Te=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,O.H=r===null||r.memoizedState===null?Wm:eg,qi=!1,m=a(c,h),qi=!1,zs&&(m=bm(s,a,c,h)),ym(r),m}function ym(r){O.H=ka;var s=Ue!==null&&Ue.next!==null;if(Br=0,st=Ue=Te=null,va=!1,$o=0,_s=null,s)throw Error(i(300));r===null||gt||(r=r.dependencies,r!==null&&ha(r)&&(gt=!0))}function bm(r,s,a,c){Te=r;var h=0;do{if(zs&&(_s=null),$o=0,zs=!1,25<=h)throw Error(i(301));if(h+=1,st=Ue=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}O.H=pS,m=s(a,c)}while(zs);return m}function aS(){var r=O.H,s=r.useState()[0];return s=typeof s.then=="function"?Po(s):s,r=r.useState()[0],(Ue!==null?Ue.memoizedState:null)!==r&&(Te.flags|=1024),s}function ef(){var r=xa!==0;return xa=0,r}function tf(r,s,a){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~a}function nf(r){if(va){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}va=!1}Br=0,st=Ue=Te=null,zs=!1,$o=xa=0,_s=null}function Wt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Te.memoizedState=st=r:st=st.next=r,st}function ot(){if(Ue===null){var r=Te.alternate;r=r!==null?r.memoizedState:null}else r=Ue.next;var s=st===null?Te.memoizedState:st.next;if(s!==null)st=s,Ue=r;else{if(r===null)throw Te.alternate===null?Error(i(467)):Error(i(310));Ue=r,r={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},st===null?Te.memoizedState=st=r:st=st.next=r}return st}function rf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Po(r){var s=$o;return $o+=1,_s===null&&(_s=[]),r=fm(_s,r,s),s=Te,(st===null?s.memoizedState:st.next)===null&&(s=s.alternate,O.H=s===null||s.memoizedState===null?Wm:eg),r}function Sa(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Po(r);if(r.$$typeof===U)return zt(r)}throw Error(i(438,String(r)))}function sf(r){var s=null,a=Te.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=Te.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=rf(),Te.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(r),c=0;c<r;c++)a[c]=ze;return s.index++,a}function hr(r,s){return typeof s=="function"?s(r):s}function wa(r){var s=ot();return of(s,Ue,r)}function of(r,s,a){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var h=r.baseQueue,m=c.pending;if(m!==null){if(h!==null){var x=h.next;h.next=m.next,m.next=x}s.baseQueue=h=m,c.pending=null}if(m=r.baseState,h===null)r.memoizedState=m;else{s=h.next;var w=x=null,k=null,B=s,P=!1;do{var F=B.lane&-536870913;if(F!==B.lane?(Ne&F)===F:(Br&F)===F){var j=B.revertLane;if(j===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),F===Ns&&(P=!0);else if((Br&j)===j){B=B.next,j===Ns&&(P=!0);continue}else F={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},k===null?(w=k=F,x=m):k=k.next=F,Te.lanes|=j,Hr|=j;F=B.action,qi&&a(m,F),m=B.hasEagerState?B.eagerState:a(m,F)}else j={lane:F,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},k===null?(w=k=j,x=m):k=k.next=j,Te.lanes|=F,Hr|=F;B=B.next}while(B!==null&&B!==s);if(k===null?x=m:k.next=w,!on(m,r.memoizedState)&&(gt=!0,P&&(a=Rs,a!==null)))throw a;r.memoizedState=m,r.baseState=x,r.baseQueue=k,c.lastRenderedState=m}return h===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function lf(r){var s=ot(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=r;var c=a.dispatch,h=a.pending,m=s.memoizedState;if(h!==null){a.pending=null;var x=h=h.next;do m=r(m,x.action),x=x.next;while(x!==h);on(m,s.memoizedState)||(gt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,c]}function vm(r,s,a){var c=Te,h=ot(),m=je;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=s();var x=!on((Ue||h).memoizedState,a);x&&(h.memoizedState=a,gt=!0),h=h.queue;var w=wm.bind(null,c,h,r);if(Qo(2048,8,w,[r]),h.getSnapshot!==s||x||st!==null&&st.memoizedState.tag&1){if(c.flags|=2048,Bs(9,Ta(),Sm.bind(null,c,h,a,s),null),Ge===null)throw Error(i(349));m||(Br&124)!==0||xm(c,s,a)}return a}function xm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=Te.updateQueue,s===null?(s=rf(),Te.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Sm(r,s,a,c){s.value=a,s.getSnapshot=c,Tm(s)&&Mm(r)}function wm(r,s,a){return a(function(){Tm(s)&&Mm(r)})}function Tm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!on(r,a)}catch{return!0}}function Mm(r){var s=ks(r,2);s!==null&&dn(s,r,2)}function af(r){var s=Wt();if(typeof r=="function"){var a=r;if(r=a(),qi){zn(!0);try{a()}finally{zn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:r},s}function Cm(r,s,a,c){return r.baseState=a,of(r,Ue,typeof c=="function"?c:hr)}function uS(r,s,a,c,h){if(Ca(r))throw Error(i(485));if(r=s.action,r!==null){var m={payload:h,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};O.T!==null?a(!0):m.isTransition=!1,c(m),a=s.pending,a===null?(m.next=s.pending=m,km(s,m)):(m.next=a.next,s.pending=a.next=m)}}function km(r,s){var a=s.action,c=s.payload,h=r.state;if(s.isTransition){var m=O.T,x={};O.T=x;try{var w=a(h,c),k=O.S;k!==null&&k(x,w),Em(r,s,w)}catch(B){uf(r,s,B)}finally{O.T=m}}else try{m=a(h,c),Em(r,s,m)}catch(B){uf(r,s,B)}}function Em(r,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Am(r,s,c)},function(c){return uf(r,s,c)}):Am(r,s,a)}function Am(r,s,a){s.status="fulfilled",s.value=a,Om(s),r.state=a,s=r.pending,s!==null&&(a=s.next,a===s?r.pending=null:(a=a.next,s.next=a,km(r,a)))}function uf(r,s,a){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,Om(s),s=s.next;while(s!==c)}r.action=null}function Om(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Nm(r,s){return s}function Rm(r,s){if(je){var a=Ge.formState;if(a!==null){e:{var c=Te;if(je){if(Je){t:{for(var h=Je,m=Qn;h.nodeType!==8;){if(!m){h=null;break t}if(h=Ln(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){Je=Ln(h.nextSibling),c=h.data==="F!";break e}}_i(c)}c=!1}c&&(s=a[0])}}return a=Wt(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nm,lastRenderedState:s},a.queue=c,a=Jm.bind(null,Te,c),c.dispatch=a,c=af(!1),m=pf.bind(null,Te,!1,c.queue),c=Wt(),h={state:s,dispatch:null,action:r,pending:null},c.queue=h,a=uS.bind(null,Te,h,m,a),h.dispatch=a,c.memoizedState=r,[s,a,!1]}function Dm(r){var s=ot();return zm(s,Ue,r)}function zm(r,s,a){if(s=of(r,s,Nm)[0],r=wa(hr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Po(s)}catch(x){throw x===qo?ga:x}else c=s;s=ot();var h=s.queue,m=h.dispatch;return a!==s.memoizedState&&(Te.flags|=2048,Bs(9,Ta(),cS.bind(null,h,a),null)),[c,m,r]}function cS(r,s){r.action=s}function _m(r){var s=ot(),a=Ue;if(a!==null)return zm(s,a,r);ot(),s=s.memoizedState,a=ot();var c=a.queue.dispatch;return a.memoizedState=r,[s,c,!1]}function Bs(r,s,a,c){return r={tag:r,create:a,deps:c,inst:s,next:null},s=Te.updateQueue,s===null&&(s=rf(),Te.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,s.lastEffect=r),r}function Ta(){return{destroy:void 0,resource:void 0}}function Bm(){return ot().memoizedState}function Ma(r,s,a,c){var h=Wt();c=c===void 0?null:c,Te.flags|=r,h.memoizedState=Bs(1|s,Ta(),a,c)}function Qo(r,s,a,c){var h=ot();c=c===void 0?null:c;var m=h.memoizedState.inst;Ue!==null&&c!==null&&Zc(c,Ue.memoizedState.deps)?h.memoizedState=Bs(s,m,a,c):(Te.flags|=r,h.memoizedState=Bs(1|s,m,a,c))}function jm(r,s){Ma(8390656,8,r,s)}function Lm(r,s){Qo(2048,8,r,s)}function qm(r,s){return Qo(4,2,r,s)}function Vm(r,s){return Qo(4,4,r,s)}function Um(r,s){if(typeof s=="function"){r=r();var a=s(r);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Im(r,s,a){a=a!=null?a.concat([r]):null,Qo(4,4,Um.bind(null,s,r),a)}function cf(){}function Hm(r,s){var a=ot();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&Zc(s,c[1])?c[0]:(a.memoizedState=[r,s],r)}function $m(r,s){var a=ot();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&Zc(s,c[1]))return c[0];if(c=r(),qi){zn(!0);try{r()}finally{zn(!1)}}return a.memoizedState=[c,s],c}function ff(r,s,a){return a===void 0||(Br&1073741824)!==0?r.memoizedState=s:(r.memoizedState=a,r=Fg(),Te.lanes|=r,Hr|=r,a)}function Pm(r,s,a,c){return on(a,s)?a:Ds.current!==null?(r=ff(r,a,c),on(r,s)||(gt=!0),r):(Br&42)===0?(gt=!0,r.memoizedState=a):(r=Fg(),Te.lanes|=r,Hr|=r,s)}function Qm(r,s,a,c,h){var m=X.p;X.p=m!==0&&8>m?m:8;var x=O.T,w={};O.T=w,pf(r,!1,s,a);try{var k=h(),B=O.S;if(B!==null&&B(w,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var P=oS(k,c);Fo(r,s,P,fn(r))}else Fo(r,s,c,fn(r))}catch(F){Fo(r,s,{then:function(){},status:"rejected",reason:F},fn())}finally{X.p=m,O.T=x}}function fS(){}function df(r,s,a,c){if(r.tag!==5)throw Error(i(476));var h=Fm(r).queue;Qm(r,h,s,W,a===null?fS:function(){return Gm(r),a(c)})}function Fm(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:W},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:a},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Gm(r){var s=Fm(r).next.queue;Fo(r,s,{},fn())}function hf(){return zt(cl)}function Ym(){return ot().memoizedState}function Km(){return ot().memoizedState}function dS(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var a=fn();r=zr(a);var c=_r(s,r,a);c!==null&&(dn(c,s,a),Uo(c,s,a)),s={cache:Hc()},r.payload=s;return}s=s.return}}function hS(r,s,a){var c=fn();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ca(r)?Xm(s,a):(a=Dc(r,s,a,c),a!==null&&(dn(a,r,c),Zm(a,s,c)))}function Jm(r,s,a){var c=fn();Fo(r,s,a,c)}function Fo(r,s,a,c){var h={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ca(r))Xm(s,h);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var x=s.lastRenderedState,w=m(x,a);if(h.hasEagerState=!0,h.eagerState=w,on(w,x))return aa(r,s,h,0),Ge===null&&la(),!1}catch{}finally{}if(a=Dc(r,s,h,c),a!==null)return dn(a,r,c),Zm(a,s,c),!0}return!1}function pf(r,s,a,c){if(c={lane:2,revertLane:Ff(),action:c,hasEagerState:!1,eagerState:null,next:null},Ca(r)){if(s)throw Error(i(479))}else s=Dc(r,a,c,2),s!==null&&dn(s,r,2)}function Ca(r){var s=r.alternate;return r===Te||s!==null&&s===Te}function Xm(r,s){zs=va=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function Zm(r,s,a){if((a&4194048)!==0){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,We(r,a)}}var ka={readContext:zt,use:Sa,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useLayoutEffect:nt,useInsertionEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useSyncExternalStore:nt,useId:nt,useHostTransitionStatus:nt,useFormState:nt,useActionState:nt,useOptimistic:nt,useMemoCache:nt,useCacheRefresh:nt},Wm={readContext:zt,use:Sa,useCallback:function(r,s){return Wt().memoizedState=[r,s===void 0?null:s],r},useContext:zt,useEffect:jm,useImperativeHandle:function(r,s,a){a=a!=null?a.concat([r]):null,Ma(4194308,4,Um.bind(null,s,r),a)},useLayoutEffect:function(r,s){return Ma(4194308,4,r,s)},useInsertionEffect:function(r,s){Ma(4,2,r,s)},useMemo:function(r,s){var a=Wt();s=s===void 0?null:s;var c=r();if(qi){zn(!0);try{r()}finally{zn(!1)}}return a.memoizedState=[c,s],c},useReducer:function(r,s,a){var c=Wt();if(a!==void 0){var h=a(s);if(qi){zn(!0);try{a(s)}finally{zn(!1)}}}else h=s;return c.memoizedState=c.baseState=h,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:h},c.queue=r,r=r.dispatch=hS.bind(null,Te,r),[c.memoizedState,r]},useRef:function(r){var s=Wt();return r={current:r},s.memoizedState=r},useState:function(r){r=af(r);var s=r.queue,a=Jm.bind(null,Te,s);return s.dispatch=a,[r.memoizedState,a]},useDebugValue:cf,useDeferredValue:function(r,s){var a=Wt();return ff(a,r,s)},useTransition:function(){var r=af(!1);return r=Qm.bind(null,Te,r.queue,!0,!1),Wt().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,a){var c=Te,h=Wt();if(je){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),Ge===null)throw Error(i(349));(Ne&124)!==0||xm(c,s,a)}h.memoizedState=a;var m={value:a,getSnapshot:s};return h.queue=m,jm(wm.bind(null,c,m,r),[r]),c.flags|=2048,Bs(9,Ta(),Sm.bind(null,c,m,a,s),null),a},useId:function(){var r=Wt(),s=Ge.identifierPrefix;if(je){var a=cr,c=ur;a=(c&~(1<<32-Mt(c)-1)).toString(32)+a,s=""+s+"R"+a,a=xa++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=lS++,s=""+s+"r"+a.toString(32)+"";return r.memoizedState=s},useHostTransitionStatus:hf,useFormState:Rm,useActionState:Rm,useOptimistic:function(r){var s=Wt();s.memoizedState=s.baseState=r;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=pf.bind(null,Te,!0,a),a.dispatch=s,[r,s]},useMemoCache:sf,useCacheRefresh:function(){return Wt().memoizedState=dS.bind(null,Te)}},eg={readContext:zt,use:Sa,useCallback:Hm,useContext:zt,useEffect:Lm,useImperativeHandle:Im,useInsertionEffect:qm,useLayoutEffect:Vm,useMemo:$m,useReducer:wa,useRef:Bm,useState:function(){return wa(hr)},useDebugValue:cf,useDeferredValue:function(r,s){var a=ot();return Pm(a,Ue.memoizedState,r,s)},useTransition:function(){var r=wa(hr)[0],s=ot().memoizedState;return[typeof r=="boolean"?r:Po(r),s]},useSyncExternalStore:vm,useId:Ym,useHostTransitionStatus:hf,useFormState:Dm,useActionState:Dm,useOptimistic:function(r,s){var a=ot();return Cm(a,Ue,r,s)},useMemoCache:sf,useCacheRefresh:Km},pS={readContext:zt,use:Sa,useCallback:Hm,useContext:zt,useEffect:Lm,useImperativeHandle:Im,useInsertionEffect:qm,useLayoutEffect:Vm,useMemo:$m,useReducer:lf,useRef:Bm,useState:function(){return lf(hr)},useDebugValue:cf,useDeferredValue:function(r,s){var a=ot();return Ue===null?ff(a,r,s):Pm(a,Ue.memoizedState,r,s)},useTransition:function(){var r=lf(hr)[0],s=ot().memoizedState;return[typeof r=="boolean"?r:Po(r),s]},useSyncExternalStore:vm,useId:Ym,useHostTransitionStatus:hf,useFormState:_m,useActionState:_m,useOptimistic:function(r,s){var a=ot();return Ue!==null?Cm(a,Ue,r,s):(a.baseState=r,[r,a.queue.dispatch])},useMemoCache:sf,useCacheRefresh:Km},js=null,Go=0;function Ea(r){var s=Go;return Go+=1,js===null&&(js=[]),fm(js,r,s)}function Yo(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Aa(r,s){throw s.$$typeof===y?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function tg(r){var s=r._init;return s(r._payload)}function ng(r){function s(D,A){if(r){var z=D.deletions;z===null?(D.deletions=[A],D.flags|=16):z.push(A)}}function a(D,A){if(!r)return null;for(;A!==null;)s(D,A),A=A.sibling;return null}function c(D){for(var A=new Map;D!==null;)D.key!==null?A.set(D.key,D):A.set(D.index,D),D=D.sibling;return A}function h(D,A){return D=ar(D,A),D.index=0,D.sibling=null,D}function m(D,A,z){return D.index=z,r?(z=D.alternate,z!==null?(z=z.index,z<A?(D.flags|=67108866,A):z):(D.flags|=67108866,A)):(D.flags|=1048576,A)}function x(D){return r&&D.alternate===null&&(D.flags|=67108866),D}function w(D,A,z,Q){return A===null||A.tag!==6?(A=_c(z,D.mode,Q),A.return=D,A):(A=h(A,z),A.return=D,A)}function k(D,A,z,Q){var oe=z.type;return oe===S?P(D,A,z.props.children,Q,z.key):A!==null&&(A.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===te&&tg(oe)===A.type)?(A=h(A,z.props),Yo(A,z),A.return=D,A):(A=ca(z.type,z.key,z.props,null,D.mode,Q),Yo(A,z),A.return=D,A)}function B(D,A,z,Q){return A===null||A.tag!==4||A.stateNode.containerInfo!==z.containerInfo||A.stateNode.implementation!==z.implementation?(A=Bc(z,D.mode,Q),A.return=D,A):(A=h(A,z.children||[]),A.return=D,A)}function P(D,A,z,Q,oe){return A===null||A.tag!==7?(A=Ni(z,D.mode,Q,oe),A.return=D,A):(A=h(A,z),A.return=D,A)}function F(D,A,z){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=_c(""+A,D.mode,z),A.return=D,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case b:return z=ca(A.type,A.key,A.props,null,D.mode,z),Yo(z,A),z.return=D,z;case v:return A=Bc(A,D.mode,z),A.return=D,A;case te:var Q=A._init;return A=Q(A._payload),F(D,A,z)}if(ne(A)||Re(A))return A=Ni(A,D.mode,z,null),A.return=D,A;if(typeof A.then=="function")return F(D,Ea(A),z);if(A.$$typeof===U)return F(D,pa(D,A),z);Aa(D,A)}return null}function j(D,A,z,Q){var oe=A!==null?A.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return oe!==null?null:w(D,A,""+z,Q);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case b:return z.key===oe?k(D,A,z,Q):null;case v:return z.key===oe?B(D,A,z,Q):null;case te:return oe=z._init,z=oe(z._payload),j(D,A,z,Q)}if(ne(z)||Re(z))return oe!==null?null:P(D,A,z,Q,null);if(typeof z.then=="function")return j(D,A,Ea(z),Q);if(z.$$typeof===U)return j(D,A,pa(D,z),Q);Aa(D,z)}return null}function L(D,A,z,Q,oe){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return D=D.get(z)||null,w(A,D,""+Q,oe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return D=D.get(Q.key===null?z:Q.key)||null,k(A,D,Q,oe);case v:return D=D.get(Q.key===null?z:Q.key)||null,B(A,D,Q,oe);case te:var Ce=Q._init;return Q=Ce(Q._payload),L(D,A,z,Q,oe)}if(ne(Q)||Re(Q))return D=D.get(z)||null,P(A,D,Q,oe,null);if(typeof Q.then=="function")return L(D,A,z,Ea(Q),oe);if(Q.$$typeof===U)return L(D,A,z,pa(A,Q),oe);Aa(A,Q)}return null}function be(D,A,z,Q){for(var oe=null,Ce=null,fe=A,me=A=0,bt=null;fe!==null&&me<z.length;me++){fe.index>me?(bt=fe,fe=null):bt=fe.sibling;var Be=j(D,fe,z[me],Q);if(Be===null){fe===null&&(fe=bt);break}r&&fe&&Be.alternate===null&&s(D,fe),A=m(Be,A,me),Ce===null?oe=Be:Ce.sibling=Be,Ce=Be,fe=bt}if(me===z.length)return a(D,fe),je&&Di(D,me),oe;if(fe===null){for(;me<z.length;me++)fe=F(D,z[me],Q),fe!==null&&(A=m(fe,A,me),Ce===null?oe=fe:Ce.sibling=fe,Ce=fe);return je&&Di(D,me),oe}for(fe=c(fe);me<z.length;me++)bt=L(fe,D,me,z[me],Q),bt!==null&&(r&&bt.alternate!==null&&fe.delete(bt.key===null?me:bt.key),A=m(bt,A,me),Ce===null?oe=bt:Ce.sibling=bt,Ce=bt);return r&&fe.forEach(function(Xr){return s(D,Xr)}),je&&Di(D,me),oe}function pe(D,A,z,Q){if(z==null)throw Error(i(151));for(var oe=null,Ce=null,fe=A,me=A=0,bt=null,Be=z.next();fe!==null&&!Be.done;me++,Be=z.next()){fe.index>me?(bt=fe,fe=null):bt=fe.sibling;var Xr=j(D,fe,Be.value,Q);if(Xr===null){fe===null&&(fe=bt);break}r&&fe&&Xr.alternate===null&&s(D,fe),A=m(Xr,A,me),Ce===null?oe=Xr:Ce.sibling=Xr,Ce=Xr,fe=bt}if(Be.done)return a(D,fe),je&&Di(D,me),oe;if(fe===null){for(;!Be.done;me++,Be=z.next())Be=F(D,Be.value,Q),Be!==null&&(A=m(Be,A,me),Ce===null?oe=Be:Ce.sibling=Be,Ce=Be);return je&&Di(D,me),oe}for(fe=c(fe);!Be.done;me++,Be=z.next())Be=L(fe,D,me,Be.value,Q),Be!==null&&(r&&Be.alternate!==null&&fe.delete(Be.key===null?me:Be.key),A=m(Be,A,me),Ce===null?oe=Be:Ce.sibling=Be,Ce=Be);return r&&fe.forEach(function(mw){return s(D,mw)}),je&&Di(D,me),oe}function He(D,A,z,Q){if(typeof z=="object"&&z!==null&&z.type===S&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case b:e:{for(var oe=z.key;A!==null;){if(A.key===oe){if(oe=z.type,oe===S){if(A.tag===7){a(D,A.sibling),Q=h(A,z.props.children),Q.return=D,D=Q;break e}}else if(A.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===te&&tg(oe)===A.type){a(D,A.sibling),Q=h(A,z.props),Yo(Q,z),Q.return=D,D=Q;break e}a(D,A);break}else s(D,A);A=A.sibling}z.type===S?(Q=Ni(z.props.children,D.mode,Q,z.key),Q.return=D,D=Q):(Q=ca(z.type,z.key,z.props,null,D.mode,Q),Yo(Q,z),Q.return=D,D=Q)}return x(D);case v:e:{for(oe=z.key;A!==null;){if(A.key===oe)if(A.tag===4&&A.stateNode.containerInfo===z.containerInfo&&A.stateNode.implementation===z.implementation){a(D,A.sibling),Q=h(A,z.children||[]),Q.return=D,D=Q;break e}else{a(D,A);break}else s(D,A);A=A.sibling}Q=Bc(z,D.mode,Q),Q.return=D,D=Q}return x(D);case te:return oe=z._init,z=oe(z._payload),He(D,A,z,Q)}if(ne(z))return be(D,A,z,Q);if(Re(z)){if(oe=Re(z),typeof oe!="function")throw Error(i(150));return z=oe.call(z),pe(D,A,z,Q)}if(typeof z.then=="function")return He(D,A,Ea(z),Q);if(z.$$typeof===U)return He(D,A,pa(D,z),Q);Aa(D,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,A!==null&&A.tag===6?(a(D,A.sibling),Q=h(A,z),Q.return=D,D=Q):(a(D,A),Q=_c(z,D.mode,Q),Q.return=D,D=Q),x(D)):a(D,A)}return function(D,A,z,Q){try{Go=0;var oe=He(D,A,z,Q);return js=null,oe}catch(fe){if(fe===qo||fe===ga)throw fe;var Ce=ln(29,fe,null,D.mode);return Ce.lanes=Q,Ce.return=D,Ce}finally{}}}var Ls=ng(!0),rg=ng(!1),Mn=V(null),Fn=null;function jr(r){var s=r.alternate;N(dt,dt.current&1),N(Mn,r),Fn===null&&(s===null||Ds.current!==null||s.memoizedState!==null)&&(Fn=r)}function ig(r){if(r.tag===22){if(N(dt,dt.current),N(Mn,r),Fn===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Fn=r)}}else Lr()}function Lr(){N(dt,dt.current),N(Mn,Mn.current)}function pr(r){Y(Mn),Fn===r&&(Fn=null),Y(dt)}var dt=V(0);function Oa(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||id(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function mf(r,s,a,c){s=r.memoizedState,a=a(c,s),a=a==null?s:g({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var gf={enqueueSetState:function(r,s,a){r=r._reactInternals;var c=fn(),h=zr(c);h.payload=s,a!=null&&(h.callback=a),s=_r(r,h,c),s!==null&&(dn(s,r,c),Uo(s,r,c))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var c=fn(),h=zr(c);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=_r(r,h,c),s!==null&&(dn(s,r,c),Uo(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=fn(),c=zr(a);c.tag=2,s!=null&&(c.callback=s),s=_r(r,c,a),s!==null&&(dn(s,r,a),Uo(s,r,a))}};function sg(r,s,a,c,h,m,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,m,x):s.prototype&&s.prototype.isPureReactComponent?!No(a,c)||!No(h,m):!0}function og(r,s,a,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==r&&gf.enqueueReplaceState(s,s.state,null)}function Vi(r,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(r=r.defaultProps){a===s&&(a=g({},a));for(var h in r)a[h]===void 0&&(a[h]=r[h])}return a}var Na=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function lg(r){Na(r)}function ag(r){console.error(r)}function ug(r){Na(r)}function Ra(r,s){try{var a=r.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function cg(r,s,a){try{var c=r.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function yf(r,s,a){return a=zr(a),a.tag=3,a.payload={element:null},a.callback=function(){Ra(r,s)},a}function fg(r){return r=zr(r),r.tag=3,r}function dg(r,s,a,c){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=c.value;r.payload=function(){return h(m)},r.callback=function(){cg(s,a,c)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){cg(s,a,c),typeof h!="function"&&($r===null?$r=new Set([this]):$r.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function mS(r,s,a,c,h){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&Bo(s,a,h,!0),a=Mn.current,a!==null){switch(a.tag){case 13:return Fn===null?If():a.alternate===null&&Xe===0&&(Xe=3),a.flags&=-257,a.flags|=65536,a.lanes=h,c===Qc?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),$f(r,c,h)),!1;case 22:return a.flags|=65536,c===Qc?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),$f(r,c,h)),!1}throw Error(i(435,a.tag))}return $f(r,c,h),If(),!1}if(je)return s=Mn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,c!==qc&&(r=Error(i(422),{cause:c}),_o(xn(r,a)))):(c!==qc&&(s=Error(i(423),{cause:c}),_o(xn(s,a))),r=r.current.alternate,r.flags|=65536,h&=-h,r.lanes|=h,c=xn(c,a),h=yf(r.stateNode,c,h),Yc(r,h),Xe!==4&&(Xe=2)),!1;var m=Error(i(520),{cause:c});if(m=xn(m,a),tl===null?tl=[m]:tl.push(m),Xe!==4&&(Xe=2),s===null)return!0;c=xn(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,r=h&-h,a.lanes|=r,r=yf(a.stateNode,c,r),Yc(a,r),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&($r===null||!$r.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=fg(h),dg(h,r,a,c),Yc(a,h),!1}a=a.return}while(a!==null);return!1}var hg=Error(i(461)),gt=!1;function kt(r,s,a,c){s.child=r===null?rg(s,null,a,c):Ls(s,r.child,a,c)}function pg(r,s,a,c,h){a=a.render;var m=s.ref;if("ref"in c){var x={};for(var w in c)w!=="ref"&&(x[w]=c[w])}else x=c;return ji(s),c=Wc(r,s,a,x,m,h),w=ef(),r!==null&&!gt?(tf(r,s,h),mr(r,s,h)):(je&&w&&jc(s),s.flags|=1,kt(r,s,c,h),s.child)}function mg(r,s,a,c,h){if(r===null){var m=a.type;return typeof m=="function"&&!zc(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,gg(r,s,m,c,h)):(r=ca(a.type,null,c,s,s.mode,h),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,!Cf(r,h)){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:No,a(x,c)&&r.ref===s.ref)return mr(r,s,h)}return s.flags|=1,r=ar(m,c),r.ref=s.ref,r.return=s,s.child=r}function gg(r,s,a,c,h){if(r!==null){var m=r.memoizedProps;if(No(m,c)&&r.ref===s.ref)if(gt=!1,s.pendingProps=c=m,Cf(r,h))(r.flags&131072)!==0&&(gt=!0);else return s.lanes=r.lanes,mr(r,s,h)}return bf(r,s,a,c,h)}function yg(r,s,a){var c=s.pendingProps,h=c.children,m=r!==null?r.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=m!==null?m.baseLanes|a:a,r!==null){for(h=s.child=r.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;s.childLanes=m&~c}else s.childLanes=0,s.child=null;return bg(r,s,c,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&ma(s,m!==null?m.cachePool:null),m!==null?gm(s,m):Jc(),ig(s);else return s.lanes=s.childLanes=536870912,bg(r,s,m!==null?m.baseLanes|a:a,a)}else m!==null?(ma(s,m.cachePool),gm(s,m),Lr(),s.memoizedState=null):(r!==null&&ma(s,null),Jc(),Lr());return kt(r,s,h,a),s.child}function bg(r,s,a,c){var h=Pc();return h=h===null?null:{parent:ft._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},r!==null&&ma(s,null),Jc(),ig(s),r!==null&&Bo(r,s,c,!0),null}function Da(r,s){var a=s.ref;if(a===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(r===null||r.ref!==a)&&(s.flags|=4194816)}}function bf(r,s,a,c,h){return ji(s),a=Wc(r,s,a,c,void 0,h),c=ef(),r!==null&&!gt?(tf(r,s,h),mr(r,s,h)):(je&&c&&jc(s),s.flags|=1,kt(r,s,a,h),s.child)}function vg(r,s,a,c,h,m){return ji(s),s.updateQueue=null,a=bm(s,c,a,h),ym(r),c=ef(),r!==null&&!gt?(tf(r,s,m),mr(r,s,m)):(je&&c&&jc(s),s.flags|=1,kt(r,s,a,m),s.child)}function xg(r,s,a,c,h){if(ji(s),s.stateNode===null){var m=Es,x=a.contextType;typeof x=="object"&&x!==null&&(m=zt(x)),m=new a(c,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=gf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=c,m.state=s.memoizedState,m.refs={},Fc(s),x=a.contextType,m.context=typeof x=="object"&&x!==null?zt(x):Es,m.state=s.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(mf(s,a,x,c),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&gf.enqueueReplaceState(m,m.state,null),Ho(s,c,m,h),Io(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){m=s.stateNode;var w=s.memoizedProps,k=Vi(a,w);m.props=k;var B=m.context,P=a.contextType;x=Es,typeof P=="object"&&P!==null&&(x=zt(P));var F=a.getDerivedStateFromProps;P=typeof F=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,P||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||B!==x)&&og(s,m,c,x),Dr=!1;var j=s.memoizedState;m.state=j,Ho(s,c,m,h),Io(),B=s.memoizedState,w||j!==B||Dr?(typeof F=="function"&&(mf(s,a,F,c),B=s.memoizedState),(k=Dr||sg(s,a,k,c,j,B,x))?(P||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=B),m.props=c,m.state=B,m.context=x,c=k):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{m=s.stateNode,Gc(r,s),x=s.memoizedProps,P=Vi(a,x),m.props=P,F=s.pendingProps,j=m.context,B=a.contextType,k=Es,typeof B=="object"&&B!==null&&(k=zt(B)),w=a.getDerivedStateFromProps,(B=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==F||j!==k)&&og(s,m,c,k),Dr=!1,j=s.memoizedState,m.state=j,Ho(s,c,m,h),Io();var L=s.memoizedState;x!==F||j!==L||Dr||r!==null&&r.dependencies!==null&&ha(r.dependencies)?(typeof w=="function"&&(mf(s,a,w,c),L=s.memoizedState),(P=Dr||sg(s,a,P,c,j,L,k)||r!==null&&r.dependencies!==null&&ha(r.dependencies))?(B||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,L,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,L,k)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===r.memoizedProps&&j===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&j===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=L),m.props=c,m.state=L,m.context=k,c=P):(typeof m.componentDidUpdate!="function"||x===r.memoizedProps&&j===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&j===r.memoizedState||(s.flags|=1024),c=!1)}return m=c,Da(r,s),c=(s.flags&128)!==0,m||c?(m=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,r!==null&&c?(s.child=Ls(s,r.child,null,h),s.child=Ls(s,null,a,h)):kt(r,s,a,h),s.memoizedState=m.state,r=s.child):r=mr(r,s,h),r}function Sg(r,s,a,c){return zo(),s.flags|=256,kt(r,s,a,c),s.child}var vf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xf(r){return{baseLanes:r,cachePool:am()}}function Sf(r,s,a){return r=r!==null?r.childLanes&~a:0,s&&(r|=Cn),r}function wg(r,s,a){var c=s.pendingProps,h=!1,m=(s.flags&128)!==0,x;if((x=m)||(x=r!==null&&r.memoizedState===null?!1:(dt.current&2)!==0),x&&(h=!0,s.flags&=-129),x=(s.flags&32)!==0,s.flags&=-33,r===null){if(je){if(h?jr(s):Lr(),je){var w=Je,k;if(k=w){e:{for(k=w,w=Qn;k.nodeType!==8;){if(!w){w=null;break e}if(k=Ln(k.nextSibling),k===null){w=null;break e}}w=k}w!==null?(s.memoizedState={dehydrated:w,treeContext:Ri!==null?{id:ur,overflow:cr}:null,retryLane:536870912,hydrationErrors:null},k=ln(18,null,null,0),k.stateNode=w,k.return=s,s.child=k,$t=s,Je=null,k=!0):k=!1}k||_i(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return id(w)?s.lanes=32:s.lanes=536870912,null;pr(s)}return w=c.children,c=c.fallback,h?(Lr(),h=s.mode,w=za({mode:"hidden",children:w},h),c=Ni(c,h,a,null),w.return=s,c.return=s,w.sibling=c,s.child=w,h=s.child,h.memoizedState=xf(a),h.childLanes=Sf(r,x,a),s.memoizedState=vf,c):(jr(s),wf(s,w))}if(k=r.memoizedState,k!==null&&(w=k.dehydrated,w!==null)){if(m)s.flags&256?(jr(s),s.flags&=-257,s=Tf(r,s,a)):s.memoizedState!==null?(Lr(),s.child=r.child,s.flags|=128,s=null):(Lr(),h=c.fallback,w=s.mode,c=za({mode:"visible",children:c.children},w),h=Ni(h,w,a,null),h.flags|=2,c.return=s,h.return=s,c.sibling=h,s.child=c,Ls(s,r.child,null,a),c=s.child,c.memoizedState=xf(a),c.childLanes=Sf(r,x,a),s.memoizedState=vf,s=h);else if(jr(s),id(w)){if(x=w.nextSibling&&w.nextSibling.dataset,x)var B=x.dgst;x=B,c=Error(i(419)),c.stack="",c.digest=x,_o({value:c,source:null,stack:null}),s=Tf(r,s,a)}else if(gt||Bo(r,s,a,!1),x=(a&r.childLanes)!==0,gt||x){if(x=Ge,x!==null&&(c=a&-a,c=(c&42)!==0?1:it(c),c=(c&(x.suspendedLanes|a))!==0?0:c,c!==0&&c!==k.retryLane))throw k.retryLane=c,ks(r,c),dn(x,r,c),hg;w.data==="$?"||If(),s=Tf(r,s,a)}else w.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=k.treeContext,Je=Ln(w.nextSibling),$t=s,je=!0,zi=null,Qn=!1,r!==null&&(wn[Tn++]=ur,wn[Tn++]=cr,wn[Tn++]=Ri,ur=r.id,cr=r.overflow,Ri=s),s=wf(s,c.children),s.flags|=4096);return s}return h?(Lr(),h=c.fallback,w=s.mode,k=r.child,B=k.sibling,c=ar(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,B!==null?h=ar(B,h):(h=Ni(h,w,a,null),h.flags|=2),h.return=s,c.return=s,c.sibling=h,s.child=c,c=h,h=s.child,w=r.child.memoizedState,w===null?w=xf(a):(k=w.cachePool,k!==null?(B=ft._currentValue,k=k.parent!==B?{parent:B,pool:B}:k):k=am(),w={baseLanes:w.baseLanes|a,cachePool:k}),h.memoizedState=w,h.childLanes=Sf(r,x,a),s.memoizedState=vf,c):(jr(s),a=r.child,r=a.sibling,a=ar(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,r!==null&&(x=s.deletions,x===null?(s.deletions=[r],s.flags|=16):x.push(r)),s.child=a,s.memoizedState=null,a)}function wf(r,s){return s=za({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function za(r,s){return r=ln(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Tf(r,s,a){return Ls(s,r.child,null,a),r=wf(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Tg(r,s,a){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Uc(r.return,s,a)}function Mf(r,s,a,c,h){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=h)}function Mg(r,s,a){var c=s.pendingProps,h=c.revealOrder,m=c.tail;if(kt(r,s,c.children,a),c=dt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Tg(r,a,s);else if(r.tag===19)Tg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(N(dt,c),h){case"forwards":for(a=s.child,h=null;a!==null;)r=a.alternate,r!==null&&Oa(r)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),Mf(s,!1,h,a,m);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(r=h.alternate,r!==null&&Oa(r)===null){s.child=h;break}r=h.sibling,h.sibling=a,a=h,h=r}Mf(s,!0,a,null,m);break;case"together":Mf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function mr(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),Hr|=s.lanes,(a&s.childLanes)===0)if(r!==null){if(Bo(r,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,a=ar(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=ar(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function Cf(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&ha(r)))}function gS(r,s,a){switch(s.tag){case 3:de(s,s.stateNode.containerInfo),Rr(s,ft,r.memoizedState.cache),zo();break;case 27:case 5:Xt(s);break;case 4:de(s,s.stateNode.containerInfo);break;case 10:Rr(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(jr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?wg(r,s,a):(jr(s),r=mr(r,s,a),r!==null?r.sibling:null);jr(s);break;case 19:var h=(r.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(Bo(r,s,a,!1),c=(a&s.childLanes)!==0),h){if(c)return Mg(r,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),N(dt,dt.current),c)break;return null;case 22:case 23:return s.lanes=0,yg(r,s,a);case 24:Rr(s,ft,r.memoizedState.cache)}return mr(r,s,a)}function Cg(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps)gt=!0;else{if(!Cf(r,a)&&(s.flags&128)===0)return gt=!1,gS(r,s,a);gt=(r.flags&131072)!==0}else gt=!1,je&&(s.flags&1048576)!==0&&tm(s,da,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var c=s.elementType,h=c._init;if(c=h(c._payload),s.type=c,typeof c=="function")zc(c)?(r=Vi(c,r),s.tag=1,s=xg(null,s,c,r,a)):(s.tag=0,s=bf(null,s,c,r,a));else{if(c!=null){if(h=c.$$typeof,h===J){s.tag=11,s=pg(null,s,c,r,a);break e}else if(h===H){s.tag=14,s=mg(null,s,c,r,a);break e}}throw s=ye(c)||c,Error(i(306,s,""))}}return s;case 0:return bf(r,s,s.type,s.pendingProps,a);case 1:return c=s.type,h=Vi(c,s.pendingProps),xg(r,s,c,h,a);case 3:e:{if(de(s,s.stateNode.containerInfo),r===null)throw Error(i(387));c=s.pendingProps;var m=s.memoizedState;h=m.element,Gc(r,s),Ho(s,c,null,a);var x=s.memoizedState;if(c=x.cache,Rr(s,ft,c),c!==m.cache&&Ic(s,[ft],a,!0),Io(),c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Sg(r,s,c,a);break e}else if(c!==h){h=xn(Error(i(424)),s),_o(h),s=Sg(r,s,c,a);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Je=Ln(r.firstChild),$t=s,je=!0,zi=null,Qn=!0,a=rg(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(zo(),c===h){s=mr(r,s,a);break e}kt(r,s,c,a)}s=s.child}return s;case 26:return Da(r,s),r===null?(a=Oy(s.type,null,s.pendingProps,null))?s.memoizedState=a:je||(a=s.type,r=s.pendingProps,c=Ga(ee.current).createElement(a),c[tt]=s,c[Fe]=r,At(c,a,r),mt(c),s.stateNode=c):s.memoizedState=Oy(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Xt(s),r===null&&je&&(c=s.stateNode=ky(s.type,s.pendingProps,ee.current),$t=s,Qn=!0,h=Je,Fr(s.type)?(sd=h,Je=Ln(c.firstChild)):Je=h),kt(r,s,s.pendingProps.children,a),Da(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&je&&((h=c=Je)&&(c=PS(c,s.type,s.pendingProps,Qn),c!==null?(s.stateNode=c,$t=s,Je=Ln(c.firstChild),Qn=!1,h=!0):h=!1),h||_i(s)),Xt(s),h=s.type,m=s.pendingProps,x=r!==null?r.memoizedProps:null,c=m.children,td(h,m)?c=null:x!==null&&td(h,x)&&(s.flags|=32),s.memoizedState!==null&&(h=Wc(r,s,aS,null,null,a),cl._currentValue=h),Da(r,s),kt(r,s,c,a),s.child;case 6:return r===null&&je&&((r=a=Je)&&(a=QS(a,s.pendingProps,Qn),a!==null?(s.stateNode=a,$t=s,Je=null,r=!0):r=!1),r||_i(s)),null;case 13:return wg(r,s,a);case 4:return de(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=Ls(s,null,c,a):kt(r,s,c,a),s.child;case 11:return pg(r,s,s.type,s.pendingProps,a);case 7:return kt(r,s,s.pendingProps,a),s.child;case 8:return kt(r,s,s.pendingProps.children,a),s.child;case 12:return kt(r,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,Rr(s,s.type,c.value),kt(r,s,c.children,a),s.child;case 9:return h=s.type._context,c=s.pendingProps.children,ji(s),h=zt(h),c=c(h),s.flags|=1,kt(r,s,c,a),s.child;case 14:return mg(r,s,s.type,s.pendingProps,a);case 15:return gg(r,s,s.type,s.pendingProps,a);case 19:return Mg(r,s,a);case 31:return c=s.pendingProps,a=s.mode,c={mode:c.mode,children:c.children},r===null?(a=za(c,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=ar(r.child,c),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return yg(r,s,a);case 24:return ji(s),c=zt(ft),r===null?(h=Pc(),h===null&&(h=Ge,m=Hc(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),s.memoizedState={parent:c,cache:h},Fc(s),Rr(s,ft,h)):((r.lanes&a)!==0&&(Gc(r,s),Ho(s,null,null,a),Io()),h=r.memoizedState,m=s.memoizedState,h.parent!==c?(h={parent:c,cache:c},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Rr(s,ft,c)):(c=m.cache,Rr(s,ft,c),c!==h.cache&&Ic(s,[ft],a,!0))),kt(r,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function gr(r){r.flags|=4}function kg(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!_y(s)){if(s=Mn.current,s!==null&&((Ne&4194048)===Ne?Fn!==null:(Ne&62914560)!==Ne&&(Ne&536870912)===0||s!==Fn))throw Vo=Qc,um;r.flags|=8192}}function _a(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Yl():536870912,r.lanes|=s,Is|=s)}function Ko(r,s){if(!je)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Ke(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(s)for(var h=r.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&65011712,c|=h.flags&65011712,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=c,r.childLanes=a,s}function yS(r,s,a){var c=s.pendingProps;switch(Lc(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(s),null;case 1:return Ke(s),null;case 3:return a=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),dr(ft),Le(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(r===null||r.child===null)&&(Do(s)?gr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,im())),Ke(s),null;case 26:return a=s.memoizedState,r===null?(gr(s),a!==null?(Ke(s),kg(s,a)):(Ke(s),s.flags&=-16777217)):a?a!==r.memoizedState?(gr(s),Ke(s),kg(s,a)):(Ke(s),s.flags&=-16777217):(r.memoizedProps!==c&&gr(s),Ke(s),s.flags&=-16777217),null;case 27:rr(s),a=ee.current;var h=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==c&&gr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Ke(s),null}r=G.current,Do(s)?nm(s):(r=ky(h,c,a),s.stateNode=r,gr(s))}return Ke(s),null;case 5:if(rr(s),a=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&gr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Ke(s),null}if(r=G.current,Do(s))nm(s);else{switch(h=Ga(ee.current),r){case 1:r=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:r=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":r=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":r=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":r=h.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?h.createElement("select",{is:c.is}):h.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?h.createElement(a,{is:c.is}):h.createElement(a)}}r[tt]=s,r[Fe]=c;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)r.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=r;e:switch(At(r,a,c),a){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&gr(s)}}return Ke(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&gr(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=ee.current,Do(s)){if(r=s.stateNode,a=s.memoizedProps,c=null,h=$t,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}r[tt]=s,r=!!(r.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||vy(r.nodeValue,a)),r||_i(s)}else r=Ga(r).createTextNode(c),r[tt]=s,s.stateNode=r}return Ke(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(h=Do(s),c!==null&&c.dehydrated!==null){if(r===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[tt]=s}else zo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ke(s),h=!1}else h=im(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(pr(s),s):(pr(s),null)}if(pr(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=c!==null,r=r!==null&&r.memoizedState!==null,a){c=s.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool);var m=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==h&&(c.flags|=2048)}return a!==r&&a&&(s.child.flags|=8192),_a(s,s.updateQueue),Ke(s),null;case 4:return Le(),r===null&&Jf(s.stateNode.containerInfo),Ke(s),null;case 10:return dr(s.type),Ke(s),null;case 19:if(Y(dt),h=s.memoizedState,h===null)return Ke(s),null;if(c=(s.flags&128)!==0,m=h.rendering,m===null)if(c)Ko(h,!1);else{if(Xe!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(m=Oa(r),m!==null){for(s.flags|=128,Ko(h,!1),r=m.updateQueue,s.updateQueue=r,_a(s,r),s.subtreeFlags=0,r=a,a=s.child;a!==null;)em(a,r),a=a.sibling;return N(dt,dt.current&1|2),s.child}r=r.sibling}h.tail!==null&&Dt()>La&&(s.flags|=128,c=!0,Ko(h,!1),s.lanes=4194304)}else{if(!c)if(r=Oa(m),r!==null){if(s.flags|=128,c=!0,r=r.updateQueue,s.updateQueue=r,_a(s,r),Ko(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!je)return Ke(s),null}else 2*Dt()-h.renderingStartTime>La&&a!==536870912&&(s.flags|=128,c=!0,Ko(h,!1),s.lanes=4194304);h.isBackwards?(m.sibling=s.child,s.child=m):(r=h.last,r!==null?r.sibling=m:s.child=m,h.last=m)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=Dt(),s.sibling=null,r=dt.current,N(dt,c?r&1|2:r&1),s):(Ke(s),null);case 22:case 23:return pr(s),Xc(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(Ke(s),s.subtreeFlags&6&&(s.flags|=8192)):Ke(s),a=s.updateQueue,a!==null&&_a(s,a.retryQueue),a=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),r!==null&&Y(Li),null;case 24:return a=null,r!==null&&(a=r.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),dr(ft),Ke(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function bS(r,s){switch(Lc(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return dr(ft),Le(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return rr(s),null;case 13:if(pr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));zo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Y(dt),null;case 4:return Le(),null;case 10:return dr(s.type),null;case 22:case 23:return pr(s),Xc(),r!==null&&Y(Li),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return dr(ft),null;case 25:return null;default:return null}}function Eg(r,s){switch(Lc(s),s.tag){case 3:dr(ft),Le();break;case 26:case 27:case 5:rr(s);break;case 4:Le();break;case 13:pr(s);break;case 19:Y(dt);break;case 10:dr(s.type);break;case 22:case 23:pr(s),Xc(),r!==null&&Y(Li);break;case 24:dr(ft)}}function Jo(r,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var h=c.next;a=h;do{if((a.tag&r)===r){c=void 0;var m=a.create,x=a.inst;c=m(),x.destroy=c}a=a.next}while(a!==h)}}catch(w){$e(s,s.return,w)}}function qr(r,s,a){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var m=h.next;c=m;do{if((c.tag&r)===r){var x=c.inst,w=x.destroy;if(w!==void 0){x.destroy=void 0,h=s;var k=a,B=w;try{B()}catch(P){$e(h,k,P)}}}c=c.next}while(c!==m)}}catch(P){$e(s,s.return,P)}}function Ag(r){var s=r.updateQueue;if(s!==null){var a=r.stateNode;try{mm(s,a)}catch(c){$e(r,r.return,c)}}}function Og(r,s,a){a.props=Vi(r.type,r.memoizedProps),a.state=r.memoizedState;try{a.componentWillUnmount()}catch(c){$e(r,s,c)}}function Xo(r,s){try{var a=r.ref;if(a!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof a=="function"?r.refCleanup=a(c):a.current=c}}catch(h){$e(r,s,h)}}function Gn(r,s){var a=r.ref,c=r.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(h){$e(r,s,h)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){$e(r,s,h)}else a.current=null}function Ng(r){var s=r.type,a=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(h){$e(r,r.return,h)}}function kf(r,s,a){try{var c=r.stateNode;VS(c,r.type,a,s),c[Fe]=s}catch(h){$e(r,r.return,h)}}function Rg(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Fr(r.type)||r.tag===4}function Ef(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Rg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Fr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Af(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(r,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(r),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Fa));else if(c!==4&&(c===27&&Fr(r.type)&&(a=r.stateNode,s=null),r=r.child,r!==null))for(Af(r,s,a),r=r.sibling;r!==null;)Af(r,s,a),r=r.sibling}function Ba(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(c!==4&&(c===27&&Fr(r.type)&&(a=r.stateNode),r=r.child,r!==null))for(Ba(r,s,a),r=r.sibling;r!==null;)Ba(r,s,a),r=r.sibling}function Dg(r){var s=r.stateNode,a=r.memoizedProps;try{for(var c=r.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);At(s,c,a),s[tt]=r,s[Fe]=a}catch(m){$e(r,r.return,m)}}var yr=!1,rt=!1,Of=!1,zg=typeof WeakSet=="function"?WeakSet:Set,yt=null;function vS(r,s){if(r=r.containerInfo,Wf=Wa,r=Pp(r),kc(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,w=-1,k=-1,B=0,P=0,F=r,j=null;t:for(;;){for(var L;F!==a||h!==0&&F.nodeType!==3||(w=x+h),F!==m||c!==0&&F.nodeType!==3||(k=x+c),F.nodeType===3&&(x+=F.nodeValue.length),(L=F.firstChild)!==null;)j=F,F=L;for(;;){if(F===r)break t;if(j===a&&++B===h&&(w=x),j===m&&++P===c&&(k=x),(L=F.nextSibling)!==null)break;F=j,j=F.parentNode}F=L}a=w===-1||k===-1?null:{start:w,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(ed={focusedElem:r,selectionRange:a},Wa=!1,yt=s;yt!==null;)if(s=yt,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,yt=r;else for(;yt!==null;){switch(s=yt,m=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,a=s,h=m.memoizedProps,m=m.memoizedState,c=a.stateNode;try{var be=Vi(a.type,h,a.elementType===a.type);r=c.getSnapshotBeforeUpdate(be,m),c.__reactInternalSnapshotBeforeUpdate=r}catch(pe){$e(a,a.return,pe)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,a=r.nodeType,a===9)rd(r);else if(a===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":rd(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,yt=r;break}yt=s.return}}function _g(r,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Vr(r,a),c&4&&Jo(5,a);break;case 1:if(Vr(r,a),c&4)if(r=a.stateNode,s===null)try{r.componentDidMount()}catch(x){$e(a,a.return,x)}else{var h=Vi(a.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(h,s,r.__reactInternalSnapshotBeforeUpdate)}catch(x){$e(a,a.return,x)}}c&64&&Ag(a),c&512&&Xo(a,a.return);break;case 3:if(Vr(r,a),c&64&&(r=a.updateQueue,r!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{mm(r,s)}catch(x){$e(a,a.return,x)}}break;case 27:s===null&&c&4&&Dg(a);case 26:case 5:Vr(r,a),s===null&&c&4&&Ng(a),c&512&&Xo(a,a.return);break;case 12:Vr(r,a);break;case 13:Vr(r,a),c&4&&Lg(r,a),c&64&&(r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(a=AS.bind(null,a),FS(r,a))));break;case 22:if(c=a.memoizedState!==null||yr,!c){s=s!==null&&s.memoizedState!==null||rt,h=yr;var m=rt;yr=c,(rt=s)&&!m?Ur(r,a,(a.subtreeFlags&8772)!==0):Vr(r,a),yr=h,rt=m}break;case 30:break;default:Vr(r,a)}}function Bg(r){var s=r.alternate;s!==null&&(r.alternate=null,Bg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&lc(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Ye=null,en=!1;function br(r,s,a){for(a=a.child;a!==null;)jg(r,s,a),a=a.sibling}function jg(r,s,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount($n,a)}catch{}switch(a.tag){case 26:rt||Gn(a,s),br(r,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:rt||Gn(a,s);var c=Ye,h=en;Fr(a.type)&&(Ye=a.stateNode,en=!1),br(r,s,a),ol(a.stateNode),Ye=c,en=h;break;case 5:rt||Gn(a,s);case 6:if(c=Ye,h=en,Ye=null,br(r,s,a),Ye=c,en=h,Ye!==null)if(en)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(a.stateNode)}catch(m){$e(a,s,m)}else try{Ye.removeChild(a.stateNode)}catch(m){$e(a,s,m)}break;case 18:Ye!==null&&(en?(r=Ye,My(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.stateNode),pl(r)):My(Ye,a.stateNode));break;case 4:c=Ye,h=en,Ye=a.stateNode.containerInfo,en=!0,br(r,s,a),Ye=c,en=h;break;case 0:case 11:case 14:case 15:rt||qr(2,a,s),rt||qr(4,a,s),br(r,s,a);break;case 1:rt||(Gn(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Og(a,s,c)),br(r,s,a);break;case 21:br(r,s,a);break;case 22:rt=(c=rt)||a.memoizedState!==null,br(r,s,a),rt=c;break;default:br(r,s,a)}}function Lg(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{pl(r)}catch(a){$e(s,s.return,a)}}function xS(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new zg),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new zg),s;default:throw Error(i(435,r.tag))}}function Nf(r,s){var a=xS(r);s.forEach(function(c){var h=OS.bind(null,r,c);a.has(c)||(a.add(c),c.then(h,h))})}function an(r,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c],m=r,x=s,w=x;e:for(;w!==null;){switch(w.tag){case 27:if(Fr(w.type)){Ye=w.stateNode,en=!1;break e}break;case 5:Ye=w.stateNode,en=!1;break e;case 3:case 4:Ye=w.stateNode.containerInfo,en=!0;break e}w=w.return}if(Ye===null)throw Error(i(160));jg(m,x,h),Ye=null,en=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)qg(s,r),s=s.sibling}var jn=null;function qg(r,s){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:an(s,r),un(r),c&4&&(qr(3,r,r.return),Jo(3,r),qr(5,r,r.return));break;case 1:an(s,r),un(r),c&512&&(rt||a===null||Gn(a,a.return)),c&64&&yr&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(a=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var h=jn;if(an(s,r),un(r),c&512&&(rt||a===null||Gn(a,a.return)),c&4){var m=a!==null?a.memoizedState:null;if(c=r.memoizedState,a===null)if(c===null)if(r.stateNode===null){e:{c=r.type,a=r.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":m=h.getElementsByTagName("title")[0],(!m||m[So]||m[tt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(c),h.head.insertBefore(m,h.querySelector("head > title"))),At(m,c,a),m[tt]=r,mt(m),c=m;break e;case"link":var x=Dy("link","href",h).get(c+(a.href||""));if(x){for(var w=0;w<x.length;w++)if(m=x[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(w,1);break t}}m=h.createElement(c),At(m,c,a),h.head.appendChild(m);break;case"meta":if(x=Dy("meta","content",h).get(c+(a.content||""))){for(w=0;w<x.length;w++)if(m=x[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(w,1);break t}}m=h.createElement(c),At(m,c,a),h.head.appendChild(m);break;default:throw Error(i(468,c))}m[tt]=r,mt(m),c=m}r.stateNode=c}else zy(h,r.type,r.stateNode);else r.stateNode=Ry(h,c,r.memoizedProps);else m!==c?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,c===null?zy(h,r.type,r.stateNode):Ry(h,c,r.memoizedProps)):c===null&&r.stateNode!==null&&kf(r,r.memoizedProps,a.memoizedProps)}break;case 27:an(s,r),un(r),c&512&&(rt||a===null||Gn(a,a.return)),a!==null&&c&4&&kf(r,r.memoizedProps,a.memoizedProps);break;case 5:if(an(s,r),un(r),c&512&&(rt||a===null||Gn(a,a.return)),r.flags&32){h=r.stateNode;try{vs(h,"")}catch(L){$e(r,r.return,L)}}c&4&&r.stateNode!=null&&(h=r.memoizedProps,kf(r,h,a!==null?a.memoizedProps:h)),c&1024&&(Of=!0);break;case 6:if(an(s,r),un(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,a=r.stateNode;try{a.nodeValue=c}catch(L){$e(r,r.return,L)}}break;case 3:if(Ja=null,h=jn,jn=Ya(s.containerInfo),an(s,r),jn=h,un(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{pl(s.containerInfo)}catch(L){$e(r,r.return,L)}Of&&(Of=!1,Vg(r));break;case 4:c=jn,jn=Ya(r.stateNode.containerInfo),an(s,r),un(r),jn=c;break;case 12:an(s,r),un(r);break;case 13:an(s,r),un(r),r.child.flags&8192&&r.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(jf=Dt()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Nf(r,c)));break;case 22:h=r.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,B=yr,P=rt;if(yr=B||h,rt=P||k,an(s,r),rt=P,yr=B,un(r),c&8192)e:for(s=r.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||k||yr||rt||Ui(r)),a=null,s=r;;){if(s.tag===5||s.tag===26){if(a===null){k=a=s;try{if(m=k.stateNode,h)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{w=k.stateNode;var F=k.memoizedProps.style,j=F!=null&&F.hasOwnProperty("display")?F.display:null;w.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(L){$e(k,k.return,L)}}}else if(s.tag===6){if(a===null){k=s;try{k.stateNode.nodeValue=h?"":k.memoizedProps}catch(L){$e(k,k.return,L)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Nf(r,a))));break;case 19:an(s,r),un(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Nf(r,c)));break;case 30:break;case 21:break;default:an(s,r),un(r)}}function un(r){var s=r.flags;if(s&2){try{for(var a,c=r.return;c!==null;){if(Rg(c)){a=c;break}c=c.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,m=Ef(r);Ba(r,m,h);break;case 5:var x=a.stateNode;a.flags&32&&(vs(x,""),a.flags&=-33);var w=Ef(r);Ba(r,w,x);break;case 3:case 4:var k=a.stateNode.containerInfo,B=Ef(r);Af(r,B,k);break;default:throw Error(i(161))}}catch(P){$e(r,r.return,P)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Vg(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;Vg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Vr(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)_g(r,s.alternate,s),s=s.sibling}function Ui(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:qr(4,s,s.return),Ui(s);break;case 1:Gn(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Og(s,s.return,a),Ui(s);break;case 27:ol(s.stateNode);case 26:case 5:Gn(s,s.return),Ui(s);break;case 22:s.memoizedState===null&&Ui(s);break;case 30:Ui(s);break;default:Ui(s)}r=r.sibling}}function Ur(r,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,h=r,m=s,x=m.flags;switch(m.tag){case 0:case 11:case 15:Ur(h,m,a),Jo(4,m);break;case 1:if(Ur(h,m,a),c=m,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){$e(c,c.return,B)}if(c=m,h=c.updateQueue,h!==null){var w=c.stateNode;try{var k=h.shared.hiddenCallbacks;if(k!==null)for(h.shared.hiddenCallbacks=null,h=0;h<k.length;h++)pm(k[h],w)}catch(B){$e(c,c.return,B)}}a&&x&64&&Ag(m),Xo(m,m.return);break;case 27:Dg(m);case 26:case 5:Ur(h,m,a),a&&c===null&&x&4&&Ng(m),Xo(m,m.return);break;case 12:Ur(h,m,a);break;case 13:Ur(h,m,a),a&&x&4&&Lg(h,m);break;case 22:m.memoizedState===null&&Ur(h,m,a),Xo(m,m.return);break;case 30:break;default:Ur(h,m,a)}s=s.sibling}}function Rf(r,s){var a=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==a&&(r!=null&&r.refCount++,a!=null&&jo(a))}function Df(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&jo(r))}function Yn(r,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ug(r,s,a,c),s=s.sibling}function Ug(r,s,a,c){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Yn(r,s,a,c),h&2048&&Jo(9,s);break;case 1:Yn(r,s,a,c);break;case 3:Yn(r,s,a,c),h&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&jo(r)));break;case 12:if(h&2048){Yn(r,s,a,c),r=s.stateNode;try{var m=s.memoizedProps,x=m.id,w=m.onPostCommit;typeof w=="function"&&w(x,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(k){$e(s,s.return,k)}}else Yn(r,s,a,c);break;case 13:Yn(r,s,a,c);break;case 23:break;case 22:m=s.stateNode,x=s.alternate,s.memoizedState!==null?m._visibility&2?Yn(r,s,a,c):Zo(r,s):m._visibility&2?Yn(r,s,a,c):(m._visibility|=2,qs(r,s,a,c,(s.subtreeFlags&10256)!==0)),h&2048&&Rf(x,s);break;case 24:Yn(r,s,a,c),h&2048&&Df(s.alternate,s);break;default:Yn(r,s,a,c)}}function qs(r,s,a,c,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=r,x=s,w=a,k=c,B=x.flags;switch(x.tag){case 0:case 11:case 15:qs(m,x,w,k,h),Jo(8,x);break;case 23:break;case 22:var P=x.stateNode;x.memoizedState!==null?P._visibility&2?qs(m,x,w,k,h):Zo(m,x):(P._visibility|=2,qs(m,x,w,k,h)),h&&B&2048&&Rf(x.alternate,x);break;case 24:qs(m,x,w,k,h),h&&B&2048&&Df(x.alternate,x);break;default:qs(m,x,w,k,h)}s=s.sibling}}function Zo(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=r,c=s,h=c.flags;switch(c.tag){case 22:Zo(a,c),h&2048&&Rf(c.alternate,c);break;case 24:Zo(a,c),h&2048&&Df(c.alternate,c);break;default:Zo(a,c)}s=s.sibling}}var Wo=8192;function Vs(r){if(r.subtreeFlags&Wo)for(r=r.child;r!==null;)Ig(r),r=r.sibling}function Ig(r){switch(r.tag){case 26:Vs(r),r.flags&Wo&&r.memoizedState!==null&&sw(jn,r.memoizedState,r.memoizedProps);break;case 5:Vs(r);break;case 3:case 4:var s=jn;jn=Ya(r.stateNode.containerInfo),Vs(r),jn=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Wo,Wo=16777216,Vs(r),Wo=s):Vs(r));break;default:Vs(r)}}function Hg(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function el(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];yt=c,Pg(c,r)}Hg(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)$g(r),r=r.sibling}function $g(r){switch(r.tag){case 0:case 11:case 15:el(r),r.flags&2048&&qr(9,r,r.return);break;case 3:el(r);break;case 12:el(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,ja(r)):el(r);break;default:el(r)}}function ja(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];yt=c,Pg(c,r)}Hg(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:qr(8,s,s.return),ja(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,ja(s));break;default:ja(s)}r=r.sibling}}function Pg(r,s){for(;yt!==null;){var a=yt;switch(a.tag){case 0:case 11:case 15:qr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:jo(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,yt=c;else e:for(a=r;yt!==null;){c=yt;var h=c.sibling,m=c.return;if(Bg(c),c===a){yt=null;break e}if(h!==null){h.return=m,yt=h;break e}yt=m}}}var SS={getCacheForType:function(r){var s=zt(ft),a=s.data.get(r);return a===void 0&&(a=r(),s.data.set(r,a)),a}},wS=typeof WeakMap=="function"?WeakMap:Map,qe=0,Ge=null,ke=null,Ne=0,Ve=0,cn=null,Ir=!1,Us=!1,zf=!1,vr=0,Xe=0,Hr=0,Ii=0,_f=0,Cn=0,Is=0,tl=null,tn=null,Bf=!1,jf=0,La=1/0,qa=null,$r=null,Et=0,Pr=null,Hs=null,$s=0,Lf=0,qf=null,Qg=null,nl=0,Vf=null;function fn(){if((qe&2)!==0&&Ne!==0)return Ne&-Ne;if(O.T!==null){var r=Ns;return r!==0?r:Ff()}return Ci()}function Fg(){Cn===0&&(Cn=(Ne&536870912)===0||je?_n():536870912);var r=Mn.current;return r!==null&&(r.flags|=32),Cn}function dn(r,s,a){(r===Ge&&(Ve===2||Ve===9)||r.cancelPendingCommit!==null)&&(Ps(r,0),Qr(r,Ne,Cn,!1)),Or(r,a),((qe&2)===0||r!==Ge)&&(r===Ge&&((qe&2)===0&&(Ii|=a),Xe===4&&Qr(r,Ne,Cn,!1)),Kn(r))}function Gg(r,s,a){if((qe&6)!==0)throw Error(i(327));var c=!a&&(s&124)===0&&(s&r.expiredLanes)===0||Mi(r,s),h=c?CS(r,s):Hf(r,s,!0),m=c;do{if(h===0){Us&&!c&&Qr(r,s,0,!1);break}else{if(a=r.current.alternate,m&&!TS(a)){h=Hf(r,s,!1),m=!1;continue}if(h===2){if(m=s,r.errorRecoveryDisabledLanes&m)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){s=x;e:{var w=r;h=tl;var k=w.current.memoizedState.isDehydrated;if(k&&(Ps(w,x).flags|=256),x=Hf(w,x,!1),x!==2){if(zf&&!k){w.errorRecoveryDisabledLanes|=m,Ii|=m,h=4;break e}m=tn,tn=h,m!==null&&(tn===null?tn=m:tn.push.apply(tn,m))}h=x}if(m=!1,h!==2)continue}}if(h===1){Ps(r,0),Qr(r,s,0,!0);break}e:{switch(c=r,m=h,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Qr(c,s,Cn,!Ir);break e;case 2:tn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=jf+300-Dt(),10<h)){if(Qr(c,s,Cn,!Ir),Ti(c,0,!0)!==0)break e;c.timeoutHandle=wy(Yg.bind(null,c,a,tn,qa,Bf,s,Cn,Ii,Is,Ir,m,2,-0,0),h);break e}Yg(c,a,tn,qa,Bf,s,Cn,Ii,Is,Ir,m,0,-0,0)}}break}while(!0);Kn(r)}function Yg(r,s,a,c,h,m,x,w,k,B,P,F,j,L){if(r.timeoutHandle=-1,F=s.subtreeFlags,(F&8192||(F&16785408)===16785408)&&(ul={stylesheets:null,count:0,unsuspend:iw},Ig(s),F=ow(),F!==null)){r.cancelPendingCommit=F(ty.bind(null,r,s,m,a,c,h,x,w,k,P,1,j,L)),Qr(r,m,x,!B);return}ty(r,s,m,a,c,h,x,w,k)}function TS(r){for(var s=r;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var h=a[c],m=h.getSnapshot;h=h.value;try{if(!on(m(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Qr(r,s,a,c){s&=~_f,s&=~Ii,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var h=s;0<h;){var m=31-Mt(h),x=1<<m;c[m]=-1,h&=~x}a!==0&&xe(r,a,s)}function Va(){return(qe&6)===0?(rl(0),!1):!0}function Uf(){if(ke!==null){if(Ve===0)var r=ke.return;else r=ke,fr=Bi=null,nf(r),js=null,Go=0,r=ke;for(;r!==null;)Eg(r.alternate,r),r=r.return;ke=null}}function Ps(r,s){var a=r.timeoutHandle;a!==-1&&(r.timeoutHandle=-1,IS(a)),a=r.cancelPendingCommit,a!==null&&(r.cancelPendingCommit=null,a()),Uf(),Ge=r,ke=a=ar(r.current,null),Ne=s,Ve=0,cn=null,Ir=!1,Us=Mi(r,s),zf=!1,Is=Cn=_f=Ii=Hr=Xe=0,tn=tl=null,Bf=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var h=31-Mt(c),m=1<<h;s|=r[h],c&=~m}return vr=s,la(),a}function Kg(r,s){Te=null,O.H=ka,s===qo||s===ga?(s=dm(),Ve=3):s===um?(s=dm(),Ve=4):Ve=s===hg?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,cn=s,ke===null&&(Xe=1,Ra(r,xn(s,r.current)))}function Jg(){var r=O.H;return O.H=ka,r===null?ka:r}function Xg(){var r=O.A;return O.A=SS,r}function If(){Xe=4,Ir||(Ne&4194048)!==Ne&&Mn.current!==null||(Us=!0),(Hr&134217727)===0&&(Ii&134217727)===0||Ge===null||Qr(Ge,Ne,Cn,!1)}function Hf(r,s,a){var c=qe;qe|=2;var h=Jg(),m=Xg();(Ge!==r||Ne!==s)&&(qa=null,Ps(r,s)),s=!1;var x=Xe;e:do try{if(Ve!==0&&ke!==null){var w=ke,k=cn;switch(Ve){case 8:Uf(),x=6;break e;case 3:case 2:case 9:case 6:Mn.current===null&&(s=!0);var B=Ve;if(Ve=0,cn=null,Qs(r,w,k,B),a&&Us){x=0;break e}break;default:B=Ve,Ve=0,cn=null,Qs(r,w,k,B)}}MS(),x=Xe;break}catch(P){Kg(r,P)}while(!0);return s&&r.shellSuspendCounter++,fr=Bi=null,qe=c,O.H=h,O.A=m,ke===null&&(Ge=null,Ne=0,la()),x}function MS(){for(;ke!==null;)Zg(ke)}function CS(r,s){var a=qe;qe|=2;var c=Jg(),h=Xg();Ge!==r||Ne!==s?(qa=null,La=Dt()+500,Ps(r,s)):Us=Mi(r,s);e:do try{if(Ve!==0&&ke!==null){s=ke;var m=cn;t:switch(Ve){case 1:Ve=0,cn=null,Qs(r,s,m,1);break;case 2:case 9:if(cm(m)){Ve=0,cn=null,Wg(s);break}s=function(){Ve!==2&&Ve!==9||Ge!==r||(Ve=7),Kn(r)},m.then(s,s);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:cm(m)?(Ve=0,cn=null,Wg(s)):(Ve=0,cn=null,Qs(r,s,m,7));break;case 5:var x=null;switch(ke.tag){case 26:x=ke.memoizedState;case 5:case 27:var w=ke;if(!x||_y(x)){Ve=0,cn=null;var k=w.sibling;if(k!==null)ke=k;else{var B=w.return;B!==null?(ke=B,Ua(B)):ke=null}break t}}Ve=0,cn=null,Qs(r,s,m,5);break;case 6:Ve=0,cn=null,Qs(r,s,m,6);break;case 8:Uf(),Xe=6;break e;default:throw Error(i(462))}}kS();break}catch(P){Kg(r,P)}while(!0);return fr=Bi=null,O.H=c,O.A=h,qe=a,ke!==null?0:(Ge=null,Ne=0,la(),Xe)}function kS(){for(;ke!==null&&!ic();)Zg(ke)}function Zg(r){var s=Cg(r.alternate,r,vr);r.memoizedProps=r.pendingProps,s===null?Ua(r):ke=s}function Wg(r){var s=r,a=s.alternate;switch(s.tag){case 15:case 0:s=vg(a,s,s.pendingProps,s.type,void 0,Ne);break;case 11:s=vg(a,s,s.pendingProps,s.type.render,s.ref,Ne);break;case 5:nf(s);default:Eg(a,s),s=ke=em(s,vr),s=Cg(a,s,vr)}r.memoizedProps=r.pendingProps,s===null?Ua(r):ke=s}function Qs(r,s,a,c){fr=Bi=null,nf(s),js=null,Go=0;var h=s.return;try{if(mS(r,h,s,a,Ne)){Xe=1,Ra(r,xn(a,r.current)),ke=null;return}}catch(m){if(h!==null)throw ke=h,m;Xe=1,Ra(r,xn(a,r.current)),ke=null;return}s.flags&32768?(je||c===1?r=!0:Us||(Ne&536870912)!==0?r=!1:(Ir=r=!0,(c===2||c===9||c===3||c===6)&&(c=Mn.current,c!==null&&c.tag===13&&(c.flags|=16384))),ey(s,r)):Ua(s)}function Ua(r){var s=r;do{if((s.flags&32768)!==0){ey(s,Ir);return}r=s.return;var a=yS(s.alternate,s,vr);if(a!==null){ke=a;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=r}while(s!==null);Xe===0&&(Xe=5)}function ey(r,s){do{var a=bS(r.alternate,r);if(a!==null){a.flags&=32767,ke=a;return}if(a=r.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(r=r.sibling,r!==null)){ke=r;return}ke=r=a}while(r!==null);Xe=6,ke=null}function ty(r,s,a,c,h,m,x,w,k){r.cancelPendingCommit=null;do Ia();while(Et!==0);if((qe&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Rc,Kl(r,a,m,x,w,k),r===Ge&&(ke=Ge=null,Ne=0),Hs=s,Pr=r,$s=a,Lf=m,qf=h,Qg=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,NS(us,function(){return oy(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=O.T,O.T=null,h=X.p,X.p=2,x=qe,qe|=4;try{vS(r,s,a)}finally{qe=x,X.p=h,O.T=c}}Et=1,ny(),ry(),iy()}}function ny(){if(Et===1){Et=0;var r=Pr,s=Hs,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var c=X.p;X.p=2;var h=qe;qe|=4;try{qg(s,r);var m=ed,x=Pp(r.containerInfo),w=m.focusedElem,k=m.selectionRange;if(x!==w&&w&&w.ownerDocument&&$p(w.ownerDocument.documentElement,w)){if(k!==null&&kc(w)){var B=k.start,P=k.end;if(P===void 0&&(P=B),"selectionStart"in w)w.selectionStart=B,w.selectionEnd=Math.min(P,w.value.length);else{var F=w.ownerDocument||document,j=F&&F.defaultView||window;if(j.getSelection){var L=j.getSelection(),be=w.textContent.length,pe=Math.min(k.start,be),He=k.end===void 0?pe:Math.min(k.end,be);!L.extend&&pe>He&&(x=He,He=pe,pe=x);var D=Hp(w,pe),A=Hp(w,He);if(D&&A&&(L.rangeCount!==1||L.anchorNode!==D.node||L.anchorOffset!==D.offset||L.focusNode!==A.node||L.focusOffset!==A.offset)){var z=F.createRange();z.setStart(D.node,D.offset),L.removeAllRanges(),pe>He?(L.addRange(z),L.extend(A.node,A.offset)):(z.setEnd(A.node,A.offset),L.addRange(z))}}}}for(F=[],L=w;L=L.parentNode;)L.nodeType===1&&F.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<F.length;w++){var Q=F[w];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Wa=!!Wf,ed=Wf=null}finally{qe=h,X.p=c,O.T=a}}r.current=s,Et=2}}function ry(){if(Et===2){Et=0;var r=Pr,s=Hs,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var c=X.p;X.p=2;var h=qe;qe|=4;try{_g(r,s.alternate,s)}finally{qe=h,X.p=c,O.T=a}}Et=3}}function iy(){if(Et===4||Et===3){Et=0,Pl();var r=Pr,s=Hs,a=$s,c=Qg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Et=5:(Et=0,Hs=Pr=null,sy(r,r.pendingLanes));var h=r.pendingLanes;if(h===0&&($r=null),Ct(a),s=s.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot($n,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=O.T,h=X.p,X.p=2,O.T=null;try{for(var m=r.onRecoverableError,x=0;x<c.length;x++){var w=c[x];m(w.value,{componentStack:w.stack})}}finally{O.T=s,X.p=h}}($s&3)!==0&&Ia(),Kn(r),h=r.pendingLanes,(a&4194090)!==0&&(h&42)!==0?r===Vf?nl++:(nl=0,Vf=r):nl=0,rl(0)}}function sy(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,jo(s)))}function Ia(r){return ny(),ry(),iy(),oy()}function oy(){if(Et!==5)return!1;var r=Pr,s=Lf;Lf=0;var a=Ct($s),c=O.T,h=X.p;try{X.p=32>a?32:a,O.T=null,a=qf,qf=null;var m=Pr,x=$s;if(Et=0,Hs=Pr=null,$s=0,(qe&6)!==0)throw Error(i(331));var w=qe;if(qe|=4,$g(m.current),Ug(m,m.current,x,a),qe=w,rl(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot($n,m)}catch{}return!0}finally{X.p=h,O.T=c,sy(r,s)}}function ly(r,s,a){s=xn(a,s),s=yf(r.stateNode,s,2),r=_r(r,s,2),r!==null&&(Or(r,2),Kn(r))}function $e(r,s,a){if(r.tag===3)ly(r,r,a);else for(;s!==null;){if(s.tag===3){ly(s,r,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&($r===null||!$r.has(c))){r=xn(a,r),a=fg(2),c=_r(s,a,2),c!==null&&(dg(a,c,s,r),Or(c,2),Kn(c));break}}s=s.return}}function $f(r,s,a){var c=r.pingCache;if(c===null){c=r.pingCache=new wS;var h=new Set;c.set(s,h)}else h=c.get(s),h===void 0&&(h=new Set,c.set(s,h));h.has(a)||(zf=!0,h.add(a),r=ES.bind(null,r,s,a),s.then(r,r))}function ES(r,s,a){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&a,r.warmLanes&=~a,Ge===r&&(Ne&a)===a&&(Xe===4||Xe===3&&(Ne&62914560)===Ne&&300>Dt()-jf?(qe&2)===0&&Ps(r,0):_f|=a,Is===Ne&&(Is=0)),Kn(r)}function ay(r,s){s===0&&(s=Yl()),r=ks(r,s),r!==null&&(Or(r,s),Kn(r))}function AS(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),ay(r,a)}function OS(r,s){var a=0;switch(r.tag){case 13:var c=r.stateNode,h=r.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),ay(r,a)}function NS(r,s){return Si(r,s)}var Ha=null,Fs=null,Pf=!1,$a=!1,Qf=!1,Hi=0;function Kn(r){r!==Fs&&r.next===null&&(Fs===null?Ha=Fs=r:Fs=Fs.next=r),$a=!0,Pf||(Pf=!0,DS())}function rl(r,s){if(!Qf&&$a){Qf=!0;do for(var a=!1,c=Ha;c!==null;){if(r!==0){var h=c.pendingLanes;if(h===0)var m=0;else{var x=c.suspendedLanes,w=c.pingedLanes;m=(1<<31-Mt(42|r)+1)-1,m&=h&~(x&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,dy(c,m))}else m=Ne,m=Ti(c,c===Ge?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Mi(c,m)||(a=!0,dy(c,m));c=c.next}while(a);Qf=!1}}function RS(){uy()}function uy(){$a=Pf=!1;var r=0;Hi!==0&&(US()&&(r=Hi),Hi=0);for(var s=Dt(),a=null,c=Ha;c!==null;){var h=c.next,m=cy(c,s);m===0?(c.next=null,a===null?Ha=h:a.next=h,h===null&&(Fs=a)):(a=c,(r!==0||(m&3)!==0)&&($a=!0)),c=h}rl(r)}function cy(r,s){for(var a=r.suspendedLanes,c=r.pingedLanes,h=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var x=31-Mt(m),w=1<<x,k=h[x];k===-1?((w&a)===0||(w&c)!==0)&&(h[x]=vo(w,s)):k<=s&&(r.expiredLanes|=w),m&=~w}if(s=Ge,a=Ne,a=Ti(r,r===s?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,a===0||r===s&&(Ve===2||Ve===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&wi(c),r.callbackNode=null,r.callbackPriority=0;if((a&3)===0||Mi(r,a)){if(s=a&-a,s===r.callbackPriority)return s;switch(c!==null&&wi(c),Ct(a)){case 2:case 8:a=Fl;break;case 32:a=us;break;case 268435456:a=ir;break;default:a=us}return c=fy.bind(null,r),a=Si(a,c),r.callbackPriority=s,r.callbackNode=a,s}return c!==null&&c!==null&&wi(c),r.callbackPriority=2,r.callbackNode=null,2}function fy(r,s){if(Et!==0&&Et!==5)return r.callbackNode=null,r.callbackPriority=0,null;var a=r.callbackNode;if(Ia()&&r.callbackNode!==a)return null;var c=Ne;return c=Ti(r,r===Ge?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(Gg(r,c,s),cy(r,Dt()),r.callbackNode!=null&&r.callbackNode===a?fy.bind(null,r):null)}function dy(r,s){if(Ia())return null;Gg(r,s,!0)}function DS(){HS(function(){(qe&6)!==0?Si(yn,RS):uy()})}function Ff(){return Hi===0&&(Hi=_n()),Hi}function hy(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ea(""+r)}function py(r,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,r.id&&a.setAttribute("form",r.id),s.parentNode.insertBefore(a,s),r=new FormData(r),a.parentNode.removeChild(a),r}function zS(r,s,a,c,h){if(s==="submit"&&a&&a.stateNode===h){var m=hy((h[Fe]||null).action),x=c.submitter;x&&(s=(s=x[Fe]||null)?hy(s.formAction):x.getAttribute("formAction"),s!==null&&(m=s,x=null));var w=new ia("action","action",null,c,h);r.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Hi!==0){var k=x?py(h,x):new FormData(h);df(a,{pending:!0,data:k,method:h.method,action:m},null,k)}}else typeof m=="function"&&(w.preventDefault(),k=x?py(h,x):new FormData(h),df(a,{pending:!0,data:k,method:h.method,action:m},m,k))},currentTarget:h}]})}}for(var Gf=0;Gf<Nc.length;Gf++){var Yf=Nc[Gf],_S=Yf.toLowerCase(),BS=Yf[0].toUpperCase()+Yf.slice(1);Bn(_S,"on"+BS)}Bn(Gp,"onAnimationEnd"),Bn(Yp,"onAnimationIteration"),Bn(Kp,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn(Z1,"onTransitionRun"),Bn(W1,"onTransitionStart"),Bn(eS,"onTransitionCancel"),Bn(Jp,"onTransitionEnd"),gs("onMouseEnter",["mouseout","mouseover"]),gs("onMouseLeave",["mouseout","mouseover"]),gs("onPointerEnter",["pointerout","pointerover"]),gs("onPointerLeave",["pointerout","pointerover"]),ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ki("onBeforeInput",["compositionend","keypress","textInput","paste"]),ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(il));function my(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],h=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var x=c.length-1;0<=x;x--){var w=c[x],k=w.instance,B=w.currentTarget;if(w=w.listener,k!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=B;try{m(h)}catch(P){Na(P)}h.currentTarget=null,m=k}else for(x=0;x<c.length;x++){if(w=c[x],k=w.instance,B=w.currentTarget,w=w.listener,k!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=B;try{m(h)}catch(P){Na(P)}h.currentTarget=null,m=k}}}}function Ee(r,s){var a=s[ds];a===void 0&&(a=s[ds]=new Set);var c=r+"__bubble";a.has(c)||(gy(s,r,2,!1),a.add(c))}function Kf(r,s,a){var c=0;s&&(c|=4),gy(a,r,c,s)}var Pa="_reactListening"+Math.random().toString(36).slice(2);function Jf(r){if(!r[Pa]){r[Pa]=!0,up.forEach(function(a){a!=="selectionchange"&&(jS.has(a)||Kf(a,!1,r),Kf(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Pa]||(s[Pa]=!0,Kf("selectionchange",!1,s))}}function gy(r,s,a,c){switch(Uy(s)){case 2:var h=uw;break;case 8:h=cw;break;default:h=cd}a=h.bind(null,s,a,r),h=void 0,!yc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?r.addEventListener(s,a,{capture:!0,passive:h}):r.addEventListener(s,a,!0):h!==void 0?r.addEventListener(s,a,{passive:h}):r.addEventListener(s,a,!1)}function Xf(r,s,a,c,h){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var w=c.stateNode.containerInfo;if(w===h)break;if(x===4)for(x=c.return;x!==null;){var k=x.tag;if((k===3||k===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;w!==null;){if(x=hs(w),x===null)return;if(k=x.tag,k===5||k===6||k===26||k===27){c=m=x;continue e}w=w.parentNode}}c=c.return}Tp(function(){var B=m,P=mc(a),F=[];e:{var j=Xp.get(r);if(j!==void 0){var L=ia,be=r;switch(r){case"keypress":if(na(a)===0)break e;case"keydown":case"keyup":L=N1;break;case"focusin":be="focus",L=Sc;break;case"focusout":be="blur",L=Sc;break;case"beforeblur":case"afterblur":L=Sc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=kp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=b1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=z1;break;case Gp:case Yp:case Kp:L=S1;break;case Jp:L=B1;break;case"scroll":case"scrollend":L=g1;break;case"wheel":L=L1;break;case"copy":case"cut":case"paste":L=T1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=Ap;break;case"toggle":case"beforetoggle":L=V1}var pe=(s&4)!==0,He=!pe&&(r==="scroll"||r==="scrollend"),D=pe?j!==null?j+"Capture":null:j;pe=[];for(var A=B,z;A!==null;){var Q=A;if(z=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||z===null||D===null||(Q=To(A,D),Q!=null&&pe.push(sl(A,Q,z))),He)break;A=A.return}0<pe.length&&(j=new L(j,be,null,a,P),F.push({event:j,listeners:pe}))}}if((s&7)===0){e:{if(j=r==="mouseover"||r==="pointerover",L=r==="mouseout"||r==="pointerout",j&&a!==pc&&(be=a.relatedTarget||a.fromElement)&&(hs(be)||be[pt]))break e;if((L||j)&&(j=P.window===P?P:(j=P.ownerDocument)?j.defaultView||j.parentWindow:window,L?(be=a.relatedTarget||a.toElement,L=B,be=be?hs(be):null,be!==null&&(He=l(be),pe=be.tag,be!==He||pe!==5&&pe!==27&&pe!==6)&&(be=null)):(L=null,be=B),L!==be)){if(pe=kp,Q="onMouseLeave",D="onMouseEnter",A="mouse",(r==="pointerout"||r==="pointerover")&&(pe=Ap,Q="onPointerLeave",D="onPointerEnter",A="pointer"),He=L==null?j:wo(L),z=be==null?j:wo(be),j=new pe(Q,A+"leave",L,a,P),j.target=He,j.relatedTarget=z,Q=null,hs(P)===B&&(pe=new pe(D,A+"enter",be,a,P),pe.target=z,pe.relatedTarget=He,Q=pe),He=Q,L&&be)t:{for(pe=L,D=be,A=0,z=pe;z;z=Gs(z))A++;for(z=0,Q=D;Q;Q=Gs(Q))z++;for(;0<A-z;)pe=Gs(pe),A--;for(;0<z-A;)D=Gs(D),z--;for(;A--;){if(pe===D||D!==null&&pe===D.alternate)break t;pe=Gs(pe),D=Gs(D)}pe=null}else pe=null;L!==null&&yy(F,j,L,pe,!1),be!==null&&He!==null&&yy(F,He,be,pe,!0)}}e:{if(j=B?wo(B):window,L=j.nodeName&&j.nodeName.toLowerCase(),L==="select"||L==="input"&&j.type==="file")var oe=jp;else if(_p(j))if(Lp)oe=K1;else{oe=G1;var Ce=F1}else L=j.nodeName,!L||L.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?B&&hc(B.elementType)&&(oe=jp):oe=Y1;if(oe&&(oe=oe(r,B))){Bp(F,oe,a,P);break e}Ce&&Ce(r,j,B),r==="focusout"&&B&&j.type==="number"&&B.memoizedProps.value!=null&&dc(j,"number",j.value)}switch(Ce=B?wo(B):window,r){case"focusin":(_p(Ce)||Ce.contentEditable==="true")&&(Ts=Ce,Ec=B,Ro=null);break;case"focusout":Ro=Ec=Ts=null;break;case"mousedown":Ac=!0;break;case"contextmenu":case"mouseup":case"dragend":Ac=!1,Qp(F,a,P);break;case"selectionchange":if(X1)break;case"keydown":case"keyup":Qp(F,a,P)}var fe;if(Tc)e:{switch(r){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else ws?Dp(r,a)&&(me="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(me="onCompositionStart");me&&(Op&&a.locale!=="ko"&&(ws||me!=="onCompositionStart"?me==="onCompositionEnd"&&ws&&(fe=Mp()):(Nr=P,bc="value"in Nr?Nr.value:Nr.textContent,ws=!0)),Ce=Qa(B,me),0<Ce.length&&(me=new Ep(me,r,null,a,P),F.push({event:me,listeners:Ce}),fe?me.data=fe:(fe=zp(a),fe!==null&&(me.data=fe)))),(fe=I1?H1(r,a):$1(r,a))&&(me=Qa(B,"onBeforeInput"),0<me.length&&(Ce=new Ep("onBeforeInput","beforeinput",null,a,P),F.push({event:Ce,listeners:me}),Ce.data=fe)),zS(F,r,B,a,P)}my(F,s)})}function sl(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Qa(r,s){for(var a=s+"Capture",c=[];r!==null;){var h=r,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=To(r,a),h!=null&&c.unshift(sl(r,h,m)),h=To(r,s),h!=null&&c.push(sl(r,h,m))),r.tag===3)return c;r=r.return}return[]}function Gs(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function yy(r,s,a,c,h){for(var m=s._reactName,x=[];a!==null&&a!==c;){var w=a,k=w.alternate,B=w.stateNode;if(w=w.tag,k!==null&&k===c)break;w!==5&&w!==26&&w!==27||B===null||(k=B,h?(B=To(a,m),B!=null&&x.unshift(sl(a,B,k))):h||(B=To(a,m),B!=null&&x.push(sl(a,B,k)))),a=a.return}x.length!==0&&r.push({event:s,listeners:x})}var LS=/\r\n?/g,qS=/\u0000|\uFFFD/g;function by(r){return(typeof r=="string"?r:""+r).replace(LS,`
`).replace(qS,"")}function vy(r,s){return s=by(s),by(r)===s}function Fa(){}function Ie(r,s,a,c,h,m){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||vs(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&vs(r,""+c);break;case"className":Xl(r,"class",c);break;case"tabIndex":Xl(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Xl(r,a,c);break;case"style":Sp(r,c,m);break;case"data":if(s!=="object"){Xl(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){r.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(a);break}c=ea(""+c),r.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&Ie(r,s,"name",h.name,h,null),Ie(r,s,"formEncType",h.formEncType,h,null),Ie(r,s,"formMethod",h.formMethod,h,null),Ie(r,s,"formTarget",h.formTarget,h,null)):(Ie(r,s,"encType",h.encType,h,null),Ie(r,s,"method",h.method,h,null),Ie(r,s,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(a);break}c=ea(""+c),r.setAttribute(a,c);break;case"onClick":c!=null&&(r.onclick=Fa);break;case"onScroll":c!=null&&Ee("scroll",r);break;case"onScrollEnd":c!=null&&Ee("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(h.children!=null)throw Error(i(60));r.innerHTML=a}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}a=ea(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(a,""+c):r.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(a,""):r.removeAttribute(a);break;case"capture":case"download":c===!0?r.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(a,c):r.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(a,c):r.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(a):r.setAttribute(a,c);break;case"popover":Ee("beforetoggle",r),Ee("toggle",r),Jl(r,"popover",c);break;case"xlinkActuate":or(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":or(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":or(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":or(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":or(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":or(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":or(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":or(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":or(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Jl(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=p1.get(a)||a,Jl(r,a,c))}}function Zf(r,s,a,c,h,m){switch(a){case"style":Sp(r,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(h.children!=null)throw Error(i(60));r.innerHTML=a}}break;case"children":typeof c=="string"?vs(r,c):(typeof c=="number"||typeof c=="bigint")&&vs(r,""+c);break;case"onScroll":c!=null&&Ee("scroll",r);break;case"onScrollEnd":c!=null&&Ee("scrollend",r);break;case"onClick":c!=null&&(r.onclick=Fa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cp.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),m=r[Fe]||null,m=m!=null?m[a]:null,typeof m=="function"&&r.removeEventListener(s,m,h),typeof c=="function")){typeof m!="function"&&m!==null&&(a in r?r[a]=null:r.hasAttribute(a)&&r.removeAttribute(a)),r.addEventListener(s,c,h);break e}a in r?r[a]=c:c===!0?r.setAttribute(a,""):Jl(r,a,c)}}}function At(r,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",r),Ee("load",r);var c=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var x=a[m];if(x!=null)switch(m){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ie(r,s,m,x,a,null)}}h&&Ie(r,s,"srcSet",a.srcSet,a,null),c&&Ie(r,s,"src",a.src,a,null);return;case"input":Ee("invalid",r);var w=m=x=h=null,k=null,B=null;for(c in a)if(a.hasOwnProperty(c)){var P=a[c];if(P!=null)switch(c){case"name":h=P;break;case"type":x=P;break;case"checked":k=P;break;case"defaultChecked":B=P;break;case"value":m=P;break;case"defaultValue":w=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(137,s));break;default:Ie(r,s,c,P,a,null)}}yp(r,m,w,k,B,x,h,!1),Zl(r);return;case"select":Ee("invalid",r),c=x=m=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":m=w;break;case"defaultValue":x=w;break;case"multiple":c=w;default:Ie(r,s,h,w,a,null)}s=m,a=x,r.multiple=!!c,s!=null?bs(r,!!c,s,!1):a!=null&&bs(r,!!c,a,!0);return;case"textarea":Ee("invalid",r),m=h=c=null;for(x in a)if(a.hasOwnProperty(x)&&(w=a[x],w!=null))switch(x){case"value":c=w;break;case"defaultValue":h=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:Ie(r,s,x,w,a,null)}vp(r,c,h,m),Zl(r);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(c=a[k],c!=null))switch(k){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ie(r,s,k,c,a,null)}return;case"dialog":Ee("beforetoggle",r),Ee("toggle",r),Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":Ee("load",r);break;case"video":case"audio":for(c=0;c<il.length;c++)Ee(il[c],r);break;case"image":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"embed":case"source":case"link":Ee("error",r),Ee("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(c=a[B],c!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ie(r,s,B,c,a,null)}return;default:if(hc(s)){for(P in a)a.hasOwnProperty(P)&&(c=a[P],c!==void 0&&Zf(r,s,P,c,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(c=a[w],c!=null&&Ie(r,s,w,c,a,null))}function VS(r,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,x=null,w=null,k=null,B=null,P=null;for(L in a){var F=a[L];if(a.hasOwnProperty(L)&&F!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":k=F;default:c.hasOwnProperty(L)||Ie(r,s,L,null,c,F)}}for(var j in c){var L=c[j];if(F=a[j],c.hasOwnProperty(j)&&(L!=null||F!=null))switch(j){case"type":m=L;break;case"name":h=L;break;case"checked":B=L;break;case"defaultChecked":P=L;break;case"value":x=L;break;case"defaultValue":w=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(i(137,s));break;default:L!==F&&Ie(r,s,j,L,c,F)}}fc(r,x,w,k,B,P,m,h);return;case"select":L=x=w=j=null;for(m in a)if(k=a[m],a.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":L=k;default:c.hasOwnProperty(m)||Ie(r,s,m,null,c,k)}for(h in c)if(m=c[h],k=a[h],c.hasOwnProperty(h)&&(m!=null||k!=null))switch(h){case"value":j=m;break;case"defaultValue":w=m;break;case"multiple":x=m;default:m!==k&&Ie(r,s,h,m,c,k)}s=w,a=x,c=L,j!=null?bs(r,!!a,j,!1):!!c!=!!a&&(s!=null?bs(r,!!a,s,!0):bs(r,!!a,a?[]:"",!1));return;case"textarea":L=j=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Ie(r,s,w,null,c,h)}for(x in c)if(h=c[x],m=a[x],c.hasOwnProperty(x)&&(h!=null||m!=null))switch(x){case"value":j=h;break;case"defaultValue":L=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==m&&Ie(r,s,x,h,c,m)}bp(r,j,L);return;case"option":for(var be in a)if(j=a[be],a.hasOwnProperty(be)&&j!=null&&!c.hasOwnProperty(be))switch(be){case"selected":r.selected=!1;break;default:Ie(r,s,be,null,c,j)}for(k in c)if(j=c[k],L=a[k],c.hasOwnProperty(k)&&j!==L&&(j!=null||L!=null))switch(k){case"selected":r.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Ie(r,s,k,j,c,L)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in a)j=a[pe],a.hasOwnProperty(pe)&&j!=null&&!c.hasOwnProperty(pe)&&Ie(r,s,pe,null,c,j);for(B in c)if(j=c[B],L=a[B],c.hasOwnProperty(B)&&j!==L&&(j!=null||L!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,s));break;default:Ie(r,s,B,j,c,L)}return;default:if(hc(s)){for(var He in a)j=a[He],a.hasOwnProperty(He)&&j!==void 0&&!c.hasOwnProperty(He)&&Zf(r,s,He,void 0,c,j);for(P in c)j=c[P],L=a[P],!c.hasOwnProperty(P)||j===L||j===void 0&&L===void 0||Zf(r,s,P,j,c,L);return}}for(var D in a)j=a[D],a.hasOwnProperty(D)&&j!=null&&!c.hasOwnProperty(D)&&Ie(r,s,D,null,c,j);for(F in c)j=c[F],L=a[F],!c.hasOwnProperty(F)||j===L||j==null&&L==null||Ie(r,s,F,j,c,L)}var Wf=null,ed=null;function Ga(r){return r.nodeType===9?r:r.ownerDocument}function xy(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sy(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function td(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var nd=null;function US(){var r=window.event;return r&&r.type==="popstate"?r===nd?!1:(nd=r,!0):(nd=null,!1)}var wy=typeof setTimeout=="function"?setTimeout:void 0,IS=typeof clearTimeout=="function"?clearTimeout:void 0,Ty=typeof Promise=="function"?Promise:void 0,HS=typeof queueMicrotask=="function"?queueMicrotask:typeof Ty<"u"?function(r){return Ty.resolve(null).then(r).catch($S)}:wy;function $S(r){setTimeout(function(){throw r})}function Fr(r){return r==="head"}function My(r,s){var a=s,c=0,h=0;do{var m=a.nextSibling;if(r.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<c&&8>c){a=c;var x=r.ownerDocument;if(a&1&&ol(x.documentElement),a&2&&ol(x.body),a&4)for(a=x.head,ol(a),x=a.firstChild;x;){var w=x.nextSibling,k=x.nodeName;x[So]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&x.rel.toLowerCase()==="stylesheet"||a.removeChild(x),x=w}}if(h===0){r.removeChild(m),pl(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:c=a.charCodeAt(0)-48;else c=0;a=m}while(a);pl(s)}function rd(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":rd(a),lc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}r.removeChild(a)}}function PS(r,s,a,c){for(;r.nodeType===1;){var h=a;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[So])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==h.rel||r.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||r.getAttribute("title")!==(h.title==null?null:h.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(h.src==null?null:h.src)||r.getAttribute("type")!==(h.type==null?null:h.type)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Ln(r.nextSibling),r===null)break}return null}function QS(r,s,a){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Ln(r.nextSibling),r===null))return null;return r}function id(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function FS(r,s){var a=r.ownerDocument;if(r.data!=="$?"||a.readyState==="complete")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function Ln(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var sd=null;function Cy(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}function ky(r,s,a){switch(s=Ga(a),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function ol(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);lc(r)}var kn=new Map,Ey=new Set;function Ya(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var xr=X.d;X.d={f:GS,r:YS,D:KS,C:JS,L:XS,m:ZS,X:ew,S:WS,M:tw};function GS(){var r=xr.f(),s=Va();return r||s}function YS(r){var s=ps(r);s!==null&&s.tag===5&&s.type==="form"?Gm(s):xr.r(r)}var Ys=typeof document>"u"?null:document;function Ay(r,s,a){var c=Ys;if(c&&typeof s=="string"&&s){var h=vn(s);h='link[rel="'+r+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Ey.has(h)||(Ey.add(h),r={rel:r,crossOrigin:a,href:s},c.querySelector(h)===null&&(s=c.createElement("link"),At(s,"link",r),mt(s),c.head.appendChild(s)))}}function KS(r){xr.D(r),Ay("dns-prefetch",r,null)}function JS(r,s){xr.C(r,s),Ay("preconnect",r,s)}function XS(r,s,a){xr.L(r,s,a);var c=Ys;if(c&&r&&s){var h='link[rel="preload"][as="'+vn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+vn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+vn(a.imageSizes)+'"]')):h+='[href="'+vn(r)+'"]';var m=h;switch(s){case"style":m=Ks(r);break;case"script":m=Js(r)}kn.has(m)||(r=g({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:r,as:s},a),kn.set(m,r),c.querySelector(h)!==null||s==="style"&&c.querySelector(ll(m))||s==="script"&&c.querySelector(al(m))||(s=c.createElement("link"),At(s,"link",r),mt(s),c.head.appendChild(s)))}}function ZS(r,s){xr.m(r,s);var a=Ys;if(a&&r){var c=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+vn(c)+'"][href="'+vn(r)+'"]',m=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Js(r)}if(!kn.has(m)&&(r=g({rel:"modulepreload",href:r},s),kn.set(m,r),a.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(al(m)))return}c=a.createElement("link"),At(c,"link",r),mt(c),a.head.appendChild(c)}}}function WS(r,s,a){xr.S(r,s,a);var c=Ys;if(c&&r){var h=ms(c).hoistableStyles,m=Ks(r);s=s||"default";var x=h.get(m);if(!x){var w={loading:0,preload:null};if(x=c.querySelector(ll(m)))w.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":s},a),(a=kn.get(m))&&od(r,a);var k=x=c.createElement("link");mt(k),At(k,"link",r),k._p=new Promise(function(B,P){k.onload=B,k.onerror=P}),k.addEventListener("load",function(){w.loading|=1}),k.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Ka(x,s,c)}x={type:"stylesheet",instance:x,count:1,state:w},h.set(m,x)}}}function ew(r,s){xr.X(r,s);var a=Ys;if(a&&r){var c=ms(a).hoistableScripts,h=Js(r),m=c.get(h);m||(m=a.querySelector(al(h)),m||(r=g({src:r,async:!0},s),(s=kn.get(h))&&ld(r,s),m=a.createElement("script"),mt(m),At(m,"link",r),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(h,m))}}function tw(r,s){xr.M(r,s);var a=Ys;if(a&&r){var c=ms(a).hoistableScripts,h=Js(r),m=c.get(h);m||(m=a.querySelector(al(h)),m||(r=g({src:r,async:!0,type:"module"},s),(s=kn.get(h))&&ld(r,s),m=a.createElement("script"),mt(m),At(m,"link",r),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(h,m))}}function Oy(r,s,a,c){var h=(h=ee.current)?Ya(h):null;if(!h)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Ks(a.href),a=ms(h).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){r=Ks(a.href);var m=ms(h).hoistableStyles,x=m.get(r);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,x),(m=h.querySelector(ll(r)))&&!m._p&&(x.instance=m,x.state.loading=5),kn.has(r)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},kn.set(r,a),m||nw(h,r,a,x.state))),s&&c===null)throw Error(i(528,""));return x}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Js(a),a=ms(h).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Ks(r){return'href="'+vn(r)+'"'}function ll(r){return'link[rel="stylesheet"]['+r+"]"}function Ny(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function nw(r,s,a,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),At(s,"link",a),mt(s),r.head.appendChild(s))}function Js(r){return'[src="'+vn(r)+'"]'}function al(r){return"script[async]"+r}function Ry(r,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+vn(a.href)+'"]');if(c)return s.instance=c,mt(c),c;var h=g({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),mt(c),At(c,"style",h),Ka(c,a.precedence,r),s.instance=c;case"stylesheet":h=Ks(a.href);var m=r.querySelector(ll(h));if(m)return s.state.loading|=4,s.instance=m,mt(m),m;c=Ny(a),(h=kn.get(h))&&od(c,h),m=(r.ownerDocument||r).createElement("link"),mt(m);var x=m;return x._p=new Promise(function(w,k){x.onload=w,x.onerror=k}),At(m,"link",c),s.state.loading|=4,Ka(m,a.precedence,r),s.instance=m;case"script":return m=Js(a.src),(h=r.querySelector(al(m)))?(s.instance=h,mt(h),h):(c=a,(h=kn.get(m))&&(c=g({},a),ld(c,h)),r=r.ownerDocument||r,h=r.createElement("script"),mt(h),At(h,"link",c),r.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Ka(c,a.precedence,r));return s.instance}function Ka(r,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,m=h,x=0;x<c.length;x++){var w=c[x];if(w.dataset.precedence===s)m=w;else if(m!==h)break}m?m.parentNode.insertBefore(r,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(r,s.firstChild))}function od(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function ld(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Ja=null;function Dy(r,s,a){if(Ja===null){var c=new Map,h=Ja=new Map;h.set(a,c)}else h=Ja,c=h.get(a),c||(c=new Map,h.set(a,c));if(c.has(r))return c;for(c.set(r,null),a=a.getElementsByTagName(r),h=0;h<a.length;h++){var m=a[h];if(!(m[So]||m[tt]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(s)||"";x=r+x;var w=c.get(x);w?w.push(m):c.set(x,[m])}}return c}function zy(r,s,a){r=r.ownerDocument||r,r.head.insertBefore(a,s==="title"?r.querySelector("head > title"):null)}function rw(r,s,a){if(a===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function _y(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var ul=null;function iw(){}function sw(r,s,a){if(ul===null)throw Error(i(475));var c=ul;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=Ks(a.href),m=r.querySelector(ll(h));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=Xa.bind(c),r.then(c,c)),s.state.loading|=4,s.instance=m,mt(m);return}m=r.ownerDocument||r,a=Ny(a),(h=kn.get(h))&&od(a,h),m=m.createElement("link"),mt(m);var x=m;x._p=new Promise(function(w,k){x.onload=w,x.onerror=k}),At(m,"link",a),s.instance=m}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Xa.bind(c),r.addEventListener("load",s),r.addEventListener("error",s))}}function ow(){if(ul===null)throw Error(i(475));var r=ul;return r.stylesheets&&r.count===0&&ad(r,r.stylesheets),0<r.count?function(s){var a=setTimeout(function(){if(r.stylesheets&&ad(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(a)}}:null}function Xa(){if(this.count--,this.count===0){if(this.stylesheets)ad(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Za=null;function ad(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Za=new Map,s.forEach(lw,r),Za=null,Xa.call(r))}function lw(r,s){if(!(s.state.loading&4)){var a=Za.get(r);if(a)var c=a.get(null);else{a=new Map,Za.set(r,a);for(var h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var x=h[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),c=x)}c&&a.set(null,c)}h=s.instance,x=h.getAttribute("data-precedence"),m=a.get(x)||c,m===c&&a.set(null,h),a.set(x,h),this.count++,c=Xa.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),m?m.parentNode.insertBefore(h,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(h,r.firstChild)),s.state.loading|=4}}var cl={$$typeof:U,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function aw(r,s,a,c,h,m,x,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xo(0),this.hiddenUpdates=xo(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function By(r,s,a,c,h,m,x,w,k,B,P,F){return r=new aw(r,s,a,x,w,k,B,F),s=1,m===!0&&(s|=24),m=ln(3,null,null,s),r.current=m,m.stateNode=r,s=Hc(),s.refCount++,r.pooledCache=s,s.refCount++,m.memoizedState={element:c,isDehydrated:a,cache:s},Fc(m),r}function jy(r){return r?(r=Es,r):Es}function Ly(r,s,a,c,h,m){h=jy(h),c.context===null?c.context=h:c.pendingContext=h,c=zr(s),c.payload={element:a},m=m===void 0?null:m,m!==null&&(c.callback=m),a=_r(r,c,s),a!==null&&(dn(a,r,s),Uo(a,r,s))}function qy(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function ud(r,s){qy(r,s),(r=r.alternate)&&qy(r,s)}function Vy(r){if(r.tag===13){var s=ks(r,67108864);s!==null&&dn(s,r,67108864),ud(r,67108864)}}var Wa=!0;function uw(r,s,a,c){var h=O.T;O.T=null;var m=X.p;try{X.p=2,cd(r,s,a,c)}finally{X.p=m,O.T=h}}function cw(r,s,a,c){var h=O.T;O.T=null;var m=X.p;try{X.p=8,cd(r,s,a,c)}finally{X.p=m,O.T=h}}function cd(r,s,a,c){if(Wa){var h=fd(c);if(h===null)Xf(r,s,c,eu,a),Iy(r,c);else if(dw(h,r,s,a,c))c.stopPropagation();else if(Iy(r,c),s&4&&-1<fw.indexOf(r)){for(;h!==null;){var m=ps(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=Pn(m.pendingLanes);if(x!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;x;){var k=1<<31-Mt(x);w.entanglements[1]|=k,x&=~k}Kn(m),(qe&6)===0&&(La=Dt()+500,rl(0))}}break;case 13:w=ks(m,2),w!==null&&dn(w,m,2),Va(),ud(m,2)}if(m=fd(c),m===null&&Xf(r,s,c,eu,a),m===h)break;h=m}h!==null&&c.stopPropagation()}else Xf(r,s,c,null,a)}}function fd(r){return r=mc(r),dd(r)}var eu=null;function dd(r){if(eu=null,r=hs(r),r!==null){var s=l(r);if(s===null)r=null;else{var a=s.tag;if(a===13){if(r=u(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return eu=r,null}function Uy(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ql()){case yn:return 2;case Fl:return 8;case us:case It:return 32;case ir:return 268435456;default:return 32}default:return 32}}var hd=!1,Gr=null,Yr=null,Kr=null,fl=new Map,dl=new Map,Jr=[],fw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Iy(r,s){switch(r){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":fl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(s.pointerId)}}function hl(r,s,a,c,h,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[h]},s!==null&&(s=ps(s),s!==null&&Vy(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),r)}function dw(r,s,a,c,h){switch(s){case"focusin":return Gr=hl(Gr,r,s,a,c,h),!0;case"dragenter":return Yr=hl(Yr,r,s,a,c,h),!0;case"mouseover":return Kr=hl(Kr,r,s,a,c,h),!0;case"pointerover":var m=h.pointerId;return fl.set(m,hl(fl.get(m)||null,r,s,a,c,h)),!0;case"gotpointercapture":return m=h.pointerId,dl.set(m,hl(dl.get(m)||null,r,s,a,c,h)),!0}return!1}function Hy(r){var s=hs(r.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){r.blockedOn=s,ct(r.priority,function(){if(a.tag===13){var c=fn();c=it(c);var h=ks(a,c);h!==null&&dn(h,a,c),ud(a,c)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function tu(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=fd(r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);pc=c,a.target.dispatchEvent(c),pc=null}else return s=ps(a),s!==null&&Vy(s),r.blockedOn=a,!1;s.shift()}return!0}function $y(r,s,a){tu(r)&&a.delete(s)}function hw(){hd=!1,Gr!==null&&tu(Gr)&&(Gr=null),Yr!==null&&tu(Yr)&&(Yr=null),Kr!==null&&tu(Kr)&&(Kr=null),fl.forEach($y),dl.forEach($y)}function nu(r,s){r.blockedOn===s&&(r.blockedOn=null,hd||(hd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,hw)))}var ru=null;function Py(r){ru!==r&&(ru=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ru===r&&(ru=null);for(var s=0;s<r.length;s+=3){var a=r[s],c=r[s+1],h=r[s+2];if(typeof c!="function"){if(dd(c||a)===null)continue;break}var m=ps(a);m!==null&&(r.splice(s,3),s-=3,df(m,{pending:!0,data:h,method:a.method,action:c},c,h))}}))}function pl(r){function s(k){return nu(k,r)}Gr!==null&&nu(Gr,r),Yr!==null&&nu(Yr,r),Kr!==null&&nu(Kr,r),fl.forEach(s),dl.forEach(s);for(var a=0;a<Jr.length;a++){var c=Jr[a];c.blockedOn===r&&(c.blockedOn=null)}for(;0<Jr.length&&(a=Jr[0],a.blockedOn===null);)Hy(a),a.blockedOn===null&&Jr.shift();if(a=(r.ownerDocument||r).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var h=a[c],m=a[c+1],x=h[Fe]||null;if(typeof m=="function")x||Py(a);else if(x){var w=null;if(m&&m.hasAttribute("formAction")){if(h=m,x=m[Fe]||null)w=x.formAction;else if(dd(h)!==null)continue}else w=x.action;typeof w=="function"?a[c+1]=w:(a.splice(c,3),c-=3),Py(a)}}}function pd(r){this._internalRoot=r}iu.prototype.render=pd.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,c=fn();Ly(a,c,r,s,null,null)},iu.prototype.unmount=pd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Ly(r.current,2,null,r,null,null),Va(),s[pt]=null}};function iu(r){this._internalRoot=r}iu.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ci();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Jr.length&&s!==0&&s<Jr[a].priority;a++);Jr.splice(a,0,r),a===0&&Hy(r)}};var Qy=e.version;if(Qy!=="19.1.0")throw Error(i(527,Qy,"19.1.0"));X.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=d(s),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var pw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{$n=su.inject(pw),Ht=su}catch{}}return gl.createRoot=function(r,s){if(!o(r))throw Error(i(299));var a=!1,c="",h=lg,m=ag,x=ug,w=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=By(r,1,!1,null,null,a,c,h,m,x,w,null),r[pt]=s.current,Jf(r),new pd(s)},gl.hydrateRoot=function(r,s,a){if(!o(r))throw Error(i(299));var c=!1,h="",m=lg,x=ag,w=ug,k=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(k=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),s=By(r,1,!0,s,a??null,c,h,m,x,w,k,B),s.context=jy(null),a=s.current,c=fn(),c=it(c),h=zr(c),h.callback=null,_r(a,h,c),a=c,s.current.lanes=a,Or(s,a),Kn(s),r[pt]=s.current,Jf(r),new iu(s)},gl.version="19.1.0",gl}var t0;function Tw(){if(t0)return yd.exports;t0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),yd.exports=ww(),yd.exports}var Mw=Tw();const Qi="1.21.1-alpha.1";var Wn=[],An=[],Cw=Uint8Array,Sd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Xs=0,kw=Sd.length;Xs<kw;++Xs)Wn[Xs]=Sd[Xs],An[Sd.charCodeAt(Xs)]=Xs;An[45]=62;An[95]=63;function Ew(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var i=t===e?0:4-t%4;return[t,i]}function Aw(n,e,t){return(e+t)*3/4-t}function El(n){var e,t=Ew(n),i=t[0],o=t[1],l=new Cw(Aw(n,i,o)),u=0,f=o>0?i-4:i,d;for(d=0;d<f;d+=4)e=An[n.charCodeAt(d)]<<18|An[n.charCodeAt(d+1)]<<12|An[n.charCodeAt(d+2)]<<6|An[n.charCodeAt(d+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=e&255;return o===2&&(e=An[n.charCodeAt(d)]<<2|An[n.charCodeAt(d+1)]>>4,l[u++]=e&255),o===1&&(e=An[n.charCodeAt(d)]<<10|An[n.charCodeAt(d+1)]<<4|An[n.charCodeAt(d+2)]>>2,l[u++]=e>>8&255,l[u++]=e&255),l}function Ow(n){return Wn[n>>18&63]+Wn[n>>12&63]+Wn[n>>6&63]+Wn[n&63]}function Nw(n,e,t){for(var i,o=[],l=e;l<t;l+=3)i=(n[l]<<16&16711680)+(n[l+1]<<8&65280)+(n[l+2]&255),o.push(Ow(i));return o.join("")}function Al(n){for(var e,t=n.length,i=t%3,o=[],l=16383,u=0,f=t-i;u<f;u+=l)o.push(Nw(n,u,u+l>f?f:u+l));return i===1?(e=n[t-1],o.push(Wn[e>>2]+Wn[e<<4&63]+"==")):i===2&&(e=(n[t-2]<<8)+n[t-1],o.push(Wn[e>>10]+Wn[e>>4&63]+Wn[e<<2&63]+"=")),o.join("")}function rn(n){if(n===void 0)return{};if(!Ub(n))throw new Error(`The arguments to a Convex function must be an object. Received: ${n}`);return n}function Vb(n){if(typeof n>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof n!="string")throw new Error(`Invalid deployment address: found ${n}".`);if(!(n.startsWith("http:")||n.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${n}".`);try{new URL(n)}catch{throw new Error(`Invalid deployment address: "${n}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(n.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${n}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function Ub(n){const e=typeof n=="object",t=Object.getPrototypeOf(n),i=t===null||t===Object.prototype||t?.constructor?.name==="Object";return e&&i}const Ib=!0,ao=BigInt("-9223372036854775808"),Nh=BigInt("9223372036854775807"),Wd=BigInt("0"),Rw=BigInt("8"),Dw=BigInt("256");function Hb(n){return Number.isNaN(n)||!Number.isFinite(n)||Object.is(n,-0)}function zw(n){n<Wd&&(n-=ao+ao);let e=n.toString(16);e.length%2===1&&(e="0"+e);const t=new Uint8Array(new ArrayBuffer(8));let i=0;for(const o of e.match(/.{2}/g).reverse())t.set([parseInt(o,16)],i++),n>>=Rw;return Al(t)}function _w(n){const e=El(n);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let t=Wd,i=Wd;for(const o of e)t+=BigInt(o)*Dw**i,i++;return t>Nh&&(t+=ao+ao),t}function Bw(n){if(n<ao||Nh<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,n,!0),Al(new Uint8Array(e))}function jw(n){const e=El(n);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const Lw=DataView.prototype.setBigInt64?Bw:zw,qw=DataView.prototype.getBigInt64?jw:_w,n0=1024;function $b(n){if(n.length>n0)throw new Error(`Field name ${n} exceeds maximum field name length ${n0}.`);if(n.startsWith("$"))throw new Error(`Field name ${n} starts with a '$', which is reserved.`);for(let e=0;e<n.length;e+=1){const t=n.charCodeAt(e);if(t<32||t>=127)throw new Error(`Field name ${n} has invalid character '${n[e]}': Field names can only contain non-control ASCII characters`)}}function Un(n){if(n===null||typeof n=="boolean"||typeof n=="number"||typeof n=="string")return n;if(Array.isArray(n))return n.map(i=>Un(i));if(typeof n!="object")throw new Error(`Unexpected type of ${n}`);const e=Object.entries(n);if(e.length===1){const i=e[0][0];if(i==="$bytes"){if(typeof n.$bytes!="string")throw new Error(`Malformed $bytes field on ${n}`);return El(n.$bytes).buffer}if(i==="$integer"){if(typeof n.$integer!="string")throw new Error(`Malformed $integer field on ${n}`);return qw(n.$integer)}if(i==="$float"){if(typeof n.$float!="string")throw new Error(`Malformed $float field on ${n}`);const o=El(n.$float);if(o.byteLength!==8)throw new Error(`Received ${o.byteLength} bytes, expected 8 for $float`);const u=new DataView(o.buffer).getFloat64(0,Ib);if(!Hb(u))throw new Error(`Float ${u} should be encoded as a number`);return u}if(i==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(i==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const t={};for(const[i,o]of Object.entries(n))$b(i),t[i]=Un(o);return t}function wl(n){return JSON.stringify(n,(e,t)=>t===void 0?"undefined":typeof t=="bigint"?`${t.toString()}n`:t)}function eh(n,e,t,i){if(n===void 0){const u=t&&` (present at path ${t} in original object ${wl(e)})`;throw new Error(`undefined is not a valid Convex value${u}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(n===null)return n;if(typeof n=="bigint"){if(n<ao||Nh<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);return{$integer:Lw(n)}}if(typeof n=="number")if(Hb(n)){const u=new ArrayBuffer(8);return new DataView(u).setFloat64(0,n,Ib),{$float:Al(new Uint8Array(u))}}else return n;if(typeof n=="boolean"||typeof n=="string")return n;if(n instanceof ArrayBuffer)return{$bytes:Al(new Uint8Array(n))};if(Array.isArray(n))return n.map((u,f)=>eh(u,e,t+`[${f}]`));if(n instanceof Set)throw new Error(wd(t,"Set",[...n],e));if(n instanceof Map)throw new Error(wd(t,"Map",[...n],e));if(!Ub(n)){const u=n?.constructor?.name,f=u?`${u} `:"";throw new Error(wd(t,f,n,e))}const o={},l=Object.entries(n);l.sort(([u,f],[d,p])=>u===d?0:u<d?-1:1);for(const[u,f]of l)f!==void 0&&($b(u),o[u]=eh(f,e,t+`.${u}`));return o}function wd(n,e,t,i){return n?`${e}${wl(t)} is not a supported Convex type (present at path ${n} in original object ${wl(i)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${wl(t)} is not a supported Convex type.`}function Qt(n){return eh(n,n,"")}var Vw=Object.defineProperty,Uw=(n,e,t)=>e in n?Vw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Td=(n,e,t)=>Uw(n,typeof e!="symbol"?e+"":e,t),r0,i0;const Iw=Symbol.for("ConvexError");class si extends(i0=Error,r0=Iw,i0){constructor(e){super(typeof e=="string"?e:wl(e)),Td(this,"name","ConvexError"),Td(this,"data"),Td(this,r0,!0),this.data=e}}var Hw=Object.defineProperty,$w=(n,e,t)=>e in n?Hw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,s0=(n,e,t)=>$w(n,typeof e!="symbol"?e+"":e,t);const Pw="color:rgb(0, 145, 255)";function Pb(n){switch(n){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class Qw{constructor(e){s0(this,"_onLogLineFuncs"),s0(this,"_verbose"),this._onLogLineFuncs={},this._verbose=e.verbose}addLogLineListener(e){let t=Math.random().toString(36).substring(2,15);for(let i=0;i<10&&this._onLogLineFuncs[t]!==void 0;i++)t=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[t]=e,()=>{delete this._onLogLineFuncs[t]}}logVerbose(...e){if(this._verbose)for(const t of Object.values(this._onLogLineFuncs))t("debug",`${new Date().toISOString()}`,...e)}log(...e){for(const t of Object.values(this._onLogLineFuncs))t("info",...e)}warn(...e){for(const t of Object.values(this._onLogLineFuncs))t("warn",...e)}error(...e){for(const t of Object.values(this._onLogLineFuncs))t("error",...e)}}function Rh(n){const e=new Qw(n);return e.addLogLineListener((t,...i)=>{switch(t){case"debug":console.debug(...i);break;case"info":console.log(...i);break;case"warn":console.warn(...i);break;case"error":console.error(...i);break;default:console.log(...i)}}),e}function oi(n,e,t,i,o){const l=Pb(t);if(typeof o=="object"&&(o=`ConvexError ${JSON.stringify(o.errorData,null,2)}`),e==="info"){const u=o.match(/^\[.*?\] /);if(u===null){n.error(`[CONVEX ${l}(${i})] Could not parse console.log`);return}const f=o.slice(1,u[0].length-2),d=o.slice(u[0].length);n.log(`%c[CONVEX ${l}(${i})] [${f}]`,Pw,d)}else n.error(`[CONVEX ${l}(${i})] ${o}`)}function Fw(n,e){const t=`[CONVEX FATAL ERROR] ${e}`;return n.error(t),new Error(t)}function ro(n,e,t){return`[CONVEX ${Pb(n)}(${e})] ${t.errorMessage}
  Called by client`}function th(n,e){return e.data=n.errorData,e}function ku(n){const e=n.split(":");let t,i;return e.length===1?(t=e[0],i="default"):(t=e.slice(0,e.length-1).join(":"),i=e[e.length-1]),t.endsWith(".js")&&(t=t.slice(0,-3)),`${t}:${i}`}function Xi(n,e){return JSON.stringify({udfPath:ku(n),args:Qt(e)})}var Gw=Object.defineProperty,Yw=(n,e,t)=>e in n?Gw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Jn=(n,e,t)=>Yw(n,typeof e!="symbol"?e+"":e,t);class Kw{constructor(){Jn(this,"nextQueryId"),Jn(this,"querySetVersion"),Jn(this,"querySet"),Jn(this,"queryIdToToken"),Jn(this,"identityVersion"),Jn(this,"auth"),Jn(this,"outstandingQueriesOlderThanRestart"),Jn(this,"outstandingAuthOlderThanRestart"),Jn(this,"paused"),Jn(this,"pendingQuerySetModifications"),this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1,this.paused=!1,this.pendingQuerySetModifications=new Map}hasSyncedPastLastReconnect(){return this.outstandingQueriesOlderThanRestart.size===0&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(e,t,i,o){const l=ku(e),u=Xi(l,t),f=this.querySet.get(u);if(f!==void 0)return f.numSubscribers+=1,{queryToken:u,modification:null,unsubscribe:()=>this.removeSubscriber(u)};{const d=this.nextQueryId++,p={id:d,canonicalizedUdfPath:l,args:t,numSubscribers:1,journal:i,componentPath:o};this.querySet.set(u,p),this.queryIdToToken.set(d,u);const g=this.querySetVersion,y=this.querySetVersion+1,b={type:"Add",queryId:d,udfPath:l,args:[Qt(t)],journal:i,componentPath:o};return this.paused?this.pendingQuerySetModifications.set(d,b):this.querySetVersion=y,{queryToken:u,modification:{type:"ModifyQuerySet",baseVersion:g,newVersion:y,modifications:[b]},unsubscribe:()=>this.removeSubscriber(u)}}}transition(e){for(const t of e.modifications)switch(t.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);const i=t.journal;if(i!==void 0){const o=this.queryIdToToken.get(t.queryId);o!==void 0&&(this.querySet.get(o).journal=i)}break}case"QueryRemoved":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);break}default:throw new Error(`Invalid modification ${t.type}`)}}queryId(e,t){const i=ku(e),o=Xi(i,t),l=this.querySet.get(o);return l!==void 0?l.id:null}isCurrentOrNewerAuthVersion(e){return e>=this.identityVersion}setAuth(e){this.auth={tokenType:"User",value:e};const t=this.identityVersion;return this.paused||(this.identityVersion=t+1),{type:"Authenticate",baseVersion:t,...this.auth}}setAdminAuth(e,t){const i={tokenType:"Admin",value:e,impersonating:t};this.auth=i;const o=this.identityVersion;return this.paused||(this.identityVersion=o+1),{type:"Authenticate",baseVersion:o,...i}}clearAuth(){this.auth=void 0,this.markAuthCompletion();const e=this.identityVersion;return this.paused||(this.identityVersion=e+1),{type:"Authenticate",tokenType:"None",baseVersion:e}}hasAuth(){return!!this.auth}isNewAuth(e){return this.auth?.value!==e}queryPath(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).canonicalizedUdfPath:null}queryArgs(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).args:null}queryToken(e){return this.queryIdToToken.get(e)??null}queryJournal(e){return this.querySet.get(e)?.journal}restart(e){this.unpause(),this.outstandingQueriesOlderThanRestart.clear();const t=[];for(const l of this.querySet.values()){const u={type:"Add",queryId:l.id,udfPath:l.canonicalizedUdfPath,args:[Qt(l.args)],journal:l.journal,componentPath:l.componentPath};t.push(u),e.has(l.id)||this.outstandingQueriesOlderThanRestart.add(l.id)}this.querySetVersion=1;const i={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:t};if(!this.auth)return this.identityVersion=0,[i,void 0];this.outstandingAuthOlderThanRestart=!0;const o={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[i,o]}pause(){this.paused=!0}resume(){const e=this.pendingQuerySetModifications.size>0?{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:Array.from(this.pendingQuerySetModifications.values())}:void 0,t=this.auth!==void 0?{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}:void 0;return this.unpause(),[e,t]}unpause(){this.paused=!1,this.pendingQuerySetModifications.clear()}removeSubscriber(e){const t=this.querySet.get(e);if(t.numSubscribers>1)return t.numSubscribers-=1,null;{this.querySet.delete(e),this.queryIdToToken.delete(t.id),this.outstandingQueriesOlderThanRestart.delete(t.id);const i=this.querySetVersion,o=this.querySetVersion+1,l={type:"Remove",queryId:t.id};return this.paused?this.pendingQuerySetModifications.has(t.id)?this.pendingQuerySetModifications.delete(t.id):this.pendingQuerySetModifications.set(t.id,l):this.querySetVersion=o,{type:"ModifyQuerySet",baseVersion:i,newVersion:o,modifications:[l]}}}}var Jw=Object.defineProperty,Xw=(n,e,t)=>e in n?Jw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,o0=(n,e,t)=>Xw(n,typeof e!="symbol"?e+"":e,t);class Zw{constructor(e){this.logger=e,o0(this,"inflightRequests"),o0(this,"requestsOlderThanRestart"),this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(e,t){return new Promise(o=>{const l=t?"Requested":"NotSent";this.inflightRequests.set(e.requestId,{message:e,status:{status:l,requestedAt:new Date,onResult:o}})})}onResponse(e){const t=this.inflightRequests.get(e.requestId);if(t===void 0||t.status.status==="Completed")return null;const i=t.message.type==="Mutation"?"mutation":"action",o=t.message.udfPath;for(const d of e.logLines)oi(this.logger,"info",i,o,d);const l=t.status;let u,f;if(e.success)u={success:!0,logLines:e.logLines,value:Un(e.result)},f=()=>l.onResult(u);else{const d=e.result,{errorData:p}=e;oi(this.logger,"error",i,o,d),u={success:!1,errorMessage:d,errorData:p!==void 0?Un(p):void 0,logLines:e.logLines},f=()=>l.onResult(u)}return e.type==="ActionResponse"||!e.success?(f(),this.inflightRequests.delete(e.requestId),this.requestsOlderThanRestart.delete(e.requestId),{requestId:e.requestId,result:u}):(t.status={status:"Completed",result:u,ts:e.ts,onResolve:f},null)}removeCompleted(e){const t=new Map;for(const[i,o]of this.inflightRequests.entries()){const l=o.status;l.status==="Completed"&&l.ts.lessThanOrEqual(e)&&(l.onResolve(),t.set(i,l.result),this.inflightRequests.delete(i),this.requestsOlderThanRestart.delete(i))}return t}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());const e=[];for(const[t,i]of this.inflightRequests){if(i.status.status==="NotSent"){i.status.status="Requested",e.push(i.message);continue}if(i.message.type==="Mutation")e.push(i.message);else{if(this.inflightRequests.delete(t),this.requestsOlderThanRestart.delete(t),i.status.status==="Completed")throw new Error("Action should never be in 'Completed' state");i.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return e}resume(){const e=[];for(const[,t]of this.inflightRequests)if(t.status.status==="NotSent"){t.status.status="Requested",e.push(t.message);continue}return e}hasIncompleteRequests(){for(const e of this.inflightRequests.values())if(e.status.status==="Requested")return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return this.requestsOlderThanRestart.size===0}timeOfOldestInflightRequest(){if(this.inflightRequests.size===0)return null;let e=Date.now();for(const t of this.inflightRequests.values())t.status.status!=="Completed"&&t.status.requestedAt.getTime()<e&&(e=t.status.requestedAt.getTime());return new Date(e)}}const Ol=Symbol.for("functionName"),Ww=Symbol.for("toReferencePath");function eT(n){return n[Ww]??null}function tT(n){return n.startsWith("function://")}function nT(n){let e;if(typeof n=="string")tT(n)?e={functionHandle:n}:e={name:n};else if(n[Ol])e={name:n[Ol]};else{const t=eT(n);if(!t)throw new Error(`${n} is not a functionReference`);e={reference:t}}return e}function at(n){const e=nT(n);if(e.name===void 0)throw e.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${e.functionHandle}`):e.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${e.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(e)}`);if(typeof n=="string")return n;const t=n[Ol];if(!t)throw new Error(`${n} is not a functionReference`);return t}function Qb(n){return{[Ol]:n}}function Fb(n=[]){const e={get(t,i){if(typeof i=="string"){const o=[...n,i];return Fb(o)}else if(i===Ol){if(n.length<2){const u=["api",...n].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${u}\``)}const o=n.slice(0,-1).join("/"),l=n[n.length-1];return l==="default"?o:o+":"+l}else return i===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}const rT=Fb();var iT=Object.defineProperty,sT=(n,e,t)=>e in n?iT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Eu=(n,e,t)=>sT(n,typeof e!="symbol"?e+"":e,t);class Nl{constructor(e){Eu(this,"queryResults"),Eu(this,"modifiedQueries"),this.queryResults=e,this.modifiedQueries=[]}getQuery(e,...t){const i=rn(t[0]),o=at(e),l=this.queryResults.get(Xi(o,i));if(l!==void 0)return Nl.queryValue(l.result)}getAllQueries(e){const t=[],i=at(e);for(const o of this.queryResults.values())o.udfPath===ku(i)&&t.push({args:o.args,value:Nl.queryValue(o.result)});return t}setQuery(e,t,i){const o=rn(t),l=at(e),u=Xi(l,o);let f;i===void 0?f=void 0:f={success:!0,value:i,logLines:[]};const d={udfPath:l,args:o,result:f};this.queryResults.set(u,d),this.modifiedQueries.push(u)}static queryValue(e){if(e!==void 0)return e.success?e.value:void 0}}class oT{constructor(){Eu(this,"queryResults"),Eu(this,"optimisticUpdates"),this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(e,t){this.optimisticUpdates=this.optimisticUpdates.filter(u=>!t.has(u.mutationId));const i=this.queryResults;this.queryResults=new Map(e);const o=new Nl(this.queryResults);for(const u of this.optimisticUpdates)u.update(o);const l=[];for(const[u,f]of this.queryResults){const d=i.get(u);(d===void 0||d.result!==f.result)&&l.push(u)}return l}applyOptimisticUpdate(e,t){this.optimisticUpdates.push({update:e,mutationId:t});const i=new Nl(this.queryResults);return e(i),i.modifiedQueries}queryResult(e){const t=this.queryResults.get(e);if(t===void 0)return;const i=t.result;if(i!==void 0){if(i.success)return i.value;throw i.errorData!==void 0?th(i,new si(ro("query",t.udfPath,i))):new Error(ro("query",t.udfPath,i))}}hasQueryResult(e){return this.queryResults.get(e)!==void 0}queryLogs(e){return this.queryResults.get(e)?.result?.logLines}}var lT=Object.defineProperty,aT=(n,e,t)=>e in n?lT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Md=(n,e,t)=>aT(n,typeof e!="symbol"?e+"":e,t);class hn{constructor(e,t){Md(this,"low"),Md(this,"high"),Md(this,"__isUnsignedLong__"),this.low=e|0,this.high=t|0,this.__isUnsignedLong__=!0}static isLong(e){return(e&&e.__isUnsignedLong__)===!0}static fromBytesLE(e){return new hn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24)}toBytesLE(){const e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}static fromNumber(e){return isNaN(e)||e<0?l0:e>=uT?cT:new hn(e%Tl|0,e/Tl|0)}toString(){return(BigInt(this.high)*BigInt(Tl)+BigInt(this.low)).toString()}equals(e){return hn.isLong(e)||(e=hn.fromValue(e)),this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}notEquals(e){return!this.equals(e)}comp(e){return hn.isLong(e)||(e=hn.fromValue(e)),this.equals(e)?0:e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(e){return this.comp(e)<=0}static fromValue(e){return typeof e=="number"?hn.fromNumber(e):new hn(e.low,e.high)}}const l0=new hn(0,0),a0=65536,Tl=a0*a0,uT=Tl*Tl,cT=new hn(-1,-1);var fT=Object.defineProperty,dT=(n,e,t)=>e in n?fT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ou=(n,e,t)=>dT(n,typeof e!="symbol"?e+"":e,t);class u0{constructor(e,t){ou(this,"version"),ou(this,"remoteQuerySet"),ou(this,"queryPath"),ou(this,"logger"),this.version={querySet:0,ts:hn.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=e,this.logger=t}transition(e){const t=e.startVersion;if(this.version.querySet!==t.querySet||this.version.ts.notEquals(t.ts)||this.version.identity!==t.identity)throw new Error(`Invalid start version: ${t.ts.toString()}:${t.querySet}`);for(const i of e.modifications)switch(i.type){case"QueryUpdated":{const o=this.queryPath(i.queryId);if(o)for(const u of i.logLines)oi(this.logger,"info","query",o,u);const l=Un(i.value??null);this.remoteQuerySet.set(i.queryId,{success:!0,value:l,logLines:i.logLines});break}case"QueryFailed":{const o=this.queryPath(i.queryId);if(o)for(const u of i.logLines)oi(this.logger,"info","query",o,u);const{errorData:l}=i;this.remoteQuerySet.set(i.queryId,{success:!1,errorMessage:i.errorMessage,errorData:l!==void 0?Un(l):void 0,logLines:i.logLines});break}case"QueryRemoved":{this.remoteQuerySet.delete(i.queryId);break}default:throw new Error(`Invalid modification ${i.type}`)}this.version=e.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function Cd(n){const e=El(n);return hn.fromBytesLE(Array.from(e))}function hT(n){const e=new Uint8Array(n.toBytesLE());return Al(e)}function pT(n){switch(n.type){case"FatalError":case"AuthError":case"ActionResponse":case"Ping":return{...n};case"MutationResponse":return n.success?{...n,ts:Cd(n.ts)}:{...n};case"Transition":return{...n,startVersion:{...n.startVersion,ts:Cd(n.startVersion.ts)},endVersion:{...n.endVersion,ts:Cd(n.endVersion.ts)}}}}function mT(n){switch(n.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...n};case"Connect":return n.maxObservedTimestamp!==void 0?{...n,maxObservedTimestamp:hT(n.maxObservedTimestamp)}:{...n,maxObservedTimestamp:void 0}}}var gT=Object.defineProperty,yT=(n,e,t)=>e in n?gT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Pt=(n,e,t)=>yT(n,typeof e!="symbol"?e+"":e,t);const bT=1e3,vT=1001,xT=1005,ST=4040;class wT{constructor(e,t,i,o){Pt(this,"socket"),Pt(this,"connectionCount"),Pt(this,"_hasEverConnected",!1),Pt(this,"lastCloseReason"),Pt(this,"initialBackoff"),Pt(this,"maxBackoff"),Pt(this,"retries"),Pt(this,"serverInactivityThreshold"),Pt(this,"reconnectDueToServerInactivityTimeout"),Pt(this,"uri"),Pt(this,"onOpen"),Pt(this,"onResume"),Pt(this,"onMessage"),Pt(this,"webSocketConstructor"),Pt(this,"logger"),this.webSocketConstructor=i,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.initialBackoff=100,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=3e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=e,this.onOpen=t.onOpen,this.onResume=t.onResume,this.onMessage=t.onMessage,this.logger=o,this.connect()}setSocketState(e){this.socket=e,this._logVerbose(`socket state changed: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}`)}connect(){if(this.socket.state==="terminated")return;if(this.socket.state!=="disconnected"&&this.socket.state!=="stopped")throw new Error("Didn't start connection from disconnected state: "+this.socket.state);const e=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.setSocketState({state:"connecting",ws:e,paused:"no"}),this.resetServerInactivityTimeout(),e.onopen=()=>{if(this.logger.logVerbose("begin ws.onopen"),this.socket.state!=="connecting")throw new Error("onopen called with socket not in connecting state");this.setSocketState({state:"ready",ws:e,paused:this.socket.paused==="yes"?"uninitialized":"no"}),this.resetServerInactivityTimeout(),this.socket.paused==="no"&&(this._hasEverConnected=!0,this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason})),this.lastCloseReason!=="InitialConnect"&&this.logger.log("WebSocket reconnected"),this.connectionCount+=1,this.lastCloseReason=null},e.onerror=t=>{const i=t.message;this.logger.log(`WebSocket error: ${i}`)},e.onmessage=t=>{this.resetServerInactivityTimeout();const i=pT(JSON.parse(t.data));this._logVerbose(`received ws message with type ${i.type}`),this.onMessage(i).hasSyncedPastLastReconnect&&(this.retries=0)},e.onclose=t=>{if(this._logVerbose("begin ws.onclose"),this.lastCloseReason===null&&(this.lastCloseReason=t.reason??"OnCloseInvoked"),t.code!==bT&&t.code!==vT&&t.code!==xT&&t.code!==ST){let i=`WebSocket closed with code ${t.code}`;t.reason&&(i+=`: ${t.reason}`),this.logger.log(i)}this.scheduleReconnect()}}socketState(){return this.socket.state}sendMessage(e){const t={type:e.type,...e.type==="Authenticate"&&e.tokenType==="User"?{value:`...${e.value.slice(-7)}`}:{}};if(this.socket.state==="ready"&&this.socket.paused==="no"){const i=mT(e),o=JSON.stringify(i);try{this.socket.ws.send(o)}catch(l){this.logger.log(`Failed to send message on WebSocket, reconnecting: ${l}`),this.closeAndReconnect("FailedToSendMessage")}return this._logVerbose(`sent message with type ${e.type}: ${JSON.stringify(t)}`),!0}return this._logVerbose(`message not sent (socket state: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}): ${JSON.stringify(t)}`),!1}resetServerInactivityTimeout(){this.socket.state!=="terminated"&&(this.reconnectDueToServerInactivityTimeout!==null&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(){this.socket={state:"disconnected"};const e=this.nextBackoff();this.logger.log(`Attempting reconnect in ${e}ms`),setTimeout(()=>this.connect(),e)}closeAndReconnect(e){switch(this._logVerbose(`begin closeAndReconnect with reason ${e}`),this.socket.state){case"disconnected":case"terminated":case"stopped":return;case"connecting":case"ready":{this.lastCloseReason=e,this.close(),this.scheduleReconnect();return}default:this.socket}}close(){switch(this.socket.state){case"disconnected":case"terminated":case"stopped":return Promise.resolve();case"connecting":{const e=this.socket.ws;return new Promise(t=>{e.onclose=()=>{this._logVerbose("Closed after connecting"),t()},e.onopen=()=>{this._logVerbose("Opened after connecting"),e.close()}})}case"ready":{this._logVerbose("ws.close called");const e=this.socket.ws,t=new Promise(i=>{e.onclose=()=>{i()}});return e.close(),t}default:return this.socket,Promise.resolve()}}terminate(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"terminated":case"stopped":case"disconnected":case"connecting":case"ready":{const e=this.close();return this.setSocketState({state:"terminated"}),e}default:throw this.socket,new Error(`Invalid websocket state: ${this.socket.state}`)}}stop(){switch(this.socket.state){case"terminated":return Promise.resolve();case"connecting":case"stopped":case"disconnected":case"ready":{const e=this.close();return this.socket={state:"stopped"},e}default:return this.socket,Promise.resolve()}}tryRestart(){switch(this.socket.state){case"stopped":break;case"terminated":case"connecting":case"ready":case"disconnected":this.logger.logVerbose("Restart called without stopping first");return;default:this.socket}this.connect()}pause(){switch(this.socket.state){case"disconnected":case"stopped":case"terminated":return;case"connecting":case"ready":{this.socket={...this.socket,paused:"yes"};return}default:{this.socket;return}}}resume(){switch(this.socket.state){case"connecting":this.socket={...this.socket,paused:"no"};return;case"ready":this.socket.paused==="uninitialized"?(this.socket={...this.socket,paused:"no"},this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason})):this.socket.paused==="yes"&&(this.socket={...this.socket,paused:"no"},this.onResume());return;case"terminated":case"stopped":case"disconnected":return;default:this.socket}this.connect()}connectionState(){return{isConnected:this.socket.state==="ready",hasEverConnected:this._hasEverConnected,connectionCount:this.connectionCount,connectionRetries:this.retries}}_logVerbose(e){this.logger.logVerbose(e)}nextBackoff(){const e=this.initialBackoff*Math.pow(2,this.retries);this.retries+=1;const t=Math.min(e,this.maxBackoff),i=t*(Math.random()-.5);return t+i}}function TT(){return MT()}function MT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}function nh(n){this.message=n}nh.prototype=new Error,nh.prototype.name="InvalidCharacterError";var c0=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(n){var e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new nh("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,i,o=0,l=0,u="";i=e.charAt(l++);~i&&(t=o%4?64*t+i:i,o++%4)?u+=String.fromCharCode(255&t>>(-2*o&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return u};function CT(n){var e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(c0(t).replace(/(.)/g,function(i,o){var l=o.charCodeAt(0).toString(16).toUpperCase();return l.length<2&&(l="0"+l),"%"+l}))}(e)}catch{return c0(e)}}function Au(n){this.message=n}function kT(n,e){if(typeof n!="string")throw new Au("Invalid token specified");var t=(e=e||{}).header===!0?0:1;try{return JSON.parse(CT(n.split(".")[t]))}catch(i){throw new Au("Invalid token specified: "+i.message)}}Au.prototype=new Error,Au.prototype.name="InvalidTokenError";var ET=Object.defineProperty,AT=(n,e,t)=>e in n?ET(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,En=(n,e,t)=>AT(n,typeof e!="symbol"?e+"":e,t);const OT=20*24*60*60*1e3,f0=2;class NT{constructor(e,t,i){En(this,"authState",{state:"noAuth"}),En(this,"configVersion",0),En(this,"syncState"),En(this,"authenticate"),En(this,"stopSocket"),En(this,"tryRestartSocket"),En(this,"pauseSocket"),En(this,"resumeSocket"),En(this,"clearAuth"),En(this,"logger"),En(this,"refreshTokenLeewaySeconds"),En(this,"tokenConfirmationAttempts",0),this.syncState=e,this.authenticate=t.authenticate,this.stopSocket=t.stopSocket,this.tryRestartSocket=t.tryRestartSocket,this.pauseSocket=t.pauseSocket,this.resumeSocket=t.resumeSocket,this.clearAuth=t.clearAuth,this.logger=i.logger,this.refreshTokenLeewaySeconds=i.refreshTokenLeewaySeconds}async setConfig(e,t){this.resetAuthState(),this._logVerbose("pausing WS for auth token fetch"),this.pauseSocket();const i=await this.fetchTokenAndGuardAgainstRace(e,{forceRefreshToken:!1});i.isFromOutdatedConfig||(i.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:e,onAuthChange:t},hasRetried:!1}),this.authenticate(i.value)):(this.setAuthState({state:"initialRefetch",config:{fetchToken:e,onAuthChange:t}}),await this.refetchToken()),this._logVerbose("resuming WS after auth token fetch"),this.resumeSocket())}onTransition(e){if(this.syncState.isCurrentOrNewerAuthVersion(e.endVersion.identity)&&!(e.endVersion.identity<=e.startVersion.identity)){if(this.authState.state==="waitingForServerConfirmationOfCachedToken"){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.tokenConfirmationAttempts=0,this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(e){if(e.authUpdateAttempted===!1&&(this.authState.state==="waitingForServerConfirmationOfFreshToken"||this.authState.state==="waitingForServerConfirmationOfCachedToken")){this._logVerbose("ignoring non-auth token expired error");return}const{baseVersion:t}=e;if(!this.syncState.isCurrentOrNewerAuthVersion(t+1)){this._logVerbose("ignoring auth error for previous auth attempt");return}this.tryToReauthenticate(e)}async tryToReauthenticate(e){if(this._logVerbose(`attempting to reauthenticate: ${e.error}`),this.authState.state==="noAuth"||this.authState.state==="waitingForServerConfirmationOfFreshToken"&&this.tokenConfirmationAttempts>=f0){this.logger.error(`Failed to authenticate: "${e.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.authState.state!=="noAuth"&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this.tokenConfirmationAttempts++,this._logVerbose(`retrying reauthentication, ${f0-this.tokenConfirmationAttempts} attempts remaining`)),await this.stopSocket();const t=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});t.isFromOutdatedConfig||(t.value&&this.syncState.isNewAuth(t.value)?(this.authenticate(t.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:t.value,hadAuth:this.authState.state==="notRefetching"||this.authState.state==="waitingForScheduledRefetch"})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this.tryRestartSocket())}async refetchToken(){if(this.authState.state==="noAuth")return;this._logVerbose("refetching auth token");const e=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});e.isFromOutdatedConfig||(e.value?this.syncState.isNewAuth(e.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:e.value,config:this.authState.config}),this.authenticate(e.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this._logVerbose("restarting WS after auth token fetch (if currently stopped)"),this.tryRestartSocket())}scheduleTokenRefetch(e){if(this.authState.state==="noAuth")return;const t=this.decodeToken(e);if(!t){this.logger.error("Auth token is not a valid JWT, cannot refetch the token");return}const{iat:i,exp:o}=t;if(!i||!o){this.logger.error("Auth token does not have required fields, cannot refetch the token");return}const l=o-i;if(l<=2){this.logger.error("Auth token does not live long enough, cannot refetch the token");return}let u=Math.min(OT,(l-this.refreshTokenLeewaySeconds)*1e3);u<=0&&(this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${l}s`),u=0);const f=setTimeout(()=>{this._logVerbose("running scheduled token refetch"),this.refetchToken()},u);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:f,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${u}ms`)}async fetchTokenAndGuardAgainstRace(e,t){const i=++this.configVersion;this._logVerbose(`fetching token with config version ${i}`);const o=await e(t);return this.configVersion!==i?(this._logVerbose(`stale config version, expected ${i}, got ${this.configVersion}`),{isFromOutdatedConfig:!0}):{isFromOutdatedConfig:!1,value:o}}stop(){this.resetAuthState(),this.configVersion++,this._logVerbose(`config version bumped to ${this.configVersion}`)}setAndReportAuthFailed(e){e(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(e){const t=e.state==="waitingForServerConfirmationOfFreshToken"?{hadAuth:e.hadAuth,state:e.state,token:`...${e.token.slice(-7)}`}:{state:e.state};switch(this._logVerbose(`setting auth state to ${JSON.stringify(t)}`),e.state){case"waitingForScheduledRefetch":case"notRefetching":case"noAuth":this.tokenConfirmationAttempts=0;break}this.authState.state==="waitingForScheduledRefetch"&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=e}decodeToken(e){try{return kT(e)}catch(t){return this._logVerbose(`Error decoding token: ${t instanceof Error?t.message:"Unknown error"}`),null}}_logVerbose(e){this.logger.logVerbose(`${e} [v${this.configVersion}]`)}}const RT=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function DT(n,e){const t={sessionId:e};typeof performance>"u"||!performance.mark||performance.mark(n,{detail:t})}function zT(n){let e=n.name.slice(6);return e=e.charAt(0).toLowerCase()+e.slice(1),{name:e,startTime:n.startTime}}function _T(n){if(typeof performance>"u"||!performance.getEntriesByName)return[];const e=[];for(const t of RT){const i=performance.getEntriesByName(t).filter(o=>o.entryType==="mark").filter(o=>o.detail.sessionId===n);e.push(...i)}return e.map(zT)}var BT=Object.defineProperty,jT=(n,e,t)=>e in n?BT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Bt=(n,e,t)=>jT(n,typeof e!="symbol"?e+"":e,t);class LT{constructor(e,t,i){if(Bt(this,"address"),Bt(this,"state"),Bt(this,"requestManager"),Bt(this,"webSocketManager"),Bt(this,"authenticationManager"),Bt(this,"remoteQuerySet"),Bt(this,"optimisticQueryResults"),Bt(this,"_transitionHandlerCounter",0),Bt(this,"_nextRequestId"),Bt(this,"_onTransitionFns",new Map),Bt(this,"_sessionId"),Bt(this,"firstMessageReceived",!1),Bt(this,"debug"),Bt(this,"logger"),Bt(this,"maxObservedTimestamp"),Bt(this,"mark",b=>{this.debug&&DT(b,this.sessionId)}),typeof e=="object")throw new Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");i?.skipConvexDeploymentUrlCheck!==!0&&Vb(e),i={...i};const o=i.authRefreshTokenLeewaySeconds??2;let l=i.webSocketConstructor;if(!l&&typeof WebSocket>"u")throw new Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");l=l||WebSocket,this.debug=i.reportDebugInfoToConvex??!1,this.address=e,this.logger=i.logger??Rh({verbose:i.verbose??!1});const u=e.search("://");if(u===-1)throw new Error("Provided address was not an absolute URL.");const f=e.substring(u+3),d=e.substring(0,u);let p;if(d==="http")p="ws";else if(d==="https")p="wss";else throw new Error(`Unknown parent protocol ${d}`);const g=`${p}://${f}/api/${Qi}/sync`;this.state=new Kw,this.remoteQuerySet=new u0(b=>this.state.queryPath(b),this.logger),this.requestManager=new Zw(this.logger),this.authenticationManager=new NT(this.state,{authenticate:b=>{const v=this.state.setAuth(b);return this.webSocketManager.sendMessage(v),v.baseVersion},stopSocket:()=>this.webSocketManager.stop(),tryRestartSocket:()=>this.webSocketManager.tryRestart(),pauseSocket:()=>{this.webSocketManager.pause(),this.state.pause()},resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()}},{logger:this.logger,refreshTokenLeewaySeconds:o}),this.optimisticQueryResults=new oT,this.addOnTransitionHandler(b=>{t(b.queries.map(v=>v.token))}),this._nextRequestId=0,this._sessionId=TT();const{unsavedChangesWarning:y}=i;if(typeof window>"u"||typeof window.addEventListener>"u"){if(y===!0)throw new Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.")}else y!==!1&&window.addEventListener("beforeunload",b=>{if(this.requestManager.hasIncompleteRequests()){b.preventDefault();const v="Are you sure you want to leave? Your changes may not be saved.";return(b||window.event).returnValue=v,v}});this.webSocketManager=new wT(g,{onOpen:b=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...b,type:"Connect",sessionId:this._sessionId,maxObservedTimestamp:this.maxObservedTimestamp});const v=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new u0(C=>this.state.queryPath(C),this.logger);const[S,M]=this.state.restart(v);M&&this.webSocketManager.sendMessage(M),this.webSocketManager.sendMessage(S);for(const C of this.requestManager.restart())this.webSocketManager.sendMessage(C)},onResume:()=>{const[b,v]=this.state.resume();v&&this.webSocketManager.sendMessage(v),b&&this.webSocketManager.sendMessage(b);for(const S of this.requestManager.resume())this.webSocketManager.sendMessage(S)},onMessage:b=>{switch(this.firstMessageReceived||(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),b.type){case"Transition":{this.observedTimestamp(b.endVersion.ts),this.authenticationManager.onTransition(b),this.remoteQuerySet.transition(b),this.state.transition(b);const v=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(v);break}case"MutationResponse":{b.success&&this.observedTimestamp(b.ts);const v=this.requestManager.onResponse(b);v!==null&&this.notifyOnQueryResultChanges(new Map([[v.requestId,v.result]]));break}case"ActionResponse":{this.requestManager.onResponse(b);break}case"AuthError":{this.authenticationManager.onAuthError(b);break}case"FatalError":{const v=Fw(this.logger,b.error);throw this.webSocketManager.terminate(),v}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}}},l,this.logger),this.mark("convexClientConstructed")}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(e){(this.maxObservedTimestamp===void 0||this.maxObservedTimestamp.lessThanOrEqual(e))&&(this.maxObservedTimestamp=e)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(e){const t=this.remoteQuerySet.remoteQueryResults(),i=new Map;for(const[l,u]of t){const f=this.state.queryToken(l);if(f!==null){const d={result:u,udfPath:this.state.queryPath(l),args:this.state.queryArgs(l)};i.set(f,d)}}const o=this.optimisticQueryResults.ingestQueryResultsFromServer(i,new Set(e.keys()));this.handleTransition({queries:o.map(l=>({token:l,modification:{kind:"Updated",result:i.get(l).result}})),reflectedMutations:Array.from(e).map(([l,u])=>({requestId:l,result:u})),timestamp:this.remoteQuerySet.timestamp()})}handleTransition(e){for(const t of this._onTransitionFns.values())t(e)}addOnTransitionHandler(e){const t=this._transitionHandlerCounter++;return this._onTransitionFns.set(t,e),()=>this._onTransitionFns.delete(t)}setAuth(e,t){this.authenticationManager.setConfig(e,t)}hasAuth(){return this.state.hasAuth()}setAdminAuth(e,t){const i=this.state.setAdminAuth(e,t);this.webSocketManager.sendMessage(i)}clearAuth(){const e=this.state.clearAuth();this.webSocketManager.sendMessage(e)}subscribe(e,t,i){const o=rn(t),{modification:l,queryToken:u,unsubscribe:f}=this.state.subscribe(e,o,i?.journal,i?.componentPath);return l!==null&&this.webSocketManager.sendMessage(l),{queryToken:u,unsubscribe:()=>{const d=f();d&&this.webSocketManager.sendMessage(d)}}}localQueryResult(e,t){const i=rn(t),o=Xi(e,i);return this.optimisticQueryResults.queryResult(o)}localQueryResultByToken(e){return this.optimisticQueryResults.queryResult(e)}hasLocalQueryResultByToken(e){return this.optimisticQueryResults.hasQueryResult(e)}localQueryLogs(e,t){const i=rn(t),o=Xi(e,i);return this.optimisticQueryResults.queryLogs(o)}queryJournal(e,t){const i=rn(t),o=Xi(e,i);return this.state.queryJournal(o)}connectionState(){const e=this.webSocketManager.connectionState();return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:e.isConnected,hasEverConnected:e.hasEverConnected,connectionCount:e.connectionCount,connectionRetries:e.connectionRetries,timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest()}}async mutation(e,t,i){const o=await this.mutationInternal(e,t,i);if(!o.success)throw o.errorData!==void 0?th(o,new si(ro("mutation",e,o))):new Error(ro("mutation",e,o));return o.value}async mutationInternal(e,t,i,o){const{mutationPromise:l}=this.enqueueMutation(e,t,i,o);return l}enqueueMutation(e,t,i,o){const l=rn(t);this.tryReportLongDisconnect();const u=this.nextRequestId;if(this._nextRequestId++,i!==void 0){const g=i.optimisticUpdate;if(g!==void 0){const y=S=>{g(S,l)},v=this.optimisticQueryResults.applyOptimisticUpdate(y,u).map(S=>{const M=this.localQueryResultByToken(S);return{token:S,modification:{kind:"Updated",result:M===void 0?void 0:{success:!0,value:M,logLines:[]}}}});this.handleTransition({queries:v,reflectedMutations:[],timestamp:this.remoteQuerySet.timestamp()})}}const f={type:"Mutation",requestId:u,udfPath:e,componentPath:o,args:[Qt(l)]},d=this.webSocketManager.sendMessage(f),p=this.requestManager.request(f,d);return{requestId:u,mutationPromise:p}}async action(e,t){const i=await this.actionInternal(e,t);if(!i.success)throw i.errorData!==void 0?th(i,new si(ro("action",e,i))):new Error(ro("action",e,i));return i.value}async actionInternal(e,t,i){const o=rn(t),l=this.nextRequestId;this._nextRequestId++,this.tryReportLongDisconnect();const u={type:"Action",requestId:l,udfPath:e,componentPath:i,args:[Qt(o)]},f=this.webSocketManager.sendMessage(u);return this.requestManager.request(u,f)}async close(){return this.authenticationManager.stop(),this.webSocketManager.terminate()}get url(){return this.address}get nextRequestId(){return this._nextRequestId}get sessionId(){return this._sessionId}reportMarks(){if(this.debug){const e=_T(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:e})}}tryReportLongDisconnect(){if(!this.debug)return;const e=this.connectionState().timeOfOldestInflightRequest;if(e===null||Date.now()-e.getTime()<=60*1e3)return;const t=`${this.address}/api/debug_event`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${Qi}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(i=>{i.ok||this.logger.warn("Analytics request failed with response:",i.body)}).catch(i=>{this.logger.warn("Analytics response failed with error:",i)})}}var qT=Object.defineProperty,VT=(n,e,t)=>e in n?qT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$i=(n,e,t)=>VT(n,typeof e!="symbol"?e+"":e,t);const lu=560;class UT{constructor(e,t){if($i(this,"address"),$i(this,"auth"),$i(this,"adminAuth"),$i(this,"encodedTsPromise"),$i(this,"debug"),$i(this,"fetchOptions"),$i(this,"logger"),typeof t=="boolean")throw new Error("skipConvexDeploymentUrlCheck as the second argument is no longer supported. Please pass an options object, `{ skipConvexDeploymentUrlCheck: true }`.");const i=t??{};i.skipConvexDeploymentUrlCheck!==!0&&Vb(e),this.logger=i.logger??Rh({verbose:!1}),this.address=e,this.debug=!0}backendUrl(){return`${this.address}/api`}get url(){return this.address}setAuth(e){this.clearAuth(),this.auth=e}setAdminAuth(e,t){if(this.clearAuth(),t!==void 0){const i=new TextEncoder().encode(JSON.stringify(t)),o=btoa(String.fromCodePoint(...i));this.adminAuth=`${e}:${o}`}else this.adminAuth=e}clearAuth(){this.auth=void 0,this.adminAuth=void 0}setDebug(e){this.debug=e}setFetchOptions(e){this.fetchOptions=e}async consistentQuery(e,...t){const i=rn(t[0]),o=this.getTimestamp();return await this.queryInner(e,i,{timestampPromise:o})}async getTimestamp(){return this.encodedTsPromise?this.encodedTsPromise:this.encodedTsPromise=this.getTimestampInner()}async getTimestampInner(){const e=fetch,t={"Content-Type":"application/json","Convex-Client":`npm-${Qi}`},i=await e(`${this.address}/api/query_ts`,{...this.fetchOptions,method:"POST",headers:t});if(!i.ok)throw new Error(await i.text());const{ts:o}=await i.json();return o}async query(e,...t){const i=rn(t[0]);return await this.queryInner(e,i,{})}async queryInner(e,t,i){const o=at(e),l=[Qt(t)],u={"Content-Type":"application/json","Convex-Client":`npm-${Qi}`};this.adminAuth?u.Authorization=`Convex ${this.adminAuth}`:this.auth&&(u.Authorization=`Bearer ${this.auth}`);const f=fetch,d=i.timestampPromise?await i.timestampPromise:void 0,p=JSON.stringify({path:o,format:"convex_encoded_json",args:l,...d?{ts:d}:{}}),g=d?`${this.address}/api/query_at_ts`:`${this.address}/api/query`,y=await f(g,{...this.fetchOptions,body:p,method:"POST",headers:u});if(!y.ok&&y.status!==lu)throw new Error(await y.text());const b=await y.json();if(this.debug)for(const v of b.logLines??[])oi(this.logger,"info","query",o,v);switch(b.status){case"success":return Un(b.value);case"error":throw b.errorData!==void 0?au(b.errorData,new si(b.errorMessage)):new Error(b.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(b)}`)}}async mutation(e,...t){const i=rn(t[0]),o=at(e),l=JSON.stringify({path:o,format:"convex_encoded_json",args:[Qt(i)]}),u={"Content-Type":"application/json","Convex-Client":`npm-${Qi}`};this.adminAuth?u.Authorization=`Convex ${this.adminAuth}`:this.auth&&(u.Authorization=`Bearer ${this.auth}`);const d=await fetch(`${this.address}/api/mutation`,{...this.fetchOptions,body:l,method:"POST",headers:u});if(!d.ok&&d.status!==lu)throw new Error(await d.text());const p=await d.json();if(this.debug)for(const g of p.logLines??[])oi(this.logger,"info","mutation",o,g);switch(p.status){case"success":return Un(p.value);case"error":throw p.errorData!==void 0?au(p.errorData,new si(p.errorMessage)):new Error(p.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(p)}`)}}async action(e,...t){const i=rn(t[0]),o=at(e),l=JSON.stringify({path:o,format:"convex_encoded_json",args:[Qt(i)]}),u={"Content-Type":"application/json","Convex-Client":`npm-${Qi}`};this.adminAuth?u.Authorization=`Convex ${this.adminAuth}`:this.auth&&(u.Authorization=`Bearer ${this.auth}`);const d=await fetch(`${this.address}/api/action`,{...this.fetchOptions,body:l,method:"POST",headers:u});if(!d.ok&&d.status!==lu)throw new Error(await d.text());const p=await d.json();if(this.debug)for(const g of p.logLines??[])oi(this.logger,"info","action",o,g);switch(p.status){case"success":return Un(p.value);case"error":throw p.errorData!==void 0?au(p.errorData,new si(p.errorMessage)):new Error(p.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(p)}`)}}async function(e,t,...i){const o=rn(i[0]),l=typeof e=="string"?e:at(e),u=JSON.stringify({componentPath:t,path:l,format:"convex_encoded_json",args:Qt(o)}),f={"Content-Type":"application/json","Convex-Client":`npm-${Qi}`};this.adminAuth?f.Authorization=`Convex ${this.adminAuth}`:this.auth&&(f.Authorization=`Bearer ${this.auth}`);const p=await fetch(`${this.address}/api/function`,{...this.fetchOptions,body:u,method:"POST",headers:f});if(!p.ok&&p.status!==lu)throw new Error(await p.text());const g=await p.json();if(this.debug)for(const y of g.logLines??[])oi(this.logger,"info","any",l,y);switch(g.status){case"success":return Un(g.value);case"error":throw g.errorData!==void 0?au(g.errorData,new si(g.errorMessage)):new Error(g.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(g)}`)}}}function au(n,e){return e.data=Un(n),e}var IT=qb();const $u=Lb(IT);var HT=Object.defineProperty,$T=(n,e,t)=>e in n?HT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Zr=(n,e,t)=>$T(n,typeof e!="symbol"?e+"":e,t);if(typeof K>"u")throw new Error("Required dependency 'react' not found");if(typeof $u>"u")throw new Error("Required dependency 'react-dom' not found");function Gb(n,e,t){function i(o){return FT(o),e.mutation(n,o,{optimisticUpdate:t})}return i.withOptimisticUpdate=function(l){if(t!==void 0)throw new Error(`Already specified optimistic update for mutation ${at(n)}`);return Gb(n,e,l)},i}class PT{constructor(e,t){if(Zr(this,"address"),Zr(this,"cachedSync"),Zr(this,"listeners"),Zr(this,"options"),Zr(this,"closed",!1),Zr(this,"_logger"),Zr(this,"adminAuth"),Zr(this,"fakeUserIdentity"),e===void 0)throw new Error("No address provided to ConvexReactClient.\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.");if(typeof e!="string")throw new Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof e} instead.`);if(!e.includes("://"))throw new Error("Provided address was not an absolute URL.");this.address=e,this.listeners=new Map,this._logger=t?.logger??Rh({verbose:t?.verbose??!1}),this.options={...t,logger:this._logger}}get sync(){if(this.closed)throw new Error("ConvexReactClient has already been closed.");return this.cachedSync?this.cachedSync:(this.cachedSync=new LT(this.address,e=>this.transition(e),this.options),this.adminAuth&&this.cachedSync.setAdminAuth(this.adminAuth,this.fakeUserIdentity),this.cachedSync)}setAuth(e,t){if(typeof e=="string")throw new Error("Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.");this.sync.setAuth(e,t??(()=>{}))}clearAuth(){this.sync.clearAuth()}setAdminAuth(e,t){if(this.adminAuth=e,this.fakeUserIdentity=t,this.closed)throw new Error("ConvexReactClient has already been closed.");this.cachedSync&&this.sync.setAdminAuth(e,t)}watchQuery(e,...t){const[i,o]=t,l=at(e);return{onUpdate:u=>{const{queryToken:f,unsubscribe:d}=this.sync.subscribe(l,i,o),p=this.listeners.get(f);return p!==void 0?p.add(u):this.listeners.set(f,new Set([u])),()=>{if(this.closed)return;const g=this.listeners.get(f);g.delete(u),g.size===0&&this.listeners.delete(f),d()}},localQueryResult:()=>{if(this.cachedSync)return this.cachedSync.localQueryResult(l,i)},localQueryLogs:()=>{if(this.cachedSync)return this.cachedSync.localQueryLogs(l,i)},journal:()=>{if(this.cachedSync)return this.cachedSync.queryJournal(l,i)}}}mutation(e,...t){const[i,o]=t,l=at(e);return this.sync.mutation(l,i,o)}action(e,...t){const i=at(e);return this.sync.action(i,...t)}query(e,...t){const i=this.watchQuery(e,...t),o=i.localQueryResult();return o!==void 0?Promise.resolve(o):new Promise((l,u)=>{const f=i.onUpdate(()=>{f();try{l(i.localQueryResult())}catch(d){u(d)}})})}connectionState(){return this.sync.connectionState()}get logger(){return this._logger}async close(){if(this.closed=!0,this.listeners=new Map,this.cachedSync){const e=this.cachedSync;this.cachedSync=void 0,await e.close()}}transition(e){$u.unstable_batchedUpdates(()=>{for(const t of e){const i=this.listeners.get(t);if(i)for(const o of i)o()}})}}const Dh=K.createContext(void 0);function Yb(){return q.useContext(Dh)}const QT=({client:n,children:e})=>K.createElement(Dh.Provider,{value:n},e);function Dn(n,...e){const t=e[0]==="skip",i=e[0]==="skip"?{}:rn(e[0]),o=typeof n=="string"?Qb(n):n,l=at(o),u=q.useMemo(()=>t?{}:{query:{query:o,args:i}},[JSON.stringify(Qt(i)),l,t]),d=Kb(u).query;if(d instanceof Error)throw d;return d}function ht(n){const e=typeof n=="string"?Qb(n):n,t=q.useContext(Dh);if(t===void 0)throw new Error("Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return q.useMemo(()=>Gb(e,t),[t,at(e)])}function FT(n){if(typeof n=="object"&&n!==null&&"bubbles"in n&&"persist"in n&&"isDefaultPrevented"in n)throw new Error("Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like `const handler = () => myMutation();` and using `handler` in the event handler.")}var GT=Object.defineProperty,YT=(n,e,t)=>e in n?GT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,kd=(n,e,t)=>YT(n,typeof e!="symbol"?e+"":e,t);class KT{constructor(e){kd(this,"createWatch"),kd(this,"queries"),kd(this,"listeners"),this.createWatch=e,this.queries={},this.listeners=new Set}setQueries(e){for(const t of Object.keys(e)){const{query:i,args:o}=e[t];if(at(i),this.queries[t]===void 0)this.addQuery(t,i,o);else{const l=this.queries[t];(at(i)!==at(l.query)||JSON.stringify(Qt(o))!==JSON.stringify(Qt(l.args)))&&(this.removeQuery(t),this.addQuery(t,i,o))}}for(const t of Object.keys(this.queries))e[t]===void 0&&this.removeQuery(t)}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}getLocalResults(e){const t={};for(const i of Object.keys(e)){const{query:o,args:l}=e[i];at(o);const u=this.createWatch(o,l);let f;try{f=u.localQueryResult()}catch(d){if(d instanceof Error)f=d;else throw d}t[i]=f}return t}setCreateWatch(e){this.createWatch=e;for(const t of Object.keys(this.queries)){const{query:i,args:o,watch:l}=this.queries[t],u=l.journal();this.removeQuery(t),this.addQuery(t,i,o,u)}}destroy(){for(const e of Object.keys(this.queries))this.removeQuery(e);this.listeners=new Set}addQuery(e,t,i,o){if(this.queries[e]!==void 0)throw new Error(`Tried to add a new query with identifier ${e} when it already exists.`);const l=this.createWatch(t,i,o),u=l.onUpdate(()=>this.notifyListeners());this.queries[e]={query:t,args:i,watch:l,unsubscribe:u}}removeQuery(e){const t=this.queries[e];if(t===void 0)throw new Error(`No query found with identifier ${e}.`);t.unsubscribe(),delete this.queries[e]}notifyListeners(){for(const e of this.listeners)e()}}function JT({getCurrentValue:n,subscribe:e}){const[t,i]=q.useState(()=>({getCurrentValue:n,subscribe:e,value:n()}));let o=t.value;return(t.getCurrentValue!==n||t.subscribe!==e)&&(o=n(),i({getCurrentValue:n,subscribe:e,value:o})),q.useEffect(()=>{let l=!1;const u=()=>{l||i(d=>{if(d.getCurrentValue!==n||d.subscribe!==e)return d;const p=n();return d.value===p?d:{...d,value:p}})},f=e(u);return u(),()=>{l=!0,f()}},[n,e]),o}function Kb(n){const e=Yb();if(e===void 0)throw new Error("Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");const t=q.useMemo(()=>(i,o,l)=>e.watchQuery(i,o,{journal:l}),[e]);return XT(n,t)}function XT(n,e){const[t]=q.useState(()=>new KT(e));t.createWatch!==e&&t.setCreateWatch(e),q.useEffect(()=>()=>t.destroy(),[t]);const i=q.useMemo(()=>({getCurrentValue:()=>t.getLocalResults(n),subscribe:o=>(t.setQueries(n),t.subscribe(o))}),[t,n]);return JT(i)}const ZT=(n,e,t)=>i=>{const o={...i.queries},l=i.nextPageKey,u=i.nextPageKey+1,f=i.nextPageKey+2;o[l]={query:i.query,args:{...i.args,paginationOpts:{...i.queries[n].args.paginationOpts,endCursor:e}}},o[u]={query:i.query,args:{...i.args,paginationOpts:{...i.queries[n].args.paginationOpts,cursor:e,endCursor:t}}};const d={...i.ongoingSplits};return d[n]=[l,u],{...i,nextPageKey:f,queries:o,ongoingSplits:d}},WT=n=>e=>{const t=e.ongoingSplits[n];if(t===void 0)return e;const i={...e.queries};delete i[n];const o={...e.ongoingSplits};delete o[n];let l=e.pageKeys.slice();const u=e.pageKeys.findIndex(f=>f===n);return u>=0&&(l=[...e.pageKeys.slice(0,u),...t,...e.pageKeys.slice(u+1)]),{...e,queries:i,pageKeys:l,ongoingSplits:o}};function Jb(n,e,t){if(typeof t?.initialNumItems!="number"||t.initialNumItems<0)throw new Error(`\`options.initialNumItems\` must be a positive number. Received \`${t?.initialNumItems}\`.`);const i=e==="skip",o=i?{}:e,l=at(n),u=q.useMemo(()=>()=>{const C=eM();return{query:n,args:o,id:C,nextPageKey:1,pageKeys:i?[]:[0],queries:i?{}:{0:{query:n,args:{...o,paginationOpts:{numItems:t.initialNumItems,cursor:null,id:C}}}},ongoingSplits:{},skip:i}},[JSON.stringify(Qt(o)),l,t.initialNumItems,i]),[f,d]=q.useState(u);let p=f;(at(n)!==at(f.query)||JSON.stringify(Qt(o))!==JSON.stringify(Qt(f.args))||i!==f.skip)&&(p=u(),d(p));const y=Yb().logger,b=Kb(p.queries),[v,S]=q.useMemo(()=>{let C;const _=[];for(const $ of p.pageKeys){if(C=b[$],C===void 0)break;if(C instanceof Error){if(C.message.includes("InvalidCursor")||C instanceof si&&typeof C.data=="object"&&C.data?.isConvexSystemError===!0&&C.data?.paginationError==="InvalidCursor")return y.warn("usePaginatedQuery hit error, resetting pagination state: "+C.message),d(u),[[],void 0];throw C}const U=p.ongoingSplits[$];if(U!==void 0?b[U[0]]!==void 0&&b[U[1]]!==void 0&&d(WT($)):C.splitCursor&&(C.pageStatus==="SplitRecommended"||C.pageStatus==="SplitRequired"||C.page.length>t.initialNumItems*2)&&d(ZT($,C.splitCursor,C.continueCursor)),C.pageStatus==="SplitRequired")return[_,void 0];_.push(...C.page)}return[_,C]},[b,p.pageKeys,p.ongoingSplits,t.initialNumItems,u,y]),M=q.useMemo(()=>{if(S===void 0)return p.nextPageKey===1?{status:"LoadingFirstPage",isLoading:!0,loadMore:$=>{}}:{status:"LoadingMore",isLoading:!0,loadMore:$=>{}};if(S.isDone)return{status:"Exhausted",isLoading:!1,loadMore:$=>{}};const C=S.continueCursor;let _=!1;return{status:"CanLoadMore",isLoading:!1,loadMore:$=>{_||(_=!0,d(U=>{const J=[...U.pageKeys,U.nextPageKey],I={...U.queries};return I[U.nextPageKey]={query:U.query,args:{...U.args,paginationOpts:{numItems:$,cursor:C,id:U.id}}},{...U,nextPageKey:U.nextPageKey+1,pageKeys:J,queries:I}}))}}},[S,p.nextPageKey]);return{results:v,...M}}let d0=0;function eM(){return d0++,d0}const Xb=q.createContext(void 0);function Ul(){const n=q.useContext(Xb);if(n===void 0)throw new Error("Could not find `ConvexProviderWithAuth` (or `ConvexProviderWithClerk` or `ConvexProviderWithAuth0`) as an ancestor component. This component may be missing, or you might have two instances of the `convex/react` module loaded in your project.");return n}function tM({children:n,client:e,useAuth:t}){const{isLoading:i,isAuthenticated:o,fetchAccessToken:l}=t(),[u,f]=q.useState(null);return i&&u!==null&&f(null),!i&&!o&&u!==!1&&f(!1),K.createElement(Xb.Provider,{value:{isLoading:u===null,isAuthenticated:o&&(u??!1)}},K.createElement(nM,{authProviderAuthenticated:o,fetchAccessToken:l,authProviderLoading:i,client:e,setIsConvexAuthenticated:f}),K.createElement(QT,{client:e},n),K.createElement(rM,{authProviderAuthenticated:o,fetchAccessToken:l,authProviderLoading:i,client:e,setIsConvexAuthenticated:f}))}function nM({authProviderAuthenticated:n,fetchAccessToken:e,authProviderLoading:t,client:i,setIsConvexAuthenticated:o}){return q.useEffect(()=>{let l=!0;if(n)return i.setAuth(e,u=>{l&&o(()=>u)}),()=>{l=!1,o(u=>u?!1:null)}},[n,e,t,i,o]),null}function rM({authProviderAuthenticated:n,fetchAccessToken:e,authProviderLoading:t,client:i,setIsConvexAuthenticated:o}){return q.useEffect(()=>{if(n)return()=>{i.clearAuth(),o(()=>null)}},[n,e,t,i,o]),null}function iM({children:n}){const{isLoading:e,isAuthenticated:t}=Ul();return e||!t?null:K.createElement(K.Fragment,null,n)}function sM({children:n}){const{isLoading:e,isAuthenticated:t}=Ul();return e||t?null:K.createElement(K.Fragment,null,n)}const Zb=q.createContext(void 0),Wb=q.createContext(void 0);function oM(){return q.useContext(Wb)}const lM=q.createContext(null),Ed="__convexAuthOAuthVerifier",uu="__convexAuthJWT",cu="__convexAuthRefreshToken",h0="__convexAuthServerStateFetchTime";function aM({client:n,serverState:e,onChange:t,storage:i,storageNamespace:o,replaceURL:l,children:u}){const f=q.useRef(e?._state.token??null),[d,p]=q.useState(f.current===null),[g,y]=q.useState(f.current),b=n.verbose??!1,v=q.useCallback(ge=>{b&&console.debug(`${new Date().toISOString()} ${ge}`)},[b]),{storageSet:S,storageGet:M,storageRemove:C,storageKey:_}=uM(i,o),[$,U]=q.useState(!1),J=q.useCallback(async ge=>{const ye=f.current!==null;let ne;if(ge.tokens===null)f.current=null,ge.shouldStore&&(await C(uu),await C(cu)),ne=null;else{const{token:O}=ge.tokens;if(f.current=O,ge.shouldStore){const{refreshToken:X}=ge.tokens;await S(uu,O),await S(cu,X)}ne=O}ye!==(ne!==null)&&await t?.(),y(ne),p(!1)},[S,C]);q.useEffect(()=>{const ge=async ye=>{if($){ye.preventDefault();const ne="Are you sure you want to leave? Your changes may not be saved.";return ye.returnValue=!0,ne}};return p0("beforeunload",ge),()=>{m0("beforeunload",ge)}}),q.useEffect(()=>{const ge=ye=>{(async()=>{if(ye.storageArea===i&&ye.key===_(uu)){const ne=ye.newValue;v(`synced access token, is null: ${ne===null}`),await J({shouldStore:!1,tokens:ne===null?null:{token:ne}})}})()};return p0("storage",ge),()=>m0("storage",ge)},[J]);const I=q.useCallback(async ge=>{const{tokens:ye}=await n.unauthenticatedCall("auth:signIn","code"in ge?{params:{code:ge.code},verifier:ge.verifier}:ge);return v(`retrieved tokens, is null: ${ye===null}`),await J({shouldStore:!0,tokens:ye??null}),ye!==null},[n,J]),R=q.useCallback(async(ge,ye)=>{const ne=ye instanceof FormData?Array.from(ye.entries()).reduce((W,[ce,E])=>(W[ce]=E,W),{}):ye??{},O=await M(Ed)??void 0;await C(Ed);const X=await n.authenticatedCall("auth:signIn",{provider:ge,params:ne,verifier:O});if(X.redirect!==void 0){const W=new URL(X.redirect);return await S(Ed,X.verifier),window.location!==void 0&&(window.location.href=W.toString()),{signingIn:!1,redirect:W}}else if(X.tokens!==void 0){const{tokens:W}=X;return v(`signed in and got tokens, is null: ${W===null}`),await J({shouldStore:!0,tokens:W}),{signingIn:X.tokens!==null}}return{signingIn:!1}},[n,J,M]),H=q.useCallback(async()=>{try{await n.authenticatedCall("auth:signOut")}catch{}v("signed out, erasing tokens"),await J({shouldStore:!0,tokens:null})},[J,n]),te=q.useCallback(async({forceRefreshToken:ge})=>{if(ge){const ye=f.current;return await fM(cu,async()=>{const ne=f.current;if(ne!==ye)return v(`returning synced token, is null: ${ne===null}`),ne;const O=await M(cu)??null;return O!==null?(U(!0),await I({refreshToken:O}).finally(()=>{U(!1)}),v(`returning retrieved token, is null: ${ne===null}`),f.current):(U(!1),v("returning null, there is no refresh token"),null)})}return f.current},[I,H,M]),se=q.useRef(!1);q.useEffect(()=>{if(i===void 0)throw new Error("`localStorage` is not available in this environment, set the `storage` prop on `ConvexAuthProvider`!");const ge=async()=>{const ne=await M(uu)??null;v(`retrieved token from storage, is null: ${ne===null}`),await J({shouldStore:!1,tokens:ne===null?null:{token:ne}})};if(e!==void 0){const ne=M(h0),O=X=>{if(!X||e._timeFetched>+X){const{token:W,refreshToken:ce}=e._state,E=W===null||ce===null?null:{token:W,refreshToken:ce};S(h0,e._timeFetched.toString()),J({tokens:E,shouldStore:!0})}else ge()};ne instanceof Promise?ne.then(O):O(ne);return}const ye=typeof window?.location<"u"?new URLSearchParams(window.location.search).get("code"):null;if(se.current||ye){if(ye&&!se.current){se.current=!0;const ne=new URL(window.location.href);ne.searchParams.delete("code"),(async()=>(await l(ne.pathname+ne.search+ne.hash),await R(void 0,{code:ye}),se.current=!1))()}}else ge()},[n,M]);const ze=q.useMemo(()=>({signIn:R,signOut:H}),[R,H]),_e=g!==null,Re=q.useMemo(()=>({isLoading:d,isAuthenticated:_e,fetchAccessToken:te}),[te,d,_e]);return T.jsx(Wb.Provider,{value:Re,children:T.jsx(Zb.Provider,{value:ze,children:T.jsx(lM.Provider,{value:g,children:u})})})}function uM(n,e){const t=cM(),i=q.useMemo(()=>n??t(),[n]),o=e.replace(/[^a-zA-Z0-9]/g,""),l=q.useCallback(p=>`${p}_${o}`,[e]),u=q.useCallback((p,g)=>i.setItem(l(p),g),[i,l]),f=q.useCallback(p=>i.getItem(l(p)),[i,l]),d=q.useCallback(p=>i.removeItem(l(p)),[i,l]);return{storageSet:u,storageGet:f,storageRemove:d,storageKey:l}}function cM(){const[n,e]=q.useState({});return()=>({getItem:t=>n[t],setItem:(t,i)=>{e(o=>({...o,[t]:i}))},removeItem:t=>{e(i=>{const{[t]:o,...l}=i;return l})}})}async function fM(n,e){const t=window?.navigator?.locks;return t!==void 0?await t.request(n,e):await dM(n,e)}function fu(n){globalThis.__convexAuthMutexes===void 0&&(globalThis.__convexAuthMutexes={});let e=globalThis.__convexAuthMutexes[n];return e===void 0&&(globalThis.__convexAuthMutexes[n]={currentlyRunning:null,waiting:[]}),e=globalThis.__convexAuthMutexes[n],e}function Ad(n,e){globalThis.__convexAuthMutexes[n]=e}async function ev(n,e){const t=fu(n);t.currentlyRunning===null?Ad(n,{currentlyRunning:e().finally(()=>{const i=fu(n).waiting.shift();fu(n).currentlyRunning=null,Ad(n,{...fu(n),currentlyRunning:i===void 0?null:ev(n,i)})}),waiting:[]}):Ad(n,{...t,waiting:[...t.waiting,e]})}async function dM(n,e){return new Promise((i,o)=>{ev(n,()=>e().then(u=>i(u)).catch(u=>o(u)))})}function p0(n,e,t){window.addEventListener?.(n,e,t)}function m0(n,e,t){window.removeEventListener?.(n,e,t)}function tv(){return q.useContext(Zb)}function hM(n){const{client:e,storage:t,storageNamespace:i,replaceURL:o,children:l}=n,u=q.useMemo(()=>({authenticatedCall(f,d){return e.action(f,d)},unauthenticatedCall(f,d){return new UT(e.address).action(f,d)},verbose:e.options?.verbose}),[e]);return T.jsx(aM,{client:u,storage:t??(typeof window>"u"?void 0:window?.localStorage),storageNamespace:i??e.address,replaceURL:o??(f=>{window.history.replaceState({},"",f)}),children:T.jsx(tM,{client:e,useAuth:oM,children:l})})}function pM(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const mM=n=>{switch(n){case"success":return bM;case"info":return xM;case"warning":return vM;case"error":return SM;default:return null}},gM=Array(12).fill(0),yM=({visible:n,className:e})=>K.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},K.createElement("div",{className:"sonner-spinner"},gM.map((t,i)=>K.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),bM=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),vM=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),xM=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),SM=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),wM=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},K.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),K.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),TM=()=>{const[n,e]=K.useState(document.hidden);return K.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let rh=1;class MM{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:i,...o}=e,l=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:rh++,u=this.toasts.find(d=>d.id===l),f=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),u?this.toasts=this.toasts.map(d=>d.id===l?(this.publish({...d,...e,id:l,title:i}),{...d,...e,id:l,dismissible:f,title:i}):d):this.addToast({title:i,...o,dismissible:f,id:l}),l},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(i=>i({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let i;t.loading!==void 0&&(i=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const o=Promise.resolve(e instanceof Function?e():e);let l=i!==void 0,u;const f=o.then(async p=>{if(u=["resolve",p],K.isValidElement(p))l=!1,this.create({id:i,type:"default",message:p});else if(kM(p)&&!p.ok){l=!1;const y=typeof t.error=="function"?await t.error(`HTTP error! status: ${p.status}`):t.error,b=typeof t.description=="function"?await t.description(`HTTP error! status: ${p.status}`):t.description,S=typeof y=="object"&&!K.isValidElement(y)?y:{message:y};this.create({id:i,type:"error",description:b,...S})}else if(p instanceof Error){l=!1;const y=typeof t.error=="function"?await t.error(p):t.error,b=typeof t.description=="function"?await t.description(p):t.description,S=typeof y=="object"&&!K.isValidElement(y)?y:{message:y};this.create({id:i,type:"error",description:b,...S})}else if(t.success!==void 0){l=!1;const y=typeof t.success=="function"?await t.success(p):t.success,b=typeof t.description=="function"?await t.description(p):t.description,S=typeof y=="object"&&!K.isValidElement(y)?y:{message:y};this.create({id:i,type:"success",description:b,...S})}}).catch(async p=>{if(u=["reject",p],t.error!==void 0){l=!1;const g=typeof t.error=="function"?await t.error(p):t.error,y=typeof t.description=="function"?await t.description(p):t.description,v=typeof g=="object"&&!K.isValidElement(g)?g:{message:g};this.create({id:i,type:"error",description:y,...v})}}).finally(()=>{l&&(this.dismiss(i),i=void 0),t.finally==null||t.finally.call(t)}),d=()=>new Promise((p,g)=>f.then(()=>u[0]==="reject"?g(u[1]):p(u[1])).catch(g));return typeof i!="string"&&typeof i!="number"?{unwrap:d}:Object.assign(i,{unwrap:d})},this.custom=(e,t)=>{const i=t?.id||rh++;return this.create({jsx:e(i),id:i,...t}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const nn=new MM,CM=(n,e)=>{const t=e?.id||rh++;return nn.addToast({title:n,...e,id:t}),t},kM=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",EM=CM,AM=()=>nn.toasts,OM=()=>nn.getActiveToasts(),Pe=Object.assign(EM,{success:nn.success,info:nn.info,warning:nn.warning,error:nn.error,custom:nn.custom,message:nn.message,promise:nn.promise,dismiss:nn.dismiss,loading:nn.loading},{getHistory:AM,getToasts:OM});pM("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function du(n){return n.label!==void 0}const NM=3,RM="24px",DM="16px",g0=4e3,zM=356,_M=14,BM=45,jM=200;function Xn(...n){return n.filter(Boolean).join(" ")}function LM(n){const[e,t]=n.split("-"),i=[];return e&&i.push(e),t&&i.push(t),i}const qM=n=>{var e,t,i,o,l,u,f,d,p;const{invert:g,toast:y,unstyled:b,interacting:v,setHeights:S,visibleToasts:M,heights:C,index:_,toasts:$,expanded:U,removeToast:J,defaultRichColors:I,closeButton:R,style:H,cancelButtonStyle:te,actionButtonStyle:se,className:ze="",descriptionClassName:_e="",duration:Re,position:ge,gap:ye,expandByDefault:ne,classNames:O,icons:X,closeButtonAriaLabel:W="Close toast"}=n,[ce,E]=K.useState(null),[V,Y]=K.useState(null),[N,G]=K.useState(!1),[ie,ee]=K.useState(!1),[Ae,de]=K.useState(!1),[Le,Xt]=K.useState(!1),[rr,xi]=K.useState(!1),[Si,wi]=K.useState(0),[ic,Pl]=K.useState(0),Dt=K.useRef(y.duration||Re||g0),Ql=K.useRef(null),yn=K.useRef(null),Fl=_===0,us=_+1<=M,It=y.type,ir=y.dismissible!==!1,sc=y.className||"",oc=y.descriptionClassName||"",$n=K.useMemo(()=>C.findIndex(xe=>xe.toastId===y.id)||0,[C,y.id]),Ht=K.useMemo(()=>{var xe;return(xe=y.closeButton)!=null?xe:R},[y.closeButton,R]),zn=K.useMemo(()=>y.duration||Re||g0,[y.duration,Re]),Mt=K.useRef(0),Er=K.useRef(0),Gl=K.useRef(0),Ar=K.useRef(null),[cs,fs]=ge.split("-"),Pn=K.useMemo(()=>C.reduce((xe,We,it)=>it>=$n?xe:xe+We.height,0),[C,$n]),Ti=TM(),Mi=y.invert||g,vo=It==="loading";Er.current=K.useMemo(()=>$n*ye+Pn,[$n,Pn]),K.useEffect(()=>{Dt.current=zn},[zn]),K.useEffect(()=>{G(!0)},[]),K.useEffect(()=>{const xe=yn.current;if(xe){const We=xe.getBoundingClientRect().height;return Pl(We),S(it=>[{toastId:y.id,height:We,position:y.position},...it]),()=>S(it=>it.filter(Ct=>Ct.toastId!==y.id))}},[S,y.id]),K.useLayoutEffect(()=>{if(!N)return;const xe=yn.current,We=xe.style.height;xe.style.height="auto";const it=xe.getBoundingClientRect().height;xe.style.height=We,Pl(it),S(Ct=>Ct.find(ct=>ct.toastId===y.id)?Ct.map(ct=>ct.toastId===y.id?{...ct,height:it}:ct):[{toastId:y.id,height:it,position:y.position},...Ct])},[N,y.title,y.description,S,y.id]);const _n=K.useCallback(()=>{ee(!0),wi(Er.current),S(xe=>xe.filter(We=>We.toastId!==y.id)),setTimeout(()=>{J(y)},jM)},[y,J,S,Er]);K.useEffect(()=>{if(y.promise&&It==="loading"||y.duration===1/0||y.type==="loading")return;let xe;return U||v||Ti?(()=>{if(Gl.current<Mt.current){const Ct=new Date().getTime()-Mt.current;Dt.current=Dt.current-Ct}Gl.current=new Date().getTime()})():(()=>{Dt.current!==1/0&&(Mt.current=new Date().getTime(),xe=setTimeout(()=>{y.onAutoClose==null||y.onAutoClose.call(y,y),_n()},Dt.current))})(),()=>clearTimeout(xe)},[U,v,y,It,Ti,_n]),K.useEffect(()=>{y.delete&&_n()},[_n,y.delete]);function Yl(){var xe;if(X?.loading){var We;return K.createElement("div",{className:Xn(O?.loader,y==null||(We=y.classNames)==null?void 0:We.loader,"sonner-loader"),"data-visible":It==="loading"},X.loading)}return K.createElement(yM,{className:Xn(O?.loader,y==null||(xe=y.classNames)==null?void 0:xe.loader),visible:It==="loading"})}const xo=y.icon||X?.[It]||mM(It);var Or,Kl;return K.createElement("li",{tabIndex:0,ref:yn,className:Xn(ze,sc,O?.toast,y==null||(e=y.classNames)==null?void 0:e.toast,O?.default,O?.[It],y==null||(t=y.classNames)==null?void 0:t[It]),"data-sonner-toast":"","data-rich-colors":(Or=y.richColors)!=null?Or:I,"data-styled":!(y.jsx||y.unstyled||b),"data-mounted":N,"data-promise":!!y.promise,"data-swiped":rr,"data-removed":ie,"data-visible":us,"data-y-position":cs,"data-x-position":fs,"data-index":_,"data-front":Fl,"data-swiping":Ae,"data-dismissible":ir,"data-type":It,"data-invert":Mi,"data-swipe-out":Le,"data-swipe-direction":V,"data-expanded":!!(U||ne&&N),style:{"--index":_,"--toasts-before":_,"--z-index":$.length-_,"--offset":`${ie?Si:Er.current}px`,"--initial-height":ne?"auto":`${ic}px`,...H,...y.style},onDragEnd:()=>{de(!1),E(null),Ar.current=null},onPointerDown:xe=>{vo||!ir||(Ql.current=new Date,wi(Er.current),xe.target.setPointerCapture(xe.pointerId),xe.target.tagName!=="BUTTON"&&(de(!0),Ar.current={x:xe.clientX,y:xe.clientY}))},onPointerUp:()=>{var xe,We,it;if(Le||!ir)return;Ar.current=null;const Ct=Number(((xe=yn.current)==null?void 0:xe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ci=Number(((We=yn.current)==null?void 0:We.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ct=new Date().getTime()-((it=Ql.current)==null?void 0:it.getTime()),et=ce==="x"?Ct:Ci,tt=Math.abs(et)/ct;if(Math.abs(et)>=BM||tt>.11){wi(Er.current),y.onDismiss==null||y.onDismiss.call(y,y),Y(ce==="x"?Ct>0?"right":"left":Ci>0?"down":"up"),_n(),Xt(!0);return}else{var Fe,pt;(Fe=yn.current)==null||Fe.style.setProperty("--swipe-amount-x","0px"),(pt=yn.current)==null||pt.style.setProperty("--swipe-amount-y","0px")}xi(!1),de(!1),E(null)},onPointerMove:xe=>{var We,it,Ct;if(!Ar.current||!ir||((We=window.getSelection())==null?void 0:We.toString().length)>0)return;const ct=xe.clientY-Ar.current.y,et=xe.clientX-Ar.current.x;var tt;const Fe=(tt=n.swipeDirections)!=null?tt:LM(ge);!ce&&(Math.abs(et)>1||Math.abs(ct)>1)&&E(Math.abs(et)>Math.abs(ct)?"x":"y");let pt={x:0,y:0};const ds=sr=>1/(1.5+Math.abs(sr)/20);if(ce==="y"){if(Fe.includes("top")||Fe.includes("bottom"))if(Fe.includes("top")&&ct<0||Fe.includes("bottom")&&ct>0)pt.y=ct;else{const sr=ct*ds(ct);pt.y=Math.abs(sr)<Math.abs(ct)?sr:ct}}else if(ce==="x"&&(Fe.includes("left")||Fe.includes("right")))if(Fe.includes("left")&&et<0||Fe.includes("right")&&et>0)pt.x=et;else{const sr=et*ds(et);pt.x=Math.abs(sr)<Math.abs(et)?sr:et}(Math.abs(pt.x)>0||Math.abs(pt.y)>0)&&xi(!0),(it=yn.current)==null||it.style.setProperty("--swipe-amount-x",`${pt.x}px`),(Ct=yn.current)==null||Ct.style.setProperty("--swipe-amount-y",`${pt.y}px`)}},Ht&&!y.jsx&&It!=="loading"?K.createElement("button",{"aria-label":W,"data-disabled":vo,"data-close-button":!0,onClick:vo||!ir?()=>{}:()=>{_n(),y.onDismiss==null||y.onDismiss.call(y,y)},className:Xn(O?.closeButton,y==null||(i=y.classNames)==null?void 0:i.closeButton)},(Kl=X?.close)!=null?Kl:wM):null,(It||y.icon||y.promise)&&y.icon!==null&&(X?.[It]!==null||y.icon)?K.createElement("div",{"data-icon":"",className:Xn(O?.icon,y==null||(o=y.classNames)==null?void 0:o.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||Yl():null,y.type!=="loading"?xo:null):null,K.createElement("div",{"data-content":"",className:Xn(O?.content,y==null||(l=y.classNames)==null?void 0:l.content)},K.createElement("div",{"data-title":"",className:Xn(O?.title,y==null||(u=y.classNames)==null?void 0:u.title)},y.jsx?y.jsx:typeof y.title=="function"?y.title():y.title),y.description?K.createElement("div",{"data-description":"",className:Xn(_e,oc,O?.description,y==null||(f=y.classNames)==null?void 0:f.description)},typeof y.description=="function"?y.description():y.description):null),K.isValidElement(y.cancel)?y.cancel:y.cancel&&du(y.cancel)?K.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||te,onClick:xe=>{du(y.cancel)&&ir&&(y.cancel.onClick==null||y.cancel.onClick.call(y.cancel,xe),_n())},className:Xn(O?.cancelButton,y==null||(d=y.classNames)==null?void 0:d.cancelButton)},y.cancel.label):null,K.isValidElement(y.action)?y.action:y.action&&du(y.action)?K.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||se,onClick:xe=>{du(y.action)&&(y.action.onClick==null||y.action.onClick.call(y.action,xe),!xe.defaultPrevented&&_n())},className:Xn(O?.actionButton,y==null||(p=y.classNames)==null?void 0:p.actionButton)},y.action.label):null)};function y0(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function VM(n,e){const t={};return[n,e].forEach((i,o)=>{const l=o===1,u=l?"--mobile-offset":"--offset",f=l?DM:RM;function d(p){["top","right","bottom","left"].forEach(g=>{t[`${u}-${g}`]=typeof p=="number"?`${p}px`:p})}typeof i=="number"||typeof i=="string"?d(i):typeof i=="object"?["top","right","bottom","left"].forEach(p=>{i[p]===void 0?t[`${u}-${p}`]=f:t[`${u}-${p}`]=typeof i[p]=="number"?`${i[p]}px`:i[p]}):d(f)}),t}const UM=K.forwardRef(function(e,t){const{invert:i,position:o="bottom-right",hotkey:l=["altKey","KeyT"],expand:u,closeButton:f,className:d,offset:p,mobileOffset:g,theme:y="light",richColors:b,duration:v,style:S,visibleToasts:M=NM,toastOptions:C,dir:_=y0(),gap:$=_M,icons:U,containerAriaLabel:J="Notifications"}=e,[I,R]=K.useState([]),H=K.useMemo(()=>Array.from(new Set([o].concat(I.filter(V=>V.position).map(V=>V.position)))),[I,o]),[te,se]=K.useState([]),[ze,_e]=K.useState(!1),[Re,ge]=K.useState(!1),[ye,ne]=K.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=K.useRef(null),X=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),W=K.useRef(null),ce=K.useRef(!1),E=K.useCallback(V=>{R(Y=>{var N;return(N=Y.find(G=>G.id===V.id))!=null&&N.delete||nn.dismiss(V.id),Y.filter(({id:G})=>G!==V.id)})},[]);return K.useEffect(()=>nn.subscribe(V=>{if(V.dismiss){requestAnimationFrame(()=>{R(Y=>Y.map(N=>N.id===V.id?{...N,delete:!0}:N))});return}setTimeout(()=>{$u.flushSync(()=>{R(Y=>{const N=Y.findIndex(G=>G.id===V.id);return N!==-1?[...Y.slice(0,N),{...Y[N],...V},...Y.slice(N+1)]:[V,...Y]})})})}),[I]),K.useEffect(()=>{if(y!=="system"){ne(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ne("dark"):ne("light")),typeof window>"u")return;const V=window.matchMedia("(prefers-color-scheme: dark)");try{V.addEventListener("change",({matches:Y})=>{ne(Y?"dark":"light")})}catch{V.addListener(({matches:N})=>{try{ne(N?"dark":"light")}catch(G){console.error(G)}})}},[y]),K.useEffect(()=>{I.length<=1&&_e(!1)},[I]),K.useEffect(()=>{const V=Y=>{var N;if(l.every(ee=>Y[ee]||Y.code===ee)){var ie;_e(!0),(ie=O.current)==null||ie.focus()}Y.code==="Escape"&&(document.activeElement===O.current||(N=O.current)!=null&&N.contains(document.activeElement))&&_e(!1)};return document.addEventListener("keydown",V),()=>document.removeEventListener("keydown",V)},[l]),K.useEffect(()=>{if(O.current)return()=>{W.current&&(W.current.focus({preventScroll:!0}),W.current=null,ce.current=!1)}},[O.current]),K.createElement("section",{ref:t,"aria-label":`${J} ${X}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},H.map((V,Y)=>{var N;const[G,ie]=V.split("-");return I.length?K.createElement("ol",{key:V,dir:_==="auto"?y0():_,tabIndex:-1,ref:O,className:d,"data-sonner-toaster":!0,"data-sonner-theme":ye,"data-y-position":G,"data-lifted":ze&&I.length>1&&!u,"data-x-position":ie,style:{"--front-toast-height":`${((N=te[0])==null?void 0:N.height)||0}px`,"--width":`${zM}px`,"--gap":`${$}px`,...S,...VM(p,g)},onBlur:ee=>{ce.current&&!ee.currentTarget.contains(ee.relatedTarget)&&(ce.current=!1,W.current&&(W.current.focus({preventScroll:!0}),W.current=null))},onFocus:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||ce.current||(ce.current=!0,W.current=ee.relatedTarget)},onMouseEnter:()=>_e(!0),onMouseMove:()=>_e(!0),onMouseLeave:()=>{Re||_e(!1)},onDragEnd:()=>_e(!1),onPointerDown:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||ge(!0)},onPointerUp:()=>ge(!1)},I.filter(ee=>!ee.position&&Y===0||ee.position===V).map((ee,Ae)=>{var de,Le;return K.createElement(qM,{key:ee.id,icons:U,index:Ae,toast:ee,defaultRichColors:b,duration:(de=C?.duration)!=null?de:v,className:C?.className,descriptionClassName:C?.descriptionClassName,invert:i,visibleToasts:M,closeButton:(Le=C?.closeButton)!=null?Le:f,interacting:Re,position:V,style:C?.style,unstyled:C?.unstyled,classNames:C?.classNames,cancelButtonStyle:C?.cancelButtonStyle,actionButtonStyle:C?.actionButtonStyle,closeButtonAriaLabel:C?.closeButtonAriaLabel,removeToast:E,toasts:I.filter(Xt=>Xt.position==ee.position),heights:te.filter(Xt=>Xt.position==ee.position),setHeights:se,expandByDefault:u,gap:$,expanded:ze,swipeDirections:e.swipeDirections})})):null}))});function IM(){const{signIn:n}=tv(),[e,t]=q.useState("signin"),[i,o]=q.useState(!1),[l,u]=q.useState(!1);return T.jsxs("div",{className:"w-full max-w-md mx-auto space-y-8",children:[T.jsxs("div",{className:"space-y-2 text-center",children:[T.jsx("h2",{className:"text-3xl font-semibold tracking-tight bg-gradient-to-r from-emerald-600 to-teal-500 bg-clip-text text-transparent",children:e==="signin"?"Welcome back":"Create your account"}),T.jsx("p",{className:"text-sm text-slate-500",children:e==="signin"?"Sign in to continue your journey.":"Join to start saving your memories."})]}),T.jsxs("form",{className:"space-y-5",onSubmit:f=>{if(f.preventDefault(),i)return;o(!0);const d=f.target,p=new FormData(d);p.set("flow",e==="signin"?"signIn":"signUp"),n("password",p).then(()=>{o(!1)}).catch(()=>{Pe.error(e==="signin"?"Sign in failed":"Sign up failed"),o(!1)})},children:[T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"group relative",children:[T.jsx("input",{id:"auth-email",className:"modern-input peer",type:"email",name:"email",placeholder:" ",required:!0,autoComplete:"email"}),T.jsx("label",{htmlFor:"auth-email",className:"floating-label",children:"Email"})]}),T.jsxs("div",{className:"group relative",children:[T.jsx("input",{id:"auth-password",className:"modern-input peer pr-12",type:l?"text":"password",name:"password",placeholder:" ",required:!0,autoComplete:e==="signin"?"current-password":"new-password",minLength:6}),T.jsx("label",{htmlFor:"auth-password",className:"floating-label",children:"Password"}),T.jsx("button",{type:"button",onClick:()=>u(f=>!f),className:"absolute top-1/2 -translate-y-1/2 right-2 text-xs text-slate-500 hover:text-slate-700",tabIndex:-1,children:l?"Hide":"Show"})]})]}),T.jsx("button",{className:"modern-primary-btn w-full",type:"submit",disabled:i,children:i?e==="signin"?"Signing in":"Creating":e==="signin"?"Sign in":"Sign up"}),T.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[T.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-slate-200 to-transparent"}),T.jsx("span",{children:"Or"}),T.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-slate-200 to-transparent"})]}),T.jsxs("div",{className:"text-center text-sm text-slate-600",children:[e==="signin"?"No account yet?":"Already registered?"," ",T.jsx("button",{type:"button",onClick:()=>t(f=>f==="signin"?"signup":"signin"),className:"font-medium text-emerald-600 hover:text-emerald-700 transition-colors",children:e==="signin"?"Create one":"Sign in"})]})]})]})}function b0(){const{isAuthenticated:n}=Ul(),{signOut:e}=tv();return n?T.jsx("button",{className:"px-4 py-2 rounded-lg transition-colors bg-blue-500 text-white",onClick:()=>void e(),children:"Sign out"}):null}const De=rT;function HM(n){const[e,t]=q.useState({}),i=Dn(De.interactions.countsMany,n.length?{mediaIds:n}:"skip"),o=ht(De.interactions.toggleLike),l=ht(De.interactions.toggleSave);q.useEffect(()=>{i&&t(d=>{let p=!1;const g={...d};return i.forEach(y=>{const b=d[y.mediaId];(!b||b.likeCount!==y.likeCount||b.saveCount!==y.saveCount||b.liked!==y.liked||b.saved!==y.saved)&&(g[y.mediaId]={likeCount:y.likeCount,saveCount:y.saveCount,liked:y.liked,saved:y.saved},p=!0)}),p?g:d})},[i]);function u(d){const p=e[d];if(!p)return;const g={...p,liked:!p.liked,likeCount:p.likeCount+(p.liked?-1:1)};t(y=>({...y,[d]:g})),o({mediaId:d}).catch(()=>t(y=>({...y,[d]:p})))}function f(d){const p=e[d];if(!p)return;const g={...p,saved:!p.saved,saveCount:p.saveCount+(p.saved?-1:1)};t(y=>({...y,[d]:g})),l({mediaId:d}).catch(()=>t(y=>({...y,[d]:p})))}return{interactionMap:e,optimisticLike:u,optimisticSave:f,countsLoading:!i&&n.length>0}}function $M({userId:n}){const e=Dn(De.profiles.get,{userId:n});return e?T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"w-6 h-6 rounded-full overflow-hidden bg-gray-100",children:e.pictureUrl?T.jsx("img",{src:e.pictureUrl,alt:e.name,className:"w-full h-full object-cover"}):T.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:"?"})}),T.jsx("div",{className:"font-medium text-sm",children:e.name})]}):null}function nv({targetType:n,targetId:e}){const t=Dn(De.comments.list,{targetType:n,targetId:e}),i=ht(De.comments.create),o=ht(De.comments.remove),l=Dn(De.auth.loggedInUser),[u,f]=q.useState("");async function d(g){if(g.preventDefault(),!!u.trim())try{await i({content:u,targetType:n,targetId:e}),f("")}catch(y){Pe.error("Failed to post comment"),console.error(y)}}async function p(g){try{await o({id:g}),Pe.success("Comment deleted")}catch(y){Pe.error("Failed to delete comment"),console.error(y)}}return t?T.jsxs("div",{className:"p-4 space-y-4",children:[T.jsx("h3",{className:"font-medium",children:"Comments"}),T.jsx("div",{className:"space-y-4",children:t.map(g=>T.jsxs("div",{className:"flex items-start gap-2",children:[T.jsx($M,{userId:g.authorId}),T.jsxs("div",{className:"flex-1 bg-gray-50 rounded-lg p-2 text-sm relative group",children:[g.content,g.authorId===l?._id&&T.jsx("button",{onClick:()=>p(g._id),className:"absolute top-2 right-2 text-red-600 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete comment",children:""})]})]},g._id))}),T.jsxs("form",{onSubmit:d,className:"flex gap-2",children:[T.jsx("input",{type:"text",value:u,onChange:g=>f(g.target.value),placeholder:"Write a comment...",className:"flex-1 p-2 border rounded"}),T.jsx("button",{type:"submit",disabled:!u.trim(),className:"bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700 disabled:opacity-50",children:"Post"})]})]}):null}const qn=["Friend","Partner","Family","Parent","Former Partner","Colleague","School"];function PM({item:n,onSave:e,onCancel:t}){const[i,o]=q.useState(n.title||""),[l,u]=q.useState(n.caption||""),[f,d]=q.useState(n.visibleTo?Array.from(n.visibleTo):[...qn]),[p,g]=q.useState(n.category),[y,b]=q.useState(!1);return T.jsxs("form",{onSubmit:v=>{v.preventDefault(),(async()=>{if(!i.trim()){Pe.error("Title is required");return}b(!0);try{await e(i.trim(),l.trim()||void 0,f,p)}finally{b(!1)}})()},className:"space-y-2",children:[T.jsx("input",{value:i,onChange:v=>o(v.target.value),className:"w-full p-2 border rounded",placeholder:"Title"}),T.jsx("textarea",{value:l,onChange:v=>u(v.target.value),className:"w-full p-2 border rounded",placeholder:"Caption (optional)"}),T.jsx("div",{className:"flex flex-wrap gap-2",children:qn.map(v=>T.jsxs("label",{className:`text-xs px-2 py-1 rounded-full border ${f.includes(v)?"bg-emerald-600 text-white border-emerald-600":"bg-white text-emerald-700"}`,children:[T.jsx("input",{className:"mr-1",type:"checkbox",checked:f.includes(v),onChange:S=>d(M=>S.target.checked?[...M,v]:M.filter(C=>C!==v))}),v]},v))}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Category"}),T.jsxs("select",{"aria-label":"Category",value:p||"",onChange:v=>g(v.target.value||void 0),className:"w-full p-2 border rounded text-sm",children:[T.jsx("option",{value:"",children:"None"}),["Special Moments","Adventures","Everyday Elegance","Passions","The Simple Life"].map(v=>T.jsx("option",{value:v,children:v},v))]})]}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{type:"submit",disabled:y,className:"px-3 py-1 bg-emerald-600 text-white rounded",children:y?"Saving...":"Save"}),T.jsx("button",{type:"button",onClick:()=>t&&t(),className:"px-3 py-1 bg-gray-100 rounded",children:"Cancel"})]})]})}function QM(){const n=Dn(De.profiles.getCurrentProfile),e=["Special Moments","Adventures","Everyday Elegance","Passions","The Simple Life"],[t,i]=q.useState(null),{results:o,status:l,loadMore:u}=Jb(De.media.list,n?{}:"skip",{initialNumItems:15}),f=ht(De.media.generateUploadUrl),d=ht(De.media.create),p=ht(De.media.remove),g=ht(De.media.update),y=Dn(De.auth.loggedInUser),[b,v]=q.useState(!1),[S,M]=q.useState(null),[C,_]=q.useState(()=>{try{const N=localStorage.getItem("ep:selectedRelationships");return N?JSON.parse(N):[...qn]}catch{return[...qn]}}),[$,U]=q.useState(()=>{try{return localStorage.getItem("ep:layoutMasonry")!=="false"}catch{return!0}}),[J,I]=q.useState(null),R=q.useRef(null),[H,te]=q.useState(null),se=(H??o??[]).map(N=>N._id),{interactionMap:ze,optimisticLike:_e,optimisticSave:Re,countsLoading:ge}=HM(se),ye=q.useRef(null),[ne,O]=q.useState({}),X=q.useRef(ne);q.useEffect(()=>{X.current=ne},[ne]),q.useEffect(()=>(ye.current=new IntersectionObserver(N=>{N.forEach(G=>{const ie=G.target;if(!ie)return;const ee=ie.dataset.mediaId;G.isIntersecting?(ie.muted=!(ee&&X.current[ee]),ie.play().catch(()=>{})):ie.pause()})},{threshold:.5}),()=>ye.current?.disconnect()),[]),q.useEffect(()=>{if(!R.current||l!=="CanLoadMore")return;const N=R.current,G=new IntersectionObserver(ie=>{ie.forEach(ee=>{ee.isIntersecting&&u(15)})},{rootMargin:"400px 0px 0px 0px"});return G.observe(N),()=>G.disconnect()},[l,u]),q.useEffect(()=>{o&&te(o.slice())},[o]),q.useEffect(()=>{try{localStorage.setItem("ep:selectedRelationships",JSON.stringify(C))}catch{}},[C]),q.useEffect(()=>{try{localStorage.setItem("ep:layoutMasonry",$?"true":"false")}catch{}},[$]);async function W(N){const G=N.target.files?.[0];G&&I({file:G,title:G.name,visibleTo:[...qn]})}async function ce(N){if(N.preventDefault(),!!J)try{v(!0);const G=await f(),ie=await fetch(G,{method:"POST",headers:{"Content-Type":J.file.type},body:J.file});if(!ie.ok)throw new Error("upload failed");const{storageId:ee}=await ie.json();await d({title:J.title,caption:J.caption||"",type:J.file.type.startsWith("image/")?"image":"video",storageId:ee,visibleTo:J.visibleTo,category:J.category}),Pe.success("Uploaded"),I(null)}catch(G){console.error(G),Pe.error("Upload failed")}finally{v(!1)}}async function E(N){if(confirm("Delete this item?"))try{await p({id:N}),te(G=>G&&G.filter(ie=>ie._id!==N)),Pe.success("Deleted")}catch(G){console.error(G),Pe.error("Delete failed")}}if(!n)return T.jsxs("div",{className:"max-w-6xl mx-auto",children:[T.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-6",children:"Photographs & Videos"}),T.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-amber-800",children:"Please complete your profile to view and share media."})]});const V=H??o??[],Y=t?V.filter(N=>N.category===t):V;return T.jsxs("div",{className:"max-w-6xl mx-auto",children:[T.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-2",children:"Photographs & Videos"}),T.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[e.map(N=>T.jsx("button",{onClick:()=>i(G=>G===N?null:N),className:`px-3 py-1.5 rounded-full text-xs font-medium border transition ${t===N?"bg-emerald-600 text-white border-emerald-600":"bg-white text-emerald-700 hover:bg-emerald-50 border-emerald-200"}`,children:N},N)),t&&T.jsx("button",{onClick:()=>i(null),className:"px-2 py-1 rounded-full text-xs bg-gray-100 hover:bg-gray-200",children:"Clear"})]}),T.jsxs("div",{className:"mb-4 flex flex-wrap gap-2 items-center",children:[qn.map(N=>T.jsx("button",{onClick:()=>_(G=>G.includes(N)?G.filter(ie=>ie!==N):[...G,N]),className:`text-xs px-2 py-1 rounded-full border transition ${C.includes(N)?"bg-emerald-600 text-white border-emerald-600":"bg-white text-emerald-700 hover:bg-emerald-50 border-emerald-200"}`,children:N},N)),T.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[T.jsx("label",{className:"text-xs text-gray-500",children:"Layout"}),T.jsx("button",{onClick:()=>U(N=>{const G=!N;try{localStorage.setItem("ep:layoutMasonry",G?"true":"false")}catch{}return G}),className:"text-xs px-2 py-1 rounded-full bg-white border",title:"Toggle layout",children:$?"Masonry":"Grid"})]}),C.length!==qn.length&&T.jsx("button",{onClick:()=>_([...qn]),className:"text-xs px-2 py-1 rounded-full bg-emerald-50 text-emerald-700 hover:bg-emerald-100 border border-emerald-200",children:"Reset"})]}),T.jsxs("div",{className:$?"[column-fill:_balance] columns-1 sm:columns-2 lg:columns-3 gap-4":"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4","aria-live":"polite",children:[J?T.jsxs("form",{onSubmit:N=>{N.preventDefault(),ce(N)},className:"mb-4 break-inside-avoid p-4 bg-white/70 backdrop-blur rounded-lg border border-emerald-100 shadow-sm flex flex-col gap-3",children:[T.jsxs("div",{className:"flex items-center justify-between gap-2",children:[T.jsx("input",{type:"text",value:J.title,onChange:N=>I({...J,title:N.target.value}),className:"flex-1 text-sm p-2 border rounded",required:!0,placeholder:"Title"}),T.jsx("button",{type:"button",onClick:()=>I(null),className:"text-xs px-2 py-1 rounded bg-gray-100 hover:bg-gray-200",children:"Cancel"})]}),T.jsx("input",{type:"text",value:J.caption||"",onChange:N=>I({...J,caption:N.target.value}),className:"text-sm p-2 border rounded",placeholder:"Caption (optional)"}),T.jsx("div",{className:"flex flex-wrap gap-1",children:qn.map(N=>T.jsxs("label",{className:"text-[10px] px-2 py-1 rounded-full bg-emerald-50 text-emerald-700 border border-emerald-100 cursor-pointer flex items-center gap-1",children:[T.jsx("input",{type:"checkbox",checked:J.visibleTo.includes(N),onChange:G=>{const ie=G.target.checked?[...J.visibleTo,N]:J.visibleTo.filter(ee=>ee!==N);I({...J,visibleTo:ie})},className:"scale-75"}),N]},N))}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-[10px] font-medium text-gray-600 mb-1",children:"Category"}),T.jsxs("select",{"aria-label":"Category",value:J.category||"",onChange:N=>I({...J,category:N.target.value||void 0}),className:"w-full p-2 border rounded text-sm",children:[T.jsx("option",{value:"",children:"None"}),e.map(N=>T.jsx("option",{value:N,children:N},N))]})]}),T.jsx("button",{type:"submit",disabled:b,className:"w-full text-sm py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-50",children:b?"Uploading...":"Upload"})]}):T.jsxs("label",{className:"mb-4 break-inside-avoid block p-6 rounded-lg border-2 border-dashed border-emerald-200 hover:border-emerald-400 text-center cursor-pointer bg-white/60 backdrop-blur-sm text-sm text-emerald-700 shadow-sm hover:shadow transition",children:[T.jsx("div",{className:"font-medium",children:"Add photo or video"}),T.jsx("div",{className:"text-xs text-emerald-600 mt-1",children:"Click or drag & drop"}),T.jsx("input",{type:"file",accept:"image/*,video/*",onChange:N=>{W(N)},className:"hidden"})]}),Y.map((N,G)=>{if(!(Array.isArray(N.visibleTo)?N.visibleTo:qn).some(de=>C.includes(de)))return null;const Ae=ze[N._id];return T.jsxs("div",{className:"relative group mb-4 break-inside-avoid rounded-lg overflow-hidden bg-gray-100 shadow-sm hover:shadow-md transition cursor-pointer",onClick:()=>M(G),children:[N.type==="image"?T.jsx("img",{src:N.url||void 0,alt:N.title,loading:"lazy",className:"w-full h-auto object-cover block transition-transform duration-300 group-hover:scale-[1.02]"}):T.jsxs("div",{className:"relative",children:[T.jsx("video",{"data-media-id":N._id,ref:de=>{de&&(de.dataset.mediaId=N._id,de.muted=!ne[N._id],ye.current?.observe(de))},src:N.url||void 0,preload:"metadata",className:"w-full h-auto object-cover block",playsInline:!0}),T.jsx("button",{onClick:de=>{de.stopPropagation();const Le=String(N._id);O(Xt=>{const rr={...Xt||{},[Le]:!Xt?.[Le]};return document.querySelectorAll(`video[data-media-id="${Le}"]`).forEach(Si=>{Si.muted=!rr[Le]}),rr})},className:"absolute top-2 left-2 w-8 h-8 rounded-full bg-white/80 flex items-center justify-center text-sm",title:ne[String(N._id)]?"Mute":"Unmute",children:ne[String(N._id)]?"":""})]}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/0 to-black/0 opacity-0 group-hover:opacity-100 transition-opacity"}),(N.caption||N.title)&&T.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 text-xs text-white opacity-0 group-hover:opacity-100 transition-opacity",children:[T.jsx("div",{className:"font-medium truncate",children:N.title}),N.caption&&T.jsx("div",{className:"text-[10px] max-h-8 overflow-hidden",children:N.caption})]}),(Ae||ge)&&T.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[Ae?T.jsxs("button",{onClick:de=>{de.stopPropagation(),_e(N._id)},className:`px-2 py-1 rounded-full text-[10px] font-medium backdrop-blur bg-black/50 hover:brightness-110 ${Ae.liked?"text-emerald-200":"text-white/80"}`,children:[" ",Ae.likeCount]}):T.jsx("div",{className:"px-2 py-1 rounded-full text-[10px] font-medium backdrop-blur bg-black/40 text-white/60 skeleton w-14 h-6"}),Ae?T.jsxs("button",{onClick:de=>{de.stopPropagation(),Re(N._id)},className:`px-2 py-1 rounded-full text-[10px] font-medium backdrop-blur bg-black/50 hover:brightness-110 ${Ae.saved?"text-red-200":"text-white/80"}`,children:[" ",Ae.saveCount]}):T.jsx("div",{className:"px-2 py-1 rounded-full text-[10px] font-medium backdrop-blur bg-black/40 text-white/60 skeleton w-14 h-6"})]}),T.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[N.authorId===y?._id&&T.jsx("button",{onClick:de=>{de.stopPropagation(),E(N._id),te(Le=>Le&&Le.filter(Xt=>Xt._id!==N._id))},className:"w-8 h-8 rounded-full bg-red-600/80 text-white flex items-center justify-center text-lg leading-none hover:bg-red-600",title:"Delete",children:""}),N.authorId===y?._id&&T.jsx("button",{onClick:de=>{de.stopPropagation(),I(null),M(G)},className:"w-8 h-8 rounded-full bg-white/90 text-emerald-700 flex items-center justify-center text-lg leading-none hover:bg-emerald-100",title:"Edit",children:""})]})]},N._id)}),l==="LoadingMore"&&T.jsx("div",{className:"mb-4 break-inside-avoid p-4 text-center text-sm text-emerald-700 bg-emerald-50 rounded",children:"Loading"})]}),T.jsx("div",{ref:R,className:"h-2 w-full"}),Y.length===0&&T.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:"No media yet. Be the first to add something special."}),S!==null&&Y[S]&&T.jsx(FM,{item:Y[S],onClose:()=>M(null),canEdit:Y[S].authorId===y?._id,onDelete:async()=>{S!==null&&(await E(Y[S]._id),M(null))},onSaveInline:async(N,G,ie,ee)=>{const Ae=Y.map(de=>({...de}));if(S!==null){te(de=>(de||Y).map(Le=>Le._id===Y[S]._id?{...Le,title:N,caption:G,visibleTo:ie||Le.visibleTo,category:ee??Le.category}:Le));try{const de=ie??(Array.isArray(Y[S].visibleTo)?Array.from(Y[S].visibleTo):[...qn]);await g({id:Y[S]._id,title:N,caption:G||"",visibleTo:de,category:ee}),Pe.success("Saved")}catch(de){console.error(de),Pe.error("Save failed"),te(Ae)}}},unmuted:!!ne[Y[S]._id],toggleMute:()=>{if(S===null)return;const N=Y[S]._id;O(G=>{const ie={...G||{},[N]:!G?.[N]};return document.querySelectorAll(`video[data-media-id="${N}"]`).forEach(Ae=>{Ae.muted=!ie[N]}),ie})}})]})}function FM({item:n,onClose:e,canEdit:t,onDelete:i,onSaveInline:o,unmuted:l,toggleMute:u}){const f=Dn(De.interactions.counts,n?{mediaId:n._id}:"skip"),d=ht(De.interactions.toggleLike),p=ht(De.interactions.toggleSave),[g,y]=q.useState(!1),[b,v]=q.useState({likeCountDelta:0,saveCountDelta:0});async function S(){if(!n)return;const R=f?.liked||!1;v(H=>({...H,liked:!R,likeCountDelta:H.likeCountDelta+(R?-1:1)}));try{await d({mediaId:n._id})}catch{v(H=>({...H,liked:R,likeCountDelta:H.likeCountDelta+(R?1:-1)}))}}async function M(){if(!n)return;const R=f?.saved||!1;v(H=>({...H,saved:!R,saveCountDelta:H.saveCountDelta+(R?-1:1)}));try{await p({mediaId:n._id})}catch{v(H=>({...H,saved:R,saveCountDelta:H.saveCountDelta+(R?1:-1)}))}}const C=b.liked??f?.liked,_=b.saved??f?.saved,$=(f?.likeCount??0)+b.likeCountDelta,U=(f?.saveCount??0)+b.saveCountDelta,[J,I]=q.useState(!1);return T.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-black/95 touch-none",children:[T.jsx("div",{className:"absolute top-3 left-3 z-10 flex gap-2",children:T.jsx("button",{onClick:e,className:"w-9 h-9 rounded-full bg-black/60 text-white flex items-center justify-center text-lg hover:bg-black/80","aria-label":"Close",children:""})}),T.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:T.jsx("div",{className:"relative max-w-[min(100%,900px)] w-full",children:T.jsx("div",{className:"w-full aspect-[3/4] md:aspect-[4/3] bg-gray-100 rounded-2xl overflow-hidden flex items-center justify-center",children:n.type==="image"?T.jsx("img",{onDoubleClick:()=>I(R=>!R),src:n.url||void 0,alt:n.title,className:"max-w-full max-h-full transition-all duration-300 select-none "+(J?"object-cover w-full h-full":"object-contain")}):T.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[T.jsx("video",{onDoubleClick:()=>I(R=>!R),"data-media-id":n._id,src:n.url||void 0,controls:!0,className:"max-w-full max-h-full transition-all duration-300 "+(J?"object-cover w-full h-full":"object-contain"),ref:R=>{R&&(R.muted=!l)}}),T.jsx("button",{onClick:u,className:"absolute top-3 left-3 w-9 h-9 rounded-full bg-white/80 flex items-center justify-center text-sm z-20 shadow",title:l?"Mute":"Unmute",children:l?"":""})]})})})}),T.jsxs("div",{className:"relative bg-white rounded-t-2xl px-4 pt-3 pb-[calc(env(safe-area-inset-bottom)+12px)] shadow-lg translate-y-full animate-[slideUp_0.4s_ease_forwards] max-h-[calc(100vh-200px)] overflow-y-auto",children:[T.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto scrollbar-none pb-2",children:[T.jsxs("button",{onClick:R=>{R.preventDefault(),S()},className:`flex items-center gap-1 px-3 py-2 rounded-full text-sm font-medium transition ${C?"bg-emerald-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:[" ",$]}),T.jsxs("button",{onClick:R=>{R.preventDefault(),M()},className:`flex items-center gap-1 px-3 py-2 rounded-full text-sm font-medium transition ${_?"bg-red-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:[" ",U]}),T.jsx("a",{href:"#comments",className:"flex items-center gap-1 px-3 py-2 rounded-full text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-700",children:" Comments"}),t&&T.jsx("button",{onClick:()=>y(R=>!R),className:"flex items-center gap-1 px-3 py-2 rounded-full text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-700",children:" Edit"}),t&&T.jsx("button",{onClick:()=>{i()},className:"flex items-center gap-1 px-3 py-2 rounded-full text-sm font-medium bg-red-600 text-white",children:"Delete"}),T.jsxs("div",{className:"ml-auto text-xs text-gray-500 truncate max-w-[40%]",children:[T.jsx("strong",{className:"font-medium text-gray-800 mr-1",children:n.title}),n.caption]})]}),g&&T.jsx("div",{className:"border-t pt-3 mt-2",children:T.jsx(PM,{item:n,onSave:async(R,H,te,se)=>{await o(R,H,te,se),y(!1)},onCancel:()=>y(!1)})}),T.jsx("div",{id:"comments",className:"border-t mt-3 pt-3 -mx-4",children:T.jsx(nv,{targetType:"media",targetId:n._id})})]})]})}function Ot(n){this.content=n}Ot.prototype={constructor:Ot,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var i=t&&t!=n?this.remove(t):this,o=i.find(n),l=i.content.slice();return o==-1?l.push(t||n,e):(l[o+1]=e,t&&(l[o]=t)),new Ot(l)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Ot(t)},addToStart:function(n,e){return new Ot([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Ot(t)},addBefore:function(n,e,t){var i=this.remove(e),o=i.content.slice(),l=i.find(n);return o.splice(l==-1?o.length:l,0,e,t),new Ot(o)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Ot.from(n),n.size?new Ot(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Ot.from(n),n.size?new Ot(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Ot.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Ot.from=function(n){if(n instanceof Ot)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Ot(e)};function rv(n,e,t){for(let i=0;;i++){if(i==n.childCount||i==e.childCount)return n.childCount==e.childCount?null:t;let o=n.child(i),l=e.child(i);if(o==l){t+=o.nodeSize;continue}if(!o.sameMarkup(l))return t;if(o.isText&&o.text!=l.text){for(let u=0;o.text[u]==l.text[u];u++)t++;return t}if(o.content.size||l.content.size){let u=rv(o.content,l.content,t+1);if(u!=null)return u}t+=o.nodeSize}}function iv(n,e,t,i){for(let o=n.childCount,l=e.childCount;;){if(o==0||l==0)return o==l?null:{a:t,b:i};let u=n.child(--o),f=e.child(--l),d=u.nodeSize;if(u==f){t-=d,i-=d;continue}if(!u.sameMarkup(f))return{a:t,b:i};if(u.isText&&u.text!=f.text){let p=0,g=Math.min(u.text.length,f.text.length);for(;p<g&&u.text[u.text.length-p-1]==f.text[f.text.length-p-1];)p++,t--,i--;return{a:t,b:i}}if(u.content.size||f.content.size){let p=iv(u.content,f.content,t-1,i-1);if(p)return p}t-=d,i-=d}}class Z{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,t,i,o=0,l){for(let u=0,f=0;f<t;u++){let d=this.content[u],p=f+d.nodeSize;if(p>e&&i(d,o+f,l||null,u)!==!1&&d.content.size){let g=f+1;d.nodesBetween(Math.max(0,e-g),Math.min(d.content.size,t-g),i,o+g)}f=p}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,i,o){let l="",u=!0;return this.nodesBetween(e,t,(f,d)=>{let p=f.isText?f.text.slice(Math.max(e,d)-d,t-d):f.isLeaf?o?typeof o=="function"?o(f):o:f.type.spec.leafText?f.type.spec.leafText(f):"":"";f.isBlock&&(f.isLeaf&&p||f.isTextblock)&&i&&(u?u=!1:l+=i),l+=p},0),l}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,i=e.firstChild,o=this.content.slice(),l=0;for(t.isText&&t.sameMarkup(i)&&(o[o.length-1]=t.withText(t.text+i.text),l=1);l<e.content.length;l++)o.push(e.content[l]);return new Z(o,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let i=[],o=0;if(t>e)for(let l=0,u=0;u<t;l++){let f=this.content[l],d=u+f.nodeSize;d>e&&((u<e||d>t)&&(f.isText?f=f.cut(Math.max(0,e-u),Math.min(f.text.length,t-u)):f=f.cut(Math.max(0,e-u-1),Math.min(f.content.size,t-u-1))),i.push(f),o+=f.nodeSize),u=d}return new Z(i,o)}cutByIndex(e,t){return e==t?Z.empty:e==0&&t==this.content.length?this:new Z(this.content.slice(e,t))}replaceChild(e,t){let i=this.content[e];if(i==t)return this;let o=this.content.slice(),l=this.size+t.nodeSize-i.nodeSize;return o[e]=t,new Z(o,l)}addToStart(e){return new Z([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Z(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,i=0;t<this.content.length;t++){let o=this.content[t];e(o,i,t),i+=o.nodeSize}}findDiffStart(e,t=0){return rv(this,e,t)}findDiffEnd(e,t=this.size,i=e.size){return iv(this,e,t,i)}findIndex(e,t=-1){if(e==0)return hu(0,e);if(e==this.size)return hu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let i=0,o=0;;i++){let l=this.child(i),u=o+l.nodeSize;if(u>=e)return u==e||t>0?hu(i+1,u):hu(i,o);o=u}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Z.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Z(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Z.empty;let t,i=0;for(let o=0;o<e.length;o++){let l=e[o];i+=l.nodeSize,o&&l.isText&&e[o-1].sameMarkup(l)?(t||(t=e.slice(0,o)),t[t.length-1]=l.withText(t[t.length-1].text+l.text)):t&&t.push(l)}return new Z(t||e,i)}static from(e){if(!e)return Z.empty;if(e instanceof Z)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Z([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Z.empty=new Z([],0);const Od={index:0,offset:0};function hu(n,e){return Od.index=n,Od.offset=e,Od}function Ou(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!Ou(n[i],e[i]))return!1}else{for(let i in n)if(!(i in e)||!Ou(n[i],e[i]))return!1;for(let i in e)if(!(i in n))return!1}return!0}let Qe=class ih{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,i=!1;for(let o=0;o<e.length;o++){let l=e[o];if(this.eq(l))return e;if(this.type.excludes(l.type))t||(t=e.slice(0,o));else{if(l.type.excludes(this.type))return e;!i&&l.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),i=!0),t&&t.push(l)}}return t||(t=e.slice()),i||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ou(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let i=e.marks[t.type];if(!i)throw new RangeError(`There is no mark type ${t.type} in this schema`);let o=i.create(t.attrs);return i.checkAttrs(o.attrs),o}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].eq(t[i]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ih.none;if(e instanceof ih)return[e];let t=e.slice();return t.sort((i,o)=>i.type.rank-o.type.rank),t}};Qe.none=[];class Nu extends Error{}class re{constructor(e,t,i){this.content=e,this.openStart=t,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let i=ov(this.content,e+this.openStart,t);return i&&new re(i,this.openStart,this.openEnd)}removeBetween(e,t){return new re(sv(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return re.empty;let i=t.openStart||0,o=t.openEnd||0;if(typeof i!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new re(Z.fromJSON(e,t.content),i,o)}static maxOpen(e,t=!0){let i=0,o=0;for(let l=e.firstChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.firstChild)i++;for(let l=e.lastChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.lastChild)o++;return new re(e,i,o)}}re.empty=new re(Z.empty,0,0);function sv(n,e,t){let{index:i,offset:o}=n.findIndex(e),l=n.maybeChild(i),{index:u,offset:f}=n.findIndex(t);if(o==e||l.isText){if(f!=t&&!n.child(u).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(i!=u)throw new RangeError("Removing non-flat range");return n.replaceChild(i,l.copy(sv(l.content,e-o-1,t-o-1)))}function ov(n,e,t,i){let{index:o,offset:l}=n.findIndex(e),u=n.maybeChild(o);if(l==e||u.isText)return n.cut(0,e).append(t).append(n.cut(e));let f=ov(u.content,e-l-1,t);return f&&n.replaceChild(o,u.copy(f))}function GM(n,e,t){if(t.openStart>n.depth)throw new Nu("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Nu("Inconsistent open depths");return lv(n,e,t,0)}function lv(n,e,t,i){let o=n.index(i),l=n.node(i);if(o==e.index(i)&&i<n.depth-t.openStart){let u=lv(n,e,t,i+1);return l.copy(l.content.replaceChild(o,u))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==i&&e.depth==i){let u=n.parent,f=u.content;return Wi(u,f.cut(0,n.parentOffset).append(t.content).append(f.cut(e.parentOffset)))}else{let{start:u,end:f}=YM(t,n);return Wi(l,uv(n,u,f,e,i))}else return Wi(l,Ru(n,e,i))}function av(n,e){if(!e.type.compatibleContent(n.type))throw new Nu("Cannot join "+e.type.name+" onto "+n.type.name)}function sh(n,e,t){let i=n.node(t);return av(i,e.node(t)),i}function Zi(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Ml(n,e,t,i){let o=(e||n).node(t),l=0,u=e?e.index(t):o.childCount;n&&(l=n.index(t),n.depth>t?l++:n.textOffset&&(Zi(n.nodeAfter,i),l++));for(let f=l;f<u;f++)Zi(o.child(f),i);e&&e.depth==t&&e.textOffset&&Zi(e.nodeBefore,i)}function Wi(n,e){return n.type.checkContent(e),n.copy(e)}function uv(n,e,t,i,o){let l=n.depth>o&&sh(n,e,o+1),u=i.depth>o&&sh(t,i,o+1),f=[];return Ml(null,n,o,f),l&&u&&e.index(o)==t.index(o)?(av(l,u),Zi(Wi(l,uv(n,e,t,i,o+1)),f)):(l&&Zi(Wi(l,Ru(n,e,o+1)),f),Ml(e,t,o,f),u&&Zi(Wi(u,Ru(t,i,o+1)),f)),Ml(i,null,o,f),new Z(f)}function Ru(n,e,t){let i=[];if(Ml(null,n,t,i),n.depth>t){let o=sh(n,e,t+1);Zi(Wi(o,Ru(n,e,t+1)),i)}return Ml(e,null,t,i),new Z(i)}function YM(n,e){let t=e.depth-n.openStart,o=e.node(t).copy(n.content);for(let l=t-1;l>=0;l--)o=e.node(l).copy(Z.from(o));return{start:o.resolveNoCache(n.openStart+t),end:o.resolveNoCache(o.content.size-n.openEnd-t)}}class Rl{constructor(e,t,i){this.pos=e,this.path=t,this.parentOffset=i,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],o=e.child(t);return i?e.child(t).cut(i):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let i=this.path[t*3],o=t==0?0:this.path[t*3-1]+1;for(let l=0;l<e;l++)o+=i.child(l).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Qe.none;if(this.textOffset)return e.child(t).marks;let i=e.maybeChild(t-1),o=e.maybeChild(t);if(!i){let f=i;i=o,o=f}let l=i.marks;for(var u=0;u<l.length;u++)l[u].type.spec.inclusive===!1&&(!o||!l[u].isInSet(o.marks))&&(l=l[u--].removeFromSet(l));return l}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let i=t.marks,o=e.parent.maybeChild(e.index());for(var l=0;l<i.length;l++)i[l].type.spec.inclusive===!1&&(!o||!i[l].isInSet(o.marks))&&(i=i[l--].removeFromSet(i));return i}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!t||t(this.node(i))))return new Du(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let i=[],o=0,l=t;for(let u=e;;){let{index:f,offset:d}=u.content.findIndex(l),p=l-d;if(i.push(u,f,o+d),!p||(u=u.child(f),u.isText))break;l=p-1,o+=d+1}return new Rl(t,i,l)}static resolveCached(e,t){let i=v0.get(e);if(i)for(let l=0;l<i.elts.length;l++){let u=i.elts[l];if(u.pos==t)return u}else v0.set(e,i=new KM);let o=i.elts[i.i]=Rl.resolve(e,t);return i.i=(i.i+1)%JM,o}}class KM{constructor(){this.elts=[],this.i=0}}const JM=12,v0=new WeakMap;class Du{constructor(e,t,i){this.$from=e,this.$to=t,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const XM=Object.create(null);let ci=class oh{constructor(e,t,i,o=Qe.none){this.type=e,this.attrs=t,this.marks=o,this.content=i||Z.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,i,o=0){this.content.nodesBetween(e,t,i,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,i,o){return this.content.textBetween(e,t,i,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,i){return this.type==e&&Ou(this.attrs,t||e.defaultAttrs||XM)&&Qe.sameSet(this.marks,i||Qe.none)}copy(e=null){return e==this.content?this:new oh(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new oh(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,i=!1){if(e==t)return re.empty;let o=this.resolve(e),l=this.resolve(t),u=i?0:o.sharedDepth(t),f=o.start(u),p=o.node(u).content.cut(o.pos-f,l.pos-f);return new re(p,o.depth-u,l.depth-u)}replace(e,t,i){return GM(this.resolve(e),this.resolve(t),i)}nodeAt(e){for(let t=this;;){let{index:i,offset:o}=t.content.findIndex(e);if(t=t.maybeChild(i),!t)return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(t),index:t,offset:i};let o=this.content.child(t-1);return{node:o,index:t-1,offset:i-o.nodeSize}}resolve(e){return Rl.resolveCached(this,e)}resolveNoCache(e){return Rl.resolve(this,e)}rangeHasMark(e,t,i){let o=!1;return t>e&&this.nodesBetween(e,t,l=>(i.isInSet(l.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),cv(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,i=Z.empty,o=0,l=i.childCount){let u=this.contentMatchAt(e).matchFragment(i,o,l),f=u&&u.matchFragment(this.content,t);if(!f||!f.validEnd)return!1;for(let d=o;d<l;d++)if(!this.type.allowsMarks(i.child(d).marks))return!1;return!0}canReplaceWith(e,t,i,o){if(o&&!this.type.allowsMarks(o))return!1;let l=this.contentMatchAt(e).matchType(i),u=l&&l.matchFragment(this.content,t);return u?u.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Qe.none;for(let t=0;t<this.marks.length;t++){let i=this.marks[t];i.type.checkAttrs(i.attrs),e=i.addToSet(e)}if(!Qe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let i;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,i)}let o=Z.fromJSON(e,t.content),l=e.nodeType(t.type).create(t.attrs,o,i);return l.type.checkAttrs(l.attrs),l}};ci.prototype.text=void 0;class zu extends ci{constructor(e,t,i,o){if(super(e,t,null,o),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):cv(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new zu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new zu(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function cv(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class rs{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let i=new ZM(e,t);if(i.next==null)return rs.empty;let o=fv(i);i.next&&i.err("Unexpected trailing text");let l=sC(iC(o));return oC(l,i),l}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,i=e.childCount){let o=this;for(let l=t;o&&l<i;l++)o=o.matchType(e.child(l).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let i=0;i<e.next.length;i++)if(this.next[t].type==e.next[i].type)return!0;return!1}fillBefore(e,t=!1,i=0){let o=[this];function l(u,f){let d=u.matchFragment(e,i);if(d&&(!t||d.validEnd))return Z.from(f.map(p=>p.createAndFill()));for(let p=0;p<u.next.length;p++){let{type:g,next:y}=u.next[p];if(!(g.isText||g.hasRequiredAttrs())&&o.indexOf(y)==-1){o.push(y);let b=l(y,f.concat(g));if(b)return b}}return null}return l(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let o=i.shift(),l=o.match;if(l.matchType(e)){let u=[];for(let f=o;f.type;f=f.via)u.push(f.type);return u.reverse()}for(let u=0;u<l.next.length;u++){let{type:f,next:d}=l.next[u];!f.isLeaf&&!f.hasRequiredAttrs()&&!(f.name in t)&&(!o.type||d.validEnd)&&(i.push({match:f.contentMatch,type:f,via:o}),t[f.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(i){e.push(i);for(let o=0;o<i.next.length;o++)e.indexOf(i.next[o].next)==-1&&t(i.next[o].next)}return t(this),e.map((i,o)=>{let l=o+(i.validEnd?"*":" ")+" ";for(let u=0;u<i.next.length;u++)l+=(u?", ":"")+i.next[u].type.name+"->"+e.indexOf(i.next[u].next);return l}).join(`
`)}}rs.empty=new rs(!0);class ZM{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function fv(n){let e=[];do e.push(WM(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function WM(n){let e=[];do e.push(eC(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function eC(n){let e=rC(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=tC(n,e);else break;return e}function x0(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function tC(n,e){let t=x0(n),i=t;return n.eat(",")&&(n.next!="}"?i=x0(n):i=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:i,expr:e}}function nC(n,e){let t=n.nodeTypes,i=t[e];if(i)return[i];let o=[];for(let l in t){let u=t[l];u.isInGroup(e)&&o.push(u)}return o.length==0&&n.err("No node type or group '"+e+"' found"),o}function rC(n){if(n.eat("(")){let e=fv(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=nC(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function iC(n){let e=[[]];return o(l(n,0),t()),e;function t(){return e.push([])-1}function i(u,f,d){let p={term:d,to:f};return e[u].push(p),p}function o(u,f){u.forEach(d=>d.to=f)}function l(u,f){if(u.type=="choice")return u.exprs.reduce((d,p)=>d.concat(l(p,f)),[]);if(u.type=="seq")for(let d=0;;d++){let p=l(u.exprs[d],f);if(d==u.exprs.length-1)return p;o(p,f=t())}else if(u.type=="star"){let d=t();return i(f,d),o(l(u.expr,d),d),[i(d)]}else if(u.type=="plus"){let d=t();return o(l(u.expr,f),d),o(l(u.expr,d),d),[i(d)]}else{if(u.type=="opt")return[i(f)].concat(l(u.expr,f));if(u.type=="range"){let d=f;for(let p=0;p<u.min;p++){let g=t();o(l(u.expr,d),g),d=g}if(u.max==-1)o(l(u.expr,d),d);else for(let p=u.min;p<u.max;p++){let g=t();i(d,g),o(l(u.expr,d),g),d=g}return[i(d)]}else{if(u.type=="name")return[i(f,void 0,u.value)];throw new Error("Unknown expr type")}}}}function dv(n,e){return e-n}function S0(n,e){let t=[];return i(e),t.sort(dv);function i(o){let l=n[o];if(l.length==1&&!l[0].term)return i(l[0].to);t.push(o);for(let u=0;u<l.length;u++){let{term:f,to:d}=l[u];!f&&t.indexOf(d)==-1&&i(d)}}}function sC(n){let e=Object.create(null);return t(S0(n,0));function t(i){let o=[];i.forEach(u=>{n[u].forEach(({term:f,to:d})=>{if(!f)return;let p;for(let g=0;g<o.length;g++)o[g][0]==f&&(p=o[g][1]);S0(n,d).forEach(g=>{p||o.push([f,p=[]]),p.indexOf(g)==-1&&p.push(g)})})});let l=e[i.join(",")]=new rs(i.indexOf(n.length-1)>-1);for(let u=0;u<o.length;u++){let f=o[u][1].sort(dv);l.next.push({type:o[u][0],next:e[f.join(",")]||t(f)})}return l}}function oC(n,e){for(let t=0,i=[n];t<i.length;t++){let o=i[t],l=!o.validEnd,u=[];for(let f=0;f<o.next.length;f++){let{type:d,next:p}=o.next[f];u.push(d.name),l&&!(d.isText||d.hasRequiredAttrs())&&(l=!1),i.indexOf(p)==-1&&i.push(p)}l&&e.err("Only non-generatable nodes ("+u.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function hv(n){let e=Object.create(null);for(let t in n){let i=n[t];if(!i.hasDefault)return null;e[t]=i.default}return e}function pv(n,e){let t=Object.create(null);for(let i in n){let o=e&&e[i];if(o===void 0){let l=n[i];if(l.hasDefault)o=l.default;else throw new RangeError("No value supplied for attribute "+i)}t[i]=o}return t}function mv(n,e,t,i){for(let o in e)if(!(o in n))throw new RangeError(`Unsupported attribute ${o} for ${t} of type ${o}`);for(let o in n){let l=n[o];l.validate&&l.validate(e[o])}}function gv(n,e){let t=Object.create(null);if(e)for(let i in e)t[i]=new aC(n,i,e[i]);return t}let w0=class yv{constructor(e,t,i){this.name=e,this.schema=t,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=gv(e,i.attrs),this.defaultAttrs=hv(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==rs.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:pv(this.attrs,e)}create(e=null,t,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ci(this,this.computeAttrs(e),Z.from(t),Qe.setFrom(i))}createChecked(e=null,t,i){return t=Z.from(t),this.checkContent(t),new ci(this,this.computeAttrs(e),t,Qe.setFrom(i))}createAndFill(e=null,t,i){if(e=this.computeAttrs(e),t=Z.from(t),t.size){let u=this.contentMatch.fillBefore(t);if(!u)return null;t=u.append(t)}let o=this.contentMatch.matchFragment(t),l=o&&o.fillBefore(Z.empty,!0);return l?new ci(this,e,t.append(l),Qe.setFrom(i)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){mv(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?t&&t.push(e[i]):t||(t=e.slice(0,i));return t?t.length?t:Qe.none:e}static compile(e,t){let i=Object.create(null);e.forEach((l,u)=>i[l]=new yv(l,t,u));let o=t.spec.topNode||"doc";if(!i[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let l in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function lC(n,e,t){let i=t.split("|");return o=>{let l=o===null?"null":typeof o;if(i.indexOf(l)<0)throw new RangeError(`Expected value of type ${i} for attribute ${e} on type ${n}, got ${l}`)}}class aC{constructor(e,t,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?lC(e,t,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class Pu{constructor(e,t,i,o){this.name=e,this.rank=t,this.schema=i,this.spec=o,this.attrs=gv(e,o.attrs),this.excluded=null;let l=hv(this.attrs);this.instance=l?new Qe(this,l):null}create(e=null){return!e&&this.instance?this.instance:new Qe(this,pv(this.attrs,e))}static compile(e,t){let i=Object.create(null),o=0;return e.forEach((l,u)=>i[l]=new Pu(l,o++,t,u)),i}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){mv(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class bv{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let o in e)t[o]=e[o];t.nodes=Ot.from(e.nodes),t.marks=Ot.from(e.marks||{}),this.nodes=w0.compile(this.spec.nodes,this),this.marks=Pu.compile(this.spec.marks,this);let i=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let l=this.nodes[o],u=l.spec.content||"",f=l.spec.marks;if(l.contentMatch=i[u]||(i[u]=rs.parse(u,this.nodes)),l.inlineContent=l.contentMatch.inlineContent,l.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!l.isInline||!l.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=l}l.markSet=f=="_"?null:f?T0(this,f.split(" ")):f==""||!l.inlineContent?[]:null}for(let o in this.marks){let l=this.marks[o],u=l.spec.excludes;l.excluded=u==null?[l]:u==""?[]:T0(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,i,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof w0){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,i,o)}text(e,t){let i=this.nodes.text;return new zu(i,i.defaultAttrs,e,Qe.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return ci.fromJSON(this,e)}markFromJSON(e){return Qe.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function T0(n,e){let t=[];for(let i=0;i<e.length;i++){let o=e[i],l=n.marks[o],u=l;if(l)t.push(l);else for(let f in n.marks){let d=n.marks[f];(o=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(o)>-1)&&t.push(u=d)}if(!u)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return t}function uC(n){return n.tag!=null}function cC(n){return n.style!=null}class fi{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let i=this.matchedStyles=[];t.forEach(o=>{if(uC(o))this.tags.push(o);else if(cC(o)){let l=/[^=]*/.exec(o.style)[0];i.indexOf(l)<0&&i.push(l),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let l=e.nodes[o.node];return l.contentMatch.matchType(l)})}parse(e,t={}){let i=new C0(this,t,!1);return i.addAll(e,Qe.none,t.from,t.to),i.finish()}parseSlice(e,t={}){let i=new C0(this,t,!0);return i.addAll(e,Qe.none,t.from,t.to),re.maxOpen(i.finish())}matchTag(e,t,i){for(let o=i?this.tags.indexOf(i)+1:0;o<this.tags.length;o++){let l=this.tags[o];if(hC(e,l.tag)&&(l.namespace===void 0||e.namespaceURI==l.namespace)&&(!l.context||t.matchesContext(l.context))){if(l.getAttrs){let u=l.getAttrs(e);if(u===!1)continue;l.attrs=u||void 0}return l}}}matchStyle(e,t,i,o){for(let l=o?this.styles.indexOf(o)+1:0;l<this.styles.length;l++){let u=this.styles[l],f=u.style;if(!(f.indexOf(e)!=0||u.context&&!i.matchesContext(u.context)||f.length>e.length&&(f.charCodeAt(e.length)!=61||f.slice(e.length+1)!=t))){if(u.getAttrs){let d=u.getAttrs(t);if(d===!1)continue;u.attrs=d||void 0}return u}}}static schemaRules(e){let t=[];function i(o){let l=o.priority==null?50:o.priority,u=0;for(;u<t.length;u++){let f=t[u];if((f.priority==null?50:f.priority)<l)break}t.splice(u,0,o)}for(let o in e.marks){let l=e.marks[o].spec.parseDOM;l&&l.forEach(u=>{i(u=k0(u)),u.mark||u.ignore||u.clearMark||(u.mark=o)})}for(let o in e.nodes){let l=e.nodes[o].spec.parseDOM;l&&l.forEach(u=>{i(u=k0(u)),u.node||u.ignore||u.mark||(u.node=o)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new fi(e,fi.schemaRules(e)))}}const vv={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},fC={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},xv={ol:!0,ul:!0},Dl=1,lh=2,Su=4;function M0(n,e,t){return e!=null?(e?Dl:0)|(e==="full"?lh:0):n&&n.whitespace=="pre"?Dl|lh:t&-5}class pu{constructor(e,t,i,o,l,u){this.type=e,this.attrs=t,this.marks=i,this.solid=o,this.options=u,this.content=[],this.activeMarks=Qe.none,this.match=l||(u&Su?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Z.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let i=this.type.contentMatch,o;return(o=i.findWrapping(e.type))?(this.match=i,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Dl)){let i=this.content[this.content.length-1],o;if(i&&i.isText&&(o=/[ \t\r\n\u000c]+$/.exec(i.text))){let l=i;i.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=l.withText(l.text.slice(0,l.text.length-o[0].length))}}let t=Z.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Z.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!vv.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class C0{constructor(e,t,i){this.parser=e,this.options=t,this.isOpen=i,this.open=0,this.localPreserveWS=!1;let o=t.topNode,l,u=M0(null,t.preserveWhitespace,0)|(i?Su:0);o?l=new pu(o.type,o.attrs,Qe.none,!0,t.topMatch||o.type.contentMatch,u):i?l=new pu(null,null,Qe.none,!0,null,u):l=new pu(e.schema.topNodeType,null,Qe.none,!0,null,u),this.nodes=[l],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let i=e.nodeValue,o=this.top,l=o.options&lh?"full":this.localPreserveWS||(o.options&Dl)>0;if(l==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(i)){if(l)l!=="full"?i=i.replace(/\r?\n|\r/g," "):i=i.replace(/\r\n?/g,`
`);else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let u=o.content[o.content.length-1],f=e.previousSibling;(!u||f&&f.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(i=i.slice(1))}i&&this.insertNode(this.parser.schema.text(i),t,!/\S/.test(i)),this.findInText(e)}else this.findInside(e)}addElement(e,t,i){let o=this.localPreserveWS,l=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let u=e.nodeName.toLowerCase(),f;xv.hasOwnProperty(u)&&this.parser.normalizeLists&&dC(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(f=this.parser.matchTag(e,this,i));e:if(d?d.ignore:fC.hasOwnProperty(u))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let p,g=this.needsBlock;if(vv.hasOwnProperty(u))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),p=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let y=d&&d.skip?t:this.readStyles(e,t);y&&this.addAll(e,y),p&&this.sync(l),this.needsBlock=g}else{let p=this.readStyles(e,t);p&&this.addElementByRule(e,d,p,d.consuming===!1?f:void 0)}this.localPreserveWS=o}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let i=e.style;if(i&&i.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let l=this.parser.matchedStyles[o],u=i.getPropertyValue(l);if(u)for(let f=void 0;;){let d=this.parser.matchStyle(l,u,this,f);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(p=>!d.clearMark(p)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)f=d;else break}}return t}addElementByRule(e,t,i,o){let l,u;if(t.node)if(u=this.parser.schema.nodes[t.node],u.isLeaf)this.insertNode(u.create(t.attrs),i,e.nodeName=="BR")||this.leafFallback(e,i);else{let d=this.enter(u,t.attrs||null,i,t.preserveWhitespace);d&&(l=!0,i=d)}else{let d=this.parser.schema.marks[t.mark];i=i.concat(d.create(t.attrs))}let f=this.top;if(u&&u.isLeaf)this.findInside(e);else if(o)this.addElement(e,i,o);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,i,!1));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,i),this.findAround(e,d,!1)}l&&this.sync(f)&&this.open--}addAll(e,t,i,o){let l=i||0;for(let u=i?e.childNodes[i]:e.firstChild,f=o==null?null:e.childNodes[o];u!=f;u=u.nextSibling,++l)this.findAtPoint(e,l),this.addDOM(u,t);this.findAtPoint(e,l)}findPlace(e,t,i){let o,l;for(let u=this.open,f=0;u>=0;u--){let d=this.nodes[u],p=d.findWrapping(e);if(p&&(!o||o.length>p.length+f)&&(o=p,l=d,!p.length))break;if(d.solid){if(i)break;f+=2}}if(!o)return null;this.sync(l);for(let u=0;u<o.length;u++)t=this.enterInner(o[u],null,t,!1);return t}insertNode(e,t,i){if(e.isInline&&this.needsBlock&&!this.top.type){let l=this.textblockFromContext();l&&(t=this.enterInner(l,null,t))}let o=this.findPlace(e,t,i);if(o){this.closeExtra();let l=this.top;l.match&&(l.match=l.match.matchType(e.type));let u=Qe.none;for(let f of o.concat(e.marks))(l.type?l.type.allowsMarkType(f.type):E0(f.type,e.type))&&(u=f.addToSet(u));return l.content.push(e.mark(u)),!0}return!1}enter(e,t,i,o){let l=this.findPlace(e.create(t),i,!1);return l&&(l=this.enterInner(e,t,i,!0,o)),l}enterInner(e,t,i,o=!1,l){this.closeExtra();let u=this.top;u.match=u.match&&u.match.matchType(e);let f=M0(e,l,u.options);u.options&Su&&u.content.length==0&&(f|=Su);let d=Qe.none;return i=i.filter(p=>(u.type?u.type.allowsMarkType(p.type):E0(p.type,e))?(d=p.addToSet(d),!1):!0),this.nodes.push(new pu(e,t,d,o,null,f)),this.open++,i}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Dl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let i=this.nodes[t].content;for(let o=i.length-1;o>=0;o--)e+=i[o].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==t&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,i){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&t.compareDocumentPosition(this.find[o].node)&(i?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),i=this.options.context,o=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),l=-(i?i.depth+1:0)+(o?0:1),u=(f,d)=>{for(;f>=0;f--){let p=t[f];if(p==""){if(f==t.length-1||f==0)continue;for(;d>=l;d--)if(u(f-1,d))return!0;return!1}else{let g=d>0||d==0&&o?this.nodes[d].type:i&&d>=l?i.node(d-l).type:null;if(!g||g.name!=p&&!g.isInGroup(p))return!1;d--}}return!0};return u(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let t in this.parser.schema.nodes){let i=this.parser.schema.nodes[t];if(i.isTextblock&&i.defaultAttrs)return i}}}function dC(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let i=e.nodeType==1?e.nodeName.toLowerCase():null;i&&xv.hasOwnProperty(i)&&t?(t.appendChild(e),e=t):i=="li"?t=e:i&&(t=null)}}function hC(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function k0(n){let e={};for(let t in n)e[t]=n[t];return e}function E0(n,e){let t=e.schema.nodes;for(let i in t){let o=t[i];if(!o.allowsMarkType(n))continue;let l=[],u=f=>{l.push(f);for(let d=0;d<f.edgeCount;d++){let{type:p,next:g}=f.edge(d);if(p==e||l.indexOf(g)<0&&u(g))return!0}};if(u(o.contentMatch))return!0}}class as{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},i){i||(i=Nd(t).createDocumentFragment());let o=i,l=[];return e.forEach(u=>{if(l.length||u.marks.length){let f=0,d=0;for(;f<l.length&&d<u.marks.length;){let p=u.marks[d];if(!this.marks[p.type.name]){d++;continue}if(!p.eq(l[f][0])||p.type.spec.spanning===!1)break;f++,d++}for(;f<l.length;)o=l.pop()[1];for(;d<u.marks.length;){let p=u.marks[d++],g=this.serializeMark(p,u.isInline,t);g&&(l.push([p,o]),o.appendChild(g.dom),o=g.contentDOM||g.dom)}}o.appendChild(this.serializeNodeInner(u,t))}),i}serializeNodeInner(e,t){let{dom:i,contentDOM:o}=wu(Nd(t),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return i}serializeNode(e,t={}){let i=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let l=this.serializeMark(e.marks[o],e.isInline,t);l&&((l.contentDOM||l.dom).appendChild(i),i=l.dom)}return i}serializeMark(e,t,i={}){let o=this.marks[e.type.name];return o&&wu(Nd(i),o(e,t),null,e.attrs)}static renderSpec(e,t,i=null,o){return wu(e,t,i,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new as(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=A0(e.nodes);return t.text||(t.text=i=>i.text),t}static marksFromSchema(e){return A0(e.marks)}}function A0(n){let e={};for(let t in n){let i=n[t].spec.toDOM;i&&(e[t]=i)}return e}function Nd(n){return n.document||window.document}const O0=new WeakMap;function pC(n){let e=O0.get(n);return e===void 0&&O0.set(n,e=mC(n)),e}function mC(n){let e=null;function t(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")e||(e=[]),e.push(i);else for(let o=0;o<i.length;o++)t(i[o]);else for(let o in i)t(i[o])}return t(n),e}function wu(n,e,t,i){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],l;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(l=pC(i))&&l.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let u=o.indexOf(" ");u>0&&(t=o.slice(0,u),o=o.slice(u+1));let f,d=t?n.createElementNS(t,o):n.createElement(o),p=e[1],g=1;if(p&&typeof p=="object"&&p.nodeType==null&&!Array.isArray(p)){g=2;for(let y in p)if(p[y]!=null){let b=y.indexOf(" ");b>0?d.setAttributeNS(y.slice(0,b),y.slice(b+1),p[y]):d.setAttribute(y,p[y])}}for(let y=g;y<e.length;y++){let b=e[y];if(b===0){if(y<e.length-1||y>g)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:v,contentDOM:S}=wu(n,b,t,i);if(d.appendChild(v),S){if(f)throw new RangeError("Multiple content holes");f=S}}}return{dom:d,contentDOM:f}}const Sv=65535,wv=Math.pow(2,16);function gC(n,e){return n+e*wv}function N0(n){return n&Sv}function yC(n){return(n-(n&Sv))/wv}const Tv=1,Mv=2,Tu=4,Cv=8;class ah{constructor(e,t,i){this.pos=e,this.delInfo=t,this.recover=i}get deleted(){return(this.delInfo&Cv)>0}get deletedBefore(){return(this.delInfo&(Tv|Tu))>0}get deletedAfter(){return(this.delInfo&(Mv|Tu))>0}get deletedAcross(){return(this.delInfo&Tu)>0}}class pn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&pn.empty)return pn.empty}recover(e){let t=0,i=N0(e);if(!this.inverted)for(let o=0;o<i;o++)t+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[i*3]+t+yC(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,i){let o=0,l=this.inverted?2:1,u=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?o:0);if(d>e)break;let p=this.ranges[f+l],g=this.ranges[f+u],y=d+p;if(e<=y){let b=p?e==d?-1:e==y?1:t:t,v=d+o+(b<0?0:g);if(i)return v;let S=e==(t<0?d:y)?null:gC(f/3,e-d),M=e==d?Mv:e==y?Tv:Tu;return(t<0?e!=d:e!=y)&&(M|=Cv),new ah(v,M,S)}o+=g-p}return i?e+o:new ah(e+o,0,null)}touches(e,t){let i=0,o=N0(t),l=this.inverted?2:1,u=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?i:0);if(d>e)break;let p=this.ranges[f+l],g=d+p;if(e<=g&&f==o*3)return!0;i+=this.ranges[f+u]-p}return!1}forEach(e){let t=this.inverted?2:1,i=this.inverted?1:2;for(let o=0,l=0;o<this.ranges.length;o+=3){let u=this.ranges[o],f=u-(this.inverted?l:0),d=u+(this.inverted?0:l),p=this.ranges[o+t],g=this.ranges[o+i];e(f,f+p,d,d+g),l+=g-p}}invert(){return new pn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?pn.empty:new pn(e<0?[0,-e,0]:[0,0,e])}}pn.empty=new pn([]);class zl{constructor(e,t,i=0,o=e?e.length:0){this.mirror=t,this.from=i,this.to=o,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new zl(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,i=this._maps.length;t<e._maps.length;t++){let o=e.getMirror(t);this.appendMap(e._maps[t],o!=null&&o<t?i+o:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,i=this._maps.length+e._maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e._maps[t].invert(),o!=null&&o>t?i-o-1:void 0)}}invert(){let e=new zl;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let i=this.from;i<this.to;i++)e=this._maps[i].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,i){let o=0;for(let l=this.from;l<this.to;l++){let u=this._maps[l],f=u.mapResult(e,t);if(f.recover!=null){let d=this.getMirror(l);if(d!=null&&d>l&&d<this.to){l=d,e=this._maps[d].recover(f.recover);continue}}o|=f.delInfo,e=f.pos}return i?e:new ah(e,o,null)}}const Rd=Object.create(null);class Ut{getMap(){return pn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=Rd[t.stepType];if(!i)throw new RangeError(`No step type ${t.stepType} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in Rd)throw new RangeError("Duplicate use of step JSON ID "+e);return Rd[e]=t,t.prototype.jsonID=e,t}}class ut{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new ut(e,null)}static fail(e){return new ut(null,e)}static fromReplace(e,t,i,o){try{return ut.ok(e.replace(t,i,o))}catch(l){if(l instanceof Nu)return ut.fail(l.message);throw l}}}function zh(n,e,t){let i=[];for(let o=0;o<n.childCount;o++){let l=n.child(o);l.content.size&&(l=l.copy(zh(l.content,e,l))),l.isInline&&(l=e(l,t,o)),i.push(l)}return Z.fromArray(i)}class li extends Ut{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=e.resolve(this.from),o=i.node(i.sharedDepth(this.to)),l=new re(zh(t.content,(u,f)=>!u.isAtom||!f.type.allowsMarkType(this.mark.type)?u:u.mark(this.mark.addToSet(u.marks)),o),t.openStart,t.openEnd);return ut.fromReplace(e,this.from,this.to,l)}invert(){return new er(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new li(t.pos,i.pos,this.mark)}merge(e){return e instanceof li&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new li(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new li(t.from,t.to,e.markFromJSON(t.mark))}}Ut.jsonID("addMark",li);class er extends Ut{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=new re(zh(t.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),t.openStart,t.openEnd);return ut.fromReplace(e,this.from,this.to,i)}invert(){return new li(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new er(t.pos,i.pos,this.mark)}merge(e){return e instanceof er&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new er(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new er(t.from,t.to,e.markFromJSON(t.mark))}}Ut.jsonID("removeMark",er);class ai extends Ut{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ut.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return ut.fromReplace(e,this.pos,this.pos+1,new re(Z.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let i=this.mark.addToSet(t.marks);if(i.length==t.marks.length){for(let o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(i))return new ai(this.pos,t.marks[o]);return new ai(this.pos,this.mark)}}return new is(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ai(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ai(t.pos,e.markFromJSON(t.mark))}}Ut.jsonID("addNodeMark",ai);class is extends Ut{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ut.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return ut.fromReplace(e,this.pos,this.pos+1,new re(Z.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new ai(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new is(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new is(t.pos,e.markFromJSON(t.mark))}}Ut.jsonID("removeNodeMark",is);class xt extends Ut{constructor(e,t,i,o=!1){super(),this.from=e,this.to=t,this.slice=i,this.structure=o}apply(e){return this.structure&&uh(e,this.from,this.to)?ut.fail("Structure replace would overwrite content"):ut.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new pn([this.from,this.to-this.from,this.slice.size])}invert(e){return new xt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deletedAcross&&i.deletedAcross?null:new xt(t.pos,Math.max(t.pos,i.pos),this.slice,this.structure)}merge(e){if(!(e instanceof xt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?re.empty:new re(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new xt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?re.empty:new re(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new xt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new xt(t.from,t.to,re.fromJSON(e,t.slice),!!t.structure)}}Ut.jsonID("replace",xt);class St extends Ut{constructor(e,t,i,o,l,u,f=!1){super(),this.from=e,this.to=t,this.gapFrom=i,this.gapTo=o,this.slice=l,this.insert=u,this.structure=f}apply(e){if(this.structure&&(uh(e,this.from,this.gapFrom)||uh(e,this.gapTo,this.to)))return ut.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return ut.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,t.content);return i?ut.fromReplace(e,this.from,this.to,i):ut.fail("Content does not fit in gap")}getMap(){return new pn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new St(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),o=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),l=this.to==this.gapTo?i.pos:e.map(this.gapTo,1);return t.deletedAcross&&i.deletedAcross||o<t.pos||l>i.pos?null:new St(t.pos,i.pos,o,l,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new St(t.from,t.to,t.gapFrom,t.gapTo,re.fromJSON(e,t.slice),t.insert,!!t.structure)}}Ut.jsonID("replaceAround",St);function uh(n,e,t){let i=n.resolve(e),o=t-e,l=i.depth;for(;o>0&&l>0&&i.indexAfter(l)==i.node(l).childCount;)l--,o--;if(o>0){let u=i.node(l).maybeChild(i.indexAfter(l));for(;o>0;){if(!u||u.isLeaf)return!0;u=u.firstChild,o--}}return!1}function bC(n,e,t,i){let o=[],l=[],u,f;n.doc.nodesBetween(e,t,(d,p,g)=>{if(!d.isInline)return;let y=d.marks;if(!i.isInSet(y)&&g.type.allowsMarkType(i.type)){let b=Math.max(p,e),v=Math.min(p+d.nodeSize,t),S=i.addToSet(y);for(let M=0;M<y.length;M++)y[M].isInSet(S)||(u&&u.to==b&&u.mark.eq(y[M])?u.to=v:o.push(u=new er(b,v,y[M])));f&&f.to==b?f.to=v:l.push(f=new li(b,v,i))}}),o.forEach(d=>n.step(d)),l.forEach(d=>n.step(d))}function vC(n,e,t,i){let o=[],l=0;n.doc.nodesBetween(e,t,(u,f)=>{if(!u.isInline)return;l++;let d=null;if(i instanceof Pu){let p=u.marks,g;for(;g=i.isInSet(p);)(d||(d=[])).push(g),p=g.removeFromSet(p)}else i?i.isInSet(u.marks)&&(d=[i]):d=u.marks;if(d&&d.length){let p=Math.min(f+u.nodeSize,t);for(let g=0;g<d.length;g++){let y=d[g],b;for(let v=0;v<o.length;v++){let S=o[v];S.step==l-1&&y.eq(o[v].style)&&(b=S)}b?(b.to=p,b.step=l):o.push({style:y,from:Math.max(f,e),to:p,step:l})}}}),o.forEach(u=>n.step(new er(u.from,u.to,u.style)))}function _h(n,e,t,i=t.contentMatch,o=!0){let l=n.doc.nodeAt(e),u=[],f=e+1;for(let d=0;d<l.childCount;d++){let p=l.child(d),g=f+p.nodeSize,y=i.matchType(p.type);if(!y)u.push(new xt(f,g,re.empty));else{i=y;for(let b=0;b<p.marks.length;b++)t.allowsMarkType(p.marks[b].type)||n.step(new er(f,g,p.marks[b]));if(o&&p.isText&&t.whitespace!="pre"){let b,v=/\r?\n|\r/g,S;for(;b=v.exec(p.text);)S||(S=new re(Z.from(t.schema.text(" ",t.allowedMarks(p.marks))),0,0)),u.push(new xt(f+b.index,f+b.index+b[0].length,S))}}f=g}if(!i.validEnd){let d=i.fillBefore(Z.empty,!0);n.replace(f,f,new re(d,0,0))}for(let d=u.length-1;d>=0;d--)n.step(u[d])}function xC(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function go(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth;;--i){let o=n.$from.node(i),l=n.$from.index(i),u=n.$to.indexAfter(i);if(i<n.depth&&o.canReplace(l,u,t))return i;if(i==0||o.type.spec.isolating||!xC(o,l,u))break}return null}function SC(n,e,t){let{$from:i,$to:o,depth:l}=e,u=i.before(l+1),f=o.after(l+1),d=u,p=f,g=Z.empty,y=0;for(let S=l,M=!1;S>t;S--)M||i.index(S)>0?(M=!0,g=Z.from(i.node(S).copy(g)),y++):d--;let b=Z.empty,v=0;for(let S=l,M=!1;S>t;S--)M||o.after(S+1)<o.end(S)?(M=!0,b=Z.from(o.node(S).copy(b)),v++):p++;n.step(new St(d,p,u,f,new re(g.append(b),y,v),g.size-y,!0))}function Bh(n,e,t=null,i=n){let o=wC(n,e),l=o&&TC(i,e);return l?o.map(R0).concat({type:e,attrs:t}).concat(l.map(R0)):null}function R0(n){return{type:n,attrs:null}}function wC(n,e){let{parent:t,startIndex:i,endIndex:o}=n,l=t.contentMatchAt(i).findWrapping(e);if(!l)return null;let u=l.length?l[0]:e;return t.canReplaceWith(i,o,u)?l:null}function TC(n,e){let{parent:t,startIndex:i,endIndex:o}=n,l=t.child(i),u=e.contentMatch.findWrapping(l.type);if(!u)return null;let d=(u.length?u[u.length-1]:e).contentMatch;for(let p=i;d&&p<o;p++)d=d.matchType(t.child(p).type);return!d||!d.validEnd?null:u}function MC(n,e,t){let i=Z.empty;for(let u=t.length-1;u>=0;u--){if(i.size){let f=t[u].type.contentMatch.matchFragment(i);if(!f||!f.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=Z.from(t[u].type.create(t[u].attrs,i))}let o=e.start,l=e.end;n.step(new St(o,l,o,l,new re(i,0,0),t.length,!0))}function CC(n,e,t,i,o){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let l=n.steps.length;n.doc.nodesBetween(e,t,(u,f)=>{let d=typeof o=="function"?o(u):o;if(u.isTextblock&&!u.hasMarkup(i,d)&&kC(n.doc,n.mapping.slice(l).map(f),i)){let p=null;if(i.schema.linebreakReplacement){let v=i.whitespace=="pre",S=!!i.contentMatch.matchType(i.schema.linebreakReplacement);v&&!S?p=!1:!v&&S&&(p=!0)}p===!1&&Ev(n,u,f,l),_h(n,n.mapping.slice(l).map(f,1),i,void 0,p===null);let g=n.mapping.slice(l),y=g.map(f,1),b=g.map(f+u.nodeSize,1);return n.step(new St(y,b,y+1,b-1,new re(Z.from(i.create(d,null,u.marks)),0,0),1,!0)),p===!0&&kv(n,u,f,l),!1}})}function kv(n,e,t,i){e.forEach((o,l)=>{if(o.isText){let u,f=/\r?\n|\r/g;for(;u=f.exec(o.text);){let d=n.mapping.slice(i).map(t+1+l+u.index);n.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function Ev(n,e,t,i){e.forEach((o,l)=>{if(o.type==o.type.schema.linebreakReplacement){let u=n.mapping.slice(i).map(t+1+l);n.replaceWith(u,u+1,e.type.schema.text(`
`))}})}function kC(n,e,t){let i=n.resolve(e),o=i.index();return i.parent.canReplaceWith(o,o+1,t)}function EC(n,e,t,i,o){let l=n.doc.nodeAt(e);if(!l)throw new RangeError("No node at given position");t||(t=l.type);let u=t.create(i,null,o||l.marks);if(l.isLeaf)return n.replaceWith(e,e+l.nodeSize,u);if(!t.validContent(l.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new St(e,e+l.nodeSize,e+1,e+l.nodeSize-1,new re(Z.from(u),0,0),1,!0))}function Cr(n,e,t=1,i){let o=n.resolve(e),l=o.depth-t,u=i&&i[i.length-1]||o.parent;if(l<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!u.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let p=o.depth-1,g=t-2;p>l;p--,g--){let y=o.node(p),b=o.index(p);if(y.type.spec.isolating)return!1;let v=y.content.cutByIndex(b,y.childCount),S=i&&i[g+1];S&&(v=v.replaceChild(0,S.type.create(S.attrs)));let M=i&&i[g]||y;if(!y.canReplace(b+1,y.childCount)||!M.type.validContent(v))return!1}let f=o.indexAfter(l),d=i&&i[0];return o.node(l).canReplaceWith(f,f,d?d.type:o.node(l+1).type)}function AC(n,e,t=1,i){let o=n.doc.resolve(e),l=Z.empty,u=Z.empty;for(let f=o.depth,d=o.depth-t,p=t-1;f>d;f--,p--){l=Z.from(o.node(f).copy(l));let g=i&&i[p];u=Z.from(g?g.type.create(g.attrs,u):o.node(f).copy(u))}n.step(new xt(e,e,new re(l.append(u),t,t),!0))}function yi(n,e){let t=n.resolve(e),i=t.index();return Av(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(i,i+1)}function OC(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:i}=n.type.schema;for(let o=0;o<e.childCount;o++){let l=e.child(o),u=l.type==i?n.type.schema.nodes.text:l.type;if(t=t.matchType(u),!t||!n.type.allowsMarks(l.marks))return!1}return t.validEnd}function Av(n,e){return!!(n&&e&&!n.isLeaf&&OC(n,e))}function Qu(n,e,t=-1){let i=n.resolve(e);for(let o=i.depth;;o--){let l,u,f=i.index(o);if(o==i.depth?(l=i.nodeBefore,u=i.nodeAfter):t>0?(l=i.node(o+1),f++,u=i.node(o).maybeChild(f)):(l=i.node(o).maybeChild(f-1),u=i.node(o+1)),l&&!l.isTextblock&&Av(l,u)&&i.node(o).canReplace(f,f+1))return e;if(o==0)break;e=t<0?i.before(o):i.after(o)}}function NC(n,e,t){let i=null,{linebreakReplacement:o}=n.doc.type.schema,l=n.doc.resolve(e-t),u=l.node().type;if(o&&u.inlineContent){let g=u.whitespace=="pre",y=!!u.contentMatch.matchType(o);g&&!y?i=!1:!g&&y&&(i=!0)}let f=n.steps.length;if(i===!1){let g=n.doc.resolve(e+t);Ev(n,g.node(),g.before(),f)}u.inlineContent&&_h(n,e+t-1,u,l.node().contentMatchAt(l.index()),i==null);let d=n.mapping.slice(f),p=d.map(e-t);if(n.step(new xt(p,d.map(e+t,-1),re.empty,!0)),i===!0){let g=n.doc.resolve(p);kv(n,g.node(),g.before(),n.steps.length)}return n}function RC(n,e,t){let i=n.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),t))return e;if(i.parentOffset==0)for(let o=i.depth-1;o>=0;o--){let l=i.index(o);if(i.node(o).canReplaceWith(l,l,t))return i.before(o+1);if(l>0)return null}if(i.parentOffset==i.parent.content.size)for(let o=i.depth-1;o>=0;o--){let l=i.indexAfter(o);if(i.node(o).canReplaceWith(l,l,t))return i.after(o+1);if(l<i.node(o).childCount)return null}return null}function Ov(n,e,t){let i=n.resolve(e);if(!t.content.size)return e;let o=t.content;for(let l=0;l<t.openStart;l++)o=o.firstChild.content;for(let l=1;l<=(t.openStart==0&&t.size?2:1);l++)for(let u=i.depth;u>=0;u--){let f=u==i.depth?0:i.pos<=(i.start(u+1)+i.end(u+1))/2?-1:1,d=i.index(u)+(f>0?1:0),p=i.node(u),g=!1;if(l==1)g=p.canReplace(d,d,o);else{let y=p.contentMatchAt(d).findWrapping(o.firstChild.type);g=y&&p.canReplaceWith(d,d,y[0])}if(g)return f==0?i.pos:f<0?i.before(u+1):i.after(u+1)}return null}function Fu(n,e,t=e,i=re.empty){if(e==t&&!i.size)return null;let o=n.resolve(e),l=n.resolve(t);return Nv(o,l,i)?new xt(e,t,i):new DC(o,l,i).fit()}function Nv(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class DC{constructor(e,t,i){this.$from=e,this.$to=t,this.unplaced=i,this.frontier=[],this.placed=Z.empty;for(let o=0;o<=e.depth;o++){let l=e.node(o);this.frontier.push({type:l.type,match:l.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=Z.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let p=this.findFittable();p?this.placeNodes(p):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,i=this.$from,o=this.close(e<0?this.$to:i.doc.resolve(e));if(!o)return null;let l=this.placed,u=i.depth,f=o.depth;for(;u&&f&&l.childCount==1;)l=l.firstChild.content,u--,f--;let d=new re(l,u,f);return e>-1?new St(i.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||i.pos!=this.$to.pos?new xt(i.pos,o.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,i=0,o=this.unplaced.openEnd;i<e;i++){let l=t.firstChild;if(t.childCount>1&&(o=0),l.type.spec.isolating&&o<=i){e=i;break}t=l.content}for(let t=1;t<=2;t++)for(let i=t==1?e:this.unplaced.openStart;i>=0;i--){let o,l=null;i?(l=Dd(this.unplaced.content,i-1).firstChild,o=l.content):o=this.unplaced.content;let u=o.firstChild;for(let f=this.depth;f>=0;f--){let{type:d,match:p}=this.frontier[f],g,y=null;if(t==1&&(u?p.matchType(u.type)||(y=p.fillBefore(Z.from(u),!1)):l&&d.compatibleContent(l.type)))return{sliceDepth:i,frontierDepth:f,parent:l,inject:y};if(t==2&&u&&(g=p.findWrapping(u.type)))return{sliceDepth:i,frontierDepth:f,parent:l,wrap:g};if(l&&p.matchType(l.type))break}}}openMore(){let{content:e,openStart:t,openEnd:i}=this.unplaced,o=Dd(e,t);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new re(e,t+1,Math.max(i,o.size+t>=e.size-i?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:i}=this.unplaced,o=Dd(e,t);if(o.childCount<=1&&t>0){let l=e.size-t<=t+o.size;this.unplaced=new re(vl(e,t-1,1),t-1,l?t-1:i)}else this.unplaced=new re(vl(e,t,1),t,i)}placeNodes({sliceDepth:e,frontierDepth:t,parent:i,inject:o,wrap:l}){for(;this.depth>t;)this.closeFrontierNode();if(l)for(let M=0;M<l.length;M++)this.openFrontierNode(l[M]);let u=this.unplaced,f=i?i.content:u.content,d=u.openStart-e,p=0,g=[],{match:y,type:b}=this.frontier[t];if(o){for(let M=0;M<o.childCount;M++)g.push(o.child(M));y=y.matchFragment(o)}let v=f.size+e-(u.content.size-u.openEnd);for(;p<f.childCount;){let M=f.child(p),C=y.matchType(M.type);if(!C)break;p++,(p>1||d==0||M.content.size)&&(y=C,g.push(Rv(M.mark(b.allowedMarks(M.marks)),p==1?d:0,p==f.childCount?v:-1)))}let S=p==f.childCount;S||(v=-1),this.placed=xl(this.placed,t,Z.from(g)),this.frontier[t].match=y,S&&v<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let M=0,C=f;M<v;M++){let _=C.lastChild;this.frontier.push({type:_.type,match:_.contentMatchAt(_.childCount)}),C=_.content}this.unplaced=S?e==0?re.empty:new re(vl(u.content,e-1,1),e-1,v<0?u.openEnd:e-1):new re(vl(u.content,e,p),u.openStart,u.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!zd(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:i}=this.$to,o=this.$to.after(i);for(;i>1&&o==this.$to.end(--i);)++o;return o}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:i,type:o}=this.frontier[t],l=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),u=zd(e,t,o,i,l);if(u){for(let f=t-1;f>=0;f--){let{match:d,type:p}=this.frontier[f],g=zd(e,f,p,d,!0);if(!g||g.childCount)continue e}return{depth:t,fit:u,move:l?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=xl(this.placed,t.depth,t.fit)),e=t.move;for(let i=t.depth+1;i<=e.depth;i++){let o=e.node(i),l=o.type.contentMatch.fillBefore(o.content,!0,e.index(i));this.openFrontierNode(o.type,o.attrs,l)}return e}openFrontierNode(e,t=null,i){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=xl(this.placed,this.depth,Z.from(e.create(t,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(Z.empty,!0);t.childCount&&(this.placed=xl(this.placed,this.frontier.length,t))}}function vl(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(vl(n.firstChild.content,e-1,t)))}function xl(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(xl(n.lastChild.content,e-1,t)))}function Dd(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Rv(n,e,t){if(e<=0)return n;let i=n.content;return e>1&&(i=i.replaceChild(0,Rv(i.firstChild,e-1,i.childCount==1?t-1:0))),e>0&&(i=n.type.contentMatch.fillBefore(i).append(i),t<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(Z.empty,!0)))),n.copy(i)}function zd(n,e,t,i,o){let l=n.node(e),u=o?n.indexAfter(e):n.index(e);if(u==l.childCount&&!t.compatibleContent(l.type))return null;let f=i.fillBefore(l.content,!0,u);return f&&!zC(t,l.content,u)?f:null}function zC(n,e,t){for(let i=t;i<e.childCount;i++)if(!n.allowsMarks(e.child(i).marks))return!0;return!1}function _C(n){return n.spec.defining||n.spec.definingForContent}function BC(n,e,t,i){if(!i.size)return n.deleteRange(e,t);let o=n.doc.resolve(e),l=n.doc.resolve(t);if(Nv(o,l,i))return n.step(new xt(e,t,i));let u=zv(o,n.doc.resolve(t));u[u.length-1]==0&&u.pop();let f=-(o.depth+1);u.unshift(f);for(let b=o.depth,v=o.pos-1;b>0;b--,v--){let S=o.node(b).type.spec;if(S.defining||S.definingAsContext||S.isolating)break;u.indexOf(b)>-1?f=b:o.before(b)==v&&u.splice(1,0,-b)}let d=u.indexOf(f),p=[],g=i.openStart;for(let b=i.content,v=0;;v++){let S=b.firstChild;if(p.push(S),v==i.openStart)break;b=S.content}for(let b=g-1;b>=0;b--){let v=p[b],S=_C(v.type);if(S&&!v.sameMarkup(o.node(Math.abs(f)-1)))g=b;else if(S||!v.type.isTextblock)break}for(let b=i.openStart;b>=0;b--){let v=(b+g+1)%(i.openStart+1),S=p[v];if(S)for(let M=0;M<u.length;M++){let C=u[(M+d)%u.length],_=!0;C<0&&(_=!1,C=-C);let $=o.node(C-1),U=o.index(C-1);if($.canReplaceWith(U,U,S.type,S.marks))return n.replace(o.before(C),_?l.after(C):t,new re(Dv(i.content,0,i.openStart,v),v,i.openEnd))}}let y=n.steps.length;for(let b=u.length-1;b>=0&&(n.replace(e,t,i),!(n.steps.length>y));b--){let v=u[b];v<0||(e=o.before(v),t=l.after(v))}}function Dv(n,e,t,i,o){if(e<t){let l=n.firstChild;n=n.replaceChild(0,l.copy(Dv(l.content,e+1,t,i,l)))}if(e>i){let l=o.contentMatchAt(0),u=l.fillBefore(n).append(n);n=u.append(l.matchFragment(u).fillBefore(Z.empty,!0))}return n}function jC(n,e,t,i){if(!i.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let o=RC(n.doc,e,i.type);o!=null&&(e=t=o)}n.replaceRange(e,t,new re(Z.from(i),0,0))}function LC(n,e,t){let i=n.doc.resolve(e),o=n.doc.resolve(t),l=zv(i,o);for(let u=0;u<l.length;u++){let f=l[u],d=u==l.length-1;if(d&&f==0||i.node(f).type.contentMatch.validEnd)return n.delete(i.start(f),o.end(f));if(f>0&&(d||i.node(f-1).canReplace(i.index(f-1),o.indexAfter(f-1))))return n.delete(i.before(f),o.after(f))}for(let u=1;u<=i.depth&&u<=o.depth;u++)if(e-i.start(u)==i.depth-u&&t>i.end(u)&&o.end(u)-t!=o.depth-u&&i.start(u-1)==o.start(u-1)&&i.node(u-1).canReplace(i.index(u-1),o.index(u-1)))return n.delete(i.before(u),t);n.delete(e,t)}function zv(n,e){let t=[],i=Math.min(n.depth,e.depth);for(let o=i;o>=0;o--){let l=n.start(o);if(l<n.pos-(n.depth-o)||e.end(o)>e.pos+(e.depth-o)||n.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(l==e.start(o)||o==n.depth&&o==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==l-1)&&t.push(o)}return t}class oo extends Ut{constructor(e,t,i){super(),this.pos=e,this.attr=t,this.value=i}apply(e){let t=e.nodeAt(this.pos);if(!t)return ut.fail("No node at attribute step's position");let i=Object.create(null);for(let l in t.attrs)i[l]=t.attrs[l];i[this.attr]=this.value;let o=t.type.create(i,null,t.marks);return ut.fromReplace(e,this.pos,this.pos+1,new re(Z.from(o),0,t.isLeaf?0:1))}getMap(){return pn.empty}invert(e){return new oo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new oo(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new oo(t.pos,t.attr,t.value)}}Ut.jsonID("attr",oo);class _l extends Ut{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let o in e.attrs)t[o]=e.attrs[o];t[this.attr]=this.value;let i=e.type.create(t,e.content,e.marks);return ut.ok(i)}getMap(){return pn.empty}invert(e){return new _l(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new _l(t.attr,t.value)}}Ut.jsonID("docAttr",_l);let uo=class extends Error{};uo=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};uo.prototype=Object.create(Error.prototype);uo.prototype.constructor=uo;uo.prototype.name="TransformError";class qC{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new zl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new uo(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,i=re.empty){let o=Fu(this.doc,e,t,i);return o&&this.step(o),this}replaceWith(e,t,i){return this.replace(e,t,new re(Z.from(i),0,0))}delete(e,t){return this.replace(e,t,re.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,i){return BC(this,e,t,i),this}replaceRangeWith(e,t,i){return jC(this,e,t,i),this}deleteRange(e,t){return LC(this,e,t),this}lift(e,t){return SC(this,e,t),this}join(e,t=1){return NC(this,e,t),this}wrap(e,t){return MC(this,e,t),this}setBlockType(e,t=e,i,o=null){return CC(this,e,t,i,o),this}setNodeMarkup(e,t,i=null,o){return EC(this,e,t,i,o),this}setNodeAttribute(e,t,i){return this.step(new oo(e,t,i)),this}setDocAttribute(e,t){return this.step(new _l(e,t)),this}addNodeMark(e,t){return this.step(new ai(e,t)),this}removeNodeMark(e,t){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(t instanceof Qe)t.isInSet(i.marks)&&this.step(new is(e,t));else{let o=i.marks,l,u=[];for(;l=t.isInSet(o);)u.push(new is(e,l)),o=l.removeFromSet(o);for(let f=u.length-1;f>=0;f--)this.step(u[f])}return this}split(e,t=1,i){return AC(this,e,t,i),this}addMark(e,t,i){return bC(this,e,t,i),this}removeMark(e,t,i){return vC(this,e,t,i),this}clearIncompatible(e,t,i){return _h(this,e,t,i),this}}const _d=Object.create(null);class we{constructor(e,t,i){this.$anchor=e,this.$head=t,this.ranges=i||[new VC(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=re.empty){let i=t.content.lastChild,o=null;for(let f=0;f<t.openEnd;f++)o=i,i=i.lastChild;let l=e.steps.length,u=this.ranges;for(let f=0;f<u.length;f++){let{$from:d,$to:p}=u[f],g=e.mapping.slice(l);e.replaceRange(g.map(d.pos),g.map(p.pos),f?re.empty:t),f==0&&_0(e,l,(i?i.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let i=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:u,$to:f}=o[l],d=e.mapping.slice(i),p=d.map(u.pos),g=d.map(f.pos);l?e.deleteRange(p,g):(e.replaceRangeWith(p,g,t),_0(e,i,t.isInline?-1:1))}}static findFrom(e,t,i=!1){let o=e.parent.inlineContent?new ve(e):to(e.node(0),e.parent,e.pos,e.index(),t,i);if(o)return o;for(let l=e.depth-1;l>=0;l--){let u=t<0?to(e.node(0),e.node(l),e.before(l+1),e.index(l),t,i):to(e.node(0),e.node(l),e.after(l+1),e.index(l)+1,t,i);if(u)return u}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new gn(e.node(0))}static atStart(e){return to(e,e,0,0,1)||new gn(e)}static atEnd(e){return to(e,e,e.content.size,e.childCount,-1)||new gn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=_d[t.type];if(!i)throw new RangeError(`No selection type ${t.type} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in _d)throw new RangeError("Duplicate use of selection JSON ID "+e);return _d[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ve.between(this.$anchor,this.$head).getBookmark()}}we.prototype.visible=!0;class VC{constructor(e,t){this.$from=e,this.$to=t}}let D0=!1;function z0(n){!D0&&!n.parent.inlineContent&&(D0=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class ve extends we{constructor(e,t=e){z0(e),z0(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let i=e.resolve(t.map(this.head));if(!i.parent.inlineContent)return we.near(i);let o=e.resolve(t.map(this.anchor));return new ve(o.parent.inlineContent?o:i,i)}replace(e,t=re.empty){if(super.replace(e,t),t==re.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof ve&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Gu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ve(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,i=t){let o=e.resolve(t);return new this(o,i==t?o:e.resolve(i))}static between(e,t,i){let o=e.pos-t.pos;if((!i||o)&&(i=o>=0?1:-1),!t.parent.inlineContent){let l=we.findFrom(t,i,!0)||we.findFrom(t,-i,!0);if(l)t=l.$head;else return we.near(t,i)}return e.parent.inlineContent||(o==0?e=t:(e=(we.findFrom(e,-i,!0)||we.findFrom(e,i,!0)).$anchor,e.pos<t.pos!=o<0&&(e=t))),new ve(e,t)}}we.jsonID("text",ve);class Gu{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Gu(e.map(this.anchor),e.map(this.head))}resolve(e){return ve.between(e.resolve(this.anchor),e.resolve(this.head))}}class he extends we{constructor(e){let t=e.nodeAfter,i=e.node(0).resolve(e.pos+t.nodeSize);super(e,i),this.node=t}map(e,t){let{deleted:i,pos:o}=t.mapResult(this.anchor),l=e.resolve(o);return i?we.near(l):new he(l)}content(){return new re(Z.from(this.node),0,0)}eq(e){return e instanceof he&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new jh(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new he(e.resolve(t.anchor))}static create(e,t){return new he(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}he.prototype.visible=!1;we.jsonID("node",he);class jh{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:i}=e.mapResult(this.anchor);return t?new Gu(i,i):new jh(i)}resolve(e){let t=e.resolve(this.anchor),i=t.nodeAfter;return i&&he.isSelectable(i)?new he(t):we.near(t)}}class gn extends we{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=re.empty){if(t==re.empty){e.delete(0,e.doc.content.size);let i=we.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new gn(e)}map(e){return new gn(e)}eq(e){return e instanceof gn}getBookmark(){return UC}}we.jsonID("all",gn);const UC={map(){return this},resolve(n){return new gn(n)}};function to(n,e,t,i,o,l=!1){if(e.inlineContent)return ve.create(n,t);for(let u=i-(o>0?0:1);o>0?u<e.childCount:u>=0;u+=o){let f=e.child(u);if(f.isAtom){if(!l&&he.isSelectable(f))return he.create(n,t-(o<0?f.nodeSize:0))}else{let d=to(n,f,t+o,o<0?f.childCount:0,o,l);if(d)return d}t+=f.nodeSize*o}return null}function _0(n,e,t){let i=n.steps.length-1;if(i<e)return;let o=n.steps[i];if(!(o instanceof xt||o instanceof St))return;let l=n.mapping.maps[i],u;l.forEach((f,d,p,g)=>{u==null&&(u=g)}),n.setSelection(we.near(n.doc.resolve(u),t))}const B0=1,j0=2,L0=4;class IC extends qC{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|B0)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&B0)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=j0,this}ensureMarks(e){return Qe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&j0)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let i=this.selection;return t&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||Qe.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,i){let o=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(i==null&&(i=t),i=i??t,!e)return this.deleteRange(t,i);let l=this.storedMarks;if(!l){let u=this.doc.resolve(t);l=i==t?u.marks():u.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(t,i,o.text(e,l)),this.selection.empty||this.setSelection(we.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=L0,this}get scrolledIntoView(){return(this.updated&L0)>0}}function q0(n,e){return!e||!n?n:n.bind(e)}class Sl{constructor(e,t,i){this.name=e,this.init=q0(t.init,i),this.apply=q0(t.apply,i)}}const HC=[new Sl("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Sl("selection",{init(n,e){return n.selection||we.atStart(e.doc)},apply(n){return n.selection}}),new Sl("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,i){return i.selection.$cursor?n.storedMarks:null}}),new Sl("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Bd{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=HC.slice(),t&&t.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new Sl(i.key,i.spec.state,i))})}}class io{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=t){let o=this.config.plugins[i];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],i=this.applyInner(e),o=null;for(;;){let l=!1;for(let u=0;u<this.config.plugins.length;u++){let f=this.config.plugins[u];if(f.spec.appendTransaction){let d=o?o[u].n:0,p=o?o[u].state:this,g=d<t.length&&f.spec.appendTransaction.call(f,d?t.slice(d):t,p,i);if(g&&i.filterTransaction(g,u)){if(g.setMeta("appendedTransaction",e),!o){o=[];for(let y=0;y<this.config.plugins.length;y++)o.push(y<u?{state:i,n:t.length}:{state:this,n:0})}t.push(g),i=i.applyInner(g),l=!0}o&&(o[u]={state:i,n:t.length})}}if(!l)return{state:i,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new io(this.config),i=this.config.fields;for(let o=0;o<i.length;o++){let l=i[o];t[l.name]=l.apply(e,this[l.name],this,t)}return t}get tr(){return new IC(this)}static create(e){let t=new Bd(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new io(t);for(let o=0;o<t.fields.length;o++)i[t.fields[o].name]=t.fields[o].init(e,i);return i}reconfigure(e){let t=new Bd(this.schema,e.plugins),i=t.fields,o=new io(t);for(let l=0;l<i.length;l++){let u=i[l].name;o[u]=this.hasOwnProperty(u)?this[u]:i[l].init(e,o)}return o}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[i],l=o.spec.state;l&&l.toJSON&&(t[i]=l.toJSON.call(o,this[o.key]))}return t}static fromJSON(e,t,i){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Bd(e.schema,e.plugins),l=new io(o);return o.fields.forEach(u=>{if(u.name=="doc")l.doc=ci.fromJSON(e.schema,t.doc);else if(u.name=="selection")l.selection=we.fromJSON(l.doc,t.selection);else if(u.name=="storedMarks")t.storedMarks&&(l.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let f in i){let d=i[f],p=d.spec.state;if(d.key==u.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(t,f)){l[u.name]=p.fromJSON.call(d,e,t[f],l);return}}l[u.name]=u.init(e,l)}}),l}}function _v(n,e,t){for(let i in n){let o=n[i];o instanceof Function?o=o.bind(e):i=="handleDOMEvents"&&(o=_v(o,e,{})),t[i]=o}return t}class Jt{constructor(e){this.spec=e,this.props={},e.props&&_v(e.props,this,this.props),this.key=e.key?e.key.key:Bv("plugin")}getState(e){return e[this.key]}}const jd=Object.create(null);function Bv(n){return n in jd?n+"$"+ ++jd[n]:(jd[n]=0,n+"$")}class Hn{constructor(e="key"){this.key=Bv(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Nt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},co=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let ch=null;const Tr=function(n,e,t){let i=ch||(ch=document.createRange());return i.setEnd(n,t??n.nodeValue.length),i.setStart(n,e||0),i},$C=function(){ch=null},ss=function(n,e,t,i){return t&&(V0(n,e,t,i,-1)||V0(n,e,t,i,1))},PC=/^(img|br|input|textarea|hr)$/i;function V0(n,e,t,i,o){for(;;){if(n==t&&e==i)return!0;if(e==(o<0?0:Nn(n))){let l=n.parentNode;if(!l||l.nodeType!=1||Il(n)||PC.test(n.nodeName)||n.contentEditable=="false")return!1;e=Nt(n)+(o<0?0:1),n=l}else if(n.nodeType==1){if(n=n.childNodes[e+(o<0?-1:0)],n.contentEditable=="false")return!1;e=o<0?Nn(n):0}else return!1}}function Nn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function QC(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Nn(n)}else if(n.parentNode&&!Il(n))e=Nt(n),n=n.parentNode;else return null}}function FC(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Il(n))e=Nt(n)+1,n=n.parentNode;else return null}}function GC(n,e,t){for(let i=e==0,o=e==Nn(n);i||o;){if(n==t)return!0;let l=Nt(n);if(n=n.parentNode,!n)return!1;i=i&&l==0,o=o&&l==Nn(n)}}function Il(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Yu=function(n){return n.focusNode&&ss(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Fi(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function YC(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function KC(n,e,t){if(n.caretPositionFromPoint)try{let i=n.caretPositionFromPoint(e,t);if(i)return{node:i.offsetNode,offset:Math.min(Nn(i.offsetNode),i.offset)}}catch{}if(n.caretRangeFromPoint){let i=n.caretRangeFromPoint(e,t);if(i)return{node:i.startContainer,offset:Math.min(Nn(i.startContainer),i.startOffset)}}}const tr=typeof navigator<"u"?navigator:null,U0=typeof document<"u"?document:null,bi=tr&&tr.userAgent||"",fh=/Edge\/(\d+)/.exec(bi),jv=/MSIE \d/.exec(bi),dh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(bi),sn=!!(jv||dh||fh),di=jv?document.documentMode:dh?+dh[1]:fh?+fh[1]:0,In=!sn&&/gecko\/(\d+)/i.test(bi);In&&+(/Firefox\/(\d+)/.exec(bi)||[0,0])[1];const hh=!sn&&/Chrome\/(\d+)/.exec(bi),Lt=!!hh,Lv=hh?+hh[1]:0,Ft=!sn&&!!tr&&/Apple Computer/.test(tr.vendor),fo=Ft&&(/Mobile\/\w+/.test(bi)||!!tr&&tr.maxTouchPoints>2),On=fo||(tr?/Mac/.test(tr.platform):!1),JC=tr?/Win/.test(tr.platform):!1,Mr=/Android \d/.test(bi),Hl=!!U0&&"webkitFontSmoothing"in U0.documentElement.style,XC=Hl?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ZC(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Sr(n,e){return typeof n=="number"?n:n[e]}function WC(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,i=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*i}}function I0(n,e,t){let i=n.someProp("scrollThreshold")||0,o=n.someProp("scrollMargin")||5,l=n.dom.ownerDocument;for(let u=t||n.dom;u;){if(u.nodeType!=1){u=co(u);continue}let f=u,d=f==l.body,p=d?ZC(l):WC(f),g=0,y=0;if(e.top<p.top+Sr(i,"top")?y=-(p.top-e.top+Sr(o,"top")):e.bottom>p.bottom-Sr(i,"bottom")&&(y=e.bottom-e.top>p.bottom-p.top?e.top+Sr(o,"top")-p.top:e.bottom-p.bottom+Sr(o,"bottom")),e.left<p.left+Sr(i,"left")?g=-(p.left-e.left+Sr(o,"left")):e.right>p.right-Sr(i,"right")&&(g=e.right-p.right+Sr(o,"right")),g||y)if(d)l.defaultView.scrollBy(g,y);else{let v=f.scrollLeft,S=f.scrollTop;y&&(f.scrollTop+=y),g&&(f.scrollLeft+=g);let M=f.scrollLeft-v,C=f.scrollTop-S;e={left:e.left-M,top:e.top-C,right:e.right-M,bottom:e.bottom-C}}let b=d?"fixed":getComputedStyle(u).position;if(/^(fixed|sticky)$/.test(b))break;u=b=="absolute"?u.offsetParent:co(u)}}function ek(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),i,o;for(let l=(e.left+e.right)/2,u=t+1;u<Math.min(innerHeight,e.bottom);u+=5){let f=n.root.elementFromPoint(l,u);if(!f||f==n.dom||!n.dom.contains(f))continue;let d=f.getBoundingClientRect();if(d.top>=t-20){i=f,o=d.top;break}}return{refDOM:i,refTop:o,stack:qv(n.dom)}}function qv(n){let e=[],t=n.ownerDocument;for(let i=n;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),n!=t);i=co(i));return e}function tk({refDOM:n,refTop:e,stack:t}){let i=n?n.getBoundingClientRect().top:0;Vv(t,i==0?0:i-e)}function Vv(n,e){for(let t=0;t<n.length;t++){let{dom:i,top:o,left:l}=n[t];i.scrollTop!=o+e&&(i.scrollTop=o+e),i.scrollLeft!=l&&(i.scrollLeft=l)}}let Zs=null;function nk(n){if(n.setActive)return n.setActive();if(Zs)return n.focus(Zs);let e=qv(n);n.focus(Zs==null?{get preventScroll(){return Zs={preventScroll:!0},!0}}:void 0),Zs||(Zs=!1,Vv(e,0))}function Uv(n,e){let t,i=2e8,o,l=0,u=e.top,f=e.top,d,p;for(let g=n.firstChild,y=0;g;g=g.nextSibling,y++){let b;if(g.nodeType==1)b=g.getClientRects();else if(g.nodeType==3)b=Tr(g).getClientRects();else continue;for(let v=0;v<b.length;v++){let S=b[v];if(S.top<=u&&S.bottom>=f){u=Math.max(S.bottom,u),f=Math.min(S.top,f);let M=S.left>e.left?S.left-e.left:S.right<e.left?e.left-S.right:0;if(M<i){t=g,i=M,o=M&&t.nodeType==3?{left:S.right<e.left?S.right:S.left,top:e.top}:e,g.nodeType==1&&M&&(l=y+(e.left>=(S.left+S.right)/2?1:0));continue}}else S.top>e.top&&!d&&S.left<=e.left&&S.right>=e.left&&(d=g,p={left:Math.max(S.left,Math.min(S.right,e.left)),top:S.top});!t&&(e.left>=S.right&&e.top>=S.top||e.left>=S.left&&e.top>=S.bottom)&&(l=y+1)}}return!t&&d&&(t=d,o=p,i=0),t&&t.nodeType==3?rk(t,o):!t||i&&t.nodeType==1?{node:n,offset:l}:Uv(t,o)}function rk(n,e){let t=n.nodeValue.length,i=document.createRange();for(let o=0;o<t;o++){i.setEnd(n,o+1),i.setStart(n,o);let l=ti(i,1);if(l.top!=l.bottom&&Lh(e,l))return{node:n,offset:o+(e.left>=(l.left+l.right)/2?1:0)}}return{node:n,offset:0}}function Lh(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function ik(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function sk(n,e,t){let{node:i,offset:o}=Uv(e,t),l=-1;if(i.nodeType==1&&!i.firstChild){let u=i.getBoundingClientRect();l=u.left!=u.right&&t.left>(u.left+u.right)/2?1:-1}return n.docView.posFromDOM(i,o,l)}function ok(n,e,t,i){let o=-1;for(let l=e,u=!1;l!=n.dom;){let f=n.docView.nearestDesc(l,!0),d;if(!f)return null;if(f.dom.nodeType==1&&(f.node.isBlock&&f.parent||!f.contentDOM)&&((d=f.dom.getBoundingClientRect()).width||d.height)&&(f.node.isBlock&&f.parent&&(!u&&d.left>i.left||d.top>i.top?o=f.posBefore:(!u&&d.right<i.left||d.bottom<i.top)&&(o=f.posAfter),u=!0),!f.contentDOM&&o<0&&!f.node.isText))return(f.node.isBlock?i.top<(d.top+d.bottom)/2:i.left<(d.left+d.right)/2)?f.posBefore:f.posAfter;l=f.dom.parentNode}return o>-1?o:n.docView.posFromDOM(e,t,-1)}function Iv(n,e,t){let i=n.childNodes.length;if(i&&t.top<t.bottom)for(let o=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-t.top)/(t.bottom-t.top))-2)),l=o;;){let u=n.childNodes[l];if(u.nodeType==1){let f=u.getClientRects();for(let d=0;d<f.length;d++){let p=f[d];if(Lh(e,p))return Iv(u,e,p)}}if((l=(l+1)%i)==o)break}return n}function lk(n,e){let t=n.dom.ownerDocument,i,o=0,l=KC(t,e.left,e.top);l&&({node:i,offset:o}=l);let u=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),f;if(!u||!n.dom.contains(u.nodeType!=1?u.parentNode:u)){let p=n.dom.getBoundingClientRect();if(!Lh(e,p)||(u=Iv(n.dom,e,p),!u))return null}if(Ft)for(let p=u;i&&p;p=co(p))p.draggable&&(i=void 0);if(u=ik(u,e),i){if(In&&i.nodeType==1&&(o=Math.min(o,i.childNodes.length),o<i.childNodes.length)){let g=i.childNodes[o],y;g.nodeName=="IMG"&&(y=g.getBoundingClientRect()).right<=e.left&&y.bottom>e.top&&o++}let p;Hl&&o&&i.nodeType==1&&(p=i.childNodes[o-1]).nodeType==1&&p.contentEditable=="false"&&p.getBoundingClientRect().top>=e.top&&o--,i==n.dom&&o==i.childNodes.length-1&&i.lastChild.nodeType==1&&e.top>i.lastChild.getBoundingClientRect().bottom?f=n.state.doc.content.size:(o==0||i.nodeType!=1||i.childNodes[o-1].nodeName!="BR")&&(f=ok(n,i,o,e))}f==null&&(f=sk(n,u,e));let d=n.docView.nearestDesc(u,!0);return{pos:f,inside:d?d.posAtStart-d.border:-1}}function H0(n){return n.top<n.bottom||n.left<n.right}function ti(n,e){let t=n.getClientRects();if(t.length){let i=t[e<0?0:t.length-1];if(H0(i))return i}return Array.prototype.find.call(t,H0)||n.getBoundingClientRect()}const ak=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Hv(n,e,t){let{node:i,offset:o,atom:l}=n.docView.domFromPos(e,t<0?-1:1),u=Hl||In;if(i.nodeType==3)if(u&&(ak.test(i.nodeValue)||(t<0?!o:o==i.nodeValue.length))){let d=ti(Tr(i,o,o),t);if(In&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){let p=ti(Tr(i,o-1,o-1),-1);if(p.top==d.top){let g=ti(Tr(i,o,o+1),-1);if(g.top!=d.top)return yl(g,g.left<p.left)}}return d}else{let d=o,p=o,g=t<0?1:-1;return t<0&&!o?(p++,g=-1):t>=0&&o==i.nodeValue.length?(d--,g=1):t<0?d--:p++,yl(ti(Tr(i,d,p),g),g<0)}if(!n.state.doc.resolve(e-(l||0)).parent.inlineContent){if(l==null&&o&&(t<0||o==Nn(i))){let d=i.childNodes[o-1];if(d.nodeType==1)return Ld(d.getBoundingClientRect(),!1)}if(l==null&&o<Nn(i)){let d=i.childNodes[o];if(d.nodeType==1)return Ld(d.getBoundingClientRect(),!0)}return Ld(i.getBoundingClientRect(),t>=0)}if(l==null&&o&&(t<0||o==Nn(i))){let d=i.childNodes[o-1],p=d.nodeType==3?Tr(d,Nn(d)-(u?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(p)return yl(ti(p,1),!1)}if(l==null&&o<Nn(i)){let d=i.childNodes[o];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let p=d?d.nodeType==3?Tr(d,0,u?0:1):d.nodeType==1?d:null:null;if(p)return yl(ti(p,-1),!0)}return yl(ti(i.nodeType==3?Tr(i):i,-t),t>=0)}function yl(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Ld(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function $v(n,e,t){let i=n.state,o=n.root.activeElement;i!=e&&n.updateState(e),o!=n.dom&&n.focus();try{return t()}finally{i!=e&&n.updateState(i),o!=n.dom&&o&&o.focus()}}function uk(n,e,t){let i=e.selection,o=t=="up"?i.$from:i.$to;return $v(n,e,()=>{let{node:l}=n.docView.domFromPos(o.pos,t=="up"?-1:1);for(;;){let f=n.docView.nearestDesc(l,!0);if(!f)break;if(f.node.isBlock){l=f.contentDOM||f.dom;break}l=f.dom.parentNode}let u=Hv(n,o.pos,1);for(let f=l.firstChild;f;f=f.nextSibling){let d;if(f.nodeType==1)d=f.getClientRects();else if(f.nodeType==3)d=Tr(f,0,f.nodeValue.length).getClientRects();else continue;for(let p=0;p<d.length;p++){let g=d[p];if(g.bottom>g.top+1&&(t=="up"?u.top-g.top>(g.bottom-u.top)*2:g.bottom-u.bottom>(u.bottom-g.top)*2))return!1}}return!0})}const ck=/[\u0590-\u08ac]/;function fk(n,e,t){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let o=i.parentOffset,l=!o,u=o==i.parent.content.size,f=n.domSelection();return f?!ck.test(i.parent.textContent)||!f.modify?t=="left"||t=="backward"?l:u:$v(n,e,()=>{let{focusNode:d,focusOffset:p,anchorNode:g,anchorOffset:y}=n.domSelectionRange(),b=f.caretBidiLevel;f.modify("move",t,"character");let v=i.depth?n.docView.domAfterPos(i.before()):n.dom,{focusNode:S,focusOffset:M}=n.domSelectionRange(),C=S&&!v.contains(S.nodeType==1?S:S.parentNode)||d==S&&p==M;try{f.collapse(g,y),d&&(d!=g||p!=y)&&f.extend&&f.extend(d,p)}catch{}return b!=null&&(f.caretBidiLevel=b),C}):i.pos==i.start()||i.pos==i.end()}let $0=null,P0=null,Q0=!1;function dk(n,e,t){return $0==e&&P0==t?Q0:($0=e,P0=t,Q0=t=="up"||t=="down"?uk(n,e,t):fk(n,e,t))}const Rn=0,F0=1,Yi=2,nr=3;class $l{constructor(e,t,i,o){this.parent=e,this.children=t,this.dom=i,this.contentDOM=o,this.dirty=Rn,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,i=this.posAtStart;;t++){let o=this.children[t];if(o==e)return i;i+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){let l,u;if(e==this.contentDOM)l=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.previousSibling}for(;l&&!((u=l.pmViewDesc)&&u.parent==this);)l=l.previousSibling;return l?this.posBeforeChild(u)+u.size:this.posAtStart}else{let l,u;if(e==this.contentDOM)l=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.nextSibling}for(;l&&!((u=l.pmViewDesc)&&u.parent==this);)l=l.nextSibling;return l?this.posBeforeChild(u):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=t>Nt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let l=e;;l=l.parentNode){if(l==this.dom){o=!1;break}if(l.previousSibling)break}if(o==null&&t==e.childNodes.length)for(let l=e;;l=l.parentNode){if(l==this.dom){o=!0;break}if(l.nextSibling)break}}return o??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let i=!0,o=e;o;o=o.parentNode){let l=this.getDesc(o),u;if(l&&(!t||l.node))if(i&&(u=l.nodeDOM)&&!(u.nodeType==1?u.contains(e.nodeType==1?e:e.parentNode):u==e))i=!1;else return l}}getDesc(e){let t=e.pmViewDesc;for(let i=t;i;i=i.parent)if(i==this)return t}posFromDOM(e,t,i){for(let o=e;o;o=o.parentNode){let l=this.getDesc(o);if(l)return l.localPosFromDOM(e,t,i)}return-1}descAt(e){for(let t=0,i=0;t<this.children.length;t++){let o=this.children[t],l=i+o.size;if(i==e&&l!=i){for(;!o.border&&o.children.length;)for(let u=0;u<o.children.length;u++){let f=o.children[u];if(f.size){o=f;break}}return o}if(e<l)return o.descAt(e-i-o.border);i=l}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,o=0;for(let l=0;i<this.children.length;i++){let u=this.children[i],f=l+u.size;if(f>e||u instanceof Qv){o=e-l;break}l=f}if(o)return this.children[i].domFromPos(o-this.children[i].border,t);for(let l;i&&!(l=this.children[i-1]).size&&l instanceof Pv&&l.side>=0;i--);if(t<=0){let l,u=!0;for(;l=i?this.children[i-1]:null,!(!l||l.dom.parentNode==this.contentDOM);i--,u=!1);return l&&t&&u&&!l.border&&!l.domAtom?l.domFromPos(l.size,t):{node:this.contentDOM,offset:l?Nt(l.dom)+1:0}}else{let l,u=!0;for(;l=i<this.children.length?this.children[i]:null,!(!l||l.dom.parentNode==this.contentDOM);i++,u=!1);return l&&u&&!l.border&&!l.domAtom?l.domFromPos(0,t):{node:this.contentDOM,offset:l?Nt(l.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,i=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,l=-1;for(let u=i,f=0;;f++){let d=this.children[f],p=u+d.size;if(o==-1&&e<=p){let g=u+d.border;if(e>=g&&t<=p-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,t,g);e=u;for(let y=f;y>0;y--){let b=this.children[y-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){o=Nt(b.dom)+1;break}e-=b.size}o==-1&&(o=0)}if(o>-1&&(p>t||f==this.children.length-1)){t=p;for(let g=f+1;g<this.children.length;g++){let y=this.children[g];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){l=Nt(y.dom);break}t+=y.size}l==-1&&(l=this.contentDOM.childNodes.length);break}u=p}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:l}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:i}=this.domFromPos(e,0);if(t.nodeType!=1||i==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[i]}setSelection(e,t,i,o=!1){let l=Math.min(e,t),u=Math.max(e,t);for(let v=0,S=0;v<this.children.length;v++){let M=this.children[v],C=S+M.size;if(l>S&&u<C)return M.setSelection(e-S-M.border,t-S-M.border,i,o);S=C}let f=this.domFromPos(e,e?-1:1),d=t==e?f:this.domFromPos(t,t?-1:1),p=i.root.getSelection(),g=i.domSelectionRange(),y=!1;if((In||Ft)&&e==t){let{node:v,offset:S}=f;if(v.nodeType==3){if(y=!!(S&&v.nodeValue[S-1]==`
`),y&&S==v.nodeValue.length)for(let M=v,C;M;M=M.parentNode){if(C=M.nextSibling){C.nodeName=="BR"&&(f=d={node:C.parentNode,offset:Nt(C)+1});break}let _=M.pmViewDesc;if(_&&_.node&&_.node.isBlock)break}}else{let M=v.childNodes[S-1];y=M&&(M.nodeName=="BR"||M.contentEditable=="false")}}if(In&&g.focusNode&&g.focusNode!=d.node&&g.focusNode.nodeType==1){let v=g.focusNode.childNodes[g.focusOffset];v&&v.contentEditable=="false"&&(o=!0)}if(!(o||y&&Ft)&&ss(f.node,f.offset,g.anchorNode,g.anchorOffset)&&ss(d.node,d.offset,g.focusNode,g.focusOffset))return;let b=!1;if((p.extend||e==t)&&!y){p.collapse(f.node,f.offset);try{e!=t&&p.extend(d.node,d.offset),b=!0}catch{}}if(!b){if(e>t){let S=f;f=d,d=S}let v=document.createRange();v.setEnd(d.node,d.offset),v.setStart(f.node,f.offset),p.removeAllRanges(),p.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let i=0,o=0;o<this.children.length;o++){let l=this.children[o],u=i+l.size;if(i==u?e<=u&&t>=i:e<u&&t>i){let f=i+l.border,d=u-l.border;if(e>=f&&t<=d){this.dirty=e==i||t==u?Yi:F0,e==f&&t==d&&(l.contentLost||l.dom.parentNode!=this.contentDOM)?l.dirty=nr:l.markDirty(e-f,t-f);return}else l.dirty=l.dom==l.contentDOM&&l.dom.parentNode==this.contentDOM&&!l.children.length?Yi:nr}i=u}this.dirty=Yi}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let i=e==1?Yi:F0;t.dirty<i&&(t.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Pv extends $l{constructor(e,t,i,o){let l,u=t.type.toDOM;if(typeof u=="function"&&(u=u(i,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)})),!t.type.spec.raw){if(u.nodeType!=1){let f=document.createElement("span");f.appendChild(u),u=f}u.contentEditable="false",u.classList.add("ProseMirror-widget")}super(e,[],u,null),this.widget=t,this.widget=t,l=this}matchesWidget(e){return this.dirty==Rn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class hk extends $l{constructor(e,t,i,o){super(e,[],t,null),this.textDOM=i,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ls extends $l{constructor(e,t,i,o,l){super(e,[],i,o),this.mark=t,this.spec=l}static create(e,t,i,o){let l=o.nodeViews[t.type.name],u=l&&l(t,o,i);return(!u||!u.dom)&&(u=as.renderSpec(document,t.type.spec.toDOM(t,i),null,t.attrs)),new ls(e,t,u.dom,u.contentDOM||u.dom,u)}parseRule(){return this.dirty&nr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=nr&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Rn){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=Rn}}slice(e,t,i){let o=ls.create(this.parent,this.mark,!0,i),l=this.children,u=this.size;t<u&&(l=mh(l,t,u,i)),e>0&&(l=mh(l,0,e,i));for(let f=0;f<l.length;f++)l[f].parent=o;return o.children=l,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class hi extends $l{constructor(e,t,i,o,l,u,f,d,p){super(e,[],l,u),this.node=t,this.outerDeco=i,this.innerDeco=o,this.nodeDOM=f}static create(e,t,i,o,l,u){let f=l.nodeViews[t.type.name],d,p=f&&f(t,l,()=>{if(!d)return u;if(d.parent)return d.parent.posBeforeChild(d)},i,o),g=p&&p.dom,y=p&&p.contentDOM;if(t.isText){if(!g)g=document.createTextNode(t.text);else if(g.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else g||({dom:g,contentDOM:y}=as.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!y&&!t.isText&&g.nodeName!="BR"&&(g.hasAttribute("contenteditable")||(g.contentEditable="false"),t.type.spec.draggable&&(g.draggable=!0));let b=g;return g=Yv(g,i,t),p?d=new pk(e,t,i,o,g,y||null,b,p,l,u+1):t.isText?new Ku(e,t,i,o,g,b,l):new hi(e,t,i,o,g,y||null,b,l,u+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let i=this.children[t];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Z.empty)}return e}matchesNode(e,t,i){return this.dirty==Rn&&e.eq(this.node)&&_u(t,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let i=this.node.inlineContent,o=t,l=e.composing?this.localCompositionInfo(e,t):null,u=l&&l.pos>-1?l:null,f=l&&l.pos<0,d=new gk(this,u&&u.node,e);vk(this.node,this.innerDeco,(p,g,y)=>{p.spec.marks?d.syncToMarks(p.spec.marks,i,e):p.type.side>=0&&!y&&d.syncToMarks(g==this.node.childCount?Qe.none:this.node.child(g).marks,i,e),d.placeWidget(p,e,o)},(p,g,y,b)=>{d.syncToMarks(p.marks,i,e);let v;d.findNodeMatch(p,g,y,b)||f&&e.state.selection.from>o&&e.state.selection.to<o+p.nodeSize&&(v=d.findIndexWithChild(l.node))>-1&&d.updateNodeAt(p,g,y,v,e)||d.updateNextNode(p,g,y,e,b,o)||d.addNode(p,g,y,e,o),o+=p.nodeSize}),d.syncToMarks([],i,e),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==Yi)&&(u&&this.protectLocalComposition(e,u),Fv(this.contentDOM,this.children,e),fo&&xk(this.dom))}localCompositionInfo(e,t){let{from:i,to:o}=e.state.selection;if(!(e.state.selection instanceof ve)||i<t||o>t+this.node.content.size)return null;let l=e.input.compositionNode;if(!l||!this.dom.contains(l.parentNode))return null;if(this.node.inlineContent){let u=l.nodeValue,f=Sk(this.node.content,u,i-t,o-t);return f<0?null:{node:l,pos:f,text:u}}else return{node:l,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:i,text:o}){if(this.getDesc(t))return;let l=t;for(;l.parentNode!=this.contentDOM;l=l.parentNode){for(;l.previousSibling;)l.parentNode.removeChild(l.previousSibling);for(;l.nextSibling;)l.parentNode.removeChild(l.nextSibling);l.pmViewDesc&&(l.pmViewDesc=void 0)}let u=new hk(this,l,t,o);e.input.compositionNodes.push(u),this.children=mh(this.children,i,i+o.length,e,u)}update(e,t,i,o){return this.dirty==nr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,i,o),!0)}updateInner(e,t,i,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=Rn}updateOuterDeco(e){if(_u(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=Gv(this.dom,this.nodeDOM,ph(this.outerDeco,this.node,t),ph(e,this.node,t)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function G0(n,e,t,i,o){Yv(i,e,n);let l=new hi(void 0,n,e,t,i,i,i,o,0);return l.contentDOM&&l.updateChildren(o,0),l}class Ku extends hi{constructor(e,t,i,o,l,u,f){super(e,t,i,o,l,null,u,f,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,i,o){return this.dirty==nr||this.dirty!=Rn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Rn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=Rn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,i){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,i){let o=this.node.cut(e,t),l=document.createTextNode(o.text);return new Ku(this.parent,o,this.outerDeco,this.innerDeco,l,l,i)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=nr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Qv extends $l{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Rn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class pk extends hi{constructor(e,t,i,o,l,u,f,d,p,g){super(e,t,i,o,l,u,f,p,g),this.spec=d}update(e,t,i,o){if(this.dirty==nr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let l=this.spec.update(e,t,i);return l&&this.updateInner(e,t,i,o),l}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,i,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,i,o){this.spec.setSelection?this.spec.setSelection(e,t,i.root):super.setSelection(e,t,i,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Fv(n,e,t){let i=n.firstChild,o=!1;for(let l=0;l<e.length;l++){let u=e[l],f=u.dom;if(f.parentNode==n){for(;f!=i;)i=Y0(i),o=!0;i=i.nextSibling}else o=!0,n.insertBefore(f,i);if(u instanceof ls){let d=i?i.previousSibling:n.lastChild;Fv(u.contentDOM,u.children,t),i=d?d.nextSibling:n.firstChild}}for(;i;)i=Y0(i),o=!0;o&&t.trackWrites==n&&(t.trackWrites=null)}const Cl=function(n){n&&(this.nodeName=n)};Cl.prototype=Object.create(null);const Ki=[new Cl];function ph(n,e,t){if(n.length==0)return Ki;let i=t?Ki[0]:new Cl,o=[i];for(let l=0;l<n.length;l++){let u=n[l].type.attrs;if(u){u.nodeName&&o.push(i=new Cl(u.nodeName));for(let f in u){let d=u[f];d!=null&&(t&&o.length==1&&o.push(i=new Cl(e.isInline?"span":"div")),f=="class"?i.class=(i.class?i.class+" ":"")+d:f=="style"?i.style=(i.style?i.style+";":"")+d:f!="nodeName"&&(i[f]=d))}}}return o}function Gv(n,e,t,i){if(t==Ki&&i==Ki)return e;let o=e;for(let l=0;l<i.length;l++){let u=i[l],f=t[l];if(l){let d;f&&f.nodeName==u.nodeName&&o!=n&&(d=o.parentNode)&&d.nodeName.toLowerCase()==u.nodeName||(d=document.createElement(u.nodeName),d.pmIsDeco=!0,d.appendChild(o),f=Ki[0]),o=d}mk(o,f||Ki[0],u)}return o}function mk(n,e,t){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in t)&&n.removeAttribute(i);for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&t[i]!=e[i]&&n.setAttribute(i,t[i]);if(e.class!=t.class){let i=e.class?e.class.split(" ").filter(Boolean):[],o=t.class?t.class.split(" ").filter(Boolean):[];for(let l=0;l<i.length;l++)o.indexOf(i[l])==-1&&n.classList.remove(i[l]);for(let l=0;l<o.length;l++)i.indexOf(o[l])==-1&&n.classList.add(o[l]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=i.exec(e.style);)n.style.removeProperty(o[1])}t.style&&(n.style.cssText+=t.style)}}function Yv(n,e,t){return Gv(n,n,Ki,ph(e,t,n.nodeType!=1))}function _u(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Y0(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class gk{constructor(e,t,i){this.lock=t,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=yk(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let i=e;i<t;i++)this.top.children[i].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,i){let o=0,l=this.stack.length>>1,u=Math.min(l,e.length);for(;o<u&&(o==l-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<l;)this.destroyRest(),this.top.dirty=Rn,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let f=-1;for(let d=this.index;d<Math.min(this.index+3,this.top.children.length);d++){let p=this.top.children[d];if(p.matchesMark(e[l])&&!this.isLocked(p.dom)){f=d;break}}if(f>-1)f>this.index&&(this.changed=!0,this.destroyBetween(this.index,f)),this.top=this.top.children[this.index];else{let d=ls.create(this.top,e[l],t,i);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,l++}}findNodeMatch(e,t,i,o){let l=-1,u;if(o>=this.preMatch.index&&(u=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&u.matchesNode(e,t,i))l=this.top.children.indexOf(u,this.index);else for(let f=this.index,d=Math.min(this.top.children.length,f+5);f<d;f++){let p=this.top.children[f];if(p.matchesNode(e,t,i)&&!this.preMatch.matched.has(p)){l=f;break}}return l<0?!1:(this.destroyBetween(this.index,l),this.index++,!0)}updateNodeAt(e,t,i,o,l){let u=this.top.children[o];return u.dirty==nr&&u.dom==u.contentDOM&&(u.dirty=Yi),u.update(e,t,i,l)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==i)return o}return-1}e=t}}updateNextNode(e,t,i,o,l,u){for(let f=this.index;f<this.top.children.length;f++){let d=this.top.children[f];if(d instanceof hi){let p=this.preMatch.matched.get(d);if(p!=null&&p!=l)return!1;let g=d.dom,y,b=this.isLocked(g)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=nr&&_u(t,d.outerDeco));if(!b&&d.update(e,t,i,o))return this.destroyBetween(this.index,f),d.dom!=g&&(this.changed=!0),this.index++,!0;if(!b&&(y=this.recreateWrapper(d,e,t,i,o,u)))return this.destroyBetween(this.index,f),this.top.children[this.index]=y,y.contentDOM&&(y.dirty=Yi,y.updateChildren(o,u+1),y.dirty=Rn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,i,o,l,u){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!_u(i,e.outerDeco)||!o.eq(e.innerDeco))return null;let f=hi.create(this.top,t,i,o,l,u);if(f.contentDOM){f.children=e.children,e.children=[];for(let d of f.children)d.parent=f}return e.destroy(),f}addNode(e,t,i,o,l){let u=hi.create(this.top,e,t,i,o,l);u.contentDOM&&u.updateChildren(o,l+1),this.top.children.splice(this.index++,0,u),this.changed=!0}placeWidget(e,t,i){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let l=new Pv(this.top,e,t,i);this.top.children.splice(this.index++,0,l),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ls;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Ku)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ft||Lt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");let o=new Qv(this.top,[],i,null);t!=this.top?t.children.push(o):t.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function yk(n,e){let t=e,i=t.children.length,o=n.childCount,l=new Map,u=[];e:for(;o>0;){let f;for(;;)if(i){let p=t.children[i-1];if(p instanceof ls)t=p,i=p.children.length;else{f=p,i--;break}}else{if(t==e)break e;i=t.parent.children.indexOf(t),t=t.parent}let d=f.node;if(d){if(d!=n.child(o-1))break;--o,l.set(f,o),u.push(f)}}return{index:o,matched:l,matches:u.reverse()}}function bk(n,e){return n.type.side-e.type.side}function vk(n,e,t,i){let o=e.locals(n),l=0;if(o.length==0){for(let p=0;p<n.childCount;p++){let g=n.child(p);i(g,o,e.forChild(l,g),p),l+=g.nodeSize}return}let u=0,f=[],d=null;for(let p=0;;){let g,y;for(;u<o.length&&o[u].to==l;){let C=o[u++];C.widget&&(g?(y||(y=[g])).push(C):g=C)}if(g)if(y){y.sort(bk);for(let C=0;C<y.length;C++)t(y[C],p,!!d)}else t(g,p,!!d);let b,v;if(d)v=-1,b=d,d=null;else if(p<n.childCount)v=p,b=n.child(p++);else break;for(let C=0;C<f.length;C++)f[C].to<=l&&f.splice(C--,1);for(;u<o.length&&o[u].from<=l&&o[u].to>l;)f.push(o[u++]);let S=l+b.nodeSize;if(b.isText){let C=S;u<o.length&&o[u].from<C&&(C=o[u].from);for(let _=0;_<f.length;_++)f[_].to<C&&(C=f[_].to);C<S&&(d=b.cut(C-l),b=b.cut(0,C-l),S=C,v=-1)}else for(;u<o.length&&o[u].to<S;)u++;let M=b.isInline&&!b.isLeaf?f.filter(C=>!C.inline):f.slice();i(b,M,e.forChild(l,b),v),l=S}}function xk(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function Sk(n,e,t,i){for(let o=0,l=0;o<n.childCount&&l<=i;){let u=n.child(o++),f=l;if(l+=u.nodeSize,!u.isText)continue;let d=u.text;for(;o<n.childCount;){let p=n.child(o++);if(l+=p.nodeSize,!p.isText)break;d+=p.text}if(l>=t){if(l>=i&&d.slice(i-e.length-f,i-f)==e)return i-e.length;let p=f<i?d.lastIndexOf(e,i-f-1):-1;if(p>=0&&p+e.length+f>=t)return f+p;if(t==i&&d.length>=i+e.length-f&&d.slice(i-f,i-f+e.length)==e)return i}}return-1}function mh(n,e,t,i,o){let l=[];for(let u=0,f=0;u<n.length;u++){let d=n[u],p=f,g=f+=d.size;p>=t||g<=e?l.push(d):(p<e&&l.push(d.slice(0,e-p,i)),o&&(l.push(o),o=void 0),g>t&&l.push(d.slice(t-p,d.size,i)))}return l}function qh(n,e=null){let t=n.domSelectionRange(),i=n.state.doc;if(!t.focusNode)return null;let o=n.docView.nearestDesc(t.focusNode),l=o&&o.size==0,u=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(u<0)return null;let f=i.resolve(u),d,p;if(Yu(t)){for(d=u;o&&!o.node;)o=o.parent;let y=o.node;if(o&&y.isAtom&&he.isSelectable(y)&&o.parent&&!(y.isInline&&GC(t.focusNode,t.focusOffset,o.dom))){let b=o.posBefore;p=new he(u==b?f:i.resolve(b))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let y=u,b=u;for(let v=0;v<t.rangeCount;v++){let S=t.getRangeAt(v);y=Math.min(y,n.docView.posFromDOM(S.startContainer,S.startOffset,1)),b=Math.max(b,n.docView.posFromDOM(S.endContainer,S.endOffset,-1))}if(y<0)return null;[d,u]=b==n.state.selection.anchor?[b,y]:[y,b],f=i.resolve(u)}else d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let g=i.resolve(d);if(!p){let y=e=="pointer"||n.state.selection.head<f.pos&&!l?1:-1;p=Vh(n,g,f,y)}return p}function Kv(n){return n.editable?n.hasFocus():Xv(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function kr(n,e=!1){let t=n.state.selection;if(Jv(n,t),!!Kv(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Lt){let i=n.domSelectionRange(),o=n.domObserver.currentSelection;if(i.anchorNode&&o.anchorNode&&ss(i.anchorNode,i.anchorOffset,o.anchorNode,o.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)Tk(n);else{let{anchor:i,head:o}=t,l,u;K0&&!(t instanceof ve)&&(t.$from.parent.inlineContent||(l=J0(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(u=J0(n,t.to))),n.docView.setSelection(i,o,n,e),K0&&(l&&X0(l),u&&X0(u)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&wk(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const K0=Ft||Lt&&Lv<63;function J0(n,e){let{node:t,offset:i}=n.docView.domFromPos(e,0),o=i<t.childNodes.length?t.childNodes[i]:null,l=i?t.childNodes[i-1]:null;if(Ft&&o&&o.contentEditable=="false")return qd(o);if((!o||o.contentEditable=="false")&&(!l||l.contentEditable=="false")){if(o)return qd(o);if(l)return qd(l)}}function qd(n){return n.contentEditable="true",Ft&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function X0(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function wk(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),i=t.anchorNode,o=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=i||t.anchorOffset!=o)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Kv(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function Tk(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let i=n.cursorWrapper.dom,o=i.nodeName=="IMG";o?t.setStart(i.parentNode,Nt(i)+1):t.setStart(i,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!o&&!n.state.selection.visible&&sn&&di<=11&&(i.disabled=!0,i.disabled=!1)}function Jv(n,e){if(e instanceof he){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Z0(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Z0(n)}function Z0(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Vh(n,e,t,i){return n.someProp("createSelectionBetween",o=>o(n,e,t))||ve.between(e,t,i)}function W0(n){return n.editable&&!n.hasFocus()?!1:Xv(n)}function Xv(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Mk(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return ss(e.node,e.offset,t.anchorNode,t.anchorOffset)}function gh(n,e){let{$anchor:t,$head:i}=n.selection,o=e>0?t.max(i):t.min(i),l=o.parent.inlineContent?o.depth?n.doc.resolve(e>0?o.after():o.before()):null:o;return l&&we.findFrom(l,e)}function ni(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function eb(n,e,t){let i=n.state.selection;if(i instanceof ve)if(t.indexOf("s")>-1){let{$head:o}=i,l=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!l||l.isText||!l.isLeaf)return!1;let u=n.state.doc.resolve(o.pos+l.nodeSize*(e<0?-1:1));return ni(n,new ve(i.$anchor,u))}else if(i.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let o=gh(n.state,e);return o&&o instanceof he?ni(n,o):!1}else if(!(On&&t.indexOf("m")>-1)){let o=i.$head,l=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,u;if(!l||l.isText)return!1;let f=e<0?o.pos-l.nodeSize:o.pos;return l.isAtom||(u=n.docView.descAt(f))&&!u.contentDOM?he.isSelectable(l)?ni(n,new he(e<0?n.state.doc.resolve(o.pos-l.nodeSize):o)):Hl?ni(n,new ve(n.state.doc.resolve(e<0?f:f+l.nodeSize))):!1:!1}}else return!1;else{if(i instanceof he&&i.node.isInline)return ni(n,new ve(e>0?i.$to:i.$from));{let o=gh(n.state,e);return o?ni(n,o):!1}}}function Bu(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function kl(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Ws(n,e){return e<0?Ck(n):kk(n)}function Ck(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let o,l,u=!1;for(In&&t.nodeType==1&&i<Bu(t)&&kl(t.childNodes[i],-1)&&(u=!0);;)if(i>0){if(t.nodeType!=1)break;{let f=t.childNodes[i-1];if(kl(f,-1))o=t,l=--i;else if(f.nodeType==3)t=f,i=t.nodeValue.length;else break}}else{if(Zv(t))break;{let f=t.previousSibling;for(;f&&kl(f,-1);)o=t.parentNode,l=Nt(f),f=f.previousSibling;if(f)t=f,i=Bu(t);else{if(t=t.parentNode,t==n.dom)break;i=0}}}u?yh(n,t,i):o&&yh(n,o,l)}function kk(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let o=Bu(t),l,u;for(;;)if(i<o){if(t.nodeType!=1)break;let f=t.childNodes[i];if(kl(f,1))l=t,u=++i;else break}else{if(Zv(t))break;{let f=t.nextSibling;for(;f&&kl(f,1);)l=f.parentNode,u=Nt(f)+1,f=f.nextSibling;if(f)t=f,i=0,o=Bu(t);else{if(t=t.parentNode,t==n.dom)break;i=o=0}}}l&&yh(n,l,u)}function Zv(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function Ek(n,e){for(;n&&e==n.childNodes.length&&!Il(n);)e=Nt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function Ak(n,e){for(;n&&!e&&!Il(n);)e=Nt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function yh(n,e,t){if(e.nodeType!=3){let l,u;(u=Ek(e,t))?(e=u,t=0):(l=Ak(e,t))&&(e=l,t=l.nodeValue.length)}let i=n.domSelection();if(!i)return;if(Yu(i)){let l=document.createRange();l.setEnd(e,t),l.setStart(e,t),i.removeAllRanges(),i.addRange(l)}else i.extend&&i.extend(e,t);n.domObserver.setCurSelection();let{state:o}=n;setTimeout(()=>{n.state==o&&kr(n)},50)}function tb(n,e){let t=n.state.doc.resolve(e);if(!(Lt||JC)&&t.parent.inlineContent){let o=n.coordsAtPos(e);if(e>t.start()){let l=n.coordsAtPos(e-1),u=(l.top+l.bottom)/2;if(u>o.top&&u<o.bottom&&Math.abs(l.left-o.left)>1)return l.left<o.left?"ltr":"rtl"}if(e<t.end()){let l=n.coordsAtPos(e+1),u=(l.top+l.bottom)/2;if(u>o.top&&u<o.bottom&&Math.abs(l.left-o.left)>1)return l.left>o.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function nb(n,e,t){let i=n.state.selection;if(i instanceof ve&&!i.empty||t.indexOf("s")>-1||On&&t.indexOf("m")>-1)return!1;let{$from:o,$to:l}=i;if(!o.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let u=gh(n.state,e);if(u&&u instanceof he)return ni(n,u)}if(!o.parent.inlineContent){let u=e<0?o:l,f=i instanceof gn?we.near(u,e):we.findFrom(u,e);return f?ni(n,f):!1}return!1}function rb(n,e){if(!(n.state.selection instanceof ve))return!0;let{$head:t,$anchor:i,empty:o}=n.state.selection;if(!t.sameParent(i))return!0;if(!o)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let l=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(l&&!l.isText){let u=n.state.tr;return e<0?u.delete(t.pos-l.nodeSize,t.pos):u.delete(t.pos,t.pos+l.nodeSize),n.dispatch(u),!0}return!1}function ib(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function Ok(n){if(!Ft||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let i=e.firstChild;ib(n,i,"true"),setTimeout(()=>ib(n,i,"false"),20)}return!1}function Nk(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function Rk(n,e){let t=e.keyCode,i=Nk(e);if(t==8||On&&t==72&&i=="c")return rb(n,-1)||Ws(n,-1);if(t==46&&!e.shiftKey||On&&t==68&&i=="c")return rb(n,1)||Ws(n,1);if(t==13||t==27)return!0;if(t==37||On&&t==66&&i=="c"){let o=t==37?tb(n,n.state.selection.from)=="ltr"?-1:1:-1;return eb(n,o,i)||Ws(n,o)}else if(t==39||On&&t==70&&i=="c"){let o=t==39?tb(n,n.state.selection.from)=="ltr"?1:-1:1;return eb(n,o,i)||Ws(n,o)}else{if(t==38||On&&t==80&&i=="c")return nb(n,-1,i)||Ws(n,-1);if(t==40||On&&t==78&&i=="c")return Ok(n)||nb(n,1,i)||Ws(n,1);if(i==(On?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Uh(n,e){n.someProp("transformCopied",v=>{e=v(e,n)});let t=[],{content:i,openStart:o,openEnd:l}=e;for(;o>1&&l>1&&i.childCount==1&&i.firstChild.childCount==1;){o--,l--;let v=i.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),i=v.content}let u=n.someProp("clipboardSerializer")||as.fromSchema(n.state.schema),f=ix(),d=f.createElement("div");d.appendChild(u.serializeFragment(i,{document:f}));let p=d.firstChild,g,y=0;for(;p&&p.nodeType==1&&(g=rx[p.nodeName.toLowerCase()]);){for(let v=g.length-1;v>=0;v--){let S=f.createElement(g[v]);for(;d.firstChild;)S.appendChild(d.firstChild);d.appendChild(S),y++}p=d.firstChild}p&&p.nodeType==1&&p.setAttribute("data-pm-slice",`${o} ${l}${y?` -${y}`:""} ${JSON.stringify(t)}`);let b=n.someProp("clipboardTextSerializer",v=>v(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:b,slice:e}}function Wv(n,e,t,i,o){let l=o.parent.type.spec.code,u,f;if(!t&&!e)return null;let d=e&&(i||l||!t);if(d){if(n.someProp("transformPastedText",b=>{e=b(e,l||i,n)}),l)return e?new re(Z.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):re.empty;let y=n.someProp("clipboardTextParser",b=>b(e,o,i,n));if(y)f=y;else{let b=o.marks(),{schema:v}=n.state,S=as.fromSchema(v);u=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(M=>{let C=u.appendChild(document.createElement("p"));M&&C.appendChild(S.serializeNode(v.text(M,b)))})}}else n.someProp("transformPastedHTML",y=>{t=y(t,n)}),u=Bk(t),Hl&&jk(u);let p=u&&u.querySelector("[data-pm-slice]"),g=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(g&&g[3])for(let y=+g[3];y>0;y--){let b=u.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;u=b}if(f||(f=(n.someProp("clipboardParser")||n.someProp("domParser")||fi.fromSchema(n.state.schema)).parseSlice(u,{preserveWhitespace:!!(d||g),context:o,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!Dk.test(b.parentNode.nodeName)?{ignore:!0}:null}})),g)f=Lk(sb(f,+g[1],+g[2]),g[4]);else if(f=re.maxOpen(zk(f.content,o),!0),f.openStart||f.openEnd){let y=0,b=0;for(let v=f.content.firstChild;y<f.openStart&&!v.type.spec.isolating;y++,v=v.firstChild);for(let v=f.content.lastChild;b<f.openEnd&&!v.type.spec.isolating;b++,v=v.lastChild);f=sb(f,y,b)}return n.someProp("transformPasted",y=>{f=y(f,n)}),f}const Dk=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function zk(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let o=e.node(t).contentMatchAt(e.index(t)),l,u=[];if(n.forEach(f=>{if(!u)return;let d=o.findWrapping(f.type),p;if(!d)return u=null;if(p=u.length&&l.length&&tx(d,l,f,u[u.length-1],0))u[u.length-1]=p;else{u.length&&(u[u.length-1]=nx(u[u.length-1],l.length));let g=ex(f,d);u.push(g),o=o.matchType(g.type),l=d}}),u)return Z.from(u)}return n}function ex(n,e,t=0){for(let i=e.length-1;i>=t;i--)n=e[i].create(null,Z.from(n));return n}function tx(n,e,t,i,o){if(o<n.length&&o<e.length&&n[o]==e[o]){let l=tx(n,e,t,i.lastChild,o+1);if(l)return i.copy(i.content.replaceChild(i.childCount-1,l));if(i.contentMatchAt(i.childCount).matchType(o==n.length-1?t.type:n[o+1]))return i.copy(i.content.append(Z.from(ex(t,n,o+1))))}}function nx(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,nx(n.lastChild,e-1)),i=n.contentMatchAt(n.childCount).fillBefore(Z.empty,!0);return n.copy(t.append(i))}function bh(n,e,t,i,o,l){let u=e<0?n.firstChild:n.lastChild,f=u.content;return n.childCount>1&&(l=0),o<i-1&&(f=bh(f,e,t,i,o+1,l)),o>=t&&(f=e<0?u.contentMatchAt(0).fillBefore(f,l<=o).append(f):f.append(u.contentMatchAt(u.childCount).fillBefore(Z.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,u.copy(f))}function sb(n,e,t){return e<n.openStart&&(n=new re(bh(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new re(bh(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const rx={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ob=null;function ix(){return ob||(ob=document.implementation.createHTMLDocument("title"))}let Vd=null;function _k(n){let e=window.trustedTypes;return e?(Vd||(Vd=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Vd.createHTML(n)):n}function Bk(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=ix().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n),o;if((o=i&&rx[i[1].toLowerCase()])&&(n=o.map(l=>"<"+l+">").join("")+n+o.map(l=>"</"+l+">").reverse().join("")),t.innerHTML=_k(n),o)for(let l=0;l<o.length;l++)t=t.querySelector(o[l])||t;return t}function jk(n){let e=n.querySelectorAll(Lt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let i=e[t];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}function Lk(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,i;try{i=JSON.parse(e)}catch{return n}let{content:o,openStart:l,openEnd:u}=n;for(let f=i.length-2;f>=0;f-=2){let d=t.nodes[i[f]];if(!d||d.hasRequiredAttrs())break;o=Z.from(d.create(i[f+1],o)),l++,u++}return new re(o,l,u)}const Gt={},Yt={},qk={touchstart:!0,touchmove:!0};class Vk{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Uk(n){for(let e in Gt){let t=Gt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=i=>{Hk(n,i)&&!Ih(n,i)&&(n.editable||!(i.type in Yt))&&t(n,i)},qk[e]?{passive:!0}:void 0)}Ft&&n.dom.addEventListener("input",()=>null),vh(n)}function ui(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function Ik(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function vh(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=i=>Ih(n,i))})}function Ih(n,e){return n.someProp("handleDOMEvents",t=>{let i=t[e.type];return i?i(n,e)||e.defaultPrevented:!1})}function Hk(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function $k(n,e){!Ih(n,e)&&Gt[e.type]&&(n.editable||!(e.type in Yt))&&Gt[e.type](n,e)}Yt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!ox(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Mr&&Lt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),fo&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",o=>o(n,Fi(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",i=>i(n,t))||Rk(n,t)?t.preventDefault():ui(n,"key")};Yt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Yt.keypress=(n,e)=>{let t=e;if(ox(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||On&&t.metaKey)return;if(n.someProp("handleKeyPress",o=>o(n,t))){t.preventDefault();return}let i=n.state.selection;if(!(i instanceof ve)||!i.$from.sameParent(i.$to)){let o=String.fromCharCode(t.charCode);!/[\r\n]/.test(o)&&!n.someProp("handleTextInput",l=>l(n,i.$from.pos,i.$to.pos,o))&&n.dispatch(n.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}};function Ju(n){return{left:n.clientX,top:n.clientY}}function Pk(n,e){let t=e.x-n.clientX,i=e.y-n.clientY;return t*t+i*i<100}function Hh(n,e,t,i,o){if(i==-1)return!1;let l=n.state.doc.resolve(i);for(let u=l.depth+1;u>0;u--)if(n.someProp(e,f=>u>l.depth?f(n,t,l.nodeAfter,l.before(u),o,!0):f(n,t,l.node(u),l.before(u),o,!1)))return!0;return!1}function lo(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let i=n.state.tr.setSelection(e);i.setMeta("pointer",!0),n.dispatch(i)}function Qk(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),i=t.nodeAfter;return i&&i.isAtom&&he.isSelectable(i)?(lo(n,new he(t)),!0):!1}function Fk(n,e){if(e==-1)return!1;let t=n.state.selection,i,o;t instanceof he&&(i=t.node);let l=n.state.doc.resolve(e);for(let u=l.depth+1;u>0;u--){let f=u>l.depth?l.nodeAfter:l.node(u);if(he.isSelectable(f)){i&&t.$from.depth>0&&u>=t.$from.depth&&l.before(t.$from.depth+1)==t.$from.pos?o=l.before(t.$from.depth):o=l.before(u);break}}return o!=null?(lo(n,he.create(n.state.doc,o)),!0):!1}function Gk(n,e,t,i,o){return Hh(n,"handleClickOn",e,t,i)||n.someProp("handleClick",l=>l(n,e,i))||(o?Fk(n,t):Qk(n,t))}function Yk(n,e,t,i){return Hh(n,"handleDoubleClickOn",e,t,i)||n.someProp("handleDoubleClick",o=>o(n,e,i))}function Kk(n,e,t,i){return Hh(n,"handleTripleClickOn",e,t,i)||n.someProp("handleTripleClick",o=>o(n,e,i))||Jk(n,t,i)}function Jk(n,e,t){if(t.button!=0)return!1;let i=n.state.doc;if(e==-1)return i.inlineContent?(lo(n,ve.create(i,0,i.content.size)),!0):!1;let o=i.resolve(e);for(let l=o.depth+1;l>0;l--){let u=l>o.depth?o.nodeAfter:o.node(l),f=o.before(l);if(u.inlineContent)lo(n,ve.create(i,f+1,f+1+u.content.size));else if(he.isSelectable(u))lo(n,he.create(i,f));else continue;return!0}}function $h(n){return ju(n)}const sx=On?"metaKey":"ctrlKey";Gt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let i=$h(n),o=Date.now(),l="singleClick";o-n.input.lastClick.time<500&&Pk(t,n.input.lastClick)&&!t[sx]&&(n.input.lastClick.type=="singleClick"?l="doubleClick":n.input.lastClick.type=="doubleClick"&&(l="tripleClick")),n.input.lastClick={time:o,x:t.clientX,y:t.clientY,type:l};let u=n.posAtCoords(Ju(t));u&&(l=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new Xk(n,u,t,!!i)):(l=="doubleClick"?Yk:Kk)(n,u.pos,u.inside,t)?t.preventDefault():ui(n,"pointer"))};class Xk{constructor(e,t,i,o){this.view=e,this.pos=t,this.event=i,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[sx],this.allowDefault=i.shiftKey;let l,u;if(t.inside>-1)l=e.state.doc.nodeAt(t.inside),u=t.inside;else{let g=e.state.doc.resolve(t.pos);l=g.parent,u=g.depth?g.before():0}const f=o?null:i.target,d=f?e.docView.nearestDesc(f,!0):null;this.target=d&&d.dom.nodeType==1?d.dom:null;let{selection:p}=e.state;(i.button==0&&l.type.spec.draggable&&l.type.spec.selectable!==!1||p instanceof he&&p.from<=u&&p.to>u)&&(this.mightDrag={node:l,pos:u,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&In&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ui(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>kr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Ju(e))),this.updateAllowDefault(e),this.allowDefault||!t?ui(this.view,"pointer"):Gk(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ft&&this.mightDrag&&!this.mightDrag.node.isAtom||Lt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(lo(this.view,we.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):ui(this.view,"pointer")}move(e){this.updateAllowDefault(e),ui(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Gt.touchstart=n=>{n.input.lastTouch=Date.now(),$h(n),ui(n,"pointer")};Gt.touchmove=n=>{n.input.lastTouch=Date.now(),ui(n,"pointer")};Gt.contextmenu=n=>$h(n);function ox(n,e){return n.composing?!0:Ft&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const Zk=Mr?5e3:-1;Yt.compositionstart=Yt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof ve&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),ju(n,!0),n.markCursor=null;else if(ju(n,!e.selection.empty),In&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let i=n.domSelectionRange();for(let o=i.focusNode,l=i.focusOffset;o&&o.nodeType==1&&l!=0;){let u=l<0?o.lastChild:o.childNodes[l-1];if(!u)break;if(u.nodeType==3){let f=n.domSelection();f&&f.collapse(u,u.nodeValue.length);break}else o=u,l=-1}}n.input.composing=!0}lx(n,Zk)};Yt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,lx(n,20))};function lx(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>ju(n),e))}function ax(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=eE());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function Wk(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=QC(e.focusNode,e.focusOffset),i=FC(e.focusNode,e.focusOffset);if(t&&i&&t!=i){let o=i.pmViewDesc,l=n.domObserver.lastChangedTextNode;if(t==l||i==l)return l;if(!o||!o.isText(i.nodeValue))return i;if(n.input.compositionNode==i){let u=t.pmViewDesc;if(!(!u||!u.isText(t.nodeValue)))return i}}return t||i}function eE(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function ju(n,e=!1){if(!(Mr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),ax(n),e||n.docView&&n.docView.dirty){let t=qh(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function tE(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),o=document.createRange();o.selectNodeContents(e),n.dom.blur(),i.removeAllRanges(),i.addRange(o),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Bl=sn&&di<15||fo&&XC<604;Gt.copy=Yt.cut=(n,e)=>{let t=e,i=n.state.selection,o=t.type=="cut";if(i.empty)return;let l=Bl?null:t.clipboardData,u=i.content(),{dom:f,text:d}=Uh(n,u);l?(t.preventDefault(),l.clearData(),l.setData("text/html",f.innerHTML),l.setData("text/plain",d)):tE(n,f),o&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function nE(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function rE(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let o=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),t?jl(n,i.value,null,o,e):jl(n,i.textContent,i.innerHTML,o,e)},50)}function jl(n,e,t,i,o){let l=Wv(n,e,t,i,n.state.selection.$from);if(n.someProp("handlePaste",d=>d(n,o,l||re.empty)))return!0;if(!l)return!1;let u=nE(l),f=u?n.state.tr.replaceSelectionWith(u,i):n.state.tr.replaceSelection(l);return n.dispatch(f.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ux(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Yt.paste=(n,e)=>{let t=e;if(n.composing&&!Mr)return;let i=Bl?null:t.clipboardData,o=n.input.shiftKey&&n.input.lastKeyCode!=45;i&&jl(n,ux(i),i.getData("text/html"),o,t)?t.preventDefault():rE(n,t)};class cx{constructor(e,t,i){this.slice=e,this.move=t,this.node=i}}const iE=On?"altKey":"ctrlKey";function fx(n,e){let t=n.someProp("dragCopies",i=>!i(e));return t??!e[iE]}Gt.dragstart=(n,e)=>{let t=e,i=n.input.mouseDown;if(i&&i.done(),!t.dataTransfer)return;let o=n.state.selection,l=o.empty?null:n.posAtCoords(Ju(t)),u;if(!(l&&l.pos>=o.from&&l.pos<=(o instanceof he?o.to-1:o.to))){if(i&&i.mightDrag)u=he.create(n.state.doc,i.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let y=n.docView.nearestDesc(t.target,!0);y&&y.node.type.spec.draggable&&y!=n.docView&&(u=he.create(n.state.doc,y.posBefore))}}let f=(u||n.state.selection).content(),{dom:d,text:p,slice:g}=Uh(n,f);(!t.dataTransfer.files.length||!Lt||Lv>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Bl?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",Bl||t.dataTransfer.setData("text/plain",p),n.dragging=new cx(g,fx(n,t),u)};Gt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Yt.dragover=Yt.dragenter=(n,e)=>e.preventDefault();Yt.drop=(n,e)=>{let t=e,i=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let o=n.posAtCoords(Ju(t));if(!o)return;let l=n.state.doc.resolve(o.pos),u=i&&i.slice;u?n.someProp("transformPasted",S=>{u=S(u,n)}):u=Wv(n,ux(t.dataTransfer),Bl?null:t.dataTransfer.getData("text/html"),!1,l);let f=!!(i&&fx(n,t));if(n.someProp("handleDrop",S=>S(n,t,u||re.empty,f))){t.preventDefault();return}if(!u)return;t.preventDefault();let d=u?Ov(n.state.doc,l.pos,u):l.pos;d==null&&(d=l.pos);let p=n.state.tr;if(f){let{node:S}=i;S?S.replace(p):p.deleteSelection()}let g=p.mapping.map(d),y=u.openStart==0&&u.openEnd==0&&u.content.childCount==1,b=p.doc;if(y?p.replaceRangeWith(g,g,u.content.firstChild):p.replaceRange(g,g,u),p.doc.eq(b))return;let v=p.doc.resolve(g);if(y&&he.isSelectable(u.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(u.content.firstChild))p.setSelection(new he(v));else{let S=p.mapping.map(d);p.mapping.maps[p.mapping.maps.length-1].forEach((M,C,_,$)=>S=$),p.setSelection(Vh(n,v,p.doc.resolve(S)))}n.focus(),n.dispatch(p.setMeta("uiEvent","drop"))};Gt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&kr(n)},20))};Gt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Gt.beforeinput=(n,e)=>{if(Lt&&Mr&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",l=>l(n,Fi(8,"Backspace")))))return;let{$cursor:o}=n.state.selection;o&&o.pos>0&&n.dispatch(n.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let n in Yt)Gt[n]=Yt[n];function Ll(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Lu{constructor(e,t){this.toDOM=e,this.spec=t||es,this.side=this.spec.side||0}map(e,t,i,o){let{pos:l,deleted:u}=e.mapResult(t.from+o,this.side<0?-1:1);return u?null:new mn(l-i,l-i,this)}valid(){return!0}eq(e){return this==e||e instanceof Lu&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ll(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class pi{constructor(e,t){this.attrs=e,this.spec=t||es}map(e,t,i,o){let l=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-i,u=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-i;return l>=u?null:new mn(l,u,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof pi&&Ll(this.attrs,e.attrs)&&Ll(this.spec,e.spec)}static is(e){return e.type instanceof pi}destroy(){}}class Ph{constructor(e,t){this.attrs=e,this.spec=t||es}map(e,t,i,o){let l=e.mapResult(t.from+o,1);if(l.deleted)return null;let u=e.mapResult(t.to+o,-1);return u.deleted||u.pos<=l.pos?null:new mn(l.pos-i,u.pos-i,this)}valid(e,t){let{index:i,offset:o}=e.content.findIndex(t.from),l;return o==t.from&&!(l=e.child(i)).isText&&o+l.nodeSize==t.to}eq(e){return this==e||e instanceof Ph&&Ll(this.attrs,e.attrs)&&Ll(this.spec,e.spec)}destroy(){}}class mn{constructor(e,t,i){this.from=e,this.to=t,this.type=i}copy(e,t){return new mn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,i){return this.type.map(e,this,t,i)}static widget(e,t,i){return new mn(e,e,new Lu(t,i))}static inline(e,t,i,o){return new mn(e,t,new pi(i,o))}static node(e,t,i,o){return new mn(e,t,new Ph(i,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof pi}get widget(){return this.type instanceof Lu}}const no=[],es={};class lt{constructor(e,t){this.local=e.length?e:no,this.children=t.length?t:no}static create(e,t){return t.length?qu(t,e,0,es):jt}find(e,t,i){let o=[];return this.findInner(e??0,t??1e9,o,0,i),o}findInner(e,t,i,o,l){for(let u=0;u<this.local.length;u++){let f=this.local[u];f.from<=t&&f.to>=e&&(!l||l(f.spec))&&i.push(f.copy(f.from+o,f.to+o))}for(let u=0;u<this.children.length;u+=3)if(this.children[u]<t&&this.children[u+1]>e){let f=this.children[u]+1;this.children[u+2].findInner(e-f,t-f,i,o+f,l)}}map(e,t,i){return this==jt||e.maps.length==0?this:this.mapInner(e,t,0,0,i||es)}mapInner(e,t,i,o,l){let u;for(let f=0;f<this.local.length;f++){let d=this.local[f].map(e,i,o);d&&d.type.valid(t,d)?(u||(u=[])).push(d):l.onRemove&&l.onRemove(this.local[f].spec)}return this.children.length?sE(this.children,u||[],e,t,i,o,l):u?new lt(u.sort(ts),no):jt}add(e,t){return t.length?this==jt?lt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,i){let o,l=0;e.forEach((f,d)=>{let p=d+i,g;if(g=hx(t,f,p)){for(o||(o=this.children.slice());l<o.length&&o[l]<d;)l+=3;o[l]==d?o[l+2]=o[l+2].addInner(f,g,p+1):o.splice(l,0,d,d+f.nodeSize,qu(g,f,p+1,es)),l+=3}});let u=dx(l?px(t):t,-i);for(let f=0;f<u.length;f++)u[f].type.valid(e,u[f])||u.splice(f--,1);return new lt(u.length?this.local.concat(u).sort(ts):this.local,o||this.children)}remove(e){return e.length==0||this==jt?this:this.removeInner(e,0)}removeInner(e,t){let i=this.children,o=this.local;for(let l=0;l<i.length;l+=3){let u,f=i[l]+t,d=i[l+1]+t;for(let g=0,y;g<e.length;g++)(y=e[g])&&y.from>f&&y.to<d&&(e[g]=null,(u||(u=[])).push(y));if(!u)continue;i==this.children&&(i=this.children.slice());let p=i[l+2].removeInner(u,f+1);p!=jt?i[l+2]=p:(i.splice(l,3),l-=3)}if(o.length){for(let l=0,u;l<e.length;l++)if(u=e[l])for(let f=0;f<o.length;f++)o[f].eq(u,t)&&(o==this.local&&(o=this.local.slice()),o.splice(f--,1))}return i==this.children&&o==this.local?this:o.length||i.length?new lt(o,i):jt}forChild(e,t){if(this==jt)return this;if(t.isLeaf)return lt.empty;let i,o;for(let f=0;f<this.children.length;f+=3)if(this.children[f]>=e){this.children[f]==e&&(i=this.children[f+2]);break}let l=e+1,u=l+t.content.size;for(let f=0;f<this.local.length;f++){let d=this.local[f];if(d.from<u&&d.to>l&&d.type instanceof pi){let p=Math.max(l,d.from)-l,g=Math.min(u,d.to)-l;p<g&&(o||(o=[])).push(d.copy(p,g))}}if(o){let f=new lt(o.sort(ts),no);return i?new ii([f,i]):f}return i||jt}eq(e){if(this==e)return!0;if(!(e instanceof lt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Qh(this.localsInner(e))}localsInner(e){if(this==jt)return no;if(e.inlineContent||!this.local.some(pi.is))return this.local;let t=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof pi||t.push(this.local[i]);return t}forEachSet(e){e(this)}}lt.empty=new lt([],[]);lt.removeOverlap=Qh;const jt=lt.empty;class ii{constructor(e){this.members=e}map(e,t){const i=this.members.map(o=>o.map(e,t,es));return ii.from(i)}forChild(e,t){if(t.isLeaf)return lt.empty;let i=[];for(let o=0;o<this.members.length;o++){let l=this.members[o].forChild(e,t);l!=jt&&(l instanceof ii?i=i.concat(l.members):i.push(l))}return ii.from(i)}eq(e){if(!(e instanceof ii)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,i=!0;for(let o=0;o<this.members.length;o++){let l=this.members[o].localsInner(e);if(l.length)if(!t)t=l;else{i&&(t=t.slice(),i=!1);for(let u=0;u<l.length;u++)t.push(l[u])}}return t?Qh(i?t:t.sort(ts)):no}static from(e){switch(e.length){case 0:return jt;case 1:return e[0];default:return new ii(e.every(t=>t instanceof lt)?e:e.reduce((t,i)=>t.concat(i instanceof lt?i:i.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function sE(n,e,t,i,o,l,u){let f=n.slice();for(let p=0,g=l;p<t.maps.length;p++){let y=0;t.maps[p].forEach((b,v,S,M)=>{let C=M-S-(v-b);for(let _=0;_<f.length;_+=3){let $=f[_+1];if($<0||b>$+g-y)continue;let U=f[_]+g-y;v>=U?f[_+1]=b<=U?-2:-1:b>=g&&C&&(f[_]+=C,f[_+1]+=C)}y+=C}),g=t.maps[p].map(g,-1)}let d=!1;for(let p=0;p<f.length;p+=3)if(f[p+1]<0){if(f[p+1]==-2){d=!0,f[p+1]=-1;continue}let g=t.map(n[p]+l),y=g-o;if(y<0||y>=i.content.size){d=!0;continue}let b=t.map(n[p+1]+l,-1),v=b-o,{index:S,offset:M}=i.content.findIndex(y),C=i.maybeChild(S);if(C&&M==y&&M+C.nodeSize==v){let _=f[p+2].mapInner(t,C,g+1,n[p]+l+1,u);_!=jt?(f[p]=y,f[p+1]=v,f[p+2]=_):(f[p+1]=-2,d=!0)}else d=!0}if(d){let p=oE(f,n,e,t,o,l,u),g=qu(p,i,0,u);e=g.local;for(let y=0;y<f.length;y+=3)f[y+1]<0&&(f.splice(y,3),y-=3);for(let y=0,b=0;y<g.children.length;y+=3){let v=g.children[y];for(;b<f.length&&f[b]<v;)b+=3;f.splice(b,0,g.children[y],g.children[y+1],g.children[y+2])}}return new lt(e.sort(ts),f)}function dx(n,e){if(!e||!n.length)return n;let t=[];for(let i=0;i<n.length;i++){let o=n[i];t.push(new mn(o.from+e,o.to+e,o.type))}return t}function oE(n,e,t,i,o,l,u){function f(d,p){for(let g=0;g<d.local.length;g++){let y=d.local[g].map(i,o,p);y?t.push(y):u.onRemove&&u.onRemove(d.local[g].spec)}for(let g=0;g<d.children.length;g+=3)f(d.children[g+2],d.children[g]+p+1)}for(let d=0;d<n.length;d+=3)n[d+1]==-1&&f(n[d+2],e[d]+l+1);return t}function hx(n,e,t){if(e.isLeaf)return null;let i=t+e.nodeSize,o=null;for(let l=0,u;l<n.length;l++)(u=n[l])&&u.from>t&&u.to<i&&((o||(o=[])).push(u),n[l]=null);return o}function px(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function qu(n,e,t,i){let o=[],l=!1;e.forEach((f,d)=>{let p=hx(n,f,d+t);if(p){l=!0;let g=qu(p,f,t+d+1,i);g!=jt&&o.push(d,d+f.nodeSize,g)}});let u=dx(l?px(n):n,-t).sort(ts);for(let f=0;f<u.length;f++)u[f].type.valid(e,u[f])||(i.onRemove&&i.onRemove(u[f].spec),u.splice(f--,1));return u.length||o.length?new lt(u,o):jt}function ts(n,e){return n.from-e.from||n.to-e.to}function Qh(n){let e=n;for(let t=0;t<e.length-1;t++){let i=e[t];if(i.from!=i.to)for(let o=t+1;o<e.length;o++){let l=e[o];if(l.from==i.from){l.to!=i.to&&(e==n&&(e=n.slice()),e[o]=l.copy(l.from,i.to),lb(e,o+1,l.copy(i.to,l.to)));continue}else{l.from<i.to&&(e==n&&(e=n.slice()),e[t]=i.copy(i.from,l.from),lb(e,o,i.copy(l.from,i.to)));break}}}return e}function lb(n,e,t){for(;e<n.length&&ts(t,n[e])>0;)e++;n.splice(e,0,t)}function Ud(n){let e=[];return n.someProp("decorations",t=>{let i=t(n.state);i&&i!=jt&&e.push(i)}),n.cursorWrapper&&e.push(lt.create(n.state.doc,[n.cursorWrapper.deco])),ii.from(e)}const lE={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},aE=sn&&di<=11;class uE{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class cE{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new uE,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let o=0;o<i.length;o++)this.queue.push(i[o]);sn&&di<=11&&i.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),aE&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,lE)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(W0(this.view)){if(this.suppressingSelectionUpdates)return kr(this.view);if(sn&&di<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ss(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,i;for(let l=e.focusNode;l;l=co(l))t.add(l);for(let l=e.anchorNode;l;l=co(l))if(t.has(l)){i=l;break}let o=i&&this.view.docView.nearestDesc(i);if(o&&o.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let i=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&W0(e)&&!this.ignoreSelectionChange(i),l=-1,u=-1,f=!1,d=[];if(e.editable)for(let g=0;g<t.length;g++){let y=this.registerMutation(t[g],d);y&&(l=l<0?y.from:Math.min(y.from,l),u=u<0?y.to:Math.max(y.to,u),y.typeOver&&(f=!0))}if(In&&d.length){let g=d.filter(y=>y.nodeName=="BR");if(g.length==2){let[y,b]=g;y.parentNode&&y.parentNode.parentNode==b.parentNode?b.remove():y.remove()}else{let{focusNode:y}=this.currentSelection;for(let b of g){let v=b.parentNode;v&&v.nodeName=="LI"&&(!y||hE(e,y)!=v)&&b.remove()}}}let p=null;l<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Yu(i)&&(p=qh(e))&&p.eq(we.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,kr(e),this.currentSelection.set(i),e.scrollToSelection()):(l>-1||o)&&(l>-1&&(e.docView.markDirty(l,u),fE(e)),this.handleDOMChange(l,u,f,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||kr(e),this.currentSelection.set(i))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(let g=0;g<e.addedNodes.length;g++){let y=e.addedNodes[g];t.push(y),y.nodeType==3&&(this.lastChangedTextNode=y)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let o=e.previousSibling,l=e.nextSibling;if(sn&&di<=11&&e.addedNodes.length)for(let g=0;g<e.addedNodes.length;g++){let{previousSibling:y,nextSibling:b}=e.addedNodes[g];(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(o=y),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(l=b)}let u=o&&o.parentNode==e.target?Nt(o)+1:0,f=i.localPosFromDOM(e.target,u,-1),d=l&&l.parentNode==e.target?Nt(l):e.target.childNodes.length,p=i.localPosFromDOM(e.target,d,1);return{from:f,to:p}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=e.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let ab=new WeakMap,ub=!1;function fE(n){if(!ab.has(n)&&(ab.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=In,ub)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ub=!0}}function cb(n,e){let t=e.startContainer,i=e.startOffset,o=e.endContainer,l=e.endOffset,u=n.domAtPos(n.state.selection.anchor);return ss(u.node,u.offset,o,l)&&([t,i,o,l]=[o,l,t,i]),{anchorNode:t,anchorOffset:i,focusNode:o,focusOffset:l}}function dE(n,e){if(e.getComposedRanges){let o=e.getComposedRanges(n.root)[0];if(o)return cb(n,o)}let t;function i(o){o.preventDefault(),o.stopImmediatePropagation(),t=o.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",i,!0),t?cb(n,t):null}function hE(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let i=n.docView.nearestDesc(t,!0);if(i&&i.node.isBlock)return t}return null}function pE(n,e,t){let{node:i,fromOffset:o,toOffset:l,from:u,to:f}=n.docView.parseRange(e,t),d=n.domSelectionRange(),p,g=d.anchorNode;if(g&&n.dom.contains(g.nodeType==1?g:g.parentNode)&&(p=[{node:g,offset:d.anchorOffset}],Yu(d)||p.push({node:d.focusNode,offset:d.focusOffset})),Lt&&n.input.lastKeyCode===8)for(let C=l;C>o;C--){let _=i.childNodes[C-1],$=_.pmViewDesc;if(_.nodeName=="BR"&&!$){l=C;break}if(!$||$.size)break}let y=n.state.doc,b=n.someProp("domParser")||fi.fromSchema(n.state.schema),v=y.resolve(u),S=null,M=b.parse(i,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:o,to:l,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:p,ruleFromNode:mE,context:v});if(p&&p[0].pos!=null){let C=p[0].pos,_=p[1]&&p[1].pos;_==null&&(_=C),S={anchor:C+u,head:_+u}}return{doc:M,sel:S,from:u,to:f}}function mE(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Ft&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Ft&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const gE=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function yE(n,e,t,i,o){let l=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let se=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,ze=qh(n,se);if(ze&&!n.state.selection.eq(ze)){if(Lt&&Mr&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",Re=>Re(n,Fi(13,"Enter"))))return;let _e=n.state.tr.setSelection(ze);se=="pointer"?_e.setMeta("pointer",!0):se=="key"&&_e.scrollIntoView(),l&&_e.setMeta("composition",l),n.dispatch(_e)}return}let u=n.state.doc.resolve(e),f=u.sharedDepth(t);e=u.before(f+1),t=n.state.doc.resolve(t).after(f+1);let d=n.state.selection,p=pE(n,e,t),g=n.state.doc,y=g.slice(p.from,p.to),b,v;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(b=n.state.selection.to,v="end"):(b=n.state.selection.from,v="start"),n.input.lastKeyCode=null;let S=xE(y.content,p.doc.content,p.from,b,v);if(S&&n.input.domChangeCount++,(fo&&n.input.lastIOSEnter>Date.now()-225||Mr)&&o.some(se=>se.nodeType==1&&!gE.test(se.nodeName))&&(!S||S.endA>=S.endB)&&n.someProp("handleKeyDown",se=>se(n,Fi(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!S)if(i&&d instanceof ve&&!d.empty&&d.$head.sameParent(d.$anchor)&&!n.composing&&!(p.sel&&p.sel.anchor!=p.sel.head))S={start:d.from,endA:d.to,endB:d.to};else{if(p.sel){let se=fb(n,n.state.doc,p.sel);if(se&&!se.eq(n.state.selection)){let ze=n.state.tr.setSelection(se);l&&ze.setMeta("composition",l),n.dispatch(ze)}}return}n.state.selection.from<n.state.selection.to&&S.start==S.endB&&n.state.selection instanceof ve&&(S.start>n.state.selection.from&&S.start<=n.state.selection.from+2&&n.state.selection.from>=p.from?S.start=n.state.selection.from:S.endA<n.state.selection.to&&S.endA>=n.state.selection.to-2&&n.state.selection.to<=p.to&&(S.endB+=n.state.selection.to-S.endA,S.endA=n.state.selection.to)),sn&&di<=11&&S.endB==S.start+1&&S.endA==S.start&&S.start>p.from&&p.doc.textBetween(S.start-p.from-1,S.start-p.from+1)==" "&&(S.start--,S.endA--,S.endB--);let M=p.doc.resolveNoCache(S.start-p.from),C=p.doc.resolveNoCache(S.endB-p.from),_=g.resolve(S.start),$=M.sameParent(C)&&M.parent.inlineContent&&_.end()>=S.endA,U;if((fo&&n.input.lastIOSEnter>Date.now()-225&&(!$||o.some(se=>se.nodeName=="DIV"||se.nodeName=="P"))||!$&&M.pos<p.doc.content.size&&(!M.sameParent(C)||!M.parent.inlineContent)&&!/\S/.test(p.doc.textBetween(M.pos,C.pos,"",""))&&(U=we.findFrom(p.doc.resolve(M.pos+1),1,!0))&&U.head>M.pos)&&n.someProp("handleKeyDown",se=>se(n,Fi(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>S.start&&vE(g,S.start,S.endA,M,C)&&n.someProp("handleKeyDown",se=>se(n,Fi(8,"Backspace")))){Mr&&Lt&&n.domObserver.suppressSelectionUpdates();return}Lt&&S.endB==S.start&&(n.input.lastChromeDelete=Date.now()),Mr&&!$&&M.start()!=C.start()&&C.parentOffset==0&&M.depth==C.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==S.endA&&(S.endB-=2,C=p.doc.resolveNoCache(S.endB-p.from),setTimeout(()=>{n.someProp("handleKeyDown",function(se){return se(n,Fi(13,"Enter"))})},20));let J=S.start,I=S.endA,R,H,te;if($){if(M.pos==C.pos)sn&&di<=11&&M.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>kr(n),20)),R=n.state.tr.delete(J,I),H=g.resolve(S.start).marksAcross(g.resolve(S.endA));else if(S.endA==S.endB&&(te=bE(M.parent.content.cut(M.parentOffset,C.parentOffset),_.parent.content.cut(_.parentOffset,S.endA-_.start()))))R=n.state.tr,te.type=="add"?R.addMark(J,I,te.mark):R.removeMark(J,I,te.mark);else if(M.parent.child(M.index()).isText&&M.index()==C.index()-(C.textOffset?0:1)){let se=M.parent.textBetween(M.parentOffset,C.parentOffset);if(n.someProp("handleTextInput",ze=>ze(n,J,I,se)))return;R=n.state.tr.insertText(se,J,I)}}if(R||(R=n.state.tr.replace(J,I,p.doc.slice(S.start-p.from,S.endB-p.from))),p.sel){let se=fb(n,R.doc,p.sel);se&&!(Lt&&n.composing&&se.empty&&(S.start!=S.endB||n.input.lastChromeDelete<Date.now()-100)&&(se.head==J||se.head==R.mapping.map(I)-1)||sn&&se.empty&&se.head==J)&&R.setSelection(se)}H&&R.ensureMarks(H),l&&R.setMeta("composition",l),n.dispatch(R.scrollIntoView())}function fb(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Vh(n,e.resolve(t.anchor),e.resolve(t.head))}function bE(n,e){let t=n.firstChild.marks,i=e.firstChild.marks,o=t,l=i,u,f,d;for(let g=0;g<i.length;g++)o=i[g].removeFromSet(o);for(let g=0;g<t.length;g++)l=t[g].removeFromSet(l);if(o.length==1&&l.length==0)f=o[0],u="add",d=g=>g.mark(f.addToSet(g.marks));else if(o.length==0&&l.length==1)f=l[0],u="remove",d=g=>g.mark(f.removeFromSet(g.marks));else return null;let p=[];for(let g=0;g<e.childCount;g++)p.push(d(e.child(g)));if(Z.from(p).eq(n))return{mark:f,type:u}}function vE(n,e,t,i,o){if(t-e<=o.pos-i.pos||Id(i,!0,!1)<o.pos)return!1;let l=n.resolve(e);if(!i.parent.isTextblock){let f=l.nodeAfter;return f!=null&&t==e+f.nodeSize}if(l.parentOffset<l.parent.content.size||!l.parent.isTextblock)return!1;let u=n.resolve(Id(l,!0,!0));return!u.parent.isTextblock||u.pos>t||Id(u,!0,!1)<t?!1:i.parent.content.cut(i.parentOffset).eq(u.parent.content)}function Id(n,e,t){let i=n.depth,o=e?n.end():n.pos;for(;i>0&&(e||n.indexAfter(i)==n.node(i).childCount);)i--,o++,e=!1;if(t){let l=n.node(i).maybeChild(n.indexAfter(i));for(;l&&!l.isLeaf;)l=l.firstChild,o++}return o}function xE(n,e,t,i,o){let l=n.findDiffStart(e,t);if(l==null)return null;let{a:u,b:f}=n.findDiffEnd(e,t+n.size,t+e.size);if(o=="end"){let d=Math.max(0,l-Math.min(u,f));i-=u+d-l}if(u<l&&n.size<e.size){let d=i<=l&&i>=u?l-i:0;l-=d,l&&l<e.size&&db(e.textBetween(l-1,l+1))&&(l+=d?1:-1),f=l+(f-u),u=l}else if(f<l){let d=i<=l&&i>=f?l-i:0;l-=d,l&&l<n.size&&db(n.textBetween(l-1,l+1))&&(l+=d?1:-1),u=l+(u-f),f=l}return{start:l,endA:u,endB:f}}function db(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class SE{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Vk,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(yb),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=mb(this),pb(this),this.nodeViews=gb(this),this.docView=G0(this.state.doc,hb(this),Ud(this),this.dom,this),this.domObserver=new cE(this,(i,o,l,u)=>yE(this,i,o,l,u)),this.domObserver.start(),Uk(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&vh(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(yb),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let i in this._props)t[i]=this._props[i];t.state=this.state;for(let i in e)t[i]=e[i];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var i;let o=this.state,l=!1,u=!1;e.storedMarks&&this.composing&&(ax(this),u=!0),this.state=e;let f=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(f||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=gb(this);TE(v,this.nodeViews)&&(this.nodeViews=v,l=!0)}(f||t.handleDOMEvents!=this._props.handleDOMEvents)&&vh(this),this.editable=mb(this),pb(this);let d=Ud(this),p=hb(this),g=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",y=l||!this.docView.matchesNode(e.doc,p,d);(y||!e.selection.eq(o.selection))&&(u=!0);let b=g=="preserve"&&u&&this.dom.style.overflowAnchor==null&&ek(this);if(u){this.domObserver.stop();let v=y&&(sn||Lt)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&wE(o.selection,e.selection);if(y){let S=Lt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Wk(this)),(l||!this.docView.update(e.doc,p,d,this))&&(this.docView.updateOuterDeco(p),this.docView.destroy(),this.docView=G0(e.doc,p,d,this.dom,this)),S&&!this.trackWrites&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Mk(this))?kr(this,v):(Jv(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((i=this.dragging)===null||i===void 0)&&i.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),g=="reset"?this.dom.scrollTop=0:g=="to selection"?this.scrollToSelection():b&&tk(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof he){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&I0(this,t.getBoundingClientRect(),e)}else I0(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let i=this.directPlugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let i=this.state.plugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let i=this.pluginViews[t];i.update&&i.update(this,e)}}updateDraggedNode(e,t){let i=e.node,o=-1;if(this.state.doc.nodeAt(i.from)==i.node)o=i.from;else{let l=i.from+(this.state.doc.content.size-t.doc.content.size);(l>0&&this.state.doc.nodeAt(l))==i.node&&(o=l)}this.dragging=new cx(e.slice,e.move,o<0?void 0:he.create(this.state.doc,o))}someProp(e,t){let i=this._props&&this._props[e],o;if(i!=null&&(o=t?t(i):i))return o;for(let u=0;u<this.directPlugins.length;u++){let f=this.directPlugins[u].props[e];if(f!=null&&(o=t?t(f):f))return o}let l=this.state.plugins;if(l)for(let u=0;u<l.length;u++){let f=l[u].props[e];if(f!=null&&(o=t?t(f):f))return o}}hasFocus(){if(sn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&nk(this.dom),kr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return lk(this,e)}coordsAtPos(e,t=1){return Hv(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,i=-1){let o=this.docView.posFromDOM(e,t,i);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,t){return dk(this,t||this.state,e)}pasteHTML(e,t){return jl(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return jl(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Uh(this,e)}destroy(){this.docView&&(Ik(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ud(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,$C())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return $k(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Ft&&this.root.nodeType===11&&YC(this.dom.ownerDocument)==this.dom&&dE(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function hb(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let i in t)i=="class"?e.class+=" "+t[i]:i=="style"?e.style=(e.style?e.style+";":"")+t[i]:!e[i]&&i!="contenteditable"&&i!="nodeName"&&(e[i]=String(t[i]))}),e.translate||(e.translate="no"),[mn.node(0,n.state.doc.content.size,e)]}function pb(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:mn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function mb(n){return!n.someProp("editable",e=>e(n.state)===!1)}function wE(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function gb(n){let e=Object.create(null);function t(i){for(let o in i)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=i[o])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function TE(n,e){let t=0,i=0;for(let o in n){if(n[o]!=e[o])return!0;t++}for(let o in e)i++;return t!=i}function yb(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var mi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Vu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ME=typeof navigator<"u"&&/Mac/.test(navigator.platform),CE=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Rt=0;Rt<10;Rt++)mi[48+Rt]=mi[96+Rt]=String(Rt);for(var Rt=1;Rt<=24;Rt++)mi[Rt+111]="F"+Rt;for(var Rt=65;Rt<=90;Rt++)mi[Rt]=String.fromCharCode(Rt+32),Vu[Rt]=String.fromCharCode(Rt);for(var Hd in mi)Vu.hasOwnProperty(Hd)||(Vu[Hd]=mi[Hd]);function kE(n){var e=ME&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||CE&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Vu:mi)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const EE=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function AE(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let i,o,l,u;for(let f=0;f<e.length-1;f++){let d=e[f];if(/^(cmd|meta|m)$/i.test(d))u=!0;else if(/^a(lt)?$/i.test(d))i=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))l=!0;else if(/^mod$/i.test(d))EE?u=!0:o=!0;else throw new Error("Unrecognized modifier name: "+d)}return i&&(t="Alt-"+t),o&&(t="Ctrl-"+t),u&&(t="Meta-"+t),l&&(t="Shift-"+t),t}function OE(n){let e=Object.create(null);for(let t in n)e[AE(t)]=n[t];return e}function $d(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function NE(n){return new Jt({props:{handleKeyDown:mx(n)}})}function mx(n){let e=OE(n);return function(t,i){let o=kE(i),l,u=e[$d(o,i)];if(u&&u(t.state,t.dispatch,t))return!0;if(o.length==1&&o!=" "){if(i.shiftKey){let f=e[$d(o,i,!1)];if(f&&f(t.state,t.dispatch,t))return!0}if((i.shiftKey||i.altKey||i.metaKey||o.charCodeAt(0)>127)&&(l=mi[i.keyCode])&&l!=o){let f=e[$d(l,i)];if(f&&f(t.state,t.dispatch,t))return!0}}return!1}}const Fh=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function gx(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const yx=(n,e,t)=>{let i=gx(n,t);if(!i)return!1;let o=Gh(i);if(!o){let u=i.blockRange(),f=u&&go(u);return f==null?!1:(e&&e(n.tr.lift(u,f).scrollIntoView()),!0)}let l=o.nodeBefore;if(kx(n,o,e,-1))return!0;if(i.parent.content.size==0&&(ho(l,"end")||he.isSelectable(l)))for(let u=i.depth;;u--){let f=Fu(n.doc,i.before(u),i.after(u),re.empty);if(f&&f.slice.size<f.to-f.from){if(e){let d=n.tr.step(f);d.setSelection(ho(l,"end")?we.findFrom(d.doc.resolve(d.mapping.map(o.pos,-1)),-1):he.create(d.doc,o.pos-l.nodeSize)),e(d.scrollIntoView())}return!0}if(u==1||i.node(u-1).childCount>1)break}return l.isAtom&&o.depth==i.depth-1?(e&&e(n.tr.delete(o.pos-l.nodeSize,o.pos).scrollIntoView()),!0):!1},RE=(n,e,t)=>{let i=gx(n,t);if(!i)return!1;let o=Gh(i);return o?bx(n,o,e):!1},DE=(n,e,t)=>{let i=xx(n,t);if(!i)return!1;let o=Yh(i);return o?bx(n,o,e):!1};function bx(n,e,t){let i=e.nodeBefore,o=i,l=e.pos-1;for(;!o.isTextblock;l--){if(o.type.spec.isolating)return!1;let g=o.lastChild;if(!g)return!1;o=g}let u=e.nodeAfter,f=u,d=e.pos+1;for(;!f.isTextblock;d++){if(f.type.spec.isolating)return!1;let g=f.firstChild;if(!g)return!1;f=g}let p=Fu(n.doc,l,d,re.empty);if(!p||p.from!=l||p instanceof xt&&p.slice.size>=d-l)return!1;if(t){let g=n.tr.step(p);g.setSelection(ve.create(g.doc,l)),t(g.scrollIntoView())}return!0}function ho(n,e,t=!1){for(let i=n;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(t&&i.childCount!=1)return!1}return!1}const vx=(n,e,t)=>{let{$head:i,empty:o}=n.selection,l=i;if(!o)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):i.parentOffset>0)return!1;l=Gh(i)}let u=l&&l.nodeBefore;return!u||!he.isSelectable(u)?!1:(e&&e(n.tr.setSelection(he.create(n.doc,l.pos-u.nodeSize)).scrollIntoView()),!0)};function Gh(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function xx(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Sx=(n,e,t)=>{let i=xx(n,t);if(!i)return!1;let o=Yh(i);if(!o)return!1;let l=o.nodeAfter;if(kx(n,o,e,1))return!0;if(i.parent.content.size==0&&(ho(l,"start")||he.isSelectable(l))){let u=Fu(n.doc,i.before(),i.after(),re.empty);if(u&&u.slice.size<u.to-u.from){if(e){let f=n.tr.step(u);f.setSelection(ho(l,"start")?we.findFrom(f.doc.resolve(f.mapping.map(o.pos)),1):he.create(f.doc,f.mapping.map(o.pos))),e(f.scrollIntoView())}return!0}}return l.isAtom&&o.depth==i.depth-1?(e&&e(n.tr.delete(o.pos,o.pos+l.nodeSize).scrollIntoView()),!0):!1},wx=(n,e,t)=>{let{$head:i,empty:o}=n.selection,l=i;if(!o)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;l=Yh(i)}let u=l&&l.nodeAfter;return!u||!he.isSelectable(u)?!1:(e&&e(n.tr.setSelection(he.create(n.doc,l.pos)).scrollIntoView()),!0)};function Yh(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const zE=(n,e)=>{let t=n.selection,i=t instanceof he,o;if(i){if(t.node.isTextblock||!yi(n.doc,t.from))return!1;o=t.from}else if(o=Qu(n.doc,t.from,-1),o==null)return!1;if(e){let l=n.tr.join(o);i&&l.setSelection(he.create(l.doc,o-n.doc.resolve(o).nodeBefore.nodeSize)),e(l.scrollIntoView())}return!0},_E=(n,e)=>{let t=n.selection,i;if(t instanceof he){if(t.node.isTextblock||!yi(n.doc,t.to))return!1;i=t.to}else if(i=Qu(n.doc,t.to,1),i==null)return!1;return e&&e(n.tr.join(i).scrollIntoView()),!0},BE=(n,e)=>{let{$from:t,$to:i}=n.selection,o=t.blockRange(i),l=o&&go(o);return l==null?!1:(e&&e(n.tr.lift(o,l).scrollIntoView()),!0)},Tx=(n,e)=>{let{$head:t,$anchor:i}=n.selection;return!t.parent.type.spec.code||!t.sameParent(i)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Kh(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const jE=(n,e)=>{let{$head:t,$anchor:i}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(i))return!1;let o=t.node(-1),l=t.indexAfter(-1),u=Kh(o.contentMatchAt(l));if(!u||!o.canReplaceWith(l,l,u))return!1;if(e){let f=t.after(),d=n.tr.replaceWith(f,f,u.createAndFill());d.setSelection(we.near(d.doc.resolve(f),1)),e(d.scrollIntoView())}return!0},Mx=(n,e)=>{let t=n.selection,{$from:i,$to:o}=t;if(t instanceof gn||i.parent.inlineContent||o.parent.inlineContent)return!1;let l=Kh(o.parent.contentMatchAt(o.indexAfter()));if(!l||!l.isTextblock)return!1;if(e){let u=(!i.parentOffset&&o.index()<o.parent.childCount?i:o).pos,f=n.tr.insert(u,l.createAndFill());f.setSelection(ve.create(f.doc,u+1)),e(f.scrollIntoView())}return!0},Cx=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let l=t.before();if(Cr(n.doc,l))return e&&e(n.tr.split(l).scrollIntoView()),!0}let i=t.blockRange(),o=i&&go(i);return o==null?!1:(e&&e(n.tr.lift(i,o).scrollIntoView()),!0)};function LE(n){return(e,t)=>{let{$from:i,$to:o}=e.selection;if(e.selection instanceof he&&e.selection.node.isBlock)return!i.parentOffset||!Cr(e.doc,i.pos)?!1:(t&&t(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;let l=[],u,f,d=!1,p=!1;for(let v=i.depth;;v--)if(i.node(v).isBlock){d=i.end(v)==i.pos+(i.depth-v),p=i.start(v)==i.pos-(i.depth-v),f=Kh(i.node(v-1).contentMatchAt(i.indexAfter(v-1))),l.unshift(d&&f?{type:f}:null),u=v;break}else{if(v==1)return!1;l.unshift(null)}let g=e.tr;(e.selection instanceof ve||e.selection instanceof gn)&&g.deleteSelection();let y=g.mapping.map(i.pos),b=Cr(g.doc,y,l.length,l);if(b||(l[0]=f?{type:f}:null,b=Cr(g.doc,y,l.length,l)),!b)return!1;if(g.split(y,l.length,l),!d&&p&&i.node(u).type!=f){let v=g.mapping.map(i.before(u)),S=g.doc.resolve(v);f&&i.node(u-1).canReplaceWith(S.index(),S.index()+1,f)&&g.setNodeMarkup(g.mapping.map(i.before(u)),f)}return t&&t(g.scrollIntoView()),!0}}const qE=LE(),VE=(n,e)=>{let{$from:t,to:i}=n.selection,o,l=t.sharedDepth(i);return l==0?!1:(o=t.before(l),e&&e(n.tr.setSelection(he.create(n.doc,o))),!0)};function UE(n,e,t){let i=e.nodeBefore,o=e.nodeAfter,l=e.index();return!i||!o||!i.type.compatibleContent(o.type)?!1:!i.content.size&&e.parent.canReplace(l-1,l)?(t&&t(n.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(l,l+1)||!(o.isTextblock||yi(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function kx(n,e,t,i){let o=e.nodeBefore,l=e.nodeAfter,u,f,d=o.type.spec.isolating||l.type.spec.isolating;if(!d&&UE(n,e,t))return!0;let p=!d&&e.parent.canReplace(e.index(),e.index()+1);if(p&&(u=(f=o.contentMatchAt(o.childCount)).findWrapping(l.type))&&f.matchType(u[0]||l.type).validEnd){if(t){let v=e.pos+l.nodeSize,S=Z.empty;for(let _=u.length-1;_>=0;_--)S=Z.from(u[_].create(null,S));S=Z.from(o.copy(S));let M=n.tr.step(new St(e.pos-1,v,e.pos,v,new re(S,1,0),u.length,!0)),C=M.doc.resolve(v+2*u.length);C.nodeAfter&&C.nodeAfter.type==o.type&&yi(M.doc,C.pos)&&M.join(C.pos),t(M.scrollIntoView())}return!0}let g=l.type.spec.isolating||i>0&&d?null:we.findFrom(e,1),y=g&&g.$from.blockRange(g.$to),b=y&&go(y);if(b!=null&&b>=e.depth)return t&&t(n.tr.lift(y,b).scrollIntoView()),!0;if(p&&ho(l,"start",!0)&&ho(o,"end")){let v=o,S=[];for(;S.push(v),!v.isTextblock;)v=v.lastChild;let M=l,C=1;for(;!M.isTextblock;M=M.firstChild)C++;if(v.canReplace(v.childCount,v.childCount,M.content)){if(t){let _=Z.empty;for(let U=S.length-1;U>=0;U--)_=Z.from(S[U].copy(_));let $=n.tr.step(new St(e.pos-S.length,e.pos+l.nodeSize,e.pos+C,e.pos+l.nodeSize-C,new re(_,S.length,0),0,!0));t($.scrollIntoView())}return!0}}return!1}function Ex(n){return function(e,t){let i=e.selection,o=n<0?i.$from:i.$to,l=o.depth;for(;o.node(l).isInline;){if(!l)return!1;l--}return o.node(l).isTextblock?(t&&t(e.tr.setSelection(ve.create(e.doc,n<0?o.start(l):o.end(l)))),!0):!1}}const IE=Ex(-1),HE=Ex(1);function $E(n,e=null){return function(t,i){let{$from:o,$to:l}=t.selection,u=o.blockRange(l),f=u&&Bh(u,n,e);return f?(i&&i(t.tr.wrap(u,f).scrollIntoView()),!0):!1}}function bb(n,e=null){return function(t,i){let o=!1;for(let l=0;l<t.selection.ranges.length&&!o;l++){let{$from:{pos:u},$to:{pos:f}}=t.selection.ranges[l];t.doc.nodesBetween(u,f,(d,p)=>{if(o)return!1;if(!(!d.isTextblock||d.hasMarkup(n,e)))if(d.type==n)o=!0;else{let g=t.doc.resolve(p),y=g.index();o=g.parent.canReplaceWith(y,y+1,n)}})}if(!o)return!1;if(i){let l=t.tr;for(let u=0;u<t.selection.ranges.length;u++){let{$from:{pos:f},$to:{pos:d}}=t.selection.ranges[u];l.setBlockType(f,d,n,e)}i(l.scrollIntoView())}return!0}}function Jh(...n){return function(e,t,i){for(let o=0;o<n.length;o++)if(n[o](e,t,i))return!0;return!1}}Jh(Fh,yx,vx);Jh(Fh,Sx,wx);Jh(Tx,Mx,Cx,qE);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function PE(n,e=null){return function(t,i){let{$from:o,$to:l}=t.selection,u=o.blockRange(l);if(!u)return!1;let f=i?t.tr:null;return QE(f,u,n,e)?(i&&i(f.scrollIntoView()),!0):!1}}function QE(n,e,t,i=null){let o=!1,l=e,u=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=u.resolve(e.start-2);l=new Du(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Du(e.$from,u.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let f=Bh(l,t,i,e);return f?(n&&FE(n,e,f,o,t),!0):!1}function FE(n,e,t,i,o){let l=Z.empty;for(let g=t.length-1;g>=0;g--)l=Z.from(t[g].type.create(t[g].attrs,l));n.step(new St(e.start-(i?2:0),e.end,e.start,e.end,new re(l,0,0),t.length,!0));let u=0;for(let g=0;g<t.length;g++)t[g].type==o&&(u=g+1);let f=t.length-u,d=e.start+t.length-(i?2:0),p=e.parent;for(let g=e.startIndex,y=e.endIndex,b=!0;g<y;g++,b=!1)!b&&Cr(n.doc,d,f)&&(n.split(d,f),d+=2*f),d+=p.child(g).nodeSize;return n}function GE(n){return function(e,t){let{$from:i,$to:o}=e.selection,l=i.blockRange(o,u=>u.childCount>0&&u.firstChild.type==n);return l?t?i.node(l.depth-1).type==n?YE(e,t,n,l):KE(e,t,l):!0:!1}}function YE(n,e,t,i){let o=n.tr,l=i.end,u=i.$to.end(i.depth);l<u&&(o.step(new St(l-1,u,l,u,new re(Z.from(t.create(null,i.parent.copy())),1,0),1,!0)),i=new Du(o.doc.resolve(i.$from.pos),o.doc.resolve(u),i.depth));const f=go(i);if(f==null)return!1;o.lift(i,f);let d=o.doc.resolve(o.mapping.map(l,-1)-1);return yi(o.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&o.join(d.pos),e(o.scrollIntoView()),!0}function KE(n,e,t){let i=n.tr,o=t.parent;for(let v=t.end,S=t.endIndex-1,M=t.startIndex;S>M;S--)v-=o.child(S).nodeSize,i.delete(v-1,v+1);let l=i.doc.resolve(t.start),u=l.nodeAfter;if(i.mapping.map(t.end)!=t.start+l.nodeAfter.nodeSize)return!1;let f=t.startIndex==0,d=t.endIndex==o.childCount,p=l.node(-1),g=l.index(-1);if(!p.canReplace(g+(f?0:1),g+1,u.content.append(d?Z.empty:Z.from(o))))return!1;let y=l.pos,b=y+u.nodeSize;return i.step(new St(y-(f?1:0),b+(d?1:0),y+1,b-1,new re((f?Z.empty:Z.from(o.copy(Z.empty))).append(d?Z.empty:Z.from(o.copy(Z.empty))),f?0:1,d?0:1),f?0:1)),e(i.scrollIntoView()),!0}function JE(n){return function(e,t){let{$from:i,$to:o}=e.selection,l=i.blockRange(o,p=>p.childCount>0&&p.firstChild.type==n);if(!l)return!1;let u=l.startIndex;if(u==0)return!1;let f=l.parent,d=f.child(u-1);if(d.type!=n)return!1;if(t){let p=d.lastChild&&d.lastChild.type==f.type,g=Z.from(p?n.create():null),y=new re(Z.from(n.create(null,Z.from(f.type.create(null,g)))),p?3:1,0),b=l.start,v=l.end;t(e.tr.step(new St(b-(p?3:1),v,b,v,y,1,!0)).scrollIntoView())}return!0}}function Xu(n){const{state:e,transaction:t}=n;let{selection:i}=t,{doc:o}=t,{storedMarks:l}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return l},get selection(){return i},get doc(){return o},get tr(){return i=t.selection,o=t.doc,l=t.storedMarks,t}}}class Zu{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:i}=this,{view:o}=t,{tr:l}=i,u=this.buildProps(l);return Object.fromEntries(Object.entries(e).map(([f,d])=>[f,(...g)=>{const y=d(...g)(u);return!l.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(l),y}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:i,editor:o,state:l}=this,{view:u}=o,f=[],d=!!e,p=e||l.tr,g=()=>(!d&&t&&!p.getMeta("preventDispatch")&&!this.hasCustomState&&u.dispatch(p),f.every(b=>b===!0)),y={...Object.fromEntries(Object.entries(i).map(([b,v])=>[b,(...M)=>{const C=this.buildProps(p,t),_=v(...M)(C);return f.push(_),y}])),run:g};return y}createCan(e){const{rawCommands:t,state:i}=this,o=!1,l=e||i.tr,u=this.buildProps(l,o);return{...Object.fromEntries(Object.entries(t).map(([d,p])=>[d,(...g)=>p(...g)({...u,dispatch:void 0})])),chain:()=>this.createChain(l,o)}}buildProps(e,t=!0){const{rawCommands:i,editor:o,state:l}=this,{view:u}=o,f={tr:e,editor:o,view:u,state:Xu({state:l,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(i).map(([d,p])=>[d,(...g)=>p(...g)(f)]))}};return f}}class XE{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const i=this.callbacks[e];return i&&i.forEach(o=>o.apply(this,t)),this}off(e,t){const i=this.callbacks[e];return i&&(t?this.callbacks[e]=i.filter(o=>o!==t):delete this.callbacks[e]),this}once(e,t){const i=(...o)=>{this.off(e,i),t.apply(this,o)};return this.on(e,i)}removeAllListeners(){this.callbacks={}}}function ue(n,e,t){return n.config[e]===void 0&&n.parent?ue(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?ue(n.parent,e,t):null}):n.config[e]}function Wu(n){const e=n.filter(o=>o.type==="extension"),t=n.filter(o=>o.type==="node"),i=n.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:i}}function Ax(n){const e=[],{nodeExtensions:t,markExtensions:i}=Wu(n),o=[...t,...i],l={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(u=>{const f={name:u.name,options:u.options,storage:u.storage,extensions:o},d=ue(u,"addGlobalAttributes",f);if(!d)return;d().forEach(g=>{g.types.forEach(y=>{Object.entries(g.attributes).forEach(([b,v])=>{e.push({type:y,name:b,attribute:{...l,...v}})})})})}),o.forEach(u=>{const f={name:u.name,options:u.options,storage:u.storage},d=ue(u,"addAttributes",f);if(!d)return;const p=d();Object.entries(p).forEach(([g,y])=>{const b={...l,...y};typeof b?.default=="function"&&(b.default=b.default()),b?.isRequired&&b?.default===void 0&&delete b.default,e.push({type:u.name,name:g,attribute:b})})}),e}function Tt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function qt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const i={...e};return Object.entries(t).forEach(([o,l])=>{if(!i[o]){i[o]=l;return}if(o==="class"){const f=l?String(l).split(" "):[],d=i[o]?i[o].split(" "):[],p=f.filter(g=>!d.includes(g));i[o]=[...d,...p].join(" ")}else if(o==="style"){const f=l?l.split(";").map(g=>g.trim()).filter(Boolean):[],d=i[o]?i[o].split(";").map(g=>g.trim()).filter(Boolean):[],p=new Map;d.forEach(g=>{const[y,b]=g.split(":").map(v=>v.trim());p.set(y,b)}),f.forEach(g=>{const[y,b]=g.split(":").map(v=>v.trim());p.set(y,b)}),i[o]=Array.from(p.entries()).map(([g,y])=>`${g}: ${y}`).join("; ")}else i[o]=l}),i},{})}function xh(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,i)=>qt(t,i),{})}function Ox(n){return typeof n=="function"}function Me(n,e=void 0,...t){return Ox(n)?e?n.bind(e)(...t):n(...t):n}function ZE(n={}){return Object.keys(n).length===0&&n.constructor===Object}function WE(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function vb(n,e){return"style"in n?n:{...n,getAttrs:t=>{const i=n.getAttrs?n.getAttrs(t):n.attrs;if(i===!1)return!1;const o=e.reduce((l,u)=>{const f=u.attribute.parseHTML?u.attribute.parseHTML(t):WE(t.getAttribute(u.name));return f==null?l:{...l,[u.name]:f}},{});return{...i,...o}}}}function xb(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&ZE(t)?!1:t!=null))}function eA(n,e){var t;const i=Ax(n),{nodeExtensions:o,markExtensions:l}=Wu(n),u=(t=o.find(p=>ue(p,"topNode")))===null||t===void 0?void 0:t.name,f=Object.fromEntries(o.map(p=>{const g=i.filter(_=>_.type===p.name),y={name:p.name,options:p.options,storage:p.storage,editor:e},b=n.reduce((_,$)=>{const U=ue($,"extendNodeSchema",y);return{..._,...U?U(p):{}}},{}),v=xb({...b,content:Me(ue(p,"content",y)),marks:Me(ue(p,"marks",y)),group:Me(ue(p,"group",y)),inline:Me(ue(p,"inline",y)),atom:Me(ue(p,"atom",y)),selectable:Me(ue(p,"selectable",y)),draggable:Me(ue(p,"draggable",y)),code:Me(ue(p,"code",y)),whitespace:Me(ue(p,"whitespace",y)),linebreakReplacement:Me(ue(p,"linebreakReplacement",y)),defining:Me(ue(p,"defining",y)),isolating:Me(ue(p,"isolating",y)),attrs:Object.fromEntries(g.map(_=>{var $;return[_.name,{default:($=_?.attribute)===null||$===void 0?void 0:$.default}]}))}),S=Me(ue(p,"parseHTML",y));S&&(v.parseDOM=S.map(_=>vb(_,g)));const M=ue(p,"renderHTML",y);M&&(v.toDOM=_=>M({node:_,HTMLAttributes:xh(_,g)}));const C=ue(p,"renderText",y);return C&&(v.toText=C),[p.name,v]})),d=Object.fromEntries(l.map(p=>{const g=i.filter(C=>C.type===p.name),y={name:p.name,options:p.options,storage:p.storage,editor:e},b=n.reduce((C,_)=>{const $=ue(_,"extendMarkSchema",y);return{...C,...$?$(p):{}}},{}),v=xb({...b,inclusive:Me(ue(p,"inclusive",y)),excludes:Me(ue(p,"excludes",y)),group:Me(ue(p,"group",y)),spanning:Me(ue(p,"spanning",y)),code:Me(ue(p,"code",y)),attrs:Object.fromEntries(g.map(C=>{var _;return[C.name,{default:(_=C?.attribute)===null||_===void 0?void 0:_.default}]}))}),S=Me(ue(p,"parseHTML",y));S&&(v.parseDOM=S.map(C=>vb(C,g)));const M=ue(p,"renderHTML",y);return M&&(v.toDOM=C=>M({mark:C,HTMLAttributes:xh(C,g)})),[p.name,v]}));return new bv({topNode:u,nodes:f,marks:d})}function Pd(n,e){return e.nodes[n]||e.marks[n]||null}function Sb(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Xh(n,e){const t=as.fromSchema(e).serializeFragment(n),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(t),o.innerHTML}const tA=(n,e=500)=>{let t="";const i=n.parentOffset;return n.parent.nodesBetween(Math.max(0,i-e),i,(o,l,u,f)=>{var d,p;const g=((p=(d=o.type.spec).toText)===null||p===void 0?void 0:p.call(d,{node:o,pos:l,parent:u,index:f}))||o.textContent||"%leaf%";t+=o.isAtom&&!o.isText?g:g.slice(0,Math.max(0,i-l))}),t};function Zh(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class ec{constructor(e){this.find=e.find,this.handler=e.handler}}const nA=(n,e)=>{if(Zh(e))return e.exec(n);const t=e(n);if(!t)return null;const i=[t.text];return i.index=t.index,i.input=n,i.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(t.replaceWith)),i};function mu(n){var e;const{editor:t,from:i,to:o,text:l,rules:u,plugin:f}=n,{view:d}=t;if(d.composing)return!1;const p=d.state.doc.resolve(i);if(p.parent.type.spec.code||!((e=p.nodeBefore||p.nodeAfter)===null||e===void 0)&&e.marks.find(b=>b.type.spec.code))return!1;let g=!1;const y=tA(p)+l;return u.forEach(b=>{if(g)return;const v=nA(y,b.find);if(!v)return;const S=d.state.tr,M=Xu({state:d.state,transaction:S}),C={from:i-(v[0].length-l.length),to:o},{commands:_,chain:$,can:U}=new Zu({editor:t,state:M});b.handler({state:M,range:C,match:v,commands:_,chain:$,can:U})===null||!S.steps.length||(S.setMeta(f,{transform:S,from:i,to:o,text:l}),d.dispatch(S),g=!0)}),g}function rA(n){const{editor:e,rules:t}=n,i=new Jt({state:{init(){return null},apply(o,l,u){const f=o.getMeta(i);if(f)return f;const d=o.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:g}=d;typeof g=="string"?g=g:g=Xh(Z.from(g),u.schema);const{from:y}=d,b=y+g.length;mu({editor:e,from:y,to:b,text:g,rules:t,plugin:i})}),o.selectionSet||o.docChanged?null:l}},props:{handleTextInput(o,l,u,f){return mu({editor:e,from:l,to:u,text:f,rules:t,plugin:i})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:l}=o.state.selection;l&&mu({editor:e,from:l.pos,to:l.pos,text:"",rules:t,plugin:i})}),!1)},handleKeyDown(o,l){if(l.key!=="Enter")return!1;const{$cursor:u}=o.state.selection;return u?mu({editor:e,from:u.pos,to:u.pos,text:`
`,rules:t,plugin:i}):!1}},isInputRules:!0});return i}function iA(n){return Object.prototype.toString.call(n).slice(8,-1)}function gu(n){return iA(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function tc(n,e){const t={...n};return gu(n)&&gu(e)&&Object.keys(e).forEach(i=>{gu(e[i])&&gu(n[i])?t[i]=tc(n[i],e[i]):t[i]=e[i]}),t}class gi{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Me(ue(this,"addOptions",{name:this.name}))),this.storage=Me(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new gi(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>tc(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new gi(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Me(ue(t,"addOptions",{name:t.name})),t.storage=Me(ue(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:i}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const u=o.marks();if(!!!u.find(p=>p?.type.name===t.name))return!1;const d=u.find(p=>p?.type.name===t.name);return d&&i.removeStoredMark(d),i.insertText(" ",o.pos),e.view.dispatch(i),!0}return!1}}function sA(n){return typeof n=="number"}class oA{constructor(e){this.find=e.find,this.handler=e.handler}}const lA=(n,e,t)=>{if(Zh(e))return[...n.matchAll(e)];const i=e(n,t);return i?i.map(o=>{const l=[o.text];return l.index=o.index,l.input=n,l.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),l.push(o.replaceWith)),l}):[]};function aA(n){const{editor:e,state:t,from:i,to:o,rule:l,pasteEvent:u,dropEvent:f}=n,{commands:d,chain:p,can:g}=new Zu({editor:e,state:t}),y=[];return t.doc.nodesBetween(i,o,(v,S)=>{if(!v.isTextblock||v.type.spec.code)return;const M=Math.max(i,S),C=Math.min(o,S+v.content.size),_=v.textBetween(M-S,C-S,void 0,"");lA(_,l.find,u).forEach(U=>{if(U.index===void 0)return;const J=M+U.index+1,I=J+U[0].length,R={from:t.tr.mapping.map(J),to:t.tr.mapping.map(I)},H=l.handler({state:t,range:R,match:U,commands:d,chain:p,can:g,pasteEvent:u,dropEvent:f});y.push(H)})}),y.every(v=>v!==null)}let yu=null;const uA=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function cA(n){const{editor:e,rules:t}=n;let i=null,o=!1,l=!1,u=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,f;try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}const d=({state:g,from:y,to:b,rule:v,pasteEvt:S})=>{const M=g.tr,C=Xu({state:g,transaction:M});if(!(!aA({editor:e,state:C,from:Math.max(y-1,0),to:b.b-1,rule:v,pasteEvent:S,dropEvent:f})||!M.steps.length)){try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}return u=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,M}};return t.map(g=>new Jt({view(y){const b=S=>{var M;i=!((M=y.dom.parentElement)===null||M===void 0)&&M.contains(S.target)?y.dom.parentElement:null,i&&(yu=e)},v=()=>{yu&&(yu=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(y,b)=>{if(l=i===y.dom.parentElement,f=b,!l){const v=yu;v&&setTimeout(()=>{const S=v.state.selection;S&&v.commands.deleteRange({from:S.from,to:S.to})},10)}return!1},paste:(y,b)=>{var v;const S=(v=b.clipboardData)===null||v===void 0?void 0:v.getData("text/html");return u=b,o=!!S?.includes("data-pm-slice"),!1}}},appendTransaction:(y,b,v)=>{const S=y[0],M=S.getMeta("uiEvent")==="paste"&&!o,C=S.getMeta("uiEvent")==="drop"&&!l,_=S.getMeta("applyPasteRules"),$=!!_;if(!M&&!C&&!$)return;if($){let{text:I}=_;typeof I=="string"?I=I:I=Xh(Z.from(I),v.schema);const{from:R}=_,H=R+I.length,te=uA(I);return d({rule:g,state:v,from:R,to:{b:H},pasteEvt:te})}const U=b.doc.content.findDiffStart(v.doc.content),J=b.doc.content.findDiffEnd(v.doc.content);if(!(!sA(U)||!J||U===J.b))return d({rule:g,state:v,from:U,to:J,pasteEvt:u})}}))}function fA(n){const e=n.filter((t,i)=>n.indexOf(t)!==i);return Array.from(new Set(e))}class so{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=so.resolve(e),this.schema=eA(this.extensions,t),this.setupExtensions()}static resolve(e){const t=so.sort(so.flatten(e)),i=fA(t.map(o=>o.name));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const i={name:t.name,options:t.options,storage:t.storage},o=ue(t,"addExtensions",i);return o?[t,...this.flatten(o())]:t}).flat(10)}static sort(e){return e.sort((i,o)=>{const l=ue(i,"priority")||100,u=ue(o,"priority")||100;return l>u?-1:l<u?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const i={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Pd(t.name,this.schema)},o=ue(t,"addCommands",i);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,t=so.sort([...this.extensions].reverse()),i=[],o=[],l=t.map(u=>{const f={name:u.name,options:u.options,storage:u.storage,editor:e,type:Pd(u.name,this.schema)},d=[],p=ue(u,"addKeyboardShortcuts",f);let g={};if(u.type==="mark"&&ue(u,"exitable",f)&&(g.ArrowRight=()=>gi.handleExit({editor:e,mark:u})),p){const M=Object.fromEntries(Object.entries(p()).map(([C,_])=>[C,()=>_({editor:e})]));g={...g,...M}}const y=NE(g);d.push(y);const b=ue(u,"addInputRules",f);Sb(u,e.options.enableInputRules)&&b&&i.push(...b());const v=ue(u,"addPasteRules",f);Sb(u,e.options.enablePasteRules)&&v&&o.push(...v());const S=ue(u,"addProseMirrorPlugins",f);if(S){const M=S();d.push(...M)}return d}).flat();return[rA({editor:e,rules:i}),...cA({editor:e,rules:o}),...l]}get attributes(){return Ax(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Wu(this.extensions);return Object.fromEntries(t.filter(i=>!!ue(i,"addNodeView")).map(i=>{const o=this.attributes.filter(d=>d.type===i.name),l={name:i.name,options:i.options,storage:i.storage,editor:e,type:Tt(i.name,this.schema)},u=ue(i,"addNodeView",l);if(!u)return[];const f=(d,p,g,y,b)=>{const v=xh(d,o);return u()({node:d,view:p,getPos:g,decorations:y,innerDecorations:b,editor:e,extension:i,HTMLAttributes:v})};return[i.name,f]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const i={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Pd(e.name,this.schema)};e.type==="mark"&&(!((t=Me(ue(e,"keepOnSplit",i)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const o=ue(e,"onBeforeCreate",i),l=ue(e,"onCreate",i),u=ue(e,"onUpdate",i),f=ue(e,"onSelectionUpdate",i),d=ue(e,"onTransaction",i),p=ue(e,"onFocus",i),g=ue(e,"onBlur",i),y=ue(e,"onDestroy",i);o&&this.editor.on("beforeCreate",o),l&&this.editor.on("create",l),u&&this.editor.on("update",u),f&&this.editor.on("selectionUpdate",f),d&&this.editor.on("transaction",d),p&&this.editor.on("focus",p),g&&this.editor.on("blur",g),y&&this.editor.on("destroy",y)})}}class Vt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Me(ue(this,"addOptions",{name:this.name}))),this.storage=Me(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Vt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>tc(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Vt({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Me(ue(t,"addOptions",{name:t.name})),t.storage=Me(ue(t,"addStorage",{name:t.name,options:t.options})),t}}function Nx(n,e,t){const{from:i,to:o}=e,{blockSeparator:l=`

`,textSerializers:u={}}=t||{};let f="";return n.nodesBetween(i,o,(d,p,g,y)=>{var b;d.isBlock&&p>i&&(f+=l);const v=u?.[d.type.name];if(v)return g&&(f+=v({node:d,pos:p,parent:g,index:y,range:e})),!1;d.isText&&(f+=(b=d?.text)===null||b===void 0?void 0:b.slice(Math.max(i,p)-p,o-p))}),f}function Rx(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const dA=Vt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Jt({key:new Hn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:i,selection:o}=e,{ranges:l}=o,u=Math.min(...l.map(g=>g.$from.pos)),f=Math.max(...l.map(g=>g.$to.pos)),d=Rx(t);return Nx(i,{from:u,to:f},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),hA=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window?.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),pA=(n=!1)=>({commands:e})=>e.setContent("",n),mA=()=>({state:n,tr:e,dispatch:t})=>{const{selection:i}=e,{ranges:o}=i;return t&&o.forEach(({$from:l,$to:u})=>{n.doc.nodesBetween(l.pos,u.pos,(f,d)=>{if(f.type.isText)return;const{doc:p,mapping:g}=e,y=p.resolve(g.map(d)),b=p.resolve(g.map(d+f.nodeSize)),v=y.blockRange(b);if(!v)return;const S=go(v);if(f.type.isTextblock){const{defaultType:M}=y.parent.contentMatchAt(y.index());e.setNodeMarkup(v.start,M)}(S||S===0)&&e.lift(v,S)})}),!0},gA=n=>e=>n(e),yA=()=>({state:n,dispatch:e})=>Mx(n,e),bA=(n,e)=>({editor:t,tr:i})=>{const{state:o}=t,l=o.doc.slice(n.from,n.to);i.deleteRange(n.from,n.to);const u=i.mapping.map(e);return i.insert(u,l.content),i.setSelection(new ve(i.doc.resolve(u-1))),!0},vA=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,i=t.$anchor.node();if(i.content.size>0)return!1;const o=n.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===i.type){if(e){const f=o.before(l),d=o.after(l);n.delete(f,d).scrollIntoView()}return!0}return!1},xA=n=>({tr:e,state:t,dispatch:i})=>{const o=Tt(n,t.schema),l=e.selection.$anchor;for(let u=l.depth;u>0;u-=1)if(l.node(u).type===o){if(i){const d=l.before(u),p=l.after(u);e.delete(d,p).scrollIntoView()}return!0}return!1},SA=n=>({tr:e,dispatch:t})=>{const{from:i,to:o}=n;return t&&e.delete(i,o),!0},wA=()=>({state:n,dispatch:e})=>Fh(n,e),TA=()=>({commands:n})=>n.keyboardShortcut("Enter"),MA=()=>({state:n,dispatch:e})=>jE(n,e);function Uu(n,e,t={strict:!0}){const i=Object.keys(e);return i.length?i.every(o=>t.strict?e[o]===n[o]:Zh(e[o])?e[o].test(n[o]):e[o]===n[o]):!0}function Dx(n,e,t={}){return n.find(i=>i.type===e&&Uu(Object.fromEntries(Object.keys(t).map(o=>[o,i.attrs[o]])),t))}function wb(n,e,t={}){return!!Dx(n,e,t)}function Wh(n,e,t){var i;if(!n||!e)return;let o=n.parent.childAfter(n.parentOffset);if((!o.node||!o.node.marks.some(g=>g.type===e))&&(o=n.parent.childBefore(n.parentOffset)),!o.node||!o.node.marks.some(g=>g.type===e)||(t=t||((i=o.node.marks[0])===null||i===void 0?void 0:i.attrs),!Dx([...o.node.marks],e,t)))return;let u=o.index,f=n.start()+o.offset,d=u+1,p=f+o.node.nodeSize;for(;u>0&&wb([...n.parent.child(u-1).marks],e,t);)u-=1,f-=n.parent.child(u).nodeSize;for(;d<n.parent.childCount&&wb([...n.parent.child(d).marks],e,t);)p+=n.parent.child(d).nodeSize,d+=1;return{from:f,to:p}}function vi(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const CA=(n,e={})=>({tr:t,state:i,dispatch:o})=>{const l=vi(n,i.schema),{doc:u,selection:f}=t,{$from:d,from:p,to:g}=f;if(o){const y=Wh(d,l,e);if(y&&y.from<=p&&y.to>=g){const b=ve.create(u,y.from,y.to);t.setSelection(b)}}return!0},kA=n=>e=>{const t=typeof n=="function"?n(e):n;for(let i=0;i<t.length;i+=1)if(t[i](e))return!0;return!1};function zx(n){return n instanceof ve}function Ji(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function _x(n,e=null){if(!e)return null;const t=we.atStart(n),i=we.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return i;const o=t.from,l=i.to;return e==="all"?ve.create(n,Ji(0,o,l),Ji(n.content.size,o,l)):ve.create(n,Ji(e,o,l),Ji(e,o,l))}function EA(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function ep(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const AA=(n=null,e={})=>({editor:t,view:i,tr:o,dispatch:l})=>{e={scrollIntoView:!0,...e};const u=()=>{(ep()||EA())&&i.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(i.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};if(i.hasFocus()&&n===null||n===!1)return!0;if(l&&n===null&&!zx(t.state.selection))return u(),!0;const f=_x(o.doc,n)||t.state.selection,d=t.state.selection.eq(f);return l&&(d||o.setSelection(f),d&&o.storedMarks&&o.setStoredMarks(o.storedMarks),u()),!0},OA=(n,e)=>t=>n.every((i,o)=>e(i,{...t,index:o})),NA=(n,e)=>({tr:t,commands:i})=>i.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Bx=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const i=e[t];i.nodeType===3&&i.nodeValue&&/^(\n\s\s|\n)$/.test(i.nodeValue)?n.removeChild(i):i.nodeType===1&&Bx(i)}return n};function bu(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Bx(t)}function Iu(n,e,t){if(n instanceof ci||n instanceof Z)return n;t={slice:!0,parseOptions:{},...t};const i=typeof n=="object"&&n!==null,o=typeof n=="string";if(i)try{if(Array.isArray(n)&&n.length>0)return Z.fromArray(n.map(f=>e.nodeFromJSON(f)));const u=e.nodeFromJSON(n);return t.errorOnInvalidContent&&u.check(),u}catch(l){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:l});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",l),Iu("",e,t)}if(o){if(t.errorOnInvalidContent){let u=!1,f="";const d=new bv({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:p=>(u=!0,f=typeof p=="string"?p:p.outerHTML,null)}]}})});if(t.slice?fi.fromSchema(d).parseSlice(bu(n),t.parseOptions):fi.fromSchema(d).parse(bu(n),t.parseOptions),t.errorOnInvalidContent&&u)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${f}`)})}const l=fi.fromSchema(e);return t.slice?l.parseSlice(bu(n),t.parseOptions).content:l.parse(bu(n),t.parseOptions)}return Iu("",e,t)}function RA(n,e,t){const i=n.steps.length-1;if(i<e)return;const o=n.steps[i];if(!(o instanceof xt||o instanceof St))return;const l=n.mapping.maps[i];let u=0;l.forEach((f,d,p,g)=>{u===0&&(u=g)}),n.setSelection(we.near(n.doc.resolve(u),t))}const DA=n=>!("type"in n),zA=(n,e,t)=>({tr:i,dispatch:o,editor:l})=>{var u;if(o){t={parseOptions:l.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let f;try{f=Iu(e,l.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(u=t.errorOnInvalidContent)!==null&&u!==void 0?u:l.options.enableContentCheck})}catch(S){return l.emit("contentError",{editor:l,error:S,disableCollaboration:()=>{l.storage.collaboration&&(l.storage.collaboration.isDisabled=!0)}}),!1}let{from:d,to:p}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},g=!0,y=!0;if((DA(f)?f:[f]).forEach(S=>{S.check(),g=g?S.isText&&S.marks.length===0:!1,y=y?S.isBlock:!1}),d===p&&y){const{parent:S}=i.doc.resolve(d);S.isTextblock&&!S.type.spec.code&&!S.childCount&&(d-=1,p+=1)}let v;if(g){if(Array.isArray(e))v=e.map(S=>S.text||"").join("");else if(e instanceof Z){let S="";e.forEach(M=>{M.text&&(S+=M.text)}),v=S}else typeof e=="object"&&e&&e.text?v=e.text:v=e;i.insertText(v,d,p)}else v=f,i.replaceWith(d,p,v);t.updateSelection&&RA(i,i.steps.length-1,-1),t.applyInputRules&&i.setMeta("applyInputRules",{from:d,text:v}),t.applyPasteRules&&i.setMeta("applyPasteRules",{from:d,text:v})}return!0},_A=()=>({state:n,dispatch:e})=>zE(n,e),BA=()=>({state:n,dispatch:e})=>_E(n,e),jA=()=>({state:n,dispatch:e})=>yx(n,e),LA=()=>({state:n,dispatch:e})=>Sx(n,e),qA=()=>({state:n,dispatch:e,tr:t})=>{try{const i=Qu(n.doc,n.selection.$from.pos,-1);return i==null?!1:(t.join(i,2),e&&e(t),!0)}catch{return!1}},VA=()=>({state:n,dispatch:e,tr:t})=>{try{const i=Qu(n.doc,n.selection.$from.pos,1);return i==null?!1:(t.join(i,2),e&&e(t),!0)}catch{return!1}},UA=()=>({state:n,dispatch:e})=>RE(n,e),IA=()=>({state:n,dispatch:e})=>DE(n,e);function jx(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function HA(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let i,o,l,u;for(let f=0;f<e.length-1;f+=1){const d=e[f];if(/^(cmd|meta|m)$/i.test(d))u=!0;else if(/^a(lt)?$/i.test(d))i=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))l=!0;else if(/^mod$/i.test(d))ep()||jx()?u=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return i&&(t=`Alt-${t}`),o&&(t=`Ctrl-${t}`),u&&(t=`Meta-${t}`),l&&(t=`Shift-${t}`),t}const $A=n=>({editor:e,view:t,tr:i,dispatch:o})=>{const l=HA(n).split(/-(?!$)/),u=l.find(p=>!["Alt","Ctrl","Meta","Shift"].includes(p)),f=new KeyboardEvent("keydown",{key:u==="Space"?" ":u,altKey:l.includes("Alt"),ctrlKey:l.includes("Ctrl"),metaKey:l.includes("Meta"),shiftKey:l.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",p=>p(t,f))});return d?.steps.forEach(p=>{const g=p.map(i.mapping);g&&o&&i.maybeStep(g)}),!0};function ql(n,e,t={}){const{from:i,to:o,empty:l}=n.selection,u=e?Tt(e,n.schema):null,f=[];n.doc.nodesBetween(i,o,(y,b)=>{if(y.isText)return;const v=Math.max(i,b),S=Math.min(o,b+y.nodeSize);f.push({node:y,from:v,to:S})});const d=o-i,p=f.filter(y=>u?u.name===y.node.type.name:!0).filter(y=>Uu(y.node.attrs,t,{strict:!1}));return l?!!p.length:p.reduce((y,b)=>y+b.to-b.from,0)>=d}const PA=(n,e={})=>({state:t,dispatch:i})=>{const o=Tt(n,t.schema);return ql(t,o,e)?BE(t,i):!1},QA=()=>({state:n,dispatch:e})=>Cx(n,e),FA=n=>({state:e,dispatch:t})=>{const i=Tt(n,e.schema);return GE(i)(e,t)},GA=()=>({state:n,dispatch:e})=>Tx(n,e);function nc(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Tb(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((i,o)=>(t.includes(o)||(i[o]=n[o]),i),{})}const YA=(n,e)=>({tr:t,state:i,dispatch:o})=>{let l=null,u=null;const f=nc(typeof n=="string"?n:n.name,i.schema);return f?(f==="node"&&(l=Tt(n,i.schema)),f==="mark"&&(u=vi(n,i.schema)),o&&t.selection.ranges.forEach(d=>{i.doc.nodesBetween(d.$from.pos,d.$to.pos,(p,g)=>{l&&l===p.type&&t.setNodeMarkup(g,void 0,Tb(p.attrs,e)),u&&p.marks.length&&p.marks.forEach(y=>{u===y.type&&t.addMark(g,g+p.nodeSize,u.create(Tb(y.attrs,e)))})})}),!0):!1},KA=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),JA=()=>({tr:n,dispatch:e})=>{if(e){const t=new gn(n.doc);n.setSelection(t)}return!0},XA=()=>({state:n,dispatch:e})=>vx(n,e),ZA=()=>({state:n,dispatch:e})=>wx(n,e),WA=()=>({state:n,dispatch:e})=>VE(n,e),eO=()=>({state:n,dispatch:e})=>HE(n,e),tO=()=>({state:n,dispatch:e})=>IE(n,e);function Sh(n,e,t={},i={}){return Iu(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:i.errorOnInvalidContent})}const nO=(n,e=!1,t={},i={})=>({editor:o,tr:l,dispatch:u,commands:f})=>{var d,p;const{doc:g}=l;if(t.preserveWhitespace!=="full"){const y=Sh(n,o.schema,t,{errorOnInvalidContent:(d=i.errorOnInvalidContent)!==null&&d!==void 0?d:o.options.enableContentCheck});return u&&l.replaceWith(0,g.content.size,y).setMeta("preventUpdate",!e),!0}return u&&l.setMeta("preventUpdate",!e),f.insertContentAt({from:0,to:g.content.size},n,{parseOptions:t,errorOnInvalidContent:(p=i.errorOnInvalidContent)!==null&&p!==void 0?p:o.options.enableContentCheck})};function Lx(n,e){const t=vi(e,n.schema),{from:i,to:o,empty:l}=n.selection,u=[];l?(n.storedMarks&&u.push(...n.storedMarks),u.push(...n.selection.$head.marks())):n.doc.nodesBetween(i,o,d=>{u.push(...d.marks)});const f=u.find(d=>d.type.name===t.name);return f?{...f.attrs}:{}}function rO(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function iO(n,e){for(let t=n.depth;t>0;t-=1){const i=n.node(t);if(e(i))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:i}}}function tp(n){return e=>iO(e.$from,n)}function sO(n,e){const t={from:0,to:n.content.size};return Nx(n,t,e)}function oO(n,e){const t=Tt(e,n.schema),{from:i,to:o}=n.selection,l=[];n.doc.nodesBetween(i,o,f=>{l.push(f)});const u=l.reverse().find(f=>f.type.name===t.name);return u?{...u.attrs}:{}}function lO(n,e){const t=nc(typeof e=="string"?e:e.name,n.schema);return t==="node"?oO(n,e):t==="mark"?Lx(n,e):{}}function qx(n,e,t){const i=[];return n===e?t.resolve(n).marks().forEach(o=>{const l=t.resolve(n),u=Wh(l,o.type);u&&i.push({mark:o,...u})}):t.nodesBetween(n,e,(o,l)=>{!o||o?.nodeSize===void 0||i.push(...o.marks.map(u=>({from:l,to:l+o.nodeSize,mark:u})))}),i}function Mu(n,e,t){return Object.fromEntries(Object.entries(t).filter(([i])=>{const o=n.find(l=>l.type===e&&l.name===i);return o?o.attribute.keepOnSplit:!1}))}function wh(n,e,t={}){const{empty:i,ranges:o}=n.selection,l=e?vi(e,n.schema):null;if(i)return!!(n.storedMarks||n.selection.$from.marks()).filter(y=>l?l.name===y.type.name:!0).find(y=>Uu(y.attrs,t,{strict:!1}));let u=0;const f=[];if(o.forEach(({$from:y,$to:b})=>{const v=y.pos,S=b.pos;n.doc.nodesBetween(v,S,(M,C)=>{if(!M.isText&&!M.marks.length)return;const _=Math.max(v,C),$=Math.min(S,C+M.nodeSize),U=$-_;u+=U,f.push(...M.marks.map(J=>({mark:J,from:_,to:$})))})}),u===0)return!1;const d=f.filter(y=>l?l.name===y.mark.type.name:!0).filter(y=>Uu(y.mark.attrs,t,{strict:!1})).reduce((y,b)=>y+b.to-b.from,0),p=f.filter(y=>l?y.mark.type!==l&&y.mark.type.excludes(l):!0).reduce((y,b)=>y+b.to-b.from,0);return(d>0?d+p:d)>=u}function aO(n,e,t={}){if(!e)return ql(n,null,t)||wh(n,null,t);const i=nc(e,n.schema);return i==="node"?ql(n,e,t):i==="mark"?wh(n,e,t):!1}function Mb(n,e){const{nodeExtensions:t}=Wu(e),i=t.find(u=>u.name===n);if(!i)return!1;const o={name:i.name,options:i.options,storage:i.storage},l=Me(ue(i,"group",o));return typeof l!="string"?!1:l.split(" ").includes("list")}function rc(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var i;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((i=n.text)!==null&&i!==void 0?i:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let o=!0;return n.content.forEach(l=>{o!==!1&&(rc(l,{ignoreWhitespace:t,checkChildren:e})||(o=!1))}),o}return!1}function uO(n){return n instanceof he}function cO(n,e,t){var i;const{selection:o}=e;let l=null;if(zx(o)&&(l=o.$cursor),l){const f=(i=n.storedMarks)!==null&&i!==void 0?i:l.marks();return!!t.isInSet(f)||!f.some(d=>d.type.excludes(t))}const{ranges:u}=o;return u.some(({$from:f,$to:d})=>{let p=f.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(f.pos,d.pos,(g,y,b)=>{if(p)return!1;if(g.isInline){const v=!b||b.type.allowsMarkType(t),S=!!t.isInSet(g.marks)||!g.marks.some(M=>M.type.excludes(t));p=v&&S}return!p}),p})}const fO=(n,e={})=>({tr:t,state:i,dispatch:o})=>{const{selection:l}=t,{empty:u,ranges:f}=l,d=vi(n,i.schema);if(o)if(u){const p=Lx(i,d);t.addStoredMark(d.create({...p,...e}))}else f.forEach(p=>{const g=p.$from.pos,y=p.$to.pos;i.doc.nodesBetween(g,y,(b,v)=>{const S=Math.max(v,g),M=Math.min(v+b.nodeSize,y);b.marks.find(_=>_.type===d)?b.marks.forEach(_=>{d===_.type&&t.addMark(S,M,d.create({..._.attrs,...e}))}):t.addMark(S,M,d.create(e))})});return cO(i,t,d)},dO=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),hO=(n,e={})=>({state:t,dispatch:i,chain:o})=>{const l=Tt(n,t.schema);let u;return t.selection.$anchor.sameParent(t.selection.$head)&&(u=t.selection.$anchor.parent.attrs),l.isTextblock?o().command(({commands:f})=>bb(l,{...u,...e})(t)?!0:f.clearNodes()).command(({state:f})=>bb(l,{...u,...e})(f,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},pO=n=>({tr:e,dispatch:t})=>{if(t){const{doc:i}=e,o=Ji(n,0,i.content.size),l=he.create(i,o);e.setSelection(l)}return!0},mO=n=>({tr:e,dispatch:t})=>{if(t){const{doc:i}=e,{from:o,to:l}=typeof n=="number"?{from:n,to:n}:n,u=ve.atStart(i).from,f=ve.atEnd(i).to,d=Ji(o,u,f),p=Ji(l,u,f),g=ve.create(i,d,p);e.setSelection(g)}return!0},gO=n=>({state:e,dispatch:t})=>{const i=Tt(n,e.schema);return JE(i)(e,t)};function Cb(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const i=t.filter(o=>e?.includes(o.type.name));n.tr.ensureMarks(i)}}const yO=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:i,editor:o})=>{const{selection:l,doc:u}=e,{$from:f,$to:d}=l,p=o.extensionManager.attributes,g=Mu(p,f.node().type.name,f.node().attrs);if(l instanceof he&&l.node.isBlock)return!f.parentOffset||!Cr(u,f.pos)?!1:(i&&(n&&Cb(t,o.extensionManager.splittableMarks),e.split(f.pos).scrollIntoView()),!0);if(!f.parent.isBlock)return!1;const y=d.parentOffset===d.parent.content.size,b=f.depth===0?void 0:rO(f.node(-1).contentMatchAt(f.indexAfter(-1)));let v=y&&b?[{type:b,attrs:g}]:void 0,S=Cr(e.doc,e.mapping.map(f.pos),1,v);if(!v&&!S&&Cr(e.doc,e.mapping.map(f.pos),1,b?[{type:b}]:void 0)&&(S=!0,v=b?[{type:b,attrs:g}]:void 0),i){if(S&&(l instanceof ve&&e.deleteSelection(),e.split(e.mapping.map(f.pos),1,v),b&&!y&&!f.parentOffset&&f.parent.type!==b)){const M=e.mapping.map(f.before()),C=e.doc.resolve(M);f.node(-1).canReplaceWith(C.index(),C.index()+1,b)&&e.setNodeMarkup(e.mapping.map(f.before()),b)}n&&Cb(t,o.extensionManager.splittableMarks),e.scrollIntoView()}return S},bO=(n,e={})=>({tr:t,state:i,dispatch:o,editor:l})=>{var u;const f=Tt(n,i.schema),{$from:d,$to:p}=i.selection,g=i.selection.node;if(g&&g.isBlock||d.depth<2||!d.sameParent(p))return!1;const y=d.node(-1);if(y.type!==f)return!1;const b=l.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==f||d.index(-2)!==d.node(-2).childCount-1)return!1;if(o){let _=Z.empty;const $=d.index(-1)?1:d.index(-2)?2:3;for(let te=d.depth-$;te>=d.depth-3;te-=1)_=Z.from(d.node(te).copy(_));const U=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,J={...Mu(b,d.node().type.name,d.node().attrs),...e},I=((u=f.contentMatch.defaultType)===null||u===void 0?void 0:u.createAndFill(J))||void 0;_=_.append(Z.from(f.createAndFill(null,I)||void 0));const R=d.before(d.depth-($-1));t.replace(R,d.after(-U),new re(_,4-$,0));let H=-1;t.doc.nodesBetween(R,t.doc.content.size,(te,se)=>{if(H>-1)return!1;te.isTextblock&&te.content.size===0&&(H=se+1)}),H>-1&&t.setSelection(ve.near(t.doc.resolve(H))),t.scrollIntoView()}return!0}const v=p.pos===d.end()?y.contentMatchAt(0).defaultType:null,S={...Mu(b,y.type.name,y.attrs),...e},M={...Mu(b,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,p.pos);const C=v?[{type:f,attrs:S},{type:v,attrs:M}]:[{type:f,attrs:S}];if(!Cr(t.doc,d.pos,2))return!1;if(o){const{selection:_,storedMarks:$}=i,{splittableMarks:U}=l.extensionManager,J=$||_.$to.parentOffset&&_.$from.marks();if(t.split(d.pos,2,C).scrollIntoView(),!J||!o)return!0;const I=J.filter(R=>U.includes(R.type.name));t.ensureMarks(I)}return!0},Qd=(n,e)=>{const t=tp(u=>u.type===e)(n.selection);if(!t)return!0;const i=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(i===void 0)return!0;const o=n.doc.nodeAt(i);return t.node.type===o?.type&&yi(n.doc,t.pos)&&n.join(t.pos),!0},Fd=(n,e)=>{const t=tp(u=>u.type===e)(n.selection);if(!t)return!0;const i=n.doc.resolve(t.start).after(t.depth);if(i===void 0)return!0;const o=n.doc.nodeAt(i);return t.node.type===o?.type&&yi(n.doc,i)&&n.join(i),!0},vO=(n,e,t,i={})=>({editor:o,tr:l,state:u,dispatch:f,chain:d,commands:p,can:g})=>{const{extensions:y,splittableMarks:b}=o.extensionManager,v=Tt(n,u.schema),S=Tt(e,u.schema),{selection:M,storedMarks:C}=u,{$from:_,$to:$}=M,U=_.blockRange($),J=C||M.$to.parentOffset&&M.$from.marks();if(!U)return!1;const I=tp(R=>Mb(R.type.name,y))(M);if(U.depth>=1&&I&&U.depth-I.depth<=1){if(I.node.type===v)return p.liftListItem(S);if(Mb(I.node.type.name,y)&&v.validContent(I.node.content)&&f)return d().command(()=>(l.setNodeMarkup(I.pos,v),!0)).command(()=>Qd(l,v)).command(()=>Fd(l,v)).run()}return!t||!J||!f?d().command(()=>g().wrapInList(v,i)?!0:p.clearNodes()).wrapInList(v,i).command(()=>Qd(l,v)).command(()=>Fd(l,v)).run():d().command(()=>{const R=g().wrapInList(v,i),H=J.filter(te=>b.includes(te.type.name));return l.ensureMarks(H),R?!0:p.clearNodes()}).wrapInList(v,i).command(()=>Qd(l,v)).command(()=>Fd(l,v)).run()},xO=(n,e={},t={})=>({state:i,commands:o})=>{const{extendEmptyMarkRange:l=!1}=t,u=vi(n,i.schema);return wh(i,u,e)?o.unsetMark(u,{extendEmptyMarkRange:l}):o.setMark(u,e)},SO=(n,e,t={})=>({state:i,commands:o})=>{const l=Tt(n,i.schema),u=Tt(e,i.schema),f=ql(i,l,t);let d;return i.selection.$anchor.sameParent(i.selection.$head)&&(d=i.selection.$anchor.parent.attrs),f?o.setNode(u,d):o.setNode(l,{...d,...t})},wO=(n,e={})=>({state:t,commands:i})=>{const o=Tt(n,t.schema);return ql(t,o,e)?i.lift(o):i.wrapIn(o,e)},TO=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let i=0;i<t.length;i+=1){const o=t[i];let l;if(o.spec.isInputRules&&(l=o.getState(n))){if(e){const u=n.tr,f=l.transform;for(let d=f.steps.length-1;d>=0;d-=1)u.step(f.steps[d].invert(f.docs[d]));if(l.text){const d=u.doc.resolve(l.from).marks();u.replaceWith(l.from,l.to,n.schema.text(l.text,d))}else u.delete(l.from,l.to)}return!0}}return!1},MO=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:i,ranges:o}=t;return i||e&&o.forEach(l=>{n.removeMark(l.$from.pos,l.$to.pos)}),!0},CO=(n,e={})=>({tr:t,state:i,dispatch:o})=>{var l;const{extendEmptyMarkRange:u=!1}=e,{selection:f}=t,d=vi(n,i.schema),{$from:p,empty:g,ranges:y}=f;if(!o)return!0;if(g&&u){let{from:b,to:v}=f;const S=(l=p.marks().find(C=>C.type===d))===null||l===void 0?void 0:l.attrs,M=Wh(p,d,S);M&&(b=M.from,v=M.to),t.removeMark(b,v,d)}else y.forEach(b=>{t.removeMark(b.$from.pos,b.$to.pos,d)});return t.removeStoredMark(d),!0},kO=(n,e={})=>({tr:t,state:i,dispatch:o})=>{let l=null,u=null;const f=nc(typeof n=="string"?n:n.name,i.schema);return f?(f==="node"&&(l=Tt(n,i.schema)),f==="mark"&&(u=vi(n,i.schema)),o&&t.selection.ranges.forEach(d=>{const p=d.$from.pos,g=d.$to.pos;let y,b,v,S;t.selection.empty?i.doc.nodesBetween(p,g,(M,C)=>{l&&l===M.type&&(v=Math.max(C,p),S=Math.min(C+M.nodeSize,g),y=C,b=M)}):i.doc.nodesBetween(p,g,(M,C)=>{C<p&&l&&l===M.type&&(v=Math.max(C,p),S=Math.min(C+M.nodeSize,g),y=C,b=M),C>=p&&C<=g&&(l&&l===M.type&&t.setNodeMarkup(C,void 0,{...M.attrs,...e}),u&&M.marks.length&&M.marks.forEach(_=>{if(u===_.type){const $=Math.max(C,p),U=Math.min(C+M.nodeSize,g);t.addMark($,U,u.create({..._.attrs,...e}))}}))}),b&&(y!==void 0&&t.setNodeMarkup(y,void 0,{...b.attrs,...e}),u&&b.marks.length&&b.marks.forEach(M=>{u===M.type&&t.addMark(v,S,u.create({...M.attrs,...e}))}))}),!0):!1},EO=(n,e={})=>({state:t,dispatch:i})=>{const o=Tt(n,t.schema);return $E(o,e)(t,i)},AO=(n,e={})=>({state:t,dispatch:i})=>{const o=Tt(n,t.schema);return PE(o,e)(t,i)};var OO=Object.freeze({__proto__:null,blur:hA,clearContent:pA,clearNodes:mA,command:gA,createParagraphNear:yA,cut:bA,deleteCurrentNode:vA,deleteNode:xA,deleteRange:SA,deleteSelection:wA,enter:TA,exitCode:MA,extendMarkRange:CA,first:kA,focus:AA,forEach:OA,insertContent:NA,insertContentAt:zA,joinBackward:jA,joinDown:BA,joinForward:LA,joinItemBackward:qA,joinItemForward:VA,joinTextblockBackward:UA,joinTextblockForward:IA,joinUp:_A,keyboardShortcut:$A,lift:PA,liftEmptyBlock:QA,liftListItem:FA,newlineInCode:GA,resetAttributes:YA,scrollIntoView:KA,selectAll:JA,selectNodeBackward:XA,selectNodeForward:ZA,selectParentNode:WA,selectTextblockEnd:eO,selectTextblockStart:tO,setContent:nO,setMark:fO,setMeta:dO,setNode:hO,setNodeSelection:pO,setTextSelection:mO,sinkListItem:gO,splitBlock:yO,splitListItem:bO,toggleList:vO,toggleMark:xO,toggleNode:SO,toggleWrap:wO,undoInputRule:TO,unsetAllMarks:MO,unsetMark:CO,updateAttributes:kO,wrapIn:EO,wrapInList:AO});const NO=Vt.create({name:"commands",addCommands(){return{...OO}}}),RO=Vt.create({name:"drop",addProseMirrorPlugins(){return[new Jt({key:new Hn("tiptapDrop"),props:{handleDrop:(n,e,t,i)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:i})}}})]}}),DO=Vt.create({name:"editable",addProseMirrorPlugins(){return[new Jt({key:new Hn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),zO=new Hn("focusEvents"),_O=Vt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Jt({key:zO,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const i=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(i),!1},blur:(e,t)=>{n.isFocused=!1;const i=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(i),!1}}}})]}}),BO=Vt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:u})=>[()=>u.undoInputRule(),()=>u.command(({tr:f})=>{const{selection:d,doc:p}=f,{empty:g,$anchor:y}=d,{pos:b,parent:v}=y,S=y.parent.isTextblock&&b>0?f.doc.resolve(b-1):y,M=S.parent.type.spec.isolating,C=y.pos-y.parentOffset,_=M&&S.parent.childCount===1?C===y.pos:we.atStart(p).from===b;return!g||!v.type.isTextblock||v.textContent.length||!_||_&&y.parent.type.name==="paragraph"?!1:u.clearNodes()}),()=>u.deleteSelection(),()=>u.joinBackward(),()=>u.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:u})=>[()=>u.deleteSelection(),()=>u.deleteCurrentNode(),()=>u.joinForward(),()=>u.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:u})=>[()=>u.newlineInCode(),()=>u.createParagraphNear(),()=>u.liftEmptyBlock(),()=>u.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...i},l={...i,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ep()||jx()?l:o},addProseMirrorPlugins(){return[new Jt({key:new Hn("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(M=>M.getMeta("composition")))return;const i=n.some(M=>M.docChanged)&&!e.doc.eq(t.doc),o=n.some(M=>M.getMeta("preventClearDocument"));if(!i||o)return;const{empty:l,from:u,to:f}=e.selection,d=we.atStart(e.doc).from,p=we.atEnd(e.doc).to;if(l||!(u===d&&f===p)||!rc(t.doc))return;const b=t.tr,v=Xu({state:t,transaction:b}),{commands:S}=new Zu({editor:this.editor,state:v});if(S.clearNodes(),!!b.steps.length)return b}})]}}),jO=Vt.create({name:"paste",addProseMirrorPlugins(){return[new Jt({key:new Hn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),LO=Vt.create({name:"tabindex",addProseMirrorPlugins(){return[new Jt({key:new Hn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Gi{get name(){return this.node.type.name}constructor(e,t,i=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=i,this.resolvedPos=e,this.editor=t,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,i=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,i=this.to-1}this.editor.commands.insertContentAt({from:t,to:i},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Gi(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Gi(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Gi(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,i)=>{const o=t.isBlock&&!t.isTextblock,l=t.isAtom&&!t.isText,u=this.pos+i+(l?0:1),f=this.resolvedPos.doc.resolve(u);if(!o&&f.depth<=this.depth)return;const d=new Gi(f,this.editor,o,o?t:null);o&&(d.actualDepth=this.depth+1),e.push(new Gi(f,this.editor,o,o?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let i=null,o=this.parent;for(;o&&!i;){if(o.node.type.name===e)if(Object.keys(t).length>0){const l=o.node.attrs,u=Object.keys(t);for(let f=0;f<u.length;f+=1){const d=u[f];if(l[d]!==t[d])break}}else i=o;o=o.parent}return i}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},i=!1){let o=[];if(!this.children||this.children.length===0)return o;const l=Object.keys(t);return this.children.forEach(u=>{i&&o.length>0||(u.node.type.name===e&&l.every(d=>t[d]===u.node.attrs[d])&&o.push(u),!(i&&o.length>0)&&(o=o.concat(u.querySelectorAll(e,t,i))))}),o}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const qO=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function VO(n,e,t){const i=document.querySelector("style[data-tiptap-style]");if(i!==null)return i;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(o),o}class UO extends XE{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:i,moved:o})=>this.options.onDrop(t,i,o)),this.on("paste",({event:t,slice:i})=>this.options.onPaste(t,i)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=VO(qO,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const i=Ox(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:i});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let i=t;if([].concat(e).forEach(l=>{const u=typeof l=="string"?`${l}$`:l.key;i=i.filter(f=>!f.key.startsWith(u))}),t.length===i.length)return;const o=this.state.reconfigure({plugins:i});return this.view.updateState(o),o}createExtensionManager(){var e,t;const o=[...this.options.enableCoreExtensions?[DO,dA.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),NO,_O,BO,LO,RO,jO].filter(l=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[l.name]!==!1:!0):[],...this.options.extensions].filter(l=>["extension","node","mark"].includes(l?.type));this.extensionManager=new so(o,this)}createCommandManager(){this.commandManager=new Zu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=Sh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(u){if(!(u instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(u.message))throw u;this.emit("contentError",{editor:this,error:u,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(f=>f.name!=="collaboration"),this.createExtensionManager()}}),t=Sh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const i=_x(t,this.options.autofocus);this.view=new SE(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:io.create({doc:t,selection:i||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(u=>{var f;return(f=this.capturedTransaction)===null||f===void 0?void 0:f.step(u)});return}const t=this.state.apply(e),i=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),i&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),l=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),l&&this.emit("blur",{editor:this,event:l.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return lO(this.state,e)}isActive(e,t){const i=typeof e=="string"?e:null,o=typeof e=="string"?t:e;return aO(this.state,i,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Xh(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:i={}}=e||{};return sO(this.state.doc,{blockSeparator:t,textSerializers:{...Rx(this.schema),...i}})}get isEmpty(){return rc(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelector(e,t))||null}$nodes(e,t){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Gi(t,this)}get $doc(){return this.$pos(0)}}function po(n){return new ec({find:n.find,handler:({state:e,range:t,match:i})=>{const o=Me(n.getAttributes,void 0,i);if(o===!1||o===null)return null;const{tr:l}=e,u=i[i.length-1],f=i[0];if(u){const d=f.search(/\S/),p=t.from+f.indexOf(u),g=p+u.length;if(qx(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(M=>M===n.type&&M!==v.mark.type)).filter(v=>v.to>p).length)return null;g<t.to&&l.delete(g,t.to),p>t.from&&l.delete(t.from+d,p);const b=t.from+d+u.length;l.addMark(t.from+d,b,n.type.create(o||{})),l.removeStoredMark(n.type)}}})}function Vx(n){return new ec({find:n.find,handler:({state:e,range:t,match:i})=>{const o=Me(n.getAttributes,void 0,i)||{},{tr:l}=e,u=t.from;let f=t.to;const d=n.type.create(o);if(i[1]){const p=i[0].lastIndexOf(i[1]);let g=u+p;g>f?g=f:f=g+i[1].length;const y=i[0][i[0].length-1];l.insertText(y,u+i[0].length-1),l.replaceWith(g,f,d)}else if(i[0]){const p=n.type.isInline?u:u-1;l.insert(p,n.type.create(o)).delete(l.mapping.map(u),l.mapping.map(f))}l.scrollIntoView()}})}function Th(n){return new ec({find:n.find,handler:({state:e,range:t,match:i})=>{const o=e.doc.resolve(t.from),l=Me(n.getAttributes,void 0,i)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,l)}})}function Vl(n){return new ec({find:n.find,handler:({state:e,range:t,match:i,chain:o})=>{const l=Me(n.getAttributes,void 0,i)||{},u=e.tr.delete(t.from,t.to),d=u.doc.resolve(t.from).blockRange(),p=d&&Bh(d,n.type,l);if(!p)return null;if(u.wrap(d,p),n.keepMarks&&n.editor){const{selection:y,storedMarks:b}=e,{splittableMarks:v}=n.editor.extensionManager,S=b||y.$to.parentOffset&&y.$from.marks();if(S){const M=S.filter(C=>v.includes(C.type.name));u.ensureMarks(M)}}if(n.keepAttributes){const y=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(y,l).run()}const g=u.doc.resolve(t.from-1).nodeBefore;g&&g.type===n.type&&yi(u.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(i,g))&&u.join(t.from-1)}})}class Kt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Me(ue(this,"addOptions",{name:this.name}))),this.storage=Me(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Kt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>tc(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Kt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Me(ue(t,"addOptions",{name:t.name})),t.storage=Me(ue(t,"addStorage",{name:t.name,options:t.options})),t}}function mo(n){return new oA({find:n.find,handler:({state:e,range:t,match:i,pasteEvent:o})=>{const l=Me(n.getAttributes,void 0,i,o);if(l===!1||l===null)return null;const{tr:u}=e,f=i[i.length-1],d=i[0];let p=t.to;if(f){const g=d.search(/\S/),y=t.from+d.indexOf(f),b=y+f.length;if(qx(t.from,t.to,e.doc).filter(S=>S.mark.type.excluded.find(C=>C===n.type&&C!==S.mark.type)).filter(S=>S.to>y).length)return null;b<t.to&&u.delete(b,t.to),y>t.from&&u.delete(t.from+g,y),p=t.from+g+f.length,u.addMark(t.from+g,p,n.type.create(l||{})),u.removeStoredMark(n.type)}}})}function IO(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ux={exports:{}},Gd={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb;function HO(){if(kb)return Gd;kb=1;var n=K;function e(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,o=n.useEffect,l=n.useLayoutEffect,u=n.useDebugValue;function f(y,b){var v=b(),S=i({inst:{value:v,getSnapshot:b}}),M=S[0].inst,C=S[1];return l(function(){M.value=v,M.getSnapshot=b,d(M)&&C({inst:M})},[y,v,b]),o(function(){return d(M)&&C({inst:M}),y(function(){d(M)&&C({inst:M})})},[y]),u(v),v}function d(y){var b=y.getSnapshot;y=y.value;try{var v=b();return!t(y,v)}catch{return!0}}function p(y,b){return b()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return Gd.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,Gd}Ux.exports=HO();var np=Ux.exports;const $O=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},PO=({contentComponent:n})=>{const e=np.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return K.createElement(K.Fragment,null,Object.values(e))};function QO(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,i){e={...e,[t]:$u.createPortal(i.reactElement,i.element,t)},n.forEach(o=>o())},removeRenderer(t){const i={...e};delete i[t],e=i,n.forEach(o=>o())}}}class FO extends K.Component{constructor(e){var t;super(e),this.editorContentRef=K.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=QO(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(i=>i.hasContentComponentInitialized?i:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...i}=this.props;return K.createElement(K.Fragment,null,K.createElement("div",{ref:$O(t,this.editorContentRef),...i}),e?.contentComponent&&K.createElement(PO,{contentComponent:e.contentComponent}))}}const GO=q.forwardRef((n,e)=>{const t=K.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return K.createElement(FO,{key:t,innerRef:e,...n})}),Ix=K.memo(GO);var YO=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var i,o,l;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(o=i;o--!==0;)if(!n(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;for(o of e.entries())if(!n(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(i=e.length,i!=t.length)return!1;for(o=i;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(l=Object.keys(e),i=l.length,i!==Object.keys(t).length)return!1;for(o=i;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,l[o]))return!1;for(o=i;o--!==0;){var u=l[o];if(!(u==="_owner"&&e.$$typeof)&&!n(e[u],t[u]))return!1}return!0}return e!==e&&t!==t},KO=IO(YO),Hx={exports:{}},Yd={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eb;function JO(){if(Eb)return Yd;Eb=1;var n=K,e=np;function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var i=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,l=n.useRef,u=n.useEffect,f=n.useMemo,d=n.useDebugValue;return Yd.useSyncExternalStoreWithSelector=function(p,g,y,b,v){var S=l(null);if(S.current===null){var M={hasValue:!1,value:null};S.current=M}else M=S.current;S=f(function(){function _(R){if(!$){if($=!0,U=R,R=b(R),v!==void 0&&M.hasValue){var H=M.value;if(v(H,R))return J=H}return J=R}if(H=J,i(U,R))return H;var te=b(R);return v!==void 0&&v(H,te)?H:(U=R,J=te)}var $=!1,U,J,I=y===void 0?null:y;return[function(){return _(g())},I===null?void 0:function(){return _(I())}]},[g,y,b,v]);var C=o(p,S[0],S[1]);return u(function(){M.hasValue=!0,M.value=C},[C]),d(C),C},Yd}Hx.exports=JO();var XO=Hx.exports;const ZO=typeof window<"u"?q.useLayoutEffect:q.useEffect;class WO{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(o=>o())},i=this.editor;return i.on("transaction",t),()=>{i.off("transaction",t)}}}}function eN(n){var e;const[t]=q.useState(()=>new WO(n.editor)),i=XO.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:KO);return ZO(()=>t.watch(n.editor),[n.editor,t]),q.useDebugValue(i),i}const tN=!1,Mh=typeof window>"u",nN=Mh||!!(typeof window<"u"&&window.next);class rp{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Mh||nN?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...i)=>{var o,l;return(l=(o=this.options.current).onBeforeCreate)===null||l===void 0?void 0:l.call(o,...i)},onBlur:(...i)=>{var o,l;return(l=(o=this.options.current).onBlur)===null||l===void 0?void 0:l.call(o,...i)},onCreate:(...i)=>{var o,l;return(l=(o=this.options.current).onCreate)===null||l===void 0?void 0:l.call(o,...i)},onDestroy:(...i)=>{var o,l;return(l=(o=this.options.current).onDestroy)===null||l===void 0?void 0:l.call(o,...i)},onFocus:(...i)=>{var o,l;return(l=(o=this.options.current).onFocus)===null||l===void 0?void 0:l.call(o,...i)},onSelectionUpdate:(...i)=>{var o,l;return(l=(o=this.options.current).onSelectionUpdate)===null||l===void 0?void 0:l.call(o,...i)},onTransaction:(...i)=>{var o,l;return(l=(o=this.options.current).onTransaction)===null||l===void 0?void 0:l.call(o,...i)},onUpdate:(...i)=>{var o,l;return(l=(o=this.options.current).onUpdate)===null||l===void 0?void 0:l.call(o,...i)},onContentError:(...i)=>{var o,l;return(l=(o=this.options.current).onContentError)===null||l===void 0?void 0:l.call(o,...i)},onDrop:(...i)=>{var o,l;return(l=(o=this.options.current).onDrop)===null||l===void 0?void 0:l.call(o,...i)},onPaste:(...i)=>{var o,l;return(l=(o=this.options.current).onPaste)===null||l===void 0?void 0:l.call(o,...i)}};return new UO(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(i=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(i)?!0:i==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((o,l)=>{var u;return o===((u=t.extensions)===null||u===void 0?void 0:u[l])}):e[i]===t[i])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?rp.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((i,o)=>i===e[o]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function $x(n={},e=[]){const t=q.useRef(n);t.current=n;const[i]=q.useState(()=>new rp(t)),o=np.useSyncExternalStore(i.subscribe,i.getEditor,i.getServerSnapshot);return q.useDebugValue(o),q.useEffect(i.onRender(e)),eN({editor:o,selector:({transactionNumber:l})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&l===0?0:l+1}),o}const rN=q.createContext({editor:null});rN.Consumer;const iN=q.createContext({onDragStart:void 0}),sN=()=>q.useContext(iN);K.forwardRef((n,e)=>{const{onDragStart:t}=sN(),i=n.as||"div";return K.createElement(i,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const oN=/^\s*>\s$/,lN=Kt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",qt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Vl({find:oN,type:this.type})]}}),aN=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,uN=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,cN=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,fN=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,dN=gi.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",qt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[po({find:aN,type:this.type}),po({find:cN,type:this.type})]},addPasteRules(){return[mo({find:uN,type:this.type}),mo({find:fN,type:this.type})]}}),hN="listItem",Ab="textStyle",Ob=/^\s*([-+*])\s$/,pN=Kt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",qt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(hN,this.editor.getAttributes(Ab)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Vl({find:Ob,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Vl({find:Ob,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Ab),editor:this.editor})),[n]}}),mN=/(^|[^`])`([^`]+)`(?!`)/,gN=/(^|[^`])`([^`]+)`(?!`)/g,yN=gi.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",qt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[po({find:mN,type:this.type})]},addPasteRules(){return[mo({find:gN,type:this.type})]}}),bN=/^```([a-z]+)?[\s\n]$/,vN=/^~~~([a-z]+)?[\s\n]$/,xN=Kt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,l=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(u=>u.startsWith(t)).map(u=>u.replace(t,""))[0];return l||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",qt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:i,empty:o}=t;if(!o||i.parent.type!==this.type)return!1;const l=i.parentOffset===i.parent.nodeSize-2,u=i.parent.textContent.endsWith(`

`);return!l||!u?!1:n.chain().command(({tr:f})=>(f.delete(i.pos-2,i.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:i}=e,{$from:o,empty:l}=t;if(!l||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const f=o.after();return f===void 0?!1:i.nodeAt(f)?n.commands.command(({tr:p})=>(p.setSelection(we.near(i.resolve(f))),!0)):n.commands.exitCode()}}},addInputRules(){return[Th({find:bN,type:this.type,getAttributes:n=>({language:n[1]})}),Th({find:vN,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Jt({key:new Hn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),i=e.clipboardData.getData("vscode-editor-data"),o=i?JSON.parse(i):void 0,l=o?.mode;if(!t||!l)return!1;const{tr:u,schema:f}=n.state,d=f.text(t.replace(/\r\n?/g,`
`));return u.replaceSelectionWith(this.type.create({language:l},d)),u.selection.$from.parent.type!==this.type&&u.setSelection(ve.near(u.doc.resolve(Math.max(0,u.selection.from-2)))),u.setMeta("paste",!0),n.dispatch(u),!0}}})]}}),SN=Kt.create({name:"doc",topNode:!0,content:"block+"});function wN(n={}){return new Jt({view(e){return new TN(e,n)}})}class TN{constructor(e,t){var i;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(i=t.width)!==null&&i!==void 0?i:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let l=u=>{this[o](u)};return e.dom.addEventListener(o,l),{name:o,handler:l}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,i,o=this.editorView.dom,l=o.getBoundingClientRect(),u=l.width/o.offsetWidth,f=l.height/o.offsetHeight;if(t){let y=e.nodeBefore,b=e.nodeAfter;if(y||b){let v=this.editorView.nodeDOM(this.cursorPos-(y?y.nodeSize:0));if(v){let S=v.getBoundingClientRect(),M=y?S.bottom:S.top;y&&b&&(M=(M+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let C=this.width/2*f;i={left:S.left,right:S.right,top:M-C,bottom:M+C}}}}if(!i){let y=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*u;i={left:y.left-b,right:y.left+b,top:y.top,bottom:y.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let p,g;if(!d||d==document.body&&getComputedStyle(d).position=="static")p=-pageXOffset,g=-pageYOffset;else{let y=d.getBoundingClientRect(),b=y.width/d.offsetWidth,v=y.height/d.offsetHeight;p=y.left-d.scrollLeft*b,g=y.top-d.scrollTop*v}this.element.style.left=(i.left-p)/u+"px",this.element.style.top=(i.top-g)/f+"px",this.element.style.width=(i.right-i.left)/u+"px",this.element.style.height=(i.bottom-i.top)/f+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),i=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),o=i&&i.type.spec.disableDropCursor,l=typeof o=="function"?o(this.editorView,t,e):o;if(t&&!l){let u=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let f=Ov(this.editorView.state.doc,u,this.editorView.dragging.slice);f!=null&&(u=f)}this.setCursor(u),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const MN=Vt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[wN(this.options)]}});class Ze extends we{constructor(e){super(e,e)}map(e,t){let i=e.resolve(t.map(this.head));return Ze.valid(i)?new Ze(i):we.near(i)}content(){return re.empty}eq(e){return e instanceof Ze&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ze(e.resolve(t.pos))}getBookmark(){return new ip(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!CN(e)||!kN(e))return!1;let i=t.type.spec.allowGapCursor;if(i!=null)return i;let o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,t,i=!1){e:for(;;){if(!i&&Ze.valid(e))return e;let o=e.pos,l=null;for(let u=e.depth;;u--){let f=e.node(u);if(t>0?e.indexAfter(u)<f.childCount:e.index(u)>0){l=f.child(t>0?e.indexAfter(u):e.index(u)-1);break}else if(u==0)return null;o+=t;let d=e.doc.resolve(o);if(Ze.valid(d))return d}for(;;){let u=t>0?l.firstChild:l.lastChild;if(!u){if(l.isAtom&&!l.isText&&!he.isSelectable(l)){e=e.doc.resolve(o+l.nodeSize*t),i=!1;continue e}break}l=u,o+=t;let f=e.doc.resolve(o);if(Ze.valid(f))return f}return null}}}Ze.prototype.visible=!1;Ze.findFrom=Ze.findGapCursorFrom;we.jsonID("gapcursor",Ze);class ip{constructor(e){this.pos=e}map(e){return new ip(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Ze.valid(t)?new Ze(t):we.near(t)}}function CN(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),i=n.node(e);if(t==0){if(i.type.spec.isolating)return!0;continue}for(let o=i.child(t-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function kN(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),i=n.node(e);if(t==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let o=i.child(t);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function EN(){return new Jt({props:{decorations:RN,createSelectionBetween(n,e,t){return e.pos==t.pos&&Ze.valid(t)?new Ze(t):null},handleClick:ON,handleKeyDown:AN,handleDOMEvents:{beforeinput:NN}}})}const AN=mx({ArrowLeft:vu("horiz",-1),ArrowRight:vu("horiz",1),ArrowUp:vu("vert",-1),ArrowDown:vu("vert",1)});function vu(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(i,o,l){let u=i.selection,f=e>0?u.$to:u.$from,d=u.empty;if(u instanceof ve){if(!l.endOfTextblock(t)||f.depth==0)return!1;d=!1,f=i.doc.resolve(e>0?f.after():f.before())}let p=Ze.findGapCursorFrom(f,e,d);return p?(o&&o(i.tr.setSelection(new Ze(p))),!0):!1}}function ON(n,e,t){if(!n||!n.editable)return!1;let i=n.state.doc.resolve(e);if(!Ze.valid(i))return!1;let o=n.posAtCoords({left:t.clientX,top:t.clientY});return o&&o.inside>-1&&he.isSelectable(n.state.doc.nodeAt(o.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Ze(i))),!0)}function NN(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Ze))return!1;let{$from:t}=n.state.selection,i=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!i)return!1;let o=Z.empty;for(let u=i.length-1;u>=0;u--)o=Z.from(i[u].createAndFill(null,o));let l=n.state.tr.replace(t.pos,t.pos,new re(o,0,0));return l.setSelection(ve.near(l.doc.resolve(t.pos+1))),n.dispatch(l),!1}function RN(n){if(!(n.selection instanceof Ze))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",lt.create(n.doc,[mn.widget(n.selection.head,e,{key:"gapcursor"})])}const DN=Vt.create({name:"gapCursor",addProseMirrorPlugins(){return[EN()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Me(ue(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),zN=Kt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",qt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:i})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:o,storedMarks:l}=t;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:u}=this.options,{splittableMarks:f}=i.extensionManager,d=l||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:p,dispatch:g})=>{if(g&&d&&u){const y=d.filter(b=>f.includes(b.type.name));p.ensureMarks(y)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),_N=Kt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,qt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Th({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Hu=200,wt=function(){};wt.prototype.append=function(e){return e.length?(e=wt.from(e),!this.length&&e||e.length<Hu&&this.leafAppend(e)||this.length<Hu&&e.leafPrepend(this)||this.appendInner(e)):this};wt.prototype.prepend=function(e){return e.length?wt.from(e).append(this):this};wt.prototype.appendInner=function(e){return new BN(this,e)};wt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?wt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};wt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};wt.prototype.forEach=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length),t<=i?this.forEachInner(e,t,i,0):this.forEachInvertedInner(e,t,i,0)};wt.prototype.map=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length);var o=[];return this.forEach(function(l,u){return o.push(e(l,u))},t,i),o};wt.from=function(e){return e instanceof wt?e:e&&e.length?new Px(e):wt.empty};var Px=function(n){function e(i){n.call(this),this.values=i}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,l){return o==0&&l==this.length?this:new e(this.values.slice(o,l))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,l,u,f){for(var d=l;d<u;d++)if(o(this.values[d],f+d)===!1)return!1},e.prototype.forEachInvertedInner=function(o,l,u,f){for(var d=l-1;d>=u;d--)if(o(this.values[d],f+d)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=Hu)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=Hu)return new e(o.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(wt);wt.empty=new Px([]);var BN=function(n){function e(t,i){n.call(this),this.left=t,this.right=i,this.length=t.length+i.length,this.depth=Math.max(t.depth,i.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,o,l,u){var f=this.left.length;if(o<f&&this.left.forEachInner(i,o,Math.min(l,f),u)===!1||l>f&&this.right.forEachInner(i,Math.max(o-f,0),Math.min(this.length,l)-f,u+f)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,l,u){var f=this.left.length;if(o>f&&this.right.forEachInvertedInner(i,o-f,Math.max(l,f)-f,u+f)===!1||l<f&&this.left.forEachInvertedInner(i,Math.min(o,f),l,u)===!1)return!1},e.prototype.sliceInner=function(i,o){if(i==0&&o==this.length)return this;var l=this.left.length;return o<=l?this.left.slice(i,o):i>=l?this.right.slice(i-l,o-l):this.left.slice(i,l).append(this.right.slice(0,o-l))},e.prototype.leafAppend=function(i){var o=this.right.leafAppend(i);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(i){var o=this.left.leafPrepend(i);if(o)return new e(o,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e}(wt);const jN=500;class Vn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let o,l;t&&(o=this.remapping(i,this.items.length),l=o.maps.length);let u=e.tr,f,d,p=[],g=[];return this.items.forEach((y,b)=>{if(!y.step){o||(o=this.remapping(i,b+1),l=o.maps.length),l--,g.push(y);return}if(o){g.push(new Zn(y.map));let v=y.step.map(o.slice(l)),S;v&&u.maybeStep(v).doc&&(S=u.mapping.maps[u.mapping.maps.length-1],p.push(new Zn(S,void 0,void 0,p.length+g.length))),l--,S&&o.appendMap(S,l)}else u.maybeStep(y.step);if(y.selection)return f=o?y.selection.map(o.slice(l)):y.selection,d=new Vn(this.items.slice(0,i).append(g.reverse().concat(p)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:u,selection:f}}addTransform(e,t,i,o){let l=[],u=this.eventCount,f=this.items,d=!o&&f.length?f.get(f.length-1):null;for(let g=0;g<e.steps.length;g++){let y=e.steps[g].invert(e.docs[g]),b=new Zn(e.mapping.maps[g],y,t),v;(v=d&&d.merge(b))&&(b=v,g?l.pop():f=f.slice(0,f.length-1)),l.push(b),t&&(u++,t=void 0),o||(d=b)}let p=u-i.depth;return p>qN&&(f=LN(f,p),u-=p),new Vn(f.append(l),u)}remapping(e,t){let i=new zl;return this.items.forEach((o,l)=>{let u=o.mirrorOffset!=null&&l-o.mirrorOffset>=e?i.maps.length-o.mirrorOffset:void 0;i.appendMap(o.map,u)},e,t),i}addMaps(e){return this.eventCount==0?this:new Vn(this.items.append(e.map(t=>new Zn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let i=[],o=Math.max(0,this.items.length-t),l=e.mapping,u=e.steps.length,f=this.eventCount;this.items.forEach(b=>{b.selection&&f--},o);let d=t;this.items.forEach(b=>{let v=l.getMirror(--d);if(v==null)return;u=Math.min(u,v);let S=l.maps[v];if(b.step){let M=e.steps[v].invert(e.docs[v]),C=b.selection&&b.selection.map(l.slice(d+1,v));C&&f++,i.push(new Zn(S,M,C))}else i.push(new Zn(S))},o);let p=[];for(let b=t;b<u;b++)p.push(new Zn(l.maps[b]));let g=this.items.slice(0,o).append(p).append(i),y=new Vn(g,f);return y.emptyItemCount()>jN&&(y=y.compress(this.items.length-i.length)),y}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),i=t.maps.length,o=[],l=0;return this.items.forEach((u,f)=>{if(f>=e)o.push(u),u.selection&&l++;else if(u.step){let d=u.step.map(t.slice(i)),p=d&&d.getMap();if(i--,p&&t.appendMap(p,i),d){let g=u.selection&&u.selection.map(t.slice(i));g&&l++;let y=new Zn(p.invert(),d,g),b,v=o.length-1;(b=o.length&&o[v].merge(y))?o[v]=b:o.push(y)}}else u.map&&i--},this.items.length,0),new Vn(wt.from(o.reverse()),l)}}Vn.empty=new Vn(wt.empty,0);function LN(n,e){let t;return n.forEach((i,o)=>{if(i.selection&&e--==0)return t=o,!1}),n.slice(t)}class Zn{constructor(e,t,i,o){this.map=e,this.step=t,this.selection=i,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Zn(t.getMap().invert(),t,this.selection)}}}class ri{constructor(e,t,i,o,l){this.done=e,this.undone=t,this.prevRanges=i,this.prevTime=o,this.prevComposition=l}}const qN=20;function VN(n,e,t,i){let o=t.getMeta(ns),l;if(o)return o.historyState;t.getMeta(HN)&&(n=new ri(n.done,n.undone,null,0,-1));let u=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(u&&u.getMeta(ns))return u.getMeta(ns).redo?new ri(n.done.addTransform(t,void 0,i,Cu(e)),n.undone,Nb(t.mapping.maps),n.prevTime,n.prevComposition):new ri(n.done,n.undone.addTransform(t,void 0,i,Cu(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(u&&u.getMeta("addToHistory")===!1)){let f=t.getMeta("composition"),d=n.prevTime==0||!u&&n.prevComposition!=f&&(n.prevTime<(t.time||0)-i.newGroupDelay||!UN(t,n.prevRanges)),p=u?Kd(n.prevRanges,t.mapping):Nb(t.mapping.maps);return new ri(n.done.addTransform(t,d?e.selection.getBookmark():void 0,i,Cu(e)),Vn.empty,p,t.time,f??n.prevComposition)}else return(l=t.getMeta("rebased"))?new ri(n.done.rebased(t,l),n.undone.rebased(t,l),Kd(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new ri(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Kd(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function UN(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((i,o)=>{for(let l=0;l<e.length;l+=2)i<=e[l+1]&&o>=e[l]&&(t=!0)}),t}function Nb(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((i,o,l,u)=>e.push(l,u));return e}function Kd(n,e){if(!n)return null;let t=[];for(let i=0;i<n.length;i+=2){let o=e.map(n[i],1),l=e.map(n[i+1],-1);o<=l&&t.push(o,l)}return t}function IN(n,e,t){let i=Cu(e),o=ns.get(e).spec.config,l=(t?n.undone:n.done).popEvent(e,i);if(!l)return null;let u=l.selection.resolve(l.transform.doc),f=(t?n.done:n.undone).addTransform(l.transform,e.selection.getBookmark(),o,i),d=new ri(t?f:l.remaining,t?l.remaining:f,null,0,-1);return l.transform.setSelection(u).setMeta(ns,{redo:t,historyState:d})}let Jd=!1,Rb=null;function Cu(n){let e=n.plugins;if(Rb!=e){Jd=!1,Rb=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Jd=!0;break}}return Jd}const ns=new Hn("history"),HN=new Hn("closeHistory");function $N(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Jt({key:ns,state:{init(){return new ri(Vn.empty,Vn.empty,null,0,-1)},apply(e,t,i){return VN(t,i,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let i=t.inputType,o=i=="historyUndo"?Fx:i=="historyRedo"?Gx:null;return o?(t.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function Qx(n,e){return(t,i)=>{let o=ns.getState(t);if(!o||(n?o.undone:o.done).eventCount==0)return!1;if(i){let l=IN(o,t,n);l&&i(e?l.scrollIntoView():l)}return!0}}const Fx=Qx(!1,!0),Gx=Qx(!0,!0),PN=Vt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>Fx(n,e),redo:()=>({state:n,dispatch:e})=>Gx(n,e)}},addProseMirrorPlugins(){return[$N(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),QN=Kt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",qt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:i,$to:o}=t,l=n();return i.parentOffset===0?l.insertContentAt({from:Math.max(i.pos-1,0),to:o.pos},{type:this.name}):uO(t)?l.insertContentAt(o.pos,{type:this.name}):l.insertContent({type:this.name}),l.command(({tr:u,dispatch:f})=>{var d;if(f){const{$to:p}=u.selection,g=p.end();if(p.nodeAfter)p.nodeAfter.isTextblock?u.setSelection(ve.create(u.doc,p.pos+1)):p.nodeAfter.isBlock?u.setSelection(he.create(u.doc,p.pos)):u.setSelection(ve.create(u.doc,p.pos));else{const y=(d=p.parent.type.contentMatch.defaultType)===null||d===void 0?void 0:d.create();y&&(u.insert(g,y),u.setSelection(ve.create(u.doc,g+1)))}u.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Vx({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),FN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,GN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,YN=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,KN=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,JN=gi.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",qt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[po({find:FN,type:this.type}),po({find:YN,type:this.type})]},addPasteRules(){return[mo({find:GN,type:this.type}),mo({find:KN,type:this.type})]}}),XN=Kt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",qt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ZN="listItem",Db="textStyle",zb=/^(\d+)\.\s$/,WN=Kt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",qt(this.options.HTMLAttributes,t),0]:["ol",qt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ZN,this.editor.getAttributes(Db)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Vl({find:zb,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Vl({find:zb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Db)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),eR=Kt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",qt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),tR=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,nR=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,rR=gi.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",qt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[po({find:tR,type:this.type})]},addPasteRules(){return[mo({find:nR,type:this.type})]}}),iR=Kt.create({name:"text",group:"inline"}),Yx=Vt.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(dN.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(lN.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(pN.configure(this.options.bulletList)),this.options.code!==!1&&n.push(yN.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(xN.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(SN.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(MN.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(DN.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(zN.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(_N.configure(this.options.heading)),this.options.history!==!1&&n.push(PN.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(QN.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(JN.configure(this.options.italic)),this.options.listItem!==!1&&n.push(XN.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(WN.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(eR.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(rR.configure(this.options.strike)),this.options.text!==!1&&n.push(iR.configure(this.options.text)),n}}),sR=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Kx=Kt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",qt(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[Vx({find:sR,type:this.type,getAttributes:n=>{const[,,e,t,i]=n;return{src:t,alt:e,title:i}}})]}}),oR=Vt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Jt({key:new Hn("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=e,o=[];if(!t)return null;const l=this.editor.isEmpty;return n.descendants((u,f)=>{const d=i>=f&&i<=f+u.nodeSize,p=!u.isLeaf&&rc(u);if((d||!this.options.showOnlyCurrent)&&p){const g=[this.options.emptyNodeClass];l&&g.push(this.options.emptyEditorClass);const y=mn.node(f,f+u.nodeSize,{class:g.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:u,pos:f,hasAnchor:d}):this.options.placeholder});o.push(y)}return this.options.includeChildren}),lt.create(n,o)}}})]}});function lR({editor:n}){return n?T.jsxs("div",{className:"border-b p-2 flex flex-wrap gap-2",children:[T.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleBold().run(),disabled:!n.can().chain().focus().toggleBold().run(),className:`px-2 py-1 rounded ${n.isActive("bold")?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"bold"}),T.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleItalic().run(),disabled:!n.can().chain().focus().toggleItalic().run(),className:`px-2 py-1 rounded ${n.isActive("italic")?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"italic"}),T.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleStrike().run(),disabled:!n.can().chain().focus().toggleStrike().run(),className:`px-2 py-1 rounded ${n.isActive("strike")?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"strike"}),T.jsx("button",{type:"button",onClick:()=>n.chain().focus().setParagraph().run(),className:`px-2 py-1 rounded ${n.isActive("paragraph")?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"paragraph"}),T.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleHeading({level:1}).run(),className:`px-2 py-1 rounded ${n.isActive("heading",{level:1})?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"h1"}),T.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleHeading({level:2}).run(),className:`px-2 py-1 rounded ${n.isActive("heading",{level:2})?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"h2"}),T.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleHeading({level:3}).run(),className:`px-2 py-1 rounded ${n.isActive("heading",{level:3})?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"h3"}),T.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleBulletList().run(),className:`px-2 py-1 rounded ${n.isActive("bulletList")?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"bullet list"}),T.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleOrderedList().run(),className:`px-2 py-1 rounded ${n.isActive("orderedList")?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"ordered list"}),T.jsx("button",{type:"button",onClick:()=>n.chain().focus().undo().run(),disabled:!n.can().chain().focus().undo().run(),className:"px-2 py-1 rounded hover:bg-gray-100",children:"undo"}),T.jsx("button",{type:"button",onClick:()=>n.chain().focus().redo().run(),disabled:!n.can().chain().focus().redo().run(),className:"px-2 py-1 rounded hover:bg-gray-100",children:"redo"})]}):null}function aR({content:n}){const e=$x({extensions:[Yx,Kx],content:n,editable:!1});return T.jsx(Ix,{editor:e})}function uR({userId:n}){const e=Dn(De.profiles.get,{userId:n});return e?T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-100",children:e.pictureUrl?T.jsx("img",{src:e.pictureUrl,alt:e.name,className:"w-full h-full object-cover"}):T.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"?"})}),T.jsxs("div",{children:[T.jsx("div",{className:"font-medium",children:e.name}),T.jsxs("div",{className:"text-sm text-gray-500",children:[e.relationship," of Emily"]})]})]}):null}function cR(){const n=Dn(De.profiles.getCurrentProfile),{results:e,status:t,loadMore:i}=Jb(De.posts.list,n?{paginationOpts:{numItems:20}}:"skip",{initialNumItems:20}),o=ht(De.posts.create),l=ht(De.posts.remove),u=ht(De.media.generateUploadUrl),f=Dn(De.auth.loggedInUser),[d,p]=q.useState(""),[g,y]=q.useState(!1),b=$x({extensions:[Yx,Kx.configure({inline:!0,allowBase64:!0}),oR.configure({placeholder:"Share your words"})],content:""}),v=q.useCallback(async $=>{if(b)try{y(!0);const U=await u(),J=await fetch(U,{method:"POST",headers:{"Content-Type":$.type},body:$});if(!J.ok)throw new Error("Failed to upload image");const{storageId:I}=await J.json(),R=await fetch(`/api/storage/${I}`).then(H=>H.text());b.chain().focus().setImage({src:R}).run()}catch(U){console.error("Failed to upload image:",U),Pe.error("Failed to upload image")}finally{y(!1)}},[b,u]),S=q.useCallback($=>{$.preventDefault();const U=$.dataTransfer?.files[0];U&&U.type.startsWith("image/")&&v(U)},[v]),M=q.useCallback($=>{const U=$.clipboardData?.files[0];U&&U.type.startsWith("image/")&&($.preventDefault(),v(U))},[v]);async function C($){if($.preventDefault(),!(!b||!d.trim()))try{const U=b.getJSON();await o({title:d,content:{type:"doc",content:U.content||[]}}),p(""),b.commands.setContent(""),Pe.success("Post created successfully!")}catch(U){Pe.error("Failed to create post"),console.error(U)}}async function _($){if(confirm("Are you sure you want to delete this post?"))try{await l({id:$}),Pe.success("Post deleted successfully!")}catch(U){Pe.error("Failed to delete post"),console.error(U)}}return n?T.jsxs("div",{className:"max-w-4xl mx-auto",children:[T.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-2",children:"Memories"}),T.jsx("p",{className:"text-gray-600 mb-8",children:"Share some words, a story, or a memory here."}),T.jsxs("div",{className:"mb-12 space-y-4",children:[T.jsx("input",{type:"text",value:d,onChange:$=>p($.target.value),placeholder:"Title",className:"w-full p-2 border rounded text-lg",required:!0}),T.jsxs("div",{className:"border rounded overflow-hidden",children:[T.jsx(lR,{editor:b}),T.jsxs("div",{className:"relative",onDrop:S,onDragOver:$=>$.preventDefault(),onPaste:M,children:[g&&T.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center",children:"Uploading image..."}),T.jsx(Ix,{editor:b,className:"prose max-w-none p-4"})]})]}),T.jsx("form",{onSubmit:C,className:"flex justify-end gap-4",children:T.jsx("button",{type:"submit",disabled:!d.trim()||!b?.getText().trim(),className:"bg-emerald-600 text-white px-6 py-2 rounded hover:bg-emerald-700 disabled:opacity-50",children:"Share Memory"})})]}),T.jsx("div",{className:"space-y-8",children:e?.map($=>T.jsxs("article",{className:"border rounded-lg overflow-hidden",children:[T.jsxs("div",{className:"p-4 bg-gray-50 border-b",children:[T.jsxs("div",{className:"flex justify-between items-start mb-4",children:[T.jsx(uR,{userId:$.authorId}),$.authorId===f?._id&&T.jsx("button",{type:"button",onClick:()=>_($._id),className:"text-red-600 hover:text-red-700",children:"Delete"})]}),T.jsx("h2",{className:"text-xl font-semibold",children:$.title}),T.jsx("div",{className:"text-sm text-gray-500 mt-1",children:new Date($._creationTime).toLocaleDateString()})]}),T.jsx("div",{className:"prose max-w-none p-4",children:T.jsx(aR,{content:$.content})}),T.jsx("div",{className:"border-t",children:T.jsx(nv,{targetType:"post",targetId:$._id})})]},$._id))}),t==="CanLoadMore"&&T.jsx("div",{className:"mt-8 flex justify-center",children:T.jsx("button",{type:"button",onClick:()=>i(20),className:"bg-emerald-600 text-white px-6 py-2 rounded-full hover:bg-emerald-700",children:"Load More"})}),t==="LoadingMore"&&T.jsx("div",{className:"mt-8 flex justify-center",children:T.jsx("div",{className:"bg-emerald-100 text-emerald-800 px-6 py-2 rounded-full",children:"Loading..."})})]}):T.jsxs("div",{className:"max-w-4xl mx-auto",children:[T.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-8",children:"Memories"}),T.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-amber-800",children:"Please complete your profile to view and share memories."})]})}function fR(){return T.jsxs("div",{className:"max-w-3xl mx-auto prose",children:[T.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-8",children:"About Emerald Palace"}),T.jsx("p",{className:"text-lg text-gray-700",children:"Welcome to Emerald Palace, a digital memorial for Emily Parsonson. Contribute to a private collection of photographs, videos, and written memories shared with Emily's beloved family and friends."}),T.jsx("p",{className:"text-lg text-gray-700",children:'Upload photos or video to the "Photographs & Videos" gallery or write a blog post in the "Memories" blog. Please make sure to select the relationship to Emily that best describes you on the "Profile" page. You can share photos & videos with specific groups of users, or everyone which is the default. For any issues, please contact benj.br@icloud.com'})]})}function Jx(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=Jx(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function dR(){for(var n,e,t=0,i="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=Jx(n))&&(i&&(i+=" "),i+=e);return i}const sp="-",hR=n=>{const e=mR(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:u=>{const f=u.split(sp);return f[0]===""&&f.length!==1&&f.shift(),Xx(f,e)||pR(u)},getConflictingClassGroupIds:(u,f)=>{const d=t[u]||[];return f&&i[u]?[...d,...i[u]]:d}}},Xx=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),o=i?Xx(n.slice(1),i):void 0;if(o)return o;if(e.validators.length===0)return;const l=n.join(sp);return e.validators.find(({validator:u})=>u(l))?.classGroupId},_b=/^\[(.+)\]$/,pR=n=>{if(_b.test(n)){const e=_b.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},mR=n=>{const{theme:e,classGroups:t}=n,i={nextPart:new Map,validators:[]};for(const o in t)Ch(t[o],i,o,e);return i},Ch=(n,e,t,i)=>{n.forEach(o=>{if(typeof o=="string"){const l=o===""?e:Bb(e,o);l.classGroupId=t;return}if(typeof o=="function"){if(gR(o)){Ch(o(i),e,t,i);return}e.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([l,u])=>{Ch(u,Bb(e,l),t,i)})})},Bb=(n,e)=>{let t=n;return e.split(sp).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},gR=n=>n.isThemeGetter,yR=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const o=(l,u)=>{t.set(l,u),e++,e>n&&(e=0,i=t,t=new Map)};return{get(l){let u=t.get(l);if(u!==void 0)return u;if((u=i.get(l))!==void 0)return o(l,u),u},set(l,u){t.has(l)?t.set(l,u):o(l,u)}}},kh="!",Eh=":",bR=Eh.length,vR=n=>{const{prefix:e,experimentalParseClassName:t}=n;let i=o=>{const l=[];let u=0,f=0,d=0,p;for(let S=0;S<o.length;S++){let M=o[S];if(u===0&&f===0){if(M===Eh){l.push(o.slice(d,S)),d=S+bR;continue}if(M==="/"){p=S;continue}}M==="["?u++:M==="]"?u--:M==="("?f++:M===")"&&f--}const g=l.length===0?o:o.substring(d),y=xR(g),b=y!==g,v=p&&p>d?p-d:void 0;return{modifiers:l,hasImportantModifier:b,baseClassName:y,maybePostfixModifierPosition:v}};if(e){const o=e+Eh,l=i;i=u=>u.startsWith(o)?l(u.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(t){const o=i;i=l=>t({className:l,parseClassName:o})}return i},xR=n=>n.endsWith(kh)?n.substring(0,n.length-1):n.startsWith(kh)?n.substring(1):n,SR=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const o=[];let l=[];return i.forEach(u=>{u[0]==="["||e[u]?(o.push(...l.sort(),u),l=[]):l.push(u)}),o.push(...l.sort()),o}},wR=n=>({cache:yR(n.cacheSize),parseClassName:vR(n),sortModifiers:SR(n),...hR(n)}),TR=/\s+/,MR=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:o,sortModifiers:l}=e,u=[],f=n.trim().split(TR);let d="";for(let p=f.length-1;p>=0;p-=1){const g=f[p],{isExternal:y,modifiers:b,hasImportantModifier:v,baseClassName:S,maybePostfixModifierPosition:M}=t(g);if(y){d=g+(d.length>0?" "+d:d);continue}let C=!!M,_=i(C?S.substring(0,M):S);if(!_){if(!C){d=g+(d.length>0?" "+d:d);continue}if(_=i(S),!_){d=g+(d.length>0?" "+d:d);continue}C=!1}const $=l(b).join(":"),U=v?$+kh:$,J=U+_;if(u.includes(J))continue;u.push(J);const I=o(_,C);for(let R=0;R<I.length;++R){const H=I[R];u.push(U+H)}d=g+(d.length>0?" "+d:d)}return d};function CR(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Zx(e))&&(i&&(i+=" "),i+=t);return i}const Zx=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=Zx(n[i]))&&(t&&(t+=" "),t+=e);return t};function kR(n,...e){let t,i,o,l=u;function u(d){const p=e.reduce((g,y)=>y(g),n());return t=wR(p),i=t.cache.get,o=t.cache.set,l=f,f(d)}function f(d){const p=i(d);if(p)return p;const g=MR(d,t);return o(d,g),g}return function(){return l(CR.apply(null,arguments))}}const vt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},Wx=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,e1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ER=/^\d+\/\d+$/,AR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,OR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,NR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,RR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,DR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,eo=n=>ER.test(n),Oe=n=>!!n&&!Number.isNaN(Number(n)),Wr=n=>!!n&&Number.isInteger(Number(n)),jb=n=>n.endsWith("%")&&Oe(n.slice(0,-1)),ei=n=>AR.test(n),zR=()=>!0,_R=n=>OR.test(n)&&!NR.test(n),op=()=>!1,BR=n=>RR.test(n),jR=n=>DR.test(n),LR=n=>!le(n)&&!ae(n),qR=n=>yo(n,r1,op),le=n=>Wx.test(n),Pi=n=>yo(n,i1,_R),Xd=n=>yo(n,KR,Oe),VR=n=>yo(n,t1,op),UR=n=>yo(n,n1,jR),IR=n=>yo(n,op,BR),ae=n=>e1.test(n),bl=n=>bo(n,i1),HR=n=>bo(n,JR),$R=n=>bo(n,t1),PR=n=>bo(n,r1),QR=n=>bo(n,n1),FR=n=>bo(n,XR,!0),yo=(n,e,t)=>{const i=Wx.exec(n);return i?i[1]?e(i[1]):t(i[2]):!1},bo=(n,e,t=!1)=>{const i=e1.exec(n);return i?i[1]?e(i[1]):t:!1},t1=n=>n==="position",GR=new Set(["image","url"]),n1=n=>GR.has(n),YR=new Set(["length","size","percentage"]),r1=n=>YR.has(n),i1=n=>n==="length",KR=n=>n==="number",JR=n=>n==="family-name",XR=n=>n==="shadow",ZR=()=>{const n=vt("color"),e=vt("font"),t=vt("text"),i=vt("font-weight"),o=vt("tracking"),l=vt("leading"),u=vt("breakpoint"),f=vt("container"),d=vt("spacing"),p=vt("radius"),g=vt("shadow"),y=vt("inset-shadow"),b=vt("drop-shadow"),v=vt("blur"),S=vt("perspective"),M=vt("aspect"),C=vt("ease"),_=vt("animate"),$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],R=()=>[ae,le,d],H=()=>[eo,"full","auto",...R()],te=()=>[Wr,"none","subgrid",ae,le],se=()=>["auto",{span:["full",Wr,ae,le]},Wr,ae,le],ze=()=>[Wr,"auto",ae,le],_e=()=>["auto","min","max","fr",ae,le],Re=()=>["start","end","center","between","around","evenly","stretch","baseline"],ge=()=>["start","end","center","stretch"],ye=()=>["auto",...R()],ne=()=>[eo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],O=()=>[n,ae,le],X=()=>[jb,bl,Pi],W=()=>["","none","full",p,ae,le],ce=()=>["",Oe,bl,Pi],E=()=>["solid","dashed","dotted","double"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Y=()=>["","none",v,ae,le],N=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ae,le],G=()=>["none",Oe,ae,le],ie=()=>["none",Oe,ae,le],ee=()=>[Oe,ae,le],Ae=()=>[eo,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ei],breakpoint:[ei],color:[zR],container:[ei],"drop-shadow":[ei],ease:["in","out","in-out"],font:[LR],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ei],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ei],shadow:[ei],spacing:["px",Oe],text:[ei],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",eo,le,ae,M]}],container:["container"],columns:[{columns:[Oe,le,ae,f]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...U(),le,ae]}],overflow:[{overflow:J()}],"overflow-x":[{"overflow-x":J()}],"overflow-y":[{"overflow-y":J()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:H()}],"inset-x":[{"inset-x":H()}],"inset-y":[{"inset-y":H()}],start:[{start:H()}],end:[{end:H()}],top:[{top:H()}],right:[{right:H()}],bottom:[{bottom:H()}],left:[{left:H()}],visibility:["visible","invisible","collapse"],z:[{z:[Wr,"auto",ae,le]}],basis:[{basis:[eo,"full","auto",f,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Oe,eo,"auto","initial","none",le]}],grow:[{grow:["",Oe,ae,le]}],shrink:[{shrink:["",Oe,ae,le]}],order:[{order:[Wr,"first","last","none",ae,le]}],"grid-cols":[{"grid-cols":te()}],"col-start-end":[{col:se()}],"col-start":[{"col-start":ze()}],"col-end":[{"col-end":ze()}],"grid-rows":[{"grid-rows":te()}],"row-start-end":[{row:se()}],"row-start":[{"row-start":ze()}],"row-end":[{"row-end":ze()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":_e()}],"auto-rows":[{"auto-rows":_e()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...Re(),"normal"]}],"justify-items":[{"justify-items":[...ge(),"normal"]}],"justify-self":[{"justify-self":["auto",...ge()]}],"align-content":[{content:["normal",...Re()]}],"align-items":[{items:[...ge(),"baseline"]}],"align-self":[{self:["auto",...ge(),"baseline"]}],"place-content":[{"place-content":Re()}],"place-items":[{"place-items":[...ge(),"baseline"]}],"place-self":[{"place-self":["auto",...ge()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:ye()}],mx:[{mx:ye()}],my:[{my:ye()}],ms:[{ms:ye()}],me:[{me:ye()}],mt:[{mt:ye()}],mr:[{mr:ye()}],mb:[{mb:ye()}],ml:[{ml:ye()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:ne()}],w:[{w:[f,"screen",...ne()]}],"min-w":[{"min-w":[f,"screen","none",...ne()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[u]},...ne()]}],h:[{h:["screen",...ne()]}],"min-h":[{"min-h":["screen","none",...ne()]}],"max-h":[{"max-h":["screen",...ne()]}],"font-size":[{text:["base",t,bl,Pi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,ae,Xd]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",jb,le]}],"font-family":[{font:[HR,le,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,ae,le]}],"line-clamp":[{"line-clamp":[Oe,"none",ae,Xd]}],leading:[{leading:[l,...R()]}],"list-image":[{"list-image":["none",ae,le]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ae,le]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...E(),"wavy"]}],"text-decoration-thickness":[{decoration:[Oe,"from-font","auto",ae,Pi]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[Oe,"auto",ae,le]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ae,le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ae,le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...U(),$R,VR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",PR,qR]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Wr,ae,le],radial:["",ae,le],conic:[Wr,ae,le]},QR,UR]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:W()}],"rounded-s":[{"rounded-s":W()}],"rounded-e":[{"rounded-e":W()}],"rounded-t":[{"rounded-t":W()}],"rounded-r":[{"rounded-r":W()}],"rounded-b":[{"rounded-b":W()}],"rounded-l":[{"rounded-l":W()}],"rounded-ss":[{"rounded-ss":W()}],"rounded-se":[{"rounded-se":W()}],"rounded-ee":[{"rounded-ee":W()}],"rounded-es":[{"rounded-es":W()}],"rounded-tl":[{"rounded-tl":W()}],"rounded-tr":[{"rounded-tr":W()}],"rounded-br":[{"rounded-br":W()}],"rounded-bl":[{"rounded-bl":W()}],"border-w":[{border:ce()}],"border-w-x":[{"border-x":ce()}],"border-w-y":[{"border-y":ce()}],"border-w-s":[{"border-s":ce()}],"border-w-e":[{"border-e":ce()}],"border-w-t":[{"border-t":ce()}],"border-w-r":[{"border-r":ce()}],"border-w-b":[{"border-b":ce()}],"border-w-l":[{"border-l":ce()}],"divide-x":[{"divide-x":ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...E(),"hidden","none"]}],"divide-style":[{divide:[...E(),"hidden","none"]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:[...E(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Oe,ae,le]}],"outline-w":[{outline:["",Oe,bl,Pi]}],"outline-color":[{outline:[n]}],shadow:[{shadow:["","none",g,FR,IR]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":["none",ae,le,y]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[Oe,Pi]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":ce()}],"inset-ring-color":[{"inset-ring":O()}],opacity:[{opacity:[Oe,ae,le]}],"mix-blend":[{"mix-blend":[...V(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":V()}],filter:[{filter:["","none",ae,le]}],blur:[{blur:Y()}],brightness:[{brightness:[Oe,ae,le]}],contrast:[{contrast:[Oe,ae,le]}],"drop-shadow":[{"drop-shadow":["","none",b,ae,le]}],grayscale:[{grayscale:["",Oe,ae,le]}],"hue-rotate":[{"hue-rotate":[Oe,ae,le]}],invert:[{invert:["",Oe,ae,le]}],saturate:[{saturate:[Oe,ae,le]}],sepia:[{sepia:["",Oe,ae,le]}],"backdrop-filter":[{"backdrop-filter":["","none",ae,le]}],"backdrop-blur":[{"backdrop-blur":Y()}],"backdrop-brightness":[{"backdrop-brightness":[Oe,ae,le]}],"backdrop-contrast":[{"backdrop-contrast":[Oe,ae,le]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Oe,ae,le]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Oe,ae,le]}],"backdrop-invert":[{"backdrop-invert":["",Oe,ae,le]}],"backdrop-opacity":[{"backdrop-opacity":[Oe,ae,le]}],"backdrop-saturate":[{"backdrop-saturate":[Oe,ae,le]}],"backdrop-sepia":[{"backdrop-sepia":["",Oe,ae,le]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ae,le]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Oe,"initial",ae,le]}],ease:[{ease:["linear","initial",C,ae,le]}],delay:[{delay:[Oe,ae,le]}],animate:[{animate:["none",_,ae,le]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,ae,le]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:G()}],"rotate-x":[{"rotate-x":G()}],"rotate-y":[{"rotate-y":G()}],"rotate-z":[{"rotate-z":G()}],scale:[{scale:ie()}],"scale-x":[{"scale-x":ie()}],"scale-y":[{"scale-y":ie()}],"scale-z":[{"scale-z":ie()}],"scale-3d":["scale-3d"],skew:[{skew:ee()}],"skew-x":[{"skew-x":ee()}],"skew-y":[{"skew-y":ee()}],transform:[{transform:[ae,le,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ae()}],"translate-x":[{"translate-x":Ae()}],"translate-y":[{"translate-y":Ae()}],"translate-z":[{"translate-z":Ae()}],"translate-none":["translate-none"],accent:[{accent:O()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ae,le]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ae,le]}],fill:[{fill:["none",...O()]}],"stroke-w":[{stroke:[Oe,bl,Pi,Xd]}],stroke:[{stroke:["none",...O()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},WR=kR(ZR);function s1(...n){return WR(dR(n))}const e2=["Friend","Partner","Family","Parent","Former Partner","Colleague","School"];async function t2(n,e=256){const t=document.createElement("canvas");t.width=e,t.height=e;const i=t.getContext("2d");let o=0;for(let p=0;p<n.length;p++)o+=n.charCodeAt(p);const l=()=>Math.sin(o++)*1e4%1,u=Math.floor(l()*360),f=i.createRadialGradient(e/2,e/2,0,e/2,e/2,e);f.addColorStop(0,`hsl(${u}, 70%, 60%)`),f.addColorStop(1,`hsl(${(u+60)%360}, 70%, 35%)`),i.fillStyle=f,i.fillRect(0,0,e,e);const d=l()>.5?"":"";return i.font=`${e*.6}px serif`,i.textAlign="center",i.textBaseline="middle",i.fillText(d,e/2,e/2),new Promise(p=>t.toBlob(g=>p(g),"image/png"))}const n2=()=>T.jsx("div",{className:"text-white/90 leading-relaxed",children:T.jsx("p",{children:"We're honoured you're here to celebrate Emily. This gentle guide will set up your profile while the background settles in."})}),r2=({data:n,onChange:e})=>T.jsxs("div",{className:"space-y-3",children:[T.jsx("label",{className:"text-sm text-white/80",children:"Your full name"}),T.jsx("input",{value:n.name,onChange:t=>e("name",t.target.value),className:"w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 focus:outline-none focus:ring-2 focus:ring-emerald-400 placeholder-white/50",placeholder:"Enter your name"})]}),i2=({data:n,onChange:e})=>T.jsxs("div",{className:"space-y-3",children:[T.jsx("label",{className:"text-sm text-white/80",children:"Select the relationship that best describes you"}),T.jsx("div",{className:"flex flex-wrap gap-2",children:e2.map(t=>T.jsx("button",{type:"button",onClick:()=>e("relationship",t),className:s1("px-3 py-1.5 rounded-full border text-sm",n.relationship===t?"bg-emerald-500/90 border-emerald-300 text-white":"bg-white/10 border-white/20 text-white/90 hover:bg-white/15"),children:t},t))})]}),Zd=({data:n,onChange:e,field:t,label:i,placeholder:o})=>T.jsxs("div",{className:"space-y-3",children:[T.jsx("label",{className:"text-sm text-white/80",children:i}),T.jsx("textarea",{value:n[t],onChange:l=>e(t,l.target.value),rows:5,className:"w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 focus:outline-none focus:ring-2 focus:ring-emerald-400 placeholder-white/50",placeholder:o})]}),s2=({avatarUrl:n,onGenerateAvatar:e,working:t})=>T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[minmax(0,1fr)_280px] gap-6 items-center",children:[T.jsxs("div",{className:"order-2 md:order-1",children:[T.jsx("p",{className:"text-white/90 mb-3",children:"We've prepared a majestic mermaid portrait as your profile picture. You can regenerate it or keep this one."}),T.jsx("div",{className:"flex gap-3",children:T.jsx("button",{type:"button",onClick:e,className:"modern-primary-btn",disabled:t,children:t?"Generating":"Regenerate"})})]}),T.jsx("div",{className:"order-1 md:order-2",children:T.jsx("div",{className:"w-64 h-64 rounded-2xl overflow-hidden bg-black/30 border border-white/20 shadow-lg mx-auto",children:n?T.jsx("img",{src:n,alt:"Generated mermaid avatar",className:"w-full h-full object-cover"}):T.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/60",children:"No preview yet"})})})]}),xu=[{id:"welcome",title:"Welcome  and thank you for being here.",component:n2,validate:()=>!0},{id:"name",title:"What is your name?",component:r2,validate:n=>!!n.name.trim()},{id:"relationship",title:"How did you know Emily?",component:i2,validate:n=>!!n.relationship},{id:"memory",title:"What is your favourite memory of her?",component:n=>T.jsx(Zd,{...n,field:"memory",label:"Share a favourite memory",placeholder:"Write a few lines",minLength:10}),validate:n=>n.memory.trim().length>=10},{id:"miss",title:"What do you miss most?",component:n=>T.jsx(Zd,{...n,field:"miss",label:"What do you miss most?",placeholder:"Write from the heart",minLength:3}),validate:n=>n.miss.trim().length>=3},{id:"thankful",title:"What are you thankful for?",component:n=>T.jsx(Zd,{...n,field:"thankful",label:"What are you thankful for?",placeholder:"Share your gratitude",minLength:3}),validate:n=>n.thankful.trim().length>=3},{id:"avatar",title:"A majestic mermaid  your profile picture",component:s2,validate:()=>!0}];function o2({onComplete:n}){const[e,t]=q.useState(0),[i,o]=q.useState(!1),[l,u]=q.useState({name:"",relationship:"",memory:"",miss:"",thankful:""}),[f,d]=q.useState(null),[p,g]=q.useState(null),y=ht(De.profiles.generateUploadUrl),b=ht(De.profiles.update),v=ht(De.profiles.updatePicture),S=xu[e],M=S.id==="avatar",C=S.validate(l)&&(!M||!!p),_=q.useCallback((I,R)=>{u(H=>({...H,[I]:R}))},[]),$=q.useCallback(async()=>{o(!0);try{const I=[l.name||"Friend",l.relationship||"Friend",l.memory.slice(0,24),l.miss.slice(0,24),l.thankful.slice(0,24)].join("|"),R=await t2(I||"emerald-palace"),H=URL.createObjectURL(R);f&&URL.revokeObjectURL(f),d(H),g(R)}catch(I){console.error(I),Pe.error("Could not generate an avatar. Please try again.")}finally{o(!1)}},[l,f]);q.useEffect(()=>{S.id==="avatar"&&!p&&!i&&$()},[S.id,p,i,$]);const U=async()=>{if(C){if(S.id!=="avatar"){t(I=>Math.min(I+1,xu.length-1));return}if(!l.name.trim()||!l.relationship){Pe.error("Please provide your name and relationship."),t(xu.findIndex(I=>I.id==="name"));return}if(!p){Pe.error("Please generate an avatar.");return}o(!0);try{await b({name:l.name.trim(),relationship:l.relationship});const I=await y(),R=await fetch(I,{method:"POST",headers:{"Content-Type":"image/png"},body:p});if(!R.ok)throw new Error("Image upload failed");const{storageId:H}=await R.json();await v({storageId:H}),Pe.success("Welcome  your profile is ready!"),n()}catch(I){console.error(I),Pe.error("Something went wrong onboarding. Please try again.")}finally{o(!1)}}},J=()=>t(I=>Math.max(I-1,0));return T.jsxs("div",{className:"max-w-3xl mx-auto mt-6 p-6 rounded-2xl glass-elevated text-white shadow-lg",children:[T.jsx("div",{className:"mb-6 flex items-center gap-2",children:xu.map((I,R)=>T.jsx("div",{className:s1("h-1.5 rounded-full transition-all flex-1",R<=e?"bg-emerald-400":"bg-white/20"),"aria-hidden":!0},I.id))}),T.jsx("h1",{className:"text-2xl font-semibold mb-2",children:S.title}),S.subtitle&&T.jsx("p",{className:"text-sm text-white/80 mb-4",children:S.subtitle}),T.jsx(S.component,{data:l,onChange:_,onGenerateAvatar:()=>void $(),avatarUrl:f,working:i}),T.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[T.jsx("button",{type:"button",onClick:J,disabled:e===0||i,className:"px-4 py-2 rounded-xl bg-white/10 border border-white/20 text-white/90 hover:bg-white/15 disabled:opacity-50",children:"Back"}),T.jsx("button",{type:"button",onClick:()=>void U(),disabled:!C||i,className:"modern-primary-btn",children:M?i?"Setting up":"Finish":"Next"})]})]})}const l2=["Friend","Partner","Family","Parent","Former Partner","Colleague","School"];function a2(){const n=Dn(De.auth.loggedInUser),e=Dn(De.profiles.getCurrentProfile),t=ht(De.profiles.update),i=ht(De.profiles.updatePicture),o=ht(De.profiles.generateUploadUrl),[l,u]=q.useState(!1),[f,d]=q.useState(""),[p,g]=q.useState("Friend");if(q.useEffect(()=>{e&&(d(e.name),g(e.relationship))},[e]),!n)return null;if(!e)return T.jsx(o2,{onComplete:()=>{}});async function y(v){if(v.preventDefault(),!!f)try{await t({name:f,relationship:p}),Pe.success("Profile updated successfully!")}catch(S){Pe.error("Failed to update profile"),console.error(S)}}async function b(v){const S=v.target.files?.[0];if(S)try{if(!e?.name){Pe.error("Please enter your name and relationship to Emily and click save first. Then retry uploading a profile picture.");return}u(!0);const M=await o(),C=await fetch(M,{method:"POST",headers:{"Content-Type":S.type},body:S});if(!C.ok)throw new Error("Failed to upload image");const{storageId:_}=await C.json();await i({storageId:_}),Pe.success("Profile picture updated!")}catch(M){Pe.error("Failed to update profile picture"),console.error(M)}finally{u(!1)}}return T.jsxs("div",{className:"max-w-3xl mx-auto p-6 glass-elevated rounded-2xl text-white/95 shadow-lg",children:[T.jsxs("div",{className:"mb-12 text-center",children:[T.jsx("h1",{className:"text-3xl font-bold mb-2",children:e?.name?`Welcome, ${e.name}!`:"Complete Your Profile"}),T.jsx("p",{className:"text-white/80",children:e?.name?`You're connected as a ${e.relationship.toLowerCase()} of Emily.`:"Tell us about yourself and your connection to Emily."})]}),T.jsxs("form",{onSubmit:v=>{y(v)},className:"space-y-8",children:[T.jsxs("div",{children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Profile Picture"}),T.jsxs("div",{className:"flex items-center gap-6",children:[T.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gray-100",children:e?.pictureUrl?T.jsx("img",{src:e.pictureUrl,alt:"Profile",className:"w-full h-full object-cover"}):T.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No Image"})}),T.jsxs("label",{className:"bg-emerald-600 text-white px-4 py-2 rounded cursor-pointer hover:bg-emerald-700",children:[l?"Uploading...":"Upload Picture",T.jsx("input",{type:"file",accept:"image/*",onChange:v=>{b(v)},disabled:l,className:"hidden"})]})]})]}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Your Name"}),T.jsx("input",{type:"text",value:f,onChange:v=>d(v.target.value),placeholder:"Enter your name",className:"w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-emerald-400",required:!0})]}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Relationship to Emily"}),T.jsx("select",{value:p,onChange:v=>g(v.target.value),className:"w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400",children:l2.map(v=>T.jsx("option",{value:v,children:v},v))})]}),T.jsx("button",{type:"submit",className:"modern-primary-btn",children:"Save Profile"})]})]})}const o1=q.createContext(null);function u2(n){return`/videos/${encodeURIComponent(n)}`}function c2(){return["CNCO - Reggaeton Lento (Bailemos).mp4","Caroline Polachek - Ocean of Tears.mp4","Chloe x Halle - Do It .mp4","FKA twigs - thank you song.mp4","Fleetwood Mac - Landslide (Live).mp4","Imogen Heap - Goodnight and Go.mp4","Jimmy Eat World - Sweetness.mp4","JoJo - Leave (Get Out).mp4","JoJo - Too Little Too Late.mp4","Julian Casablancas+The Voidz - Human Sadness.mp4","LANA DEL REY - CARMEN.mp4","LCD Soundsystem - american dream.mp4","Mazzy Star - Fade Into You.mp4","Michelle Branch - Everywhere.mp4","Natasha Bedingfield - Unwritten.mp4","Paris Hilton - Stars Are Blind.mp4","Rina Sawayama - Hurricanes.mp4","The Strokes - Automatic Stop Live Lollapalooza.mp4","The Veronicas - Untouched.mp4","Tinashe - Bouncin.mp4"].map(e=>({name:e,url:u2(e)}))}const wr={volume:"ep:bgVideoVolume",muted:"ep:bgVideoMuted",index:"ep:bgVideoIndex",time:"ep:bgVideoTime"};function f2({children:n}){const e=q.useMemo(()=>c2(),[]),[t,i]=q.useState(()=>{try{const H=localStorage.getItem(wr.index),te=H?Number(H):0;return Number.isFinite(te)&&te>=0&&te<e.length?te:0}catch{return 0}}),[o,l]=q.useState(()=>{try{const H=localStorage.getItem(wr.time),te=H?Number(H):0;return Number.isFinite(te)&&te>=0?te:0}catch{return 0}}),[u,f]=q.useState(()=>{try{const H=localStorage.getItem(wr.muted);return H===null?!0:H==="true"}catch{return!0}}),[d,p]=q.useState(()=>{try{const H=localStorage.getItem(wr.volume),te=H?Number(H):.5;return Number.isFinite(te)?Math.min(1,Math.max(0,te)):.5}catch{return .5}}),[g,y]=q.useState(!1),b=q.useRef(null),v=q.useCallback(H=>{b.current=H,H&&(H.applyState({muted:u,volume:d}),g?H.play():H.pause(),o>0&&H.seek(o))},[o,g,u,d]),S=q.useCallback(H=>{const te=(H+e.length)%e.length;i(te);try{localStorage.setItem(wr.index,String(te))}catch{}l(0);try{localStorage.setItem(wr.time,"0")}catch{}},[e.length]),M=q.useCallback(H=>{const te=Math.max(0,H||0);l(te);try{localStorage.setItem(wr.time,String(te))}catch{}},[]),C=q.useCallback(H=>{f(H);try{localStorage.setItem(wr.muted,H?"true":"false")}catch{}b.current?.applyState({muted:H})},[]),_=q.useCallback(H=>{const te=Math.min(1,Math.max(0,H));p(te);try{localStorage.setItem(wr.volume,String(te))}catch{}b.current?.applyState({volume:te})},[]),$=q.useCallback(()=>{y(!0),b.current?.play()},[]),U=q.useCallback(()=>{y(!1),b.current?.pause()},[]),J=q.useCallback(()=>{S(t+1)},[t,S]),I=q.useCallback(()=>{S(t-1)},[t,S]),R={playlist:e,currentIndex:t,setIndex:S,currentTime:o,setCurrentTime:M,isPlaying:g,play:$,pause:U,muted:u,setMuted:C,volume:d,setVolume:_,next:J,prev:I,registerDomControls:v};return T.jsx(o1.Provider,{value:R,children:n})}function l1(){const n=q.useContext(o1);if(!n)throw new Error("useVideo must be used within a VideoProvider");return n}function d2({filename:n}){const{isPlaying:e,play:t,pause:i,muted:o,setMuted:l,volume:u,setVolume:f}=l1(),d=()=>{e?i():t()};return T.jsxs("div",{className:"ep-bg-controls",role:"region","aria-label":"Background video controls",children:[T.jsx("div",{className:"ep-bg-filename","aria-live":"polite",title:n,children:T.jsxs("span",{className:"ep-bg-marquee",children:[n,""]})}),T.jsx("button",{type:"button",className:"ep-bg-btn","aria-label":e?"Pause background video":"Play background video",onClick:d,children:e?"":""}),T.jsx("button",{type:"button",className:"ep-bg-btn","aria-label":o?"Unmute background video":"Mute background video",onClick:()=>l(!o),children:o?"":""}),T.jsx("input",{className:"ep-bg-volume",type:"range",min:0,max:1,step:.01,"aria-label":"Background video volume",value:o?0:u,onChange:p=>{const g=parseFloat(p.target.value);f(g),g>0&&o&&l(!1)}})]})}function h2(){try{return!!(navigator.connection||navigator.mozConnection||navigator.webkitConnection)?.saveData}catch{return!1}}function p2(){const{playlist:n,currentIndex:e,setIndex:t,isPlaying:i,play:o,pause:l,muted:u,volume:f,currentTime:d,setCurrentTime:p,registerDomControls:g}=l1(),{isAuthenticated:y}=Ul(),b=q.useRef(null),v=q.useRef(null),S=q.useRef(null),[M,C]=q.useState(!1),[_,$]=q.useState(0),U=q.useMemo(h2,[]),J=n[e]?.url??"",I=n[e]?.name??"";return q.useEffect(()=>(g({play:()=>{b.current?.play()},pause:()=>{b.current?.pause()},seek:H=>{if(b.current)try{b.current.currentTime=Math.max(0,H||0)}catch{}},applyState:H=>{b.current&&(typeof H.muted=="boolean"&&(b.current.muted=H.muted),typeof H.volume=="number"&&(b.current.volume=Math.min(1,Math.max(0,H.volume))))}}),()=>g(null)),[g]),q.useEffect(()=>{const R=b.current;if(!R)return;C(!1),R.preload=U?"metadata":"auto",R.src=J,R.muted=u,R.volume=f,R.playsInline=!0;const H=()=>{if(d>0&&Number.isFinite(d))try{R.currentTime=d}catch{}},te=()=>{C(!0),i&&!U&&R.play().catch(()=>{})},se=()=>{t(e+1)},ze=()=>{S.current&&cancelAnimationFrame(S.current),S.current=requestAnimationFrame(()=>{p(R.currentTime||0)})};return R.addEventListener("loadedmetadata",H),R.addEventListener("canplay",te),R.addEventListener("ended",se),R.addEventListener("timeupdate",ze),()=>{R.removeEventListener("loadedmetadata",H),R.removeEventListener("canplay",te),R.removeEventListener("ended",se),R.removeEventListener("timeupdate",ze)}},[J,e,i,u,f,d,p,t,U]),q.useEffect(()=>{const R=(e+1+n.length)%n.length,H=n[R]?.url,te=v.current;!te||!H||(te.preload=U?"none":"metadata",te.src=H,te.load())},[e,n,U]),q.useEffect(()=>{U||!y&&!i&&o()},[y,i,o,U]),q.useEffect(()=>{const R=y&&M?.35:0,H=requestAnimationFrame(()=>$(R));return()=>cancelAnimationFrame(H)},[y,M]),q.useEffect(()=>{const R=b.current;if(R&&y){R.preload=U?"metadata":"auto";try{R.load()}catch{}u&&R.play().catch(()=>{})}},[y,u,U]),T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"ep-bg-video-container",style:{opacity:_},children:T.jsx("video",{ref:b,className:"ep-bg-video-el",src:J,muted:u,playsInline:!0,loop:!1,"aria-hidden":"true"})}),T.jsx("video",{ref:v,style:{display:"none"},"aria-hidden":"true"}),y&&T.jsx(d2,{filename:I})]})}function m2(){const[n,e]=q.useState("profile"),[t,i]=q.useState(!1),{isAuthenticated:o}=Ul(),l=[{id:"gallery",label:"Timeline"},{id:"blog",label:"Forum"},{id:"about",label:"About"}];return q.useEffect(()=>{if(o)try{sessionStorage.getItem("ep:welcomedBack")||(Pe("Welcome back! Visit the Forum to share.",{action:{label:"Open Forum",onClick:()=>e("blog")}}),sessionStorage.setItem("ep:welcomedBack","1"))}catch{}},[o]),T.jsxs(T.Fragment,{children:[T.jsx(p2,{}),T.jsxs("div",{className:"relative z-[1] min-h-screen flex flex-col",children:[T.jsxs("header",{className:"sticky top-0 z-10 glass-elevated text-white p-4",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("img",{src:"/logo.svg",alt:"Emerald Palace",className:"w-8 h-8"}),T.jsx("h2",{className:"text-2xl font-semibold",children:"Emerald Palace"})]}),T.jsx("nav",{className:"hidden @[600px]:flex gap-2 items-center",children:l.map(u=>T.jsx("button",{onClick:()=>e(u.id),className:`pill-link ${n===u.id?"bg-white/20":""}`,children:u.label},u.id))}),T.jsx("div",{className:"ml-auto hidden @[600px]:flex items-center gap-3",children:T.jsx(b0,{})}),T.jsxs("button",{onClick:()=>i(!t),className:"@[600px]:hidden ml-auto p-2 hover:bg-white/10 rounded flex items-center gap-2","aria-label":"Toggle menu","aria-expanded":t,"aria-controls":"mobile-navigation",children:[T.jsx("span",{children:"Menu"}),T.jsxs("div",{className:"w-6 h-5 relative flex flex-col justify-between",children:[T.jsx("span",{className:`block h-0.5 w-full bg-white transform transition-transform ${t?"rotate-45 translate-y-2":""}`}),T.jsx("span",{className:`block h-0.5 w-full bg-white transition-opacity ${t?"opacity-0":""}`}),T.jsx("span",{className:`block h-0.5 w-full bg-white transform transition-transform ${t?"-rotate-45 -translate-y-2":""}`})]})]})]}),T.jsxs("nav",{id:"mobile-navigation",className:`${t?"flex":"hidden"} @[600px]:hidden flex-col gap-2 mt-4`,children:[l.map(u=>T.jsx("button",{onClick:()=>{e(u.id),i(!1)},className:`pill-link ${n===u.id?"bg-white/20":""}`,children:u.label},u.id)),T.jsx("div",{className:"pt-2 mt-2 border-t border-white/15",children:T.jsx("div",{className:"px-1 py-2",children:T.jsx(b0,{})})})]})]}),T.jsxs("main",{className:"flex-1 p-8",children:[T.jsx(sM,{children:T.jsxs("div",{className:"max-w-md mx-auto",children:[T.jsx("div",{className:"flex justify-center mb-8",children:T.jsx("img",{src:"/logo.svg",alt:"Emerald Palace",className:"w-20 h-20"})}),T.jsx("h1",{className:"text-4xl font-bold text-center mb-8 text-emerald-800",children:"Welcome to Emerald Palace"}),T.jsx("p",{className:"text-center text-gray-600 mb-8",children:"Save your profile by signing up with an email and make a password. Otherwise, sign in anonymously without an email."}),T.jsx(IM,{})]})}),T.jsxs(iM,{children:[n==="profile"&&T.jsx(a2,{}),n==="gallery"&&T.jsx(QM,{}),n==="blog"&&T.jsx(cR,{}),n==="about"&&T.jsx(fR,{})]})]}),T.jsx(UM,{})]})]})}let Ah=null;try{const n="https://ardent-walrus-494.convex.cloud";Ah=new PT(n)}catch(n){const e=document.getElementById("root");e&&(e.innerText=`App initialization error: ${n?.message??String(n)}`)}Ah&&Mw.createRoot(document.getElementById("root")).render(T.jsx(q.StrictMode,{children:T.jsx(hM,{client:Ah,children:T.jsx(f2,{children:T.jsx(m2,{})})})}));
