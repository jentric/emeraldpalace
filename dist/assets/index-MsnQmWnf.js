(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function cb(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Wf={exports:{}},nl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function Mx(){if(My)return nl;My=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:i,type:r,key:u,ref:o!==void 0?o:null,props:l}}return nl.Fragment=e,nl.jsx=t,nl.jsxs=t,nl}var Ey;function Ex(){return Ey||(Ey=1,Wf.exports=Mx()),Wf.exports}var z=Ex(),ed={exports:{}},pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy;function Cx(){if(Cy)return pe;Cy=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(C){return C===null||typeof C!="object"?null:(C=y&&C[y]||C["@@iterator"],typeof C=="function"?C:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,T={};function E(C,q,Q){this.props=C,this.context=q,this.refs=T,this.updater=Q||S}E.prototype.isReactComponent={},E.prototype.setState=function(C,q){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,q,"setState")},E.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function B(){}B.prototype=E.prototype;function J(C,q,Q){this.props=C,this.context=q,this.refs=T,this.updater=Q||S}var K=J.prototype=new B;K.constructor=J,x(K,E.prototype),K.isPureReactComponent=!0;var ne=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},te=Object.prototype.hasOwnProperty;function de(C,q,Q,I,Z,be){return Q=be.ref,{$$typeof:i,type:C,key:q,ref:Q!==void 0?Q:null,props:be}}function ge(C,q){return de(C.type,q,void 0,void 0,void 0,C.props)}function se(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function Ie(C){var q={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(Q){return q[Q]})}var ze=/\/+/g;function Be(C,q){return typeof C=="object"&&C!==null&&C.key!=null?Ie(""+C.key):q.toString(36)}function ye(){}function Me(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(ye,ye):(C.status="pending",C.then(function(q){C.status==="pending"&&(C.status="fulfilled",C.value=q)},function(q){C.status==="pending"&&(C.status="rejected",C.reason=q)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function ie(C,q,Q,I,Z){var be=typeof C;(be==="undefined"||be==="boolean")&&(C=null);var X=!1;if(C===null)X=!0;else switch(be){case"bigint":case"string":case"number":X=!0;break;case"object":switch(C.$$typeof){case i:case e:X=!0;break;case g:return X=C._init,ie(X(C._payload),q,Q,I,Z)}}if(X)return Z=Z(C),X=I===""?"."+Be(C,0):I,ne(Z)?(Q="",X!=null&&(Q=X.replace(ze,"$&/")+"/"),ie(Z,q,Q,"",function(It){return It})):Z!=null&&(se(Z)&&(Z=ge(Z,Q+(Z.key==null||C&&C.key===Z.key?"":(""+Z.key).replace(ze,"$&/")+"/")+X)),q.push(Z)),1;X=0;var nt=I===""?".":I+":";if(ne(C))for(var Ae=0;Ae<C.length;Ae++)I=C[Ae],be=nt+Be(I,Ae),X+=ie(I,q,Q,be,Z);else if(Ae=b(C),typeof Ae=="function")for(C=Ae.call(C),Ae=0;!(I=C.next()).done;)I=I.value,be=nt+Be(I,Ae++),X+=ie(I,q,Q,be,Z);else if(be==="object"){if(typeof C.then=="function")return ie(Me(C),q,Q,I,Z);throw q=String(C),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return X}function O(C,q,Q){if(C==null)return C;var I=[],Z=0;return ie(C,I,"","",function(be){return q.call(Q,be,Z++)}),I}function $(C){if(C._status===-1){var q=C._result;q=q(),q.then(function(Q){(C._status===0||C._status===-1)&&(C._status=1,C._result=Q)},function(Q){(C._status===0||C._status===-1)&&(C._status=2,C._result=Q)}),C._status===-1&&(C._status=0,C._result=q)}if(C._status===1)return C._result.default;throw C._result}var P=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function fe(){}return pe.Children={map:O,forEach:function(C,q,Q){O(C,function(){q.apply(this,arguments)},Q)},count:function(C){var q=0;return O(C,function(){q++}),q},toArray:function(C){return O(C,function(q){return q})||[]},only:function(C){if(!se(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},pe.Component=E,pe.Fragment=t,pe.Profiler=o,pe.PureComponent=J,pe.StrictMode=r,pe.Suspense=d,pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,pe.__COMPILER_RUNTIME={__proto__:null,c:function(C){return Y.H.useMemoCache(C)}},pe.cache=function(C){return function(){return C.apply(null,arguments)}},pe.cloneElement=function(C,q,Q){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var I=x({},C.props),Z=C.key,be=void 0;if(q!=null)for(X in q.ref!==void 0&&(be=void 0),q.key!==void 0&&(Z=""+q.key),q)!te.call(q,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&q.ref===void 0||(I[X]=q[X]);var X=arguments.length-2;if(X===1)I.children=Q;else if(1<X){for(var nt=Array(X),Ae=0;Ae<X;Ae++)nt[Ae]=arguments[Ae+2];I.children=nt}return de(C.type,Z,void 0,void 0,be,I)},pe.createContext=function(C){return C={$$typeof:u,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:l,_context:C},C},pe.createElement=function(C,q,Q){var I,Z={},be=null;if(q!=null)for(I in q.key!==void 0&&(be=""+q.key),q)te.call(q,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(Z[I]=q[I]);var X=arguments.length-2;if(X===1)Z.children=Q;else if(1<X){for(var nt=Array(X),Ae=0;Ae<X;Ae++)nt[Ae]=arguments[Ae+2];Z.children=nt}if(C&&C.defaultProps)for(I in X=C.defaultProps,X)Z[I]===void 0&&(Z[I]=X[I]);return de(C,be,void 0,void 0,null,Z)},pe.createRef=function(){return{current:null}},pe.forwardRef=function(C){return{$$typeof:f,render:C}},pe.isValidElement=se,pe.lazy=function(C){return{$$typeof:g,_payload:{_status:-1,_result:C},_init:$}},pe.memo=function(C,q){return{$$typeof:p,type:C,compare:q===void 0?null:q}},pe.startTransition=function(C){var q=Y.T,Q={};Y.T=Q;try{var I=C(),Z=Y.S;Z!==null&&Z(Q,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(fe,P)}catch(be){P(be)}finally{Y.T=q}},pe.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},pe.use=function(C){return Y.H.use(C)},pe.useActionState=function(C,q,Q){return Y.H.useActionState(C,q,Q)},pe.useCallback=function(C,q){return Y.H.useCallback(C,q)},pe.useContext=function(C){return Y.H.useContext(C)},pe.useDebugValue=function(){},pe.useDeferredValue=function(C,q){return Y.H.useDeferredValue(C,q)},pe.useEffect=function(C,q,Q){var I=Y.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return I.useEffect(C,q)},pe.useId=function(){return Y.H.useId()},pe.useImperativeHandle=function(C,q,Q){return Y.H.useImperativeHandle(C,q,Q)},pe.useInsertionEffect=function(C,q){return Y.H.useInsertionEffect(C,q)},pe.useLayoutEffect=function(C,q){return Y.H.useLayoutEffect(C,q)},pe.useMemo=function(C,q){return Y.H.useMemo(C,q)},pe.useOptimistic=function(C,q){return Y.H.useOptimistic(C,q)},pe.useReducer=function(C,q,Q){return Y.H.useReducer(C,q,Q)},pe.useRef=function(C){return Y.H.useRef(C)},pe.useState=function(C){return Y.H.useState(C)},pe.useSyncExternalStore=function(C,q,Q){return Y.H.useSyncExternalStore(C,q,Q)},pe.useTransition=function(){return Y.H.useTransition()},pe.version="19.1.0",pe}var Ay;function lh(){return Ay||(Ay=1,ed.exports=Cx()),ed.exports}var G=lh();const U=cb(G);var td={exports:{}},il={},nd={exports:{}},id={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function Ax(){return ky||(ky=1,function(i){function e(O,$){var P=O.length;O.push($);e:for(;0<P;){var fe=P-1>>>1,C=O[fe];if(0<o(C,$))O[fe]=$,O[P]=C,P=fe;else break e}}function t(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var $=O[0],P=O.pop();if(P!==$){O[0]=P;e:for(var fe=0,C=O.length,q=C>>>1;fe<q;){var Q=2*(fe+1)-1,I=O[Q],Z=Q+1,be=O[Z];if(0>o(I,P))Z<C&&0>o(be,I)?(O[fe]=be,O[Z]=P,fe=Z):(O[fe]=I,O[Q]=P,fe=Q);else if(Z<C&&0>o(be,P))O[fe]=be,O[Z]=P,fe=Z;else break e}}return $}function o(O,$){var P=O.sortIndex-$.sortIndex;return P!==0?P:O.id-$.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();i.unstable_now=function(){return u.now()-f}}var d=[],p=[],g=1,y=null,b=3,S=!1,x=!1,T=!1,E=!1,B=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function ne(O){for(var $=t(p);$!==null;){if($.callback===null)r(p);else if($.startTime<=O)r(p),$.sortIndex=$.expirationTime,e(d,$);else break;$=t(p)}}function Y(O){if(T=!1,ne(O),!x)if(t(d)!==null)x=!0,te||(te=!0,Be());else{var $=t(p);$!==null&&ie(Y,$.startTime-O)}}var te=!1,de=-1,ge=5,se=-1;function Ie(){return E?!0:!(i.unstable_now()-se<ge)}function ze(){if(E=!1,te){var O=i.unstable_now();se=O;var $=!0;try{e:{x=!1,T&&(T=!1,J(de),de=-1),S=!0;var P=b;try{t:{for(ne(O),y=t(d);y!==null&&!(y.expirationTime>O&&Ie());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,b=y.priorityLevel;var C=fe(y.expirationTime<=O);if(O=i.unstable_now(),typeof C=="function"){y.callback=C,ne(O),$=!0;break t}y===t(d)&&r(d),ne(O)}else r(d);y=t(d)}if(y!==null)$=!0;else{var q=t(p);q!==null&&ie(Y,q.startTime-O),$=!1}}break e}finally{y=null,b=P,S=!1}$=void 0}}finally{$?Be():te=!1}}}var Be;if(typeof K=="function")Be=function(){K(ze)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,Me=ye.port2;ye.port1.onmessage=ze,Be=function(){Me.postMessage(null)}}else Be=function(){B(ze,0)};function ie(O,$){de=B(function(){O(i.unstable_now())},$)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(O){O.callback=null},i.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<O?Math.floor(1e3/O):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(O){switch(b){case 1:case 2:case 3:var $=3;break;default:$=b}var P=b;b=$;try{return O()}finally{b=P}},i.unstable_requestPaint=function(){E=!0},i.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var P=b;b=O;try{return $()}finally{b=P}},i.unstable_scheduleCallback=function(O,$,P){var fe=i.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?fe+P:fe):P=fe,O){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=P+C,O={id:g++,callback:$,priorityLevel:O,startTime:P,expirationTime:C,sortIndex:-1},P>fe?(O.sortIndex=P,e(p,O),t(d)===null&&O===t(p)&&(T?(J(de),de=-1):T=!0,ie(Y,P-fe))):(O.sortIndex=C,e(d,O),x||S||(x=!0,te||(te=!0,Be()))),O},i.unstable_shouldYield=Ie,i.unstable_wrapCallback=function(O){var $=b;return function(){var P=b;b=$;try{return O.apply(this,arguments)}finally{b=P}}}}(id)),id}var Oy;function kx(){return Oy||(Oy=1,nd.exports=Ax()),nd.exports}var rd={exports:{}},At={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny;function Ox(){if(Ny)return At;Ny=1;var i=lh();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(d,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:d,containerInfo:p,implementation:g}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return At.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,At.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(d,p,null,g)},At.flushSync=function(d){var p=u.T,g=r.p;try{if(u.T=null,r.p=2,d)return d()}finally{u.T=p,r.p=g,r.d.f()}},At.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(d,p))},At.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},At.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,y=f(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?r.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:S}):g==="script"&&r.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},At.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=f(p.as,p.crossOrigin);r.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(d)},At.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=f(g,p.crossOrigin);r.d.L(d,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},At.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=f(p.as,p.crossOrigin);r.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(d)},At.requestFormReset=function(d){r.d.r(d)},At.unstable_batchedUpdates=function(d,p){return d(p)},At.useFormState=function(d,p,g){return u.H.useFormState(d,p,g)},At.useFormStatus=function(){return u.H.useHostTransitionStatus()},At.version="19.1.0",At}var Ry;function fb(){if(Ry)return rd.exports;Ry=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),rd.exports=Ox(),rd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function Nx(){if(Dy)return il;Dy=1;var i=kx(),e=lh(),t=fb();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(l(n)!==n)throw Error(r(188))}function d(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,c=s;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return f(h),n;if(m===c)return f(h),s;m=m.sibling}throw Error(r(188))}if(a.return!==c.return)a=h,c=m;else{for(var v=!1,w=h.child;w;){if(w===a){v=!0,a=h,c=m;break}if(w===c){v=!0,c=h,a=m;break}w=w.sibling}if(!v){for(w=m.child;w;){if(w===a){v=!0,a=m,c=h;break}if(w===c){v=!0,c=m,a=h;break}w=w.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==c)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function p(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=p(n),s!==null)return s;n=n.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),J=Symbol.for("react.consumer"),K=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),Ie=Symbol.for("react.memo_cache_sentinel"),ze=Symbol.iterator;function Be(n){return n===null||typeof n!="object"?null:(n=ze&&n[ze]||n["@@iterator"],typeof n=="function"?n:null)}var ye=Symbol.for("react.client.reference");function Me(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ye?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case E:return"Profiler";case T:return"StrictMode";case Y:return"Suspense";case te:return"SuspenseList";case se:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case S:return"Portal";case K:return(n.displayName||"Context")+".Provider";case J:return(n._context.displayName||"Context")+".Consumer";case ne:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case de:return s=n.displayName||null,s!==null?s:Me(n.type)||"Memo";case ge:s=n._payload,n=n._init;try{return Me(n(s))}catch{}}return null}var ie=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P={pending:!1,data:null,method:null,action:null},fe=[],C=-1;function q(n){return{current:n}}function Q(n){0>C||(n.current=fe[C],fe[C]=null,C--)}function I(n,s){C++,fe[C]=n.current,n.current=s}var Z=q(null),be=q(null),X=q(null),nt=q(null);function Ae(n,s){switch(I(X,s),I(be,n),I(Z,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Zg(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Zg(s),n=Wg(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Q(Z),I(Z,n)}function It(){Q(Z),Q(be),Q(X)}function Kn(n){n.memoizedState!==null&&I(nt,n);var s=Z.current,a=Wg(s,n.type);s!==a&&(I(be,n),I(Z,a))}function Kr(n){be.current===n&&(Q(Z),Q(be)),nt.current===n&&(Q(nt),Jo._currentValue=P)}var Xr=Object.prototype.hasOwnProperty,ro=i.unstable_scheduleCallback,ur=i.unstable_cancelCallback,Iu=i.unstable_shouldYield,Nl=i.unstable_requestPaint,Et=i.unstable_now,Rl=i.unstable_getCurrentPriorityLevel,an=i.unstable_ImmediatePriority,Dl=i.unstable_UserBlockingPriority,Jr=i.unstable_NormalPriority,_t=i.unstable_LowPriority,Xn=i.unstable_IdlePriority,$u=i.log,Qu=i.unstable_setDisableYieldValue,zn=null,zt=null;function En(n){if(typeof $u=="function"&&Qu(n),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(zn,n)}catch{}}var gt=Math.clz32?Math.clz32:Si,vi=Math.log,_l=Math.LN2;function Si(n){return n>>>=0,n===0?32:31-(vi(n)/_l|0)|0}var Zr=256,Wr=4194304;function Bn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function cr(n,s,a){var c=n.pendingLanes;if(c===0)return 0;var h=0,m=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var w=c&134217727;return w!==0?(c=w&~m,c!==0?h=Bn(c):(v&=w,v!==0?h=Bn(v):a||(a=w&~n,a!==0&&(h=Bn(a))))):(w=c&~m,w!==0?h=Bn(w):v!==0?h=Bn(v):a||(a=c&~n,a!==0&&(h=Bn(a)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:h}function fr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function so(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cn(){var n=Zr;return Zr<<=1,(Zr&4194048)===0&&(Zr=256),n}function zl(){var n=Wr;return Wr<<=1,(Wr&62914560)===0&&(Wr=4194304),n}function oo(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function xi(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Bl(n,s,a,c,h,m){var v=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var w=n.entanglements,M=n.expirationTimes,R=n.hiddenUpdates;for(a=v&~a;0<a;){var L=31-gt(a),j=1<<L;w[L]=0,M[L]=-1;var D=R[L];if(D!==null)for(R[L]=null,L=0;L<D.length;L++){var _=D[L];_!==null&&(_.lane&=-536870913)}a&=~j}c!==0&&he(n,c,0),m!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~s))}function he(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-gt(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|a&4194090}function Pe(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-gt(a),h=1<<c;h&s|n[c]&s&&(n[c]|=s),a&=~h}}function Je(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function yt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function dr(){var n=$.p;return n!==0?n:(n=window.event,n===void 0?32:by(n.type))}function it(n,s){var a=$.p;try{return $.p=n,s()}finally{$.p=a}}var Ge=Math.random().toString(36).slice(2),Fe="__reactFiber$"+Ge,Ve="__reactProps$"+Ge,lt="__reactContainer$"+Ge,es="__reactEvents$"+Ge,Jn="__reactListeners$"+Ge,jh="__reactHandles$"+Ge,Uh="__reactResources$"+Ge,lo="__reactMarker$"+Ge;function Yu(n){delete n[Fe],delete n[Ve],delete n[es],delete n[Jn],delete n[jh]}function ts(n){var s=n[Fe];if(s)return s;for(var a=n.parentNode;a;){if(s=a[lt]||a[Fe]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=iy(n);n!==null;){if(a=n[Fe])return a;n=iy(n)}return s}n=a,a=n.parentNode}return null}function ns(n){if(n=n[Fe]||n[lt]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function ao(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function is(n){var s=n[Uh];return s||(s=n[Uh]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function at(n){n[lo]=!0}var Hh=new Set,Ih={};function hr(n,s){rs(n,s),rs(n+"Capture",s)}function rs(n,s){for(Ih[n]=s,n=0;n<s.length;n++)Hh.add(s[n])}var g1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$h={},Qh={};function y1(n){return Xr.call(Qh,n)?!0:Xr.call($h,n)?!1:g1.test(n)?Qh[n]=!0:($h[n]=!0,!1)}function ql(n,s,a){if(y1(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function Ll(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function Zn(n,s,a,c){if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+c)}}var Pu,Yh;function ss(n){if(Pu===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Pu=s&&s[1]||"",Yh=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pu+n+Yh}var Gu=!1;function Fu(n,s){if(!n||Gu)return"";Gu=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var j=function(){throw Error()};if(Object.defineProperty(j.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(j,[])}catch(_){var D=_}Reflect.construct(n,[],j)}else{try{j.call()}catch(_){D=_}n.call(j.prototype)}}else{try{throw Error()}catch(_){D=_}(j=n())&&typeof j.catch=="function"&&j.catch(function(){})}}catch(_){if(_&&D&&typeof _.stack=="string")return[_.stack,D.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],w=m[1];if(v&&w){var M=v.split(`
`),R=w.split(`
`);for(h=c=0;c<M.length&&!M[c].includes("DetermineComponentFrameRoot");)c++;for(;h<R.length&&!R[h].includes("DetermineComponentFrameRoot");)h++;if(c===M.length||h===R.length)for(c=M.length-1,h=R.length-1;1<=c&&0<=h&&M[c]!==R[h];)h--;for(;1<=c&&0<=h;c--,h--)if(M[c]!==R[h]){if(c!==1||h!==1)do if(c--,h--,0>h||M[c]!==R[h]){var L=`
`+M[c].replace(" at new "," at ");return n.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",n.displayName)),L}while(1<=c&&0<=h);break}}}finally{Gu=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?ss(a):""}function b1(n){switch(n.tag){case 26:case 27:case 5:return ss(n.type);case 16:return ss("Lazy");case 13:return ss("Suspense");case 19:return ss("SuspenseList");case 0:case 15:return Fu(n.type,!1);case 11:return Fu(n.type.render,!1);case 1:return Fu(n.type,!0);case 31:return ss("Activity");default:return""}}function Ph(n){try{var s="";do s+=b1(n),n=n.return;while(n);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function un(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Gh(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function v1(n){var s=Gh(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(v){c=""+v,m.call(this,v)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Vl(n){n._valueTracker||(n._valueTracker=v1(n))}function Fh(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=Gh(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function jl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var S1=/[\n"\\]/g;function cn(n){return n.replace(S1,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ku(n,s,a,c,h,m,v,w){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),s!=null?v==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+un(s)):n.value!==""+un(s)&&(n.value=""+un(s)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),s!=null?Xu(n,v,un(s)):a!=null?Xu(n,v,un(a)):c!=null&&n.removeAttribute("value"),h==null&&m!=null&&(n.defaultChecked=!!m),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+un(w):n.removeAttribute("name")}function Kh(n,s,a,c,h,m,v,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;a=a!=null?""+un(a):"",s=s!=null?""+un(s):a,w||s===n.value||(n.value=s),n.defaultValue=s}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=w?n.checked:!!c,n.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v)}function Xu(n,s,a){s==="number"&&jl(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function ls(n,s,a,c){if(n=n.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=s.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&c&&(n[a].defaultSelected=!0)}else{for(a=""+un(a),s=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function Xh(n,s,a){if(s!=null&&(s=""+un(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+un(a):""}function Jh(n,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(r(92));if(ie(c)){if(1<c.length)throw Error(r(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=un(s),n.defaultValue=a,c=n.textContent,c===a&&c!==""&&c!==null&&(n.value=c)}function as(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var x1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zh(n,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,a):typeof a!="number"||a===0||x1.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function Wh(n,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var h in s)c=s[h],s.hasOwnProperty(h)&&a[h]!==c&&Zh(n,h,c)}else for(var m in s)s.hasOwnProperty(m)&&Zh(n,m,s[m])}function Ju(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),T1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ul(n){return T1.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Zu=null;function Wu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var us=null,cs=null;function ep(n){var s=ns(n);if(s&&(n=s.stateNode)){var a=n[Ve]||null;e:switch(n=s.stateNode,s.type){case"input":if(Ku(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+cn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var h=c[Ve]||null;if(!h)throw Error(r(90));Ku(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===n.form&&Fh(c)}break e;case"textarea":Xh(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&ls(n,!!a.multiple,s,!1)}}}var ec=!1;function tp(n,s,a){if(ec)return n(s,a);ec=!0;try{var c=n(s);return c}finally{if(ec=!1,(us!==null||cs!==null)&&(Ea(),us&&(s=us,n=cs,cs=us=null,ep(s),n)))for(s=0;s<n.length;s++)ep(n[s])}}function uo(n,s){var a=n.stateNode;if(a===null)return null;var c=a[Ve]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tc=!1;if(Wn)try{var co={};Object.defineProperty(co,"passive",{get:function(){tc=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{tc=!1}var wi=null,nc=null,Hl=null;function np(){if(Hl)return Hl;var n,s=nc,a=s.length,c,h="value"in wi?wi.value:wi.textContent,m=h.length;for(n=0;n<a&&s[n]===h[n];n++);var v=a-n;for(c=1;c<=v&&s[a-c]===h[m-c];c++);return Hl=h.slice(n,1<c?1-c:void 0)}function Il(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function $l(){return!0}function ip(){return!1}function $t(n){function s(a,c,h,m,v){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(a=n[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?$l:ip,this.isPropagationStopped=ip,this}return g(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$l)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$l)},persist:function(){},isPersistent:$l}),s}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ql=$t(pr),fo=g({},pr,{view:0,detail:0}),M1=$t(fo),ic,rc,ho,Yl=g({},fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ho&&(ho&&n.type==="mousemove"?(ic=n.screenX-ho.screenX,rc=n.screenY-ho.screenY):rc=ic=0,ho=n),ic)},movementY:function(n){return"movementY"in n?n.movementY:rc}}),rp=$t(Yl),E1=g({},Yl,{dataTransfer:0}),C1=$t(E1),A1=g({},fo,{relatedTarget:0}),sc=$t(A1),k1=g({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),O1=$t(k1),N1=g({},pr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),R1=$t(N1),D1=g({},pr,{data:0}),sp=$t(D1),_1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q1(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=B1[n])?!!s[n]:!1}function oc(){return q1}var L1=g({},fo,{key:function(n){if(n.key){var s=_1[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Il(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?z1[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oc,charCode:function(n){return n.type==="keypress"?Il(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Il(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),V1=$t(L1),j1=g({},Yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),op=$t(j1),U1=g({},fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oc}),H1=$t(U1),I1=g({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),$1=$t(I1),Q1=g({},Yl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Y1=$t(Q1),P1=g({},pr,{newState:0,oldState:0}),G1=$t(P1),F1=[9,13,27,32],lc=Wn&&"CompositionEvent"in window,po=null;Wn&&"documentMode"in document&&(po=document.documentMode);var K1=Wn&&"TextEvent"in window&&!po,lp=Wn&&(!lc||po&&8<po&&11>=po),ap=" ",up=!1;function cp(n,s){switch(n){case"keyup":return F1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fs=!1;function X1(n,s){switch(n){case"compositionend":return fp(s);case"keypress":return s.which!==32?null:(up=!0,ap);case"textInput":return n=s.data,n===ap&&up?null:n;default:return null}}function J1(n,s){if(fs)return n==="compositionend"||!lc&&cp(n,s)?(n=np(),Hl=nc=wi=null,fs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return lp&&s.locale!=="ko"?null:s.data;default:return null}}var Z1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Z1[n.type]:s==="textarea"}function hp(n,s,a,c){us?cs?cs.push(c):cs=[c]:us=c,s=Ra(s,"onChange"),0<s.length&&(a=new Ql("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var mo=null,go=null;function W1(n){Gg(n,0)}function Pl(n){var s=ao(n);if(Fh(s))return n}function pp(n,s){if(n==="change")return s}var mp=!1;if(Wn){var ac;if(Wn){var uc="oninput"in document;if(!uc){var gp=document.createElement("div");gp.setAttribute("oninput","return;"),uc=typeof gp.oninput=="function"}ac=uc}else ac=!1;mp=ac&&(!document.documentMode||9<document.documentMode)}function yp(){mo&&(mo.detachEvent("onpropertychange",bp),go=mo=null)}function bp(n){if(n.propertyName==="value"&&Pl(go)){var s=[];hp(s,go,n,Wu(n)),tp(W1,s)}}function eS(n,s,a){n==="focusin"?(yp(),mo=s,go=a,mo.attachEvent("onpropertychange",bp)):n==="focusout"&&yp()}function tS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Pl(go)}function nS(n,s){if(n==="click")return Pl(s)}function iS(n,s){if(n==="input"||n==="change")return Pl(s)}function rS(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Jt=typeof Object.is=="function"?Object.is:rS;function yo(n,s){if(Jt(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!Xr.call(s,h)||!Jt(n[h],s[h]))return!1}return!0}function vp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Sp(n,s){var a=vp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=vp(a)}}function xp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?xp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function wp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=jl(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=jl(n.document)}return s}function cc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var sS=Wn&&"documentMode"in document&&11>=document.documentMode,ds=null,fc=null,bo=null,dc=!1;function Tp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;dc||ds==null||ds!==jl(c)||(c=ds,"selectionStart"in c&&cc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),bo&&yo(bo,c)||(bo=c,c=Ra(fc,"onSelect"),0<c.length&&(s=new Ql("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=ds)))}function mr(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var hs={animationend:mr("Animation","AnimationEnd"),animationiteration:mr("Animation","AnimationIteration"),animationstart:mr("Animation","AnimationStart"),transitionrun:mr("Transition","TransitionRun"),transitionstart:mr("Transition","TransitionStart"),transitioncancel:mr("Transition","TransitionCancel"),transitionend:mr("Transition","TransitionEnd")},hc={},Mp={};Wn&&(Mp=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function gr(n){if(hc[n])return hc[n];if(!hs[n])return n;var s=hs[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Mp)return hc[n]=s[a];return n}var Ep=gr("animationend"),Cp=gr("animationiteration"),Ap=gr("animationstart"),oS=gr("transitionrun"),lS=gr("transitionstart"),aS=gr("transitioncancel"),kp=gr("transitionend"),Op=new Map,pc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pc.push("scrollEnd");function An(n,s){Op.set(n,s),hr(s,[n])}var Np=new WeakMap;function fn(n,s){if(typeof n=="object"&&n!==null){var a=Np.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Ph(s)},Np.set(n,s),s)}return{value:n,source:s,stack:Ph(s)}}var dn=[],ps=0,mc=0;function Gl(){for(var n=ps,s=mc=ps=0;s<n;){var a=dn[s];dn[s++]=null;var c=dn[s];dn[s++]=null;var h=dn[s];dn[s++]=null;var m=dn[s];if(dn[s++]=null,c!==null&&h!==null){var v=c.pending;v===null?h.next=h:(h.next=v.next,v.next=h),c.pending=h}m!==0&&Rp(a,h,m)}}function Fl(n,s,a,c){dn[ps++]=n,dn[ps++]=s,dn[ps++]=a,dn[ps++]=c,mc|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function gc(n,s,a,c){return Fl(n,s,a,c),Kl(n)}function ms(n,s){return Fl(n,null,null,s),Kl(n)}function Rp(n,s,a){n.lanes|=a;var c=n.alternate;c!==null&&(c.lanes|=a);for(var h=!1,m=n.return;m!==null;)m.childLanes|=a,c=m.alternate,c!==null&&(c.childLanes|=a),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(h=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,h&&s!==null&&(h=31-gt(a),n=m.hiddenUpdates,c=n[h],c===null?n[h]=[s]:c.push(s),s.lane=a|536870912),m):null}function Kl(n){if(50<$o)throw $o=0,Tf=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var gs={};function uS(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(n,s,a,c){return new uS(n,s,a,c)}function yc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ei(n,s){var a=n.alternate;return a===null?(a=Zt(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Dp(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Xl(n,s,a,c,h,m){var v=0;if(c=n,typeof n=="function")yc(n)&&(v=1);else if(typeof n=="string")v=fx(n,a,Z.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case se:return n=Zt(31,a,s,h),n.elementType=se,n.lanes=m,n;case x:return yr(a.children,h,m,s);case T:v=8,h|=24;break;case E:return n=Zt(12,a,s,h|2),n.elementType=E,n.lanes=m,n;case Y:return n=Zt(13,a,s,h),n.elementType=Y,n.lanes=m,n;case te:return n=Zt(19,a,s,h),n.elementType=te,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case B:case K:v=10;break e;case J:v=9;break e;case ne:v=11;break e;case de:v=14;break e;case ge:v=16,c=null;break e}v=29,a=Error(r(130,n===null?"null":typeof n,"")),c=null}return s=Zt(v,a,s,h),s.elementType=n,s.type=c,s.lanes=m,s}function yr(n,s,a,c){return n=Zt(7,n,c,s),n.lanes=a,n}function bc(n,s,a){return n=Zt(6,n,null,s),n.lanes=a,n}function vc(n,s,a){return s=Zt(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var ys=[],bs=0,Jl=null,Zl=0,hn=[],pn=0,br=null,ti=1,ni="";function vr(n,s){ys[bs++]=Zl,ys[bs++]=Jl,Jl=n,Zl=s}function _p(n,s,a){hn[pn++]=ti,hn[pn++]=ni,hn[pn++]=br,br=n;var c=ti;n=ni;var h=32-gt(c)-1;c&=~(1<<h),a+=1;var m=32-gt(s)+h;if(30<m){var v=h-h%5;m=(c&(1<<v)-1).toString(32),c>>=v,h-=v,ti=1<<32-gt(s)+h|a<<h|c,ni=m+n}else ti=1<<m|a<<h|c,ni=n}function Sc(n){n.return!==null&&(vr(n,1),_p(n,1,0))}function xc(n){for(;n===Jl;)Jl=ys[--bs],ys[bs]=null,Zl=ys[--bs],ys[bs]=null;for(;n===br;)br=hn[--pn],hn[pn]=null,ni=hn[--pn],hn[pn]=null,ti=hn[--pn],hn[pn]=null}var Bt=null,$e=null,ke=!1,Sr=null,qn=!1,wc=Error(r(519));function xr(n){var s=Error(r(418,""));throw xo(fn(s,n)),wc}function zp(n){var s=n.stateNode,a=n.type,c=n.memoizedProps;switch(s[Fe]=n,s[Ve]=c,a){case"dialog":Te("cancel",s),Te("close",s);break;case"iframe":case"object":case"embed":Te("load",s);break;case"video":case"audio":for(a=0;a<Yo.length;a++)Te(Yo[a],s);break;case"source":Te("error",s);break;case"img":case"image":case"link":Te("error",s),Te("load",s);break;case"details":Te("toggle",s);break;case"input":Te("invalid",s),Kh(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Vl(s);break;case"select":Te("invalid",s);break;case"textarea":Te("invalid",s),Jh(s,c.value,c.defaultValue,c.children),Vl(s)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||Jg(s.textContent,a)?(c.popover!=null&&(Te("beforetoggle",s),Te("toggle",s)),c.onScroll!=null&&Te("scroll",s),c.onScrollEnd!=null&&Te("scrollend",s),c.onClick!=null&&(s.onclick=Da),s=!0):s=!1,s||xr(n)}function Bp(n){for(Bt=n.return;Bt;)switch(Bt.tag){case 5:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Bt=Bt.return}}function vo(n){if(n!==Bt)return!1;if(!ke)return Bp(n),ke=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||jf(n.type,n.memoizedProps)),a=!a),a&&$e&&xr(n),Bp(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(s===0){$e=On(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;n=n.nextSibling}$e=null}}else s===27?(s=$e,Vi(n.type)?(n=$f,$f=null,$e=n):$e=s):$e=Bt?On(n.stateNode.nextSibling):null;return!0}function So(){$e=Bt=null,ke=!1}function qp(){var n=Sr;return n!==null&&(Pt===null?Pt=n:Pt.push.apply(Pt,n),Sr=null),n}function xo(n){Sr===null?Sr=[n]:Sr.push(n)}var Tc=q(null),wr=null,ii=null;function Ti(n,s,a){I(Tc,s._currentValue),s._currentValue=a}function ri(n){n._currentValue=Tc.current,Q(Tc)}function Mc(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function Ec(n,s,a,c){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var m=h.dependencies;if(m!==null){var v=h.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=h;for(var M=0;M<s.length;M++)if(w.context===s[M]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Mc(m.return,a,n),c||(v=null);break e}m=w.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),Mc(v,a,n),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===n){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function wo(n,s,a,c){n=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var w=h.type;Jt(h.pendingProps.value,v.value)||(n!==null?n.push(w):n=[w])}}else if(h===nt.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(Jo):n=[Jo])}h=h.return}n!==null&&Ec(s,n,a,c),s.flags|=262144}function Wl(n){for(n=n.firstContext;n!==null;){if(!Jt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Tr(n){wr=n,ii=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ct(n){return Lp(wr,n)}function ea(n,s){return wr===null&&Tr(n),Lp(n,s)}function Lp(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ii===null){if(n===null)throw Error(r(308));ii=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ii=ii.next=s;return a}var cS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},fS=i.unstable_scheduleCallback,dS=i.unstable_NormalPriority,rt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cc(){return{controller:new cS,data:new Map,refCount:0}}function To(n){n.refCount--,n.refCount===0&&fS(dS,function(){n.controller.abort()})}var Mo=null,Ac=0,vs=0,Ss=null;function hS(n,s){if(Mo===null){var a=Mo=[];Ac=0,vs=Nf(),Ss={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Ac++,s.then(Vp,Vp),s}function Vp(){if(--Ac===0&&Mo!==null){Ss!==null&&(Ss.status="fulfilled");var n=Mo;Mo=null,vs=0,Ss=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function pS(n,s){var a=[],c={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(c.status="rejected",c.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),c}var jp=O.S;O.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&hS(n,s),jp!==null&&jp(n,s)};var Mr=q(null);function kc(){var n=Mr.current;return n!==null?n:je.pooledCache}function ta(n,s){s===null?I(Mr,Mr.current):I(Mr,s.pool)}function Up(){var n=kc();return n===null?null:{parent:rt._currentValue,pool:n}}var Eo=Error(r(460)),Hp=Error(r(474)),na=Error(r(542)),Oc={then:function(){}};function Ip(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ia(){}function $p(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(ia,ia),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Yp(n),n;default:if(typeof s.status=="string")s.then(ia,ia);else{if(n=je,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=c}},function(c){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Yp(n),n}throw Co=s,Eo}}var Co=null;function Qp(){if(Co===null)throw Error(r(459));var n=Co;return Co=null,n}function Yp(n){if(n===Eo||n===na)throw Error(r(483))}var Mi=!1;function Nc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rc(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ei(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ci(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Oe&2)!==0){var h=c.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),c.pending=s,s=Kl(n),Rp(n,null,a),s}return Fl(n,c,s,a),Kl(n)}function Ao(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Pe(n,a)}}function Dc(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?h=m=s:m=m.next=s}else h=m=s;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var _c=!1;function ko(){if(_c){var n=Ss;if(n!==null)throw n}}function Oo(n,s,a,c){_c=!1;var h=n.updateQueue;Mi=!1;var m=h.firstBaseUpdate,v=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var M=w,R=M.next;M.next=null,v===null?m=R:v.next=R,v=M;var L=n.alternate;L!==null&&(L=L.updateQueue,w=L.lastBaseUpdate,w!==v&&(w===null?L.firstBaseUpdate=R:w.next=R,L.lastBaseUpdate=M))}if(m!==null){var j=h.baseState;v=0,L=R=M=null,w=m;do{var D=w.lane&-536870913,_=D!==w.lane;if(_?(Ee&D)===D:(c&D)===D){D!==0&&D===vs&&(_c=!0),L!==null&&(L=L.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ue=n,le=w;D=s;var _e=a;switch(le.tag){case 1:if(ue=le.payload,typeof ue=="function"){j=ue.call(_e,j,D);break e}j=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=le.payload,D=typeof ue=="function"?ue.call(_e,j,D):ue,D==null)break e;j=g({},j,D);break e;case 2:Mi=!0}}D=w.callback,D!==null&&(n.flags|=64,_&&(n.flags|=8192),_=h.callbacks,_===null?h.callbacks=[D]:_.push(D))}else _={lane:D,tag:w.tag,payload:w.payload,callback:w.callback,next:null},L===null?(R=L=_,M=j):L=L.next=_,v|=D;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;_=w,w=_.next,_.next=null,h.lastBaseUpdate=_,h.shared.pending=null}}while(!0);L===null&&(M=j),h.baseState=M,h.firstBaseUpdate=R,h.lastBaseUpdate=L,m===null&&(h.shared.lanes=0),zi|=v,n.lanes=v,n.memoizedState=j}}function Pp(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function Gp(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Pp(a[n],s)}var xs=q(null),ra=q(0);function Fp(n,s){n=fi,I(ra,n),I(xs,s),fi=n|s.baseLanes}function zc(){I(ra,fi),I(xs,xs.current)}function Bc(){fi=ra.current,Q(xs),Q(ra)}var Ai=0,ve=null,Re=null,Ze=null,sa=!1,ws=!1,Er=!1,oa=0,No=0,Ts=null,mS=0;function Ke(){throw Error(r(321))}function qc(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Jt(n[a],s[a]))return!1;return!0}function Lc(n,s,a,c,h,m){return Ai=m,ve=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,O.H=n===null||n.memoizedState===null?Rm:Dm,Er=!1,m=a(c,h),Er=!1,ws&&(m=Xp(s,a,c,h)),Kp(n),m}function Kp(n){O.H=da;var s=Re!==null&&Re.next!==null;if(Ai=0,Ze=Re=ve=null,sa=!1,No=0,Ts=null,s)throw Error(r(300));n===null||ut||(n=n.dependencies,n!==null&&Wl(n)&&(ut=!0))}function Xp(n,s,a,c){ve=n;var h=0;do{if(ws&&(Ts=null),No=0,ws=!1,25<=h)throw Error(r(301));if(h+=1,Ze=Re=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}O.H=wS,m=s(a,c)}while(ws);return m}function gS(){var n=O.H,s=n.useState()[0];return s=typeof s.then=="function"?Ro(s):s,n=n.useState()[0],(Re!==null?Re.memoizedState:null)!==n&&(ve.flags|=1024),s}function Vc(){var n=oa!==0;return oa=0,n}function jc(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function Uc(n){if(sa){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}sa=!1}Ai=0,Ze=Re=ve=null,ws=!1,No=oa=0,Ts=null}function Qt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?ve.memoizedState=Ze=n:Ze=Ze.next=n,Ze}function We(){if(Re===null){var n=ve.alternate;n=n!==null?n.memoizedState:null}else n=Re.next;var s=Ze===null?ve.memoizedState:Ze.next;if(s!==null)Ze=s,Re=n;else{if(n===null)throw ve.alternate===null?Error(r(467)):Error(r(310));Re=n,n={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Ze===null?ve.memoizedState=Ze=n:Ze=Ze.next=n}return Ze}function Hc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ro(n){var s=No;return No+=1,Ts===null&&(Ts=[]),n=$p(Ts,n,s),s=ve,(Ze===null?s.memoizedState:Ze.next)===null&&(s=s.alternate,O.H=s===null||s.memoizedState===null?Rm:Dm),n}function la(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ro(n);if(n.$$typeof===K)return Ct(n)}throw Error(r(438,String(n)))}function Ic(n){var s=null,a=ve.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=ve.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Hc(),ve.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),c=0;c<n;c++)a[c]=Ie;return s.index++,a}function si(n,s){return typeof s=="function"?s(n):s}function aa(n){var s=We();return $c(s,Re,n)}function $c(n,s,a){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var h=n.baseQueue,m=c.pending;if(m!==null){if(h!==null){var v=h.next;h.next=m.next,m.next=v}s.baseQueue=h=m,c.pending=null}if(m=n.baseState,h===null)n.memoizedState=m;else{s=h.next;var w=v=null,M=null,R=s,L=!1;do{var j=R.lane&-536870913;if(j!==R.lane?(Ee&j)===j:(Ai&j)===j){var D=R.revertLane;if(D===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),j===vs&&(L=!0);else if((Ai&D)===D){R=R.next,D===vs&&(L=!0);continue}else j={lane:0,revertLane:R.revertLane,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},M===null?(w=M=j,v=m):M=M.next=j,ve.lanes|=D,zi|=D;j=R.action,Er&&a(m,j),m=R.hasEagerState?R.eagerState:a(m,j)}else D={lane:j,revertLane:R.revertLane,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},M===null?(w=M=D,v=m):M=M.next=D,ve.lanes|=j,zi|=j;R=R.next}while(R!==null&&R!==s);if(M===null?v=m:M.next=w,!Jt(m,n.memoizedState)&&(ut=!0,L&&(a=Ss,a!==null)))throw a;n.memoizedState=m,n.baseState=v,n.baseQueue=M,c.lastRenderedState=m}return h===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Qc(n){var s=We(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var c=a.dispatch,h=a.pending,m=s.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do m=n(m,v.action),v=v.next;while(v!==h);Jt(m,s.memoizedState)||(ut=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,c]}function Jp(n,s,a){var c=ve,h=We(),m=ke;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var v=!Jt((Re||h).memoizedState,a);v&&(h.memoizedState=a,ut=!0),h=h.queue;var w=em.bind(null,c,h,n);if(Do(2048,8,w,[n]),h.getSnapshot!==s||v||Ze!==null&&Ze.memoizedState.tag&1){if(c.flags|=2048,Ms(9,ua(),Wp.bind(null,c,h,a,s),null),je===null)throw Error(r(349));m||(Ai&124)!==0||Zp(c,s,a)}return a}function Zp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=ve.updateQueue,s===null?(s=Hc(),ve.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Wp(n,s,a,c){s.value=a,s.getSnapshot=c,tm(s)&&nm(n)}function em(n,s,a){return a(function(){tm(s)&&nm(n)})}function tm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Jt(n,a)}catch{return!0}}function nm(n){var s=ms(n,2);s!==null&&rn(s,n,2)}function Yc(n){var s=Qt();if(typeof n=="function"){var a=n;if(n=a(),Er){En(!0);try{a()}finally{En(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:n},s}function im(n,s,a,c){return n.baseState=a,$c(n,Re,typeof c=="function"?c:si)}function yS(n,s,a,c,h){if(fa(n))throw Error(r(485));if(n=s.action,n!==null){var m={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};O.T!==null?a(!0):m.isTransition=!1,c(m),a=s.pending,a===null?(m.next=s.pending=m,rm(s,m)):(m.next=a.next,s.pending=a.next=m)}}function rm(n,s){var a=s.action,c=s.payload,h=n.state;if(s.isTransition){var m=O.T,v={};O.T=v;try{var w=a(h,c),M=O.S;M!==null&&M(v,w),sm(n,s,w)}catch(R){Pc(n,s,R)}finally{O.T=m}}else try{m=a(h,c),sm(n,s,m)}catch(R){Pc(n,s,R)}}function sm(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){om(n,s,c)},function(c){return Pc(n,s,c)}):om(n,s,a)}function om(n,s,a){s.status="fulfilled",s.value=a,lm(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,rm(n,a)))}function Pc(n,s,a){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,lm(s),s=s.next;while(s!==c)}n.action=null}function lm(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function am(n,s){return s}function um(n,s){if(ke){var a=je.formState;if(a!==null){e:{var c=ve;if(ke){if($e){t:{for(var h=$e,m=qn;h.nodeType!==8;){if(!m){h=null;break t}if(h=On(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){$e=On(h.nextSibling),c=h.data==="F!";break e}}xr(c)}c=!1}c&&(s=a[0])}}return a=Qt(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:am,lastRenderedState:s},a.queue=c,a=km.bind(null,ve,c),c.dispatch=a,c=Yc(!1),m=Jc.bind(null,ve,!1,c.queue),c=Qt(),h={state:s,dispatch:null,action:n,pending:null},c.queue=h,a=yS.bind(null,ve,h,m,a),h.dispatch=a,c.memoizedState=n,[s,a,!1]}function cm(n){var s=We();return fm(s,Re,n)}function fm(n,s,a){if(s=$c(n,s,am)[0],n=aa(si)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Ro(s)}catch(v){throw v===Eo?na:v}else c=s;s=We();var h=s.queue,m=h.dispatch;return a!==s.memoizedState&&(ve.flags|=2048,Ms(9,ua(),bS.bind(null,h,a),null)),[c,m,n]}function bS(n,s){n.action=s}function dm(n){var s=We(),a=Re;if(a!==null)return fm(s,a,n);We(),s=s.memoizedState,a=We();var c=a.queue.dispatch;return a.memoizedState=n,[s,c,!1]}function Ms(n,s,a,c){return n={tag:n,create:a,deps:c,inst:s,next:null},s=ve.updateQueue,s===null&&(s=Hc(),ve.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n),n}function ua(){return{destroy:void 0,resource:void 0}}function hm(){return We().memoizedState}function ca(n,s,a,c){var h=Qt();c=c===void 0?null:c,ve.flags|=n,h.memoizedState=Ms(1|s,ua(),a,c)}function Do(n,s,a,c){var h=We();c=c===void 0?null:c;var m=h.memoizedState.inst;Re!==null&&c!==null&&qc(c,Re.memoizedState.deps)?h.memoizedState=Ms(s,m,a,c):(ve.flags|=n,h.memoizedState=Ms(1|s,m,a,c))}function pm(n,s){ca(8390656,8,n,s)}function mm(n,s){Do(2048,8,n,s)}function gm(n,s){return Do(4,2,n,s)}function ym(n,s){return Do(4,4,n,s)}function bm(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function vm(n,s,a){a=a!=null?a.concat([n]):null,Do(4,4,bm.bind(null,s,n),a)}function Gc(){}function Sm(n,s){var a=We();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&qc(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function xm(n,s){var a=We();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&qc(s,c[1]))return c[0];if(c=n(),Er){En(!0);try{n()}finally{En(!1)}}return a.memoizedState=[c,s],c}function Fc(n,s,a){return a===void 0||(Ai&1073741824)!==0?n.memoizedState=s:(n.memoizedState=a,n=Mg(),ve.lanes|=n,zi|=n,a)}function wm(n,s,a,c){return Jt(a,s)?a:xs.current!==null?(n=Fc(n,a,c),Jt(n,s)||(ut=!0),n):(Ai&42)===0?(ut=!0,n.memoizedState=a):(n=Mg(),ve.lanes|=n,zi|=n,s)}function Tm(n,s,a,c,h){var m=$.p;$.p=m!==0&&8>m?m:8;var v=O.T,w={};O.T=w,Jc(n,!1,s,a);try{var M=h(),R=O.S;if(R!==null&&R(w,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var L=pS(M,c);_o(n,s,L,nn(n))}else _o(n,s,c,nn(n))}catch(j){_o(n,s,{then:function(){},status:"rejected",reason:j},nn())}finally{$.p=m,O.T=v}}function vS(){}function Kc(n,s,a,c){if(n.tag!==5)throw Error(r(476));var h=Mm(n).queue;Tm(n,h,s,P,a===null?vS:function(){return Em(n),a(c)})}function Mm(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:P},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Em(n){var s=Mm(n).next.queue;_o(n,s,{},nn())}function Xc(){return Ct(Jo)}function Cm(){return We().memoizedState}function Am(){return We().memoizedState}function SS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=nn();n=Ei(a);var c=Ci(s,n,a);c!==null&&(rn(c,s,a),Ao(c,s,a)),s={cache:Cc()},n.payload=s;return}s=s.return}}function xS(n,s,a){var c=nn();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},fa(n)?Om(s,a):(a=gc(n,s,a,c),a!==null&&(rn(a,n,c),Nm(a,s,c)))}function km(n,s,a){var c=nn();_o(n,s,a,c)}function _o(n,s,a,c){var h={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(fa(n))Om(s,h);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,w=m(v,a);if(h.hasEagerState=!0,h.eagerState=w,Jt(w,v))return Fl(n,s,h,0),je===null&&Gl(),!1}catch{}finally{}if(a=gc(n,s,h,c),a!==null)return rn(a,n,c),Nm(a,s,c),!0}return!1}function Jc(n,s,a,c){if(c={lane:2,revertLane:Nf(),action:c,hasEagerState:!1,eagerState:null,next:null},fa(n)){if(s)throw Error(r(479))}else s=gc(n,a,c,2),s!==null&&rn(s,n,2)}function fa(n){var s=n.alternate;return n===ve||s!==null&&s===ve}function Om(n,s){ws=sa=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Nm(n,s,a){if((a&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Pe(n,a)}}var da={readContext:Ct,use:la,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke},Rm={readContext:Ct,use:la,useCallback:function(n,s){return Qt().memoizedState=[n,s===void 0?null:s],n},useContext:Ct,useEffect:pm,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,ca(4194308,4,bm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return ca(4194308,4,n,s)},useInsertionEffect:function(n,s){ca(4,2,n,s)},useMemo:function(n,s){var a=Qt();s=s===void 0?null:s;var c=n();if(Er){En(!0);try{n()}finally{En(!1)}}return a.memoizedState=[c,s],c},useReducer:function(n,s,a){var c=Qt();if(a!==void 0){var h=a(s);if(Er){En(!0);try{a(s)}finally{En(!1)}}}else h=s;return c.memoizedState=c.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},c.queue=n,n=n.dispatch=xS.bind(null,ve,n),[c.memoizedState,n]},useRef:function(n){var s=Qt();return n={current:n},s.memoizedState=n},useState:function(n){n=Yc(n);var s=n.queue,a=km.bind(null,ve,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:Gc,useDeferredValue:function(n,s){var a=Qt();return Fc(a,n,s)},useTransition:function(){var n=Yc(!1);return n=Tm.bind(null,ve,n.queue,!0,!1),Qt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var c=ve,h=Qt();if(ke){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),je===null)throw Error(r(349));(Ee&124)!==0||Zp(c,s,a)}h.memoizedState=a;var m={value:a,getSnapshot:s};return h.queue=m,pm(em.bind(null,c,m,n),[n]),c.flags|=2048,Ms(9,ua(),Wp.bind(null,c,m,a,s),null),a},useId:function(){var n=Qt(),s=je.identifierPrefix;if(ke){var a=ni,c=ti;a=(c&~(1<<32-gt(c)-1)).toString(32)+a,s=""+s+"R"+a,a=oa++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=mS++,s=""+s+"r"+a.toString(32)+"";return n.memoizedState=s},useHostTransitionStatus:Xc,useFormState:um,useActionState:um,useOptimistic:function(n){var s=Qt();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Jc.bind(null,ve,!0,a),a.dispatch=s,[n,s]},useMemoCache:Ic,useCacheRefresh:function(){return Qt().memoizedState=SS.bind(null,ve)}},Dm={readContext:Ct,use:la,useCallback:Sm,useContext:Ct,useEffect:mm,useImperativeHandle:vm,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:xm,useReducer:aa,useRef:hm,useState:function(){return aa(si)},useDebugValue:Gc,useDeferredValue:function(n,s){var a=We();return wm(a,Re.memoizedState,n,s)},useTransition:function(){var n=aa(si)[0],s=We().memoizedState;return[typeof n=="boolean"?n:Ro(n),s]},useSyncExternalStore:Jp,useId:Cm,useHostTransitionStatus:Xc,useFormState:cm,useActionState:cm,useOptimistic:function(n,s){var a=We();return im(a,Re,n,s)},useMemoCache:Ic,useCacheRefresh:Am},wS={readContext:Ct,use:la,useCallback:Sm,useContext:Ct,useEffect:mm,useImperativeHandle:vm,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:xm,useReducer:Qc,useRef:hm,useState:function(){return Qc(si)},useDebugValue:Gc,useDeferredValue:function(n,s){var a=We();return Re===null?Fc(a,n,s):wm(a,Re.memoizedState,n,s)},useTransition:function(){var n=Qc(si)[0],s=We().memoizedState;return[typeof n=="boolean"?n:Ro(n),s]},useSyncExternalStore:Jp,useId:Cm,useHostTransitionStatus:Xc,useFormState:dm,useActionState:dm,useOptimistic:function(n,s){var a=We();return Re!==null?im(a,Re,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Ic,useCacheRefresh:Am},Es=null,zo=0;function ha(n){var s=zo;return zo+=1,Es===null&&(Es=[]),$p(Es,n,s)}function Bo(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function pa(n,s){throw s.$$typeof===y?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function _m(n){var s=n._init;return s(n._payload)}function zm(n){function s(k,A){if(n){var N=k.deletions;N===null?(k.deletions=[A],k.flags|=16):N.push(A)}}function a(k,A){if(!n)return null;for(;A!==null;)s(k,A),A=A.sibling;return null}function c(k){for(var A=new Map;k!==null;)k.key!==null?A.set(k.key,k):A.set(k.index,k),k=k.sibling;return A}function h(k,A){return k=ei(k,A),k.index=0,k.sibling=null,k}function m(k,A,N){return k.index=N,n?(N=k.alternate,N!==null?(N=N.index,N<A?(k.flags|=67108866,A):N):(k.flags|=67108866,A)):(k.flags|=1048576,A)}function v(k){return n&&k.alternate===null&&(k.flags|=67108866),k}function w(k,A,N,V){return A===null||A.tag!==6?(A=bc(N,k.mode,V),A.return=k,A):(A=h(A,N),A.return=k,A)}function M(k,A,N,V){var W=N.type;return W===x?L(k,A,N.props.children,V,N.key):A!==null&&(A.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===ge&&_m(W)===A.type)?(A=h(A,N.props),Bo(A,N),A.return=k,A):(A=Xl(N.type,N.key,N.props,null,k.mode,V),Bo(A,N),A.return=k,A)}function R(k,A,N,V){return A===null||A.tag!==4||A.stateNode.containerInfo!==N.containerInfo||A.stateNode.implementation!==N.implementation?(A=vc(N,k.mode,V),A.return=k,A):(A=h(A,N.children||[]),A.return=k,A)}function L(k,A,N,V,W){return A===null||A.tag!==7?(A=yr(N,k.mode,V,W),A.return=k,A):(A=h(A,N),A.return=k,A)}function j(k,A,N){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=bc(""+A,k.mode,N),A.return=k,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case b:return N=Xl(A.type,A.key,A.props,null,k.mode,N),Bo(N,A),N.return=k,N;case S:return A=vc(A,k.mode,N),A.return=k,A;case ge:var V=A._init;return A=V(A._payload),j(k,A,N)}if(ie(A)||Be(A))return A=yr(A,k.mode,N,null),A.return=k,A;if(typeof A.then=="function")return j(k,ha(A),N);if(A.$$typeof===K)return j(k,ea(k,A),N);pa(k,A)}return null}function D(k,A,N,V){var W=A!==null?A.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return W!==null?null:w(k,A,""+N,V);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case b:return N.key===W?M(k,A,N,V):null;case S:return N.key===W?R(k,A,N,V):null;case ge:return W=N._init,N=W(N._payload),D(k,A,N,V)}if(ie(N)||Be(N))return W!==null?null:L(k,A,N,V,null);if(typeof N.then=="function")return D(k,A,ha(N),V);if(N.$$typeof===K)return D(k,A,ea(k,N),V);pa(k,N)}return null}function _(k,A,N,V,W){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return k=k.get(N)||null,w(A,k,""+V,W);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case b:return k=k.get(V.key===null?N:V.key)||null,M(A,k,V,W);case S:return k=k.get(V.key===null?N:V.key)||null,R(A,k,V,W);case ge:var xe=V._init;return V=xe(V._payload),_(k,A,N,V,W)}if(ie(V)||Be(V))return k=k.get(N)||null,L(A,k,V,W,null);if(typeof V.then=="function")return _(k,A,N,ha(V),W);if(V.$$typeof===K)return _(k,A,N,ea(A,V),W);pa(A,V)}return null}function ue(k,A,N,V){for(var W=null,xe=null,re=A,ae=A=0,ft=null;re!==null&&ae<N.length;ae++){re.index>ae?(ft=re,re=null):ft=re.sibling;var Ce=D(k,re,N[ae],V);if(Ce===null){re===null&&(re=ft);break}n&&re&&Ce.alternate===null&&s(k,re),A=m(Ce,A,ae),xe===null?W=Ce:xe.sibling=Ce,xe=Ce,re=ft}if(ae===N.length)return a(k,re),ke&&vr(k,ae),W;if(re===null){for(;ae<N.length;ae++)re=j(k,N[ae],V),re!==null&&(A=m(re,A,ae),xe===null?W=re:xe.sibling=re,xe=re);return ke&&vr(k,ae),W}for(re=c(re);ae<N.length;ae++)ft=_(re,k,ae,N[ae],V),ft!==null&&(n&&ft.alternate!==null&&re.delete(ft.key===null?ae:ft.key),A=m(ft,A,ae),xe===null?W=ft:xe.sibling=ft,xe=ft);return n&&re.forEach(function($i){return s(k,$i)}),ke&&vr(k,ae),W}function le(k,A,N,V){if(N==null)throw Error(r(151));for(var W=null,xe=null,re=A,ae=A=0,ft=null,Ce=N.next();re!==null&&!Ce.done;ae++,Ce=N.next()){re.index>ae?(ft=re,re=null):ft=re.sibling;var $i=D(k,re,Ce.value,V);if($i===null){re===null&&(re=ft);break}n&&re&&$i.alternate===null&&s(k,re),A=m($i,A,ae),xe===null?W=$i:xe.sibling=$i,xe=$i,re=ft}if(Ce.done)return a(k,re),ke&&vr(k,ae),W;if(re===null){for(;!Ce.done;ae++,Ce=N.next())Ce=j(k,Ce.value,V),Ce!==null&&(A=m(Ce,A,ae),xe===null?W=Ce:xe.sibling=Ce,xe=Ce);return ke&&vr(k,ae),W}for(re=c(re);!Ce.done;ae++,Ce=N.next())Ce=_(re,k,ae,Ce.value,V),Ce!==null&&(n&&Ce.alternate!==null&&re.delete(Ce.key===null?ae:Ce.key),A=m(Ce,A,ae),xe===null?W=Ce:xe.sibling=Ce,xe=Ce);return n&&re.forEach(function(Tx){return s(k,Tx)}),ke&&vr(k,ae),W}function _e(k,A,N,V){if(typeof N=="object"&&N!==null&&N.type===x&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case b:e:{for(var W=N.key;A!==null;){if(A.key===W){if(W=N.type,W===x){if(A.tag===7){a(k,A.sibling),V=h(A,N.props.children),V.return=k,k=V;break e}}else if(A.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===ge&&_m(W)===A.type){a(k,A.sibling),V=h(A,N.props),Bo(V,N),V.return=k,k=V;break e}a(k,A);break}else s(k,A);A=A.sibling}N.type===x?(V=yr(N.props.children,k.mode,V,N.key),V.return=k,k=V):(V=Xl(N.type,N.key,N.props,null,k.mode,V),Bo(V,N),V.return=k,k=V)}return v(k);case S:e:{for(W=N.key;A!==null;){if(A.key===W)if(A.tag===4&&A.stateNode.containerInfo===N.containerInfo&&A.stateNode.implementation===N.implementation){a(k,A.sibling),V=h(A,N.children||[]),V.return=k,k=V;break e}else{a(k,A);break}else s(k,A);A=A.sibling}V=vc(N,k.mode,V),V.return=k,k=V}return v(k);case ge:return W=N._init,N=W(N._payload),_e(k,A,N,V)}if(ie(N))return ue(k,A,N,V);if(Be(N)){if(W=Be(N),typeof W!="function")throw Error(r(150));return N=W.call(N),le(k,A,N,V)}if(typeof N.then=="function")return _e(k,A,ha(N),V);if(N.$$typeof===K)return _e(k,A,ea(k,N),V);pa(k,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,A!==null&&A.tag===6?(a(k,A.sibling),V=h(A,N),V.return=k,k=V):(a(k,A),V=bc(N,k.mode,V),V.return=k,k=V),v(k)):a(k,A)}return function(k,A,N,V){try{zo=0;var W=_e(k,A,N,V);return Es=null,W}catch(re){if(re===Eo||re===na)throw re;var xe=Zt(29,re,null,k.mode);return xe.lanes=V,xe.return=k,xe}finally{}}}var Cs=zm(!0),Bm=zm(!1),mn=q(null),Ln=null;function ki(n){var s=n.alternate;I(st,st.current&1),I(mn,n),Ln===null&&(s===null||xs.current!==null||s.memoizedState!==null)&&(Ln=n)}function qm(n){if(n.tag===22){if(I(st,st.current),I(mn,n),Ln===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Ln=n)}}else Oi()}function Oi(){I(st,st.current),I(mn,mn.current)}function oi(n){Q(mn),Ln===n&&(Ln=null),Q(st)}var st=q(0);function ma(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||If(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Zc(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:g({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Wc={enqueueSetState:function(n,s,a){n=n._reactInternals;var c=nn(),h=Ei(c);h.payload=s,a!=null&&(h.callback=a),s=Ci(n,h,c),s!==null&&(rn(s,n,c),Ao(s,n,c))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=nn(),h=Ei(c);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=Ci(n,h,c),s!==null&&(rn(s,n,c),Ao(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=nn(),c=Ei(a);c.tag=2,s!=null&&(c.callback=s),s=Ci(n,c,a),s!==null&&(rn(s,n,a),Ao(s,n,a))}};function Lm(n,s,a,c,h,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,v):s.prototype&&s.prototype.isPureReactComponent?!yo(a,c)||!yo(h,m):!0}function Vm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Wc.enqueueReplaceState(s,s.state,null)}function Cr(n,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(n=n.defaultProps){a===s&&(a=g({},a));for(var h in n)a[h]===void 0&&(a[h]=n[h])}return a}var ga=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function jm(n){ga(n)}function Um(n){console.error(n)}function Hm(n){ga(n)}function ya(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Im(n,s,a){try{var c=n.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ef(n,s,a){return a=Ei(a),a.tag=3,a.payload={element:null},a.callback=function(){ya(n,s)},a}function $m(n){return n=Ei(n),n.tag=3,n}function Qm(n,s,a,c){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=c.value;n.payload=function(){return h(m)},n.callback=function(){Im(s,a,c)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){Im(s,a,c),typeof h!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function TS(n,s,a,c,h){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&wo(s,a,h,!0),a=mn.current,a!==null){switch(a.tag){case 13:return Ln===null?Ef():a.alternate===null&&Qe===0&&(Qe=3),a.flags&=-257,a.flags|=65536,a.lanes=h,c===Oc?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),Af(n,c,h)),!1;case 22:return a.flags|=65536,c===Oc?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),Af(n,c,h)),!1}throw Error(r(435,a.tag))}return Af(n,c,h),Ef(),!1}if(ke)return s=mn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,c!==wc&&(n=Error(r(422),{cause:c}),xo(fn(n,a)))):(c!==wc&&(s=Error(r(423),{cause:c}),xo(fn(s,a))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,c=fn(c,a),h=ef(n.stateNode,c,h),Dc(n,h),Qe!==4&&(Qe=2)),!1;var m=Error(r(520),{cause:c});if(m=fn(m,a),Io===null?Io=[m]:Io.push(m),Qe!==4&&(Qe=2),s===null)return!0;c=fn(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=h&-h,a.lanes|=n,n=ef(a.stateNode,c,n),Dc(a,n),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Bi===null||!Bi.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=$m(h),Qm(h,n,a,c),Dc(a,h),!1}a=a.return}while(a!==null);return!1}var Ym=Error(r(461)),ut=!1;function bt(n,s,a,c){s.child=n===null?Bm(s,null,a,c):Cs(s,n.child,a,c)}function Pm(n,s,a,c,h){a=a.render;var m=s.ref;if("ref"in c){var v={};for(var w in c)w!=="ref"&&(v[w]=c[w])}else v=c;return Tr(s),c=Lc(n,s,a,v,m,h),w=Vc(),n!==null&&!ut?(jc(n,s,h),li(n,s,h)):(ke&&w&&Sc(s),s.flags|=1,bt(n,s,c,h),s.child)}function Gm(n,s,a,c,h){if(n===null){var m=a.type;return typeof m=="function"&&!yc(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,Fm(n,s,m,c,h)):(n=Xl(a.type,null,c,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!uf(n,h)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:yo,a(v,c)&&n.ref===s.ref)return li(n,s,h)}return s.flags|=1,n=ei(m,c),n.ref=s.ref,n.return=s,s.child=n}function Fm(n,s,a,c,h){if(n!==null){var m=n.memoizedProps;if(yo(m,c)&&n.ref===s.ref)if(ut=!1,s.pendingProps=c=m,uf(n,h))(n.flags&131072)!==0&&(ut=!0);else return s.lanes=n.lanes,li(n,s,h)}return tf(n,s,a,c,h)}function Km(n,s,a){var c=s.pendingProps,h=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=m!==null?m.baseLanes|a:a,n!==null){for(h=s.child=n.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;s.childLanes=m&~c}else s.childLanes=0,s.child=null;return Xm(n,s,c,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&ta(s,m!==null?m.cachePool:null),m!==null?Fp(s,m):zc(),qm(s);else return s.lanes=s.childLanes=536870912,Xm(n,s,m!==null?m.baseLanes|a:a,a)}else m!==null?(ta(s,m.cachePool),Fp(s,m),Oi(),s.memoizedState=null):(n!==null&&ta(s,null),zc(),Oi());return bt(n,s,h,a),s.child}function Xm(n,s,a,c){var h=kc();return h=h===null?null:{parent:rt._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},n!==null&&ta(s,null),zc(),qm(s),n!==null&&wo(n,s,c,!0),null}function ba(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function tf(n,s,a,c,h){return Tr(s),a=Lc(n,s,a,c,void 0,h),c=Vc(),n!==null&&!ut?(jc(n,s,h),li(n,s,h)):(ke&&c&&Sc(s),s.flags|=1,bt(n,s,a,h),s.child)}function Jm(n,s,a,c,h,m){return Tr(s),s.updateQueue=null,a=Xp(s,c,a,h),Kp(n),c=Vc(),n!==null&&!ut?(jc(n,s,m),li(n,s,m)):(ke&&c&&Sc(s),s.flags|=1,bt(n,s,a,m),s.child)}function Zm(n,s,a,c,h){if(Tr(s),s.stateNode===null){var m=gs,v=a.contextType;typeof v=="object"&&v!==null&&(m=Ct(v)),m=new a(c,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Wc,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=c,m.state=s.memoizedState,m.refs={},Nc(s),v=a.contextType,m.context=typeof v=="object"&&v!==null?Ct(v):gs,m.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Zc(s,a,v,c),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Wc.enqueueReplaceState(m,m.state,null),Oo(s,c,m,h),ko(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){m=s.stateNode;var w=s.memoizedProps,M=Cr(a,w);m.props=M;var R=m.context,L=a.contextType;v=gs,typeof L=="object"&&L!==null&&(v=Ct(L));var j=a.getDerivedStateFromProps;L=typeof j=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,L||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||R!==v)&&Vm(s,m,c,v),Mi=!1;var D=s.memoizedState;m.state=D,Oo(s,c,m,h),ko(),R=s.memoizedState,w||D!==R||Mi?(typeof j=="function"&&(Zc(s,a,j,c),R=s.memoizedState),(M=Mi||Lm(s,a,M,c,D,R,v))?(L||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=R),m.props=c,m.state=R,m.context=v,c=M):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{m=s.stateNode,Rc(n,s),v=s.memoizedProps,L=Cr(a,v),m.props=L,j=s.pendingProps,D=m.context,R=a.contextType,M=gs,typeof R=="object"&&R!==null&&(M=Ct(R)),w=a.getDerivedStateFromProps,(R=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==j||D!==M)&&Vm(s,m,c,M),Mi=!1,D=s.memoizedState,m.state=D,Oo(s,c,m,h),ko();var _=s.memoizedState;v!==j||D!==_||Mi||n!==null&&n.dependencies!==null&&Wl(n.dependencies)?(typeof w=="function"&&(Zc(s,a,w,c),_=s.memoizedState),(L=Mi||Lm(s,a,L,c,D,_,M)||n!==null&&n.dependencies!==null&&Wl(n.dependencies))?(R||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,_,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,_,M)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&D===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&D===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=_),m.props=c,m.state=_,m.context=M,c=L):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&D===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&D===n.memoizedState||(s.flags|=1024),c=!1)}return m=c,ba(n,s),c=(s.flags&128)!==0,m||c?(m=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&c?(s.child=Cs(s,n.child,null,h),s.child=Cs(s,null,a,h)):bt(n,s,a,h),s.memoizedState=m.state,n=s.child):n=li(n,s,h),n}function Wm(n,s,a,c){return So(),s.flags|=256,bt(n,s,a,c),s.child}var nf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rf(n){return{baseLanes:n,cachePool:Up()}}function sf(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=gn),n}function eg(n,s,a){var c=s.pendingProps,h=!1,m=(s.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(st.current&2)!==0),v&&(h=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,n===null){if(ke){if(h?ki(s):Oi(),ke){var w=$e,M;if(M=w){e:{for(M=w,w=qn;M.nodeType!==8;){if(!w){w=null;break e}if(M=On(M.nextSibling),M===null){w=null;break e}}w=M}w!==null?(s.memoizedState={dehydrated:w,treeContext:br!==null?{id:ti,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},M=Zt(18,null,null,0),M.stateNode=w,M.return=s,s.child=M,Bt=s,$e=null,M=!0):M=!1}M||xr(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return If(w)?s.lanes=32:s.lanes=536870912,null;oi(s)}return w=c.children,c=c.fallback,h?(Oi(),h=s.mode,w=va({mode:"hidden",children:w},h),c=yr(c,h,a,null),w.return=s,c.return=s,w.sibling=c,s.child=w,h=s.child,h.memoizedState=rf(a),h.childLanes=sf(n,v,a),s.memoizedState=nf,c):(ki(s),of(s,w))}if(M=n.memoizedState,M!==null&&(w=M.dehydrated,w!==null)){if(m)s.flags&256?(ki(s),s.flags&=-257,s=lf(n,s,a)):s.memoizedState!==null?(Oi(),s.child=n.child,s.flags|=128,s=null):(Oi(),h=c.fallback,w=s.mode,c=va({mode:"visible",children:c.children},w),h=yr(h,w,a,null),h.flags|=2,c.return=s,h.return=s,c.sibling=h,s.child=c,Cs(s,n.child,null,a),c=s.child,c.memoizedState=rf(a),c.childLanes=sf(n,v,a),s.memoizedState=nf,s=h);else if(ki(s),If(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var R=v.dgst;v=R,c=Error(r(419)),c.stack="",c.digest=v,xo({value:c,source:null,stack:null}),s=lf(n,s,a)}else if(ut||wo(n,s,a,!1),v=(a&n.childLanes)!==0,ut||v){if(v=je,v!==null&&(c=a&-a,c=(c&42)!==0?1:Je(c),c=(c&(v.suspendedLanes|a))!==0?0:c,c!==0&&c!==M.retryLane))throw M.retryLane=c,ms(n,c),rn(v,n,c),Ym;w.data==="$?"||Ef(),s=lf(n,s,a)}else w.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=M.treeContext,$e=On(w.nextSibling),Bt=s,ke=!0,Sr=null,qn=!1,n!==null&&(hn[pn++]=ti,hn[pn++]=ni,hn[pn++]=br,ti=n.id,ni=n.overflow,br=s),s=of(s,c.children),s.flags|=4096);return s}return h?(Oi(),h=c.fallback,w=s.mode,M=n.child,R=M.sibling,c=ei(M,{mode:"hidden",children:c.children}),c.subtreeFlags=M.subtreeFlags&65011712,R!==null?h=ei(R,h):(h=yr(h,w,a,null),h.flags|=2),h.return=s,c.return=s,c.sibling=h,s.child=c,c=h,h=s.child,w=n.child.memoizedState,w===null?w=rf(a):(M=w.cachePool,M!==null?(R=rt._currentValue,M=M.parent!==R?{parent:R,pool:R}:M):M=Up(),w={baseLanes:w.baseLanes|a,cachePool:M}),h.memoizedState=w,h.childLanes=sf(n,v,a),s.memoizedState=nf,c):(ki(s),a=n.child,n=a.sibling,a=ei(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,n!==null&&(v=s.deletions,v===null?(s.deletions=[n],s.flags|=16):v.push(n)),s.child=a,s.memoizedState=null,a)}function of(n,s){return s=va({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function va(n,s){return n=Zt(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function lf(n,s,a){return Cs(s,n.child,null,a),n=of(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function tg(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Mc(n.return,s,a)}function af(n,s,a,c,h){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=h)}function ng(n,s,a){var c=s.pendingProps,h=c.revealOrder,m=c.tail;if(bt(n,s,c.children,a),c=st.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&tg(n,a,s);else if(n.tag===19)tg(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(I(st,c),h){case"forwards":for(a=s.child,h=null;a!==null;)n=a.alternate,n!==null&&ma(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),af(s,!1,h,a,m);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&ma(n)===null){s.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}af(s,!0,a,null,m);break;case"together":af(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function li(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),zi|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(wo(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=ei(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=ei(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function uf(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Wl(n)))}function MS(n,s,a){switch(s.tag){case 3:Ae(s,s.stateNode.containerInfo),Ti(s,rt,n.memoizedState.cache),So();break;case 27:case 5:Kn(s);break;case 4:Ae(s,s.stateNode.containerInfo);break;case 10:Ti(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(ki(s),s.flags|=128,null):(a&s.child.childLanes)!==0?eg(n,s,a):(ki(s),n=li(n,s,a),n!==null?n.sibling:null);ki(s);break;case 19:var h=(n.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(wo(n,s,a,!1),c=(a&s.childLanes)!==0),h){if(c)return ng(n,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),I(st,st.current),c)break;return null;case 22:case 23:return s.lanes=0,Km(n,s,a);case 24:Ti(s,rt,n.memoizedState.cache)}return li(n,s,a)}function ig(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)ut=!0;else{if(!uf(n,a)&&(s.flags&128)===0)return ut=!1,MS(n,s,a);ut=(n.flags&131072)!==0}else ut=!1,ke&&(s.flags&1048576)!==0&&_p(s,Zl,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var c=s.elementType,h=c._init;if(c=h(c._payload),s.type=c,typeof c=="function")yc(c)?(n=Cr(c,n),s.tag=1,s=Zm(null,s,c,n,a)):(s.tag=0,s=tf(null,s,c,n,a));else{if(c!=null){if(h=c.$$typeof,h===ne){s.tag=11,s=Pm(null,s,c,n,a);break e}else if(h===de){s.tag=14,s=Gm(null,s,c,n,a);break e}}throw s=Me(c)||c,Error(r(306,s,""))}}return s;case 0:return tf(n,s,s.type,s.pendingProps,a);case 1:return c=s.type,h=Cr(c,s.pendingProps),Zm(n,s,c,h,a);case 3:e:{if(Ae(s,s.stateNode.containerInfo),n===null)throw Error(r(387));c=s.pendingProps;var m=s.memoizedState;h=m.element,Rc(n,s),Oo(s,c,null,a);var v=s.memoizedState;if(c=v.cache,Ti(s,rt,c),c!==m.cache&&Ec(s,[rt],a,!0),ko(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Wm(n,s,c,a);break e}else if(c!==h){h=fn(Error(r(424)),s),xo(h),s=Wm(n,s,c,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for($e=On(n.firstChild),Bt=s,ke=!0,Sr=null,qn=!0,a=Bm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(So(),c===h){s=li(n,s,a);break e}bt(n,s,c,a)}s=s.child}return s;case 26:return ba(n,s),n===null?(a=ly(s.type,null,s.pendingProps,null))?s.memoizedState=a:ke||(a=s.type,n=s.pendingProps,c=_a(X.current).createElement(a),c[Fe]=s,c[Ve]=n,St(c,a,n),at(c),s.stateNode=c):s.memoizedState=ly(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Kn(s),n===null&&ke&&(c=s.stateNode=ry(s.type,s.pendingProps,X.current),Bt=s,qn=!0,h=$e,Vi(s.type)?($f=h,$e=On(c.firstChild)):$e=h),bt(n,s,s.pendingProps.children,a),ba(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&ke&&((h=c=$e)&&(c=ZS(c,s.type,s.pendingProps,qn),c!==null?(s.stateNode=c,Bt=s,$e=On(c.firstChild),qn=!1,h=!0):h=!1),h||xr(s)),Kn(s),h=s.type,m=s.pendingProps,v=n!==null?n.memoizedProps:null,c=m.children,jf(h,m)?c=null:v!==null&&jf(h,v)&&(s.flags|=32),s.memoizedState!==null&&(h=Lc(n,s,gS,null,null,a),Jo._currentValue=h),ba(n,s),bt(n,s,c,a),s.child;case 6:return n===null&&ke&&((n=a=$e)&&(a=WS(a,s.pendingProps,qn),a!==null?(s.stateNode=a,Bt=s,$e=null,n=!0):n=!1),n||xr(s)),null;case 13:return eg(n,s,a);case 4:return Ae(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Cs(s,null,c,a):bt(n,s,c,a),s.child;case 11:return Pm(n,s,s.type,s.pendingProps,a);case 7:return bt(n,s,s.pendingProps,a),s.child;case 8:return bt(n,s,s.pendingProps.children,a),s.child;case 12:return bt(n,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,Ti(s,s.type,c.value),bt(n,s,c.children,a),s.child;case 9:return h=s.type._context,c=s.pendingProps.children,Tr(s),h=Ct(h),c=c(h),s.flags|=1,bt(n,s,c,a),s.child;case 14:return Gm(n,s,s.type,s.pendingProps,a);case 15:return Fm(n,s,s.type,s.pendingProps,a);case 19:return ng(n,s,a);case 31:return c=s.pendingProps,a=s.mode,c={mode:c.mode,children:c.children},n===null?(a=va(c,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=ei(n.child,c),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return Km(n,s,a);case 24:return Tr(s),c=Ct(rt),n===null?(h=kc(),h===null&&(h=je,m=Cc(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),s.memoizedState={parent:c,cache:h},Nc(s),Ti(s,rt,h)):((n.lanes&a)!==0&&(Rc(n,s),Oo(s,null,null,a),ko()),h=n.memoizedState,m=s.memoizedState,h.parent!==c?(h={parent:c,cache:c},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Ti(s,rt,c)):(c=m.cache,Ti(s,rt,c),c!==h.cache&&Ec(s,[rt],a,!0))),bt(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function ai(n){n.flags|=4}function rg(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!dy(s)){if(s=mn.current,s!==null&&((Ee&4194048)===Ee?Ln!==null:(Ee&62914560)!==Ee&&(Ee&536870912)===0||s!==Ln))throw Co=Oc,Hp;n.flags|=8192}}function Sa(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?zl():536870912,n.lanes|=s,Ns|=s)}function qo(n,s){if(!ke)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function He(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&65011712,c|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function ES(n,s,a){var c=s.pendingProps;switch(xc(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(s),null;case 1:return He(s),null;case 3:return a=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ri(rt),It(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(vo(s)?ai(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,qp())),He(s),null;case 26:return a=s.memoizedState,n===null?(ai(s),a!==null?(He(s),rg(s,a)):(He(s),s.flags&=-16777217)):a?a!==n.memoizedState?(ai(s),He(s),rg(s,a)):(He(s),s.flags&=-16777217):(n.memoizedProps!==c&&ai(s),He(s),s.flags&=-16777217),null;case 27:Kr(s),a=X.current;var h=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==c&&ai(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return He(s),null}n=Z.current,vo(s)?zp(s):(n=ry(h,c,a),s.stateNode=n,ai(s))}return He(s),null;case 5:if(Kr(s),a=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&ai(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return He(s),null}if(n=Z.current,vo(s))zp(s);else{switch(h=_a(X.current),n){case 1:n=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=h.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?h.createElement("select",{is:c.is}):h.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?h.createElement(a,{is:c.is}):h.createElement(a)}}n[Fe]=s,n[Ve]=c;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)n.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=n;e:switch(St(n,a,c),a){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ai(s)}}return He(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&ai(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(n=X.current,vo(s)){if(n=s.stateNode,a=s.memoizedProps,c=null,h=Bt,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}n[Fe]=s,n=!!(n.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Jg(n.nodeValue,a)),n||xr(s)}else n=_a(n).createTextNode(c),n[Fe]=s,s.stateNode=n}return He(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=vo(s),c!==null&&c.dehydrated!==null){if(n===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Fe]=s}else So(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;He(s),h=!1}else h=qp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(oi(s),s):(oi(s),null)}if(oi(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=c!==null,n=n!==null&&n.memoizedState!==null,a){c=s.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool);var m=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==h&&(c.flags|=2048)}return a!==n&&a&&(s.child.flags|=8192),Sa(s,s.updateQueue),He(s),null;case 4:return It(),n===null&&zf(s.stateNode.containerInfo),He(s),null;case 10:return ri(s.type),He(s),null;case 19:if(Q(st),h=s.memoizedState,h===null)return He(s),null;if(c=(s.flags&128)!==0,m=h.rendering,m===null)if(c)qo(h,!1);else{if(Qe!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=ma(n),m!==null){for(s.flags|=128,qo(h,!1),n=m.updateQueue,s.updateQueue=n,Sa(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)Dp(a,n),a=a.sibling;return I(st,st.current&1|2),s.child}n=n.sibling}h.tail!==null&&Et()>Ta&&(s.flags|=128,c=!0,qo(h,!1),s.lanes=4194304)}else{if(!c)if(n=ma(m),n!==null){if(s.flags|=128,c=!0,n=n.updateQueue,s.updateQueue=n,Sa(s,n),qo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!ke)return He(s),null}else 2*Et()-h.renderingStartTime>Ta&&a!==536870912&&(s.flags|=128,c=!0,qo(h,!1),s.lanes=4194304);h.isBackwards?(m.sibling=s.child,s.child=m):(n=h.last,n!==null?n.sibling=m:s.child=m,h.last=m)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=Et(),s.sibling=null,n=st.current,I(st,c?n&1|2:n&1),s):(He(s),null);case 22:case 23:return oi(s),Bc(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(He(s),s.subtreeFlags&6&&(s.flags|=8192)):He(s),a=s.updateQueue,a!==null&&Sa(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),n!==null&&Q(Mr),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),ri(rt),He(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function CS(n,s){switch(xc(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ri(rt),It(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Kr(s),null;case 13:if(oi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));So()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Q(st),null;case 4:return It(),null;case 10:return ri(s.type),null;case 22:case 23:return oi(s),Bc(),n!==null&&Q(Mr),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ri(rt),null;case 25:return null;default:return null}}function sg(n,s){switch(xc(s),s.tag){case 3:ri(rt),It();break;case 26:case 27:case 5:Kr(s);break;case 4:It();break;case 13:oi(s);break;case 19:Q(st);break;case 10:ri(s.type);break;case 22:case 23:oi(s),Bc(),n!==null&&Q(Mr);break;case 24:ri(rt)}}function Lo(n,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var h=c.next;a=h;do{if((a.tag&n)===n){c=void 0;var m=a.create,v=a.inst;c=m(),v.destroy=c}a=a.next}while(a!==h)}}catch(w){qe(s,s.return,w)}}function Ni(n,s,a){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var m=h.next;c=m;do{if((c.tag&n)===n){var v=c.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,h=s;var M=a,R=w;try{R()}catch(L){qe(h,M,L)}}}c=c.next}while(c!==m)}}catch(L){qe(s,s.return,L)}}function og(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{Gp(s,a)}catch(c){qe(n,n.return,c)}}}function lg(n,s,a){a.props=Cr(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(c){qe(n,s,c)}}function Vo(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof a=="function"?n.refCleanup=a(c):a.current=c}}catch(h){qe(n,s,h)}}function Vn(n,s){var a=n.ref,c=n.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(h){qe(n,s,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){qe(n,s,h)}else a.current=null}function ag(n){var s=n.type,a=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(h){qe(n,n.return,h)}}function cf(n,s,a){try{var c=n.stateNode;GS(c,n.type,a,s),c[Ve]=s}catch(h){qe(n,n.return,h)}}function ug(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Vi(n.type)||n.tag===4}function ff(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ug(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Vi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function df(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Da));else if(c!==4&&(c===27&&Vi(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(df(n,s,a),n=n.sibling;n!==null;)df(n,s,a),n=n.sibling}function xa(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(c===27&&Vi(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(xa(n,s,a),n=n.sibling;n!==null;)xa(n,s,a),n=n.sibling}function cg(n){var s=n.stateNode,a=n.memoizedProps;try{for(var c=n.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);St(s,c,a),s[Fe]=n,s[Ve]=a}catch(m){qe(n,n.return,m)}}var ui=!1,Xe=!1,hf=!1,fg=typeof WeakSet=="function"?WeakSet:Set,ct=null;function AS(n,s){if(n=n.containerInfo,Lf=ja,n=wp(n),cc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,w=-1,M=-1,R=0,L=0,j=n,D=null;t:for(;;){for(var _;j!==a||h!==0&&j.nodeType!==3||(w=v+h),j!==m||c!==0&&j.nodeType!==3||(M=v+c),j.nodeType===3&&(v+=j.nodeValue.length),(_=j.firstChild)!==null;)D=j,j=_;for(;;){if(j===n)break t;if(D===a&&++R===h&&(w=v),D===m&&++L===c&&(M=v),(_=j.nextSibling)!==null)break;j=D,D=j.parentNode}j=_}a=w===-1||M===-1?null:{start:w,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Vf={focusedElem:n,selectionRange:a},ja=!1,ct=s;ct!==null;)if(s=ct,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,ct=n;else for(;ct!==null;){switch(s=ct,m=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,a=s,h=m.memoizedProps,m=m.memoizedState,c=a.stateNode;try{var ue=Cr(a.type,h,a.elementType===a.type);n=c.getSnapshotBeforeUpdate(ue,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(le){qe(a,a.return,le)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)Hf(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Hf(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,ct=n;break}ct=s.return}}function dg(n,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Ri(n,a),c&4&&Lo(5,a);break;case 1:if(Ri(n,a),c&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(v){qe(a,a.return,v)}else{var h=Cr(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(h,s,n.__reactInternalSnapshotBeforeUpdate)}catch(v){qe(a,a.return,v)}}c&64&&og(a),c&512&&Vo(a,a.return);break;case 3:if(Ri(n,a),c&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Gp(n,s)}catch(v){qe(a,a.return,v)}}break;case 27:s===null&&c&4&&cg(a);case 26:case 5:Ri(n,a),s===null&&c&4&&ag(a),c&512&&Vo(a,a.return);break;case 12:Ri(n,a);break;case 13:Ri(n,a),c&4&&mg(n,a),c&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=qS.bind(null,a),ex(n,a))));break;case 22:if(c=a.memoizedState!==null||ui,!c){s=s!==null&&s.memoizedState!==null||Xe,h=ui;var m=Xe;ui=c,(Xe=s)&&!m?Di(n,a,(a.subtreeFlags&8772)!==0):Ri(n,a),ui=h,Xe=m}break;case 30:break;default:Ri(n,a)}}function hg(n){var s=n.alternate;s!==null&&(n.alternate=null,hg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Yu(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ue=null,Yt=!1;function ci(n,s,a){for(a=a.child;a!==null;)pg(n,s,a),a=a.sibling}function pg(n,s,a){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(zn,a)}catch{}switch(a.tag){case 26:Xe||Vn(a,s),ci(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Xe||Vn(a,s);var c=Ue,h=Yt;Vi(a.type)&&(Ue=a.stateNode,Yt=!1),ci(n,s,a),Go(a.stateNode),Ue=c,Yt=h;break;case 5:Xe||Vn(a,s);case 6:if(c=Ue,h=Yt,Ue=null,ci(n,s,a),Ue=c,Yt=h,Ue!==null)if(Yt)try{(Ue.nodeType===9?Ue.body:Ue.nodeName==="HTML"?Ue.ownerDocument.body:Ue).removeChild(a.stateNode)}catch(m){qe(a,s,m)}else try{Ue.removeChild(a.stateNode)}catch(m){qe(a,s,m)}break;case 18:Ue!==null&&(Yt?(n=Ue,ny(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),tl(n)):ny(Ue,a.stateNode));break;case 4:c=Ue,h=Yt,Ue=a.stateNode.containerInfo,Yt=!0,ci(n,s,a),Ue=c,Yt=h;break;case 0:case 11:case 14:case 15:Xe||Ni(2,a,s),Xe||Ni(4,a,s),ci(n,s,a);break;case 1:Xe||(Vn(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&lg(a,s,c)),ci(n,s,a);break;case 21:ci(n,s,a);break;case 22:Xe=(c=Xe)||a.memoizedState!==null,ci(n,s,a),Xe=c;break;default:ci(n,s,a)}}function mg(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{tl(n)}catch(a){qe(s,s.return,a)}}function kS(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new fg),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new fg),s;default:throw Error(r(435,n.tag))}}function pf(n,s){var a=kS(n);s.forEach(function(c){var h=LS.bind(null,n,c);a.has(c)||(a.add(c),c.then(h,h))})}function Wt(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c],m=n,v=s,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(Vi(w.type)){Ue=w.stateNode,Yt=!1;break e}break;case 5:Ue=w.stateNode,Yt=!1;break e;case 3:case 4:Ue=w.stateNode.containerInfo,Yt=!0;break e}w=w.return}if(Ue===null)throw Error(r(160));pg(m,v,h),Ue=null,Yt=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)gg(s,n),s=s.sibling}var kn=null;function gg(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Wt(s,n),en(n),c&4&&(Ni(3,n,n.return),Lo(3,n),Ni(5,n,n.return));break;case 1:Wt(s,n),en(n),c&512&&(Xe||a===null||Vn(a,a.return)),c&64&&ui&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var h=kn;if(Wt(s,n),en(n),c&512&&(Xe||a===null||Vn(a,a.return)),c&4){var m=a!==null?a.memoizedState:null;if(c=n.memoizedState,a===null)if(c===null)if(n.stateNode===null){e:{c=n.type,a=n.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":m=h.getElementsByTagName("title")[0],(!m||m[lo]||m[Fe]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(c),h.head.insertBefore(m,h.querySelector("head > title"))),St(m,c,a),m[Fe]=n,at(m),c=m;break e;case"link":var v=cy("link","href",h).get(c+(a.href||""));if(v){for(var w=0;w<v.length;w++)if(m=v[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(w,1);break t}}m=h.createElement(c),St(m,c,a),h.head.appendChild(m);break;case"meta":if(v=cy("meta","content",h).get(c+(a.content||""))){for(w=0;w<v.length;w++)if(m=v[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(w,1);break t}}m=h.createElement(c),St(m,c,a),h.head.appendChild(m);break;default:throw Error(r(468,c))}m[Fe]=n,at(m),c=m}n.stateNode=c}else fy(h,n.type,n.stateNode);else n.stateNode=uy(h,c,n.memoizedProps);else m!==c?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,c===null?fy(h,n.type,n.stateNode):uy(h,c,n.memoizedProps)):c===null&&n.stateNode!==null&&cf(n,n.memoizedProps,a.memoizedProps)}break;case 27:Wt(s,n),en(n),c&512&&(Xe||a===null||Vn(a,a.return)),a!==null&&c&4&&cf(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Wt(s,n),en(n),c&512&&(Xe||a===null||Vn(a,a.return)),n.flags&32){h=n.stateNode;try{as(h,"")}catch(_){qe(n,n.return,_)}}c&4&&n.stateNode!=null&&(h=n.memoizedProps,cf(n,h,a!==null?a.memoizedProps:h)),c&1024&&(hf=!0);break;case 6:if(Wt(s,n),en(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,a=n.stateNode;try{a.nodeValue=c}catch(_){qe(n,n.return,_)}}break;case 3:if(qa=null,h=kn,kn=za(s.containerInfo),Wt(s,n),kn=h,en(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{tl(s.containerInfo)}catch(_){qe(n,n.return,_)}hf&&(hf=!1,yg(n));break;case 4:c=kn,kn=za(n.stateNode.containerInfo),Wt(s,n),en(n),kn=c;break;case 12:Wt(s,n),en(n);break;case 13:Wt(s,n),en(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Sf=Et()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,pf(n,c)));break;case 22:h=n.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,R=ui,L=Xe;if(ui=R||h,Xe=L||M,Wt(s,n),Xe=L,ui=R,en(n),c&8192)e:for(s=n.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||M||ui||Xe||Ar(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){M=a=s;try{if(m=M.stateNode,h)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=M.stateNode;var j=M.memoizedProps.style,D=j!=null&&j.hasOwnProperty("display")?j.display:null;w.style.display=D==null||typeof D=="boolean"?"":(""+D).trim()}}catch(_){qe(M,M.return,_)}}}else if(s.tag===6){if(a===null){M=s;try{M.stateNode.nodeValue=h?"":M.memoizedProps}catch(_){qe(M,M.return,_)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,pf(n,a))));break;case 19:Wt(s,n),en(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,pf(n,c)));break;case 30:break;case 21:break;default:Wt(s,n),en(n)}}function en(n){var s=n.flags;if(s&2){try{for(var a,c=n.return;c!==null;){if(ug(c)){a=c;break}c=c.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,m=ff(n);xa(n,m,h);break;case 5:var v=a.stateNode;a.flags&32&&(as(v,""),a.flags&=-33);var w=ff(n);xa(n,w,v);break;case 3:case 4:var M=a.stateNode.containerInfo,R=ff(n);df(n,R,M);break;default:throw Error(r(161))}}catch(L){qe(n,n.return,L)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function yg(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;yg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Ri(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)dg(n,s.alternate,s),s=s.sibling}function Ar(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Ni(4,s,s.return),Ar(s);break;case 1:Vn(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&lg(s,s.return,a),Ar(s);break;case 27:Go(s.stateNode);case 26:case 5:Vn(s,s.return),Ar(s);break;case 22:s.memoizedState===null&&Ar(s);break;case 30:Ar(s);break;default:Ar(s)}n=n.sibling}}function Di(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,h=n,m=s,v=m.flags;switch(m.tag){case 0:case 11:case 15:Di(h,m,a),Lo(4,m);break;case 1:if(Di(h,m,a),c=m,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(R){qe(c,c.return,R)}if(c=m,h=c.updateQueue,h!==null){var w=c.stateNode;try{var M=h.shared.hiddenCallbacks;if(M!==null)for(h.shared.hiddenCallbacks=null,h=0;h<M.length;h++)Pp(M[h],w)}catch(R){qe(c,c.return,R)}}a&&v&64&&og(m),Vo(m,m.return);break;case 27:cg(m);case 26:case 5:Di(h,m,a),a&&c===null&&v&4&&ag(m),Vo(m,m.return);break;case 12:Di(h,m,a);break;case 13:Di(h,m,a),a&&v&4&&mg(h,m);break;case 22:m.memoizedState===null&&Di(h,m,a),Vo(m,m.return);break;case 30:break;default:Di(h,m,a)}s=s.sibling}}function mf(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&To(a))}function gf(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&To(n))}function jn(n,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)bg(n,s,a,c),s=s.sibling}function bg(n,s,a,c){var h=s.flags;switch(s.tag){case 0:case 11:case 15:jn(n,s,a,c),h&2048&&Lo(9,s);break;case 1:jn(n,s,a,c);break;case 3:jn(n,s,a,c),h&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&To(n)));break;case 12:if(h&2048){jn(n,s,a,c),n=s.stateNode;try{var m=s.memoizedProps,v=m.id,w=m.onPostCommit;typeof w=="function"&&w(v,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(M){qe(s,s.return,M)}}else jn(n,s,a,c);break;case 13:jn(n,s,a,c);break;case 23:break;case 22:m=s.stateNode,v=s.alternate,s.memoizedState!==null?m._visibility&2?jn(n,s,a,c):jo(n,s):m._visibility&2?jn(n,s,a,c):(m._visibility|=2,As(n,s,a,c,(s.subtreeFlags&10256)!==0)),h&2048&&mf(v,s);break;case 24:jn(n,s,a,c),h&2048&&gf(s.alternate,s);break;default:jn(n,s,a,c)}}function As(n,s,a,c,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=n,v=s,w=a,M=c,R=v.flags;switch(v.tag){case 0:case 11:case 15:As(m,v,w,M,h),Lo(8,v);break;case 23:break;case 22:var L=v.stateNode;v.memoizedState!==null?L._visibility&2?As(m,v,w,M,h):jo(m,v):(L._visibility|=2,As(m,v,w,M,h)),h&&R&2048&&mf(v.alternate,v);break;case 24:As(m,v,w,M,h),h&&R&2048&&gf(v.alternate,v);break;default:As(m,v,w,M,h)}s=s.sibling}}function jo(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,c=s,h=c.flags;switch(c.tag){case 22:jo(a,c),h&2048&&mf(c.alternate,c);break;case 24:jo(a,c),h&2048&&gf(c.alternate,c);break;default:jo(a,c)}s=s.sibling}}var Uo=8192;function ks(n){if(n.subtreeFlags&Uo)for(n=n.child;n!==null;)vg(n),n=n.sibling}function vg(n){switch(n.tag){case 26:ks(n),n.flags&Uo&&n.memoizedState!==null&&hx(kn,n.memoizedState,n.memoizedProps);break;case 5:ks(n);break;case 3:case 4:var s=kn;kn=za(n.stateNode.containerInfo),ks(n),kn=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=Uo,Uo=16777216,ks(n),Uo=s):ks(n));break;default:ks(n)}}function Sg(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ho(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];ct=c,wg(c,n)}Sg(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)xg(n),n=n.sibling}function xg(n){switch(n.tag){case 0:case 11:case 15:Ho(n),n.flags&2048&&Ni(9,n,n.return);break;case 3:Ho(n);break;case 12:Ho(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,wa(n)):Ho(n);break;default:Ho(n)}}function wa(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];ct=c,wg(c,n)}Sg(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Ni(8,s,s.return),wa(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,wa(s));break;default:wa(s)}n=n.sibling}}function wg(n,s){for(;ct!==null;){var a=ct;switch(a.tag){case 0:case 11:case 15:Ni(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:To(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,ct=c;else e:for(a=n;ct!==null;){c=ct;var h=c.sibling,m=c.return;if(hg(c),c===a){ct=null;break e}if(h!==null){h.return=m,ct=h;break e}ct=m}}}var OS={getCacheForType:function(n){var s=Ct(rt),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a}},NS=typeof WeakMap=="function"?WeakMap:Map,Oe=0,je=null,we=null,Ee=0,Ne=0,tn=null,_i=!1,Os=!1,yf=!1,fi=0,Qe=0,zi=0,kr=0,bf=0,gn=0,Ns=0,Io=null,Pt=null,vf=!1,Sf=0,Ta=1/0,Ma=null,Bi=null,vt=0,qi=null,Rs=null,Ds=0,xf=0,wf=null,Tg=null,$o=0,Tf=null;function nn(){if((Oe&2)!==0&&Ee!==0)return Ee&-Ee;if(O.T!==null){var n=vs;return n!==0?n:Nf()}return dr()}function Mg(){gn===0&&(gn=(Ee&536870912)===0||ke?Cn():536870912);var n=mn.current;return n!==null&&(n.flags|=32),gn}function rn(n,s,a){(n===je&&(Ne===2||Ne===9)||n.cancelPendingCommit!==null)&&(_s(n,0),Li(n,Ee,gn,!1)),xi(n,a),((Oe&2)===0||n!==je)&&(n===je&&((Oe&2)===0&&(kr|=a),Qe===4&&Li(n,Ee,gn,!1)),Un(n))}function Eg(n,s,a){if((Oe&6)!==0)throw Error(r(327));var c=!a&&(s&124)===0&&(s&n.expiredLanes)===0||fr(n,s),h=c?_S(n,s):Cf(n,s,!0),m=c;do{if(h===0){Os&&!c&&Li(n,s,0,!1);break}else{if(a=n.current.alternate,m&&!RS(a)){h=Cf(n,s,!1),m=!1;continue}if(h===2){if(m=s,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var w=n;h=Io;var M=w.current.memoizedState.isDehydrated;if(M&&(_s(w,v).flags|=256),v=Cf(w,v,!1),v!==2){if(yf&&!M){w.errorRecoveryDisabledLanes|=m,kr|=m,h=4;break e}m=Pt,Pt=h,m!==null&&(Pt===null?Pt=m:Pt.push.apply(Pt,m))}h=v}if(m=!1,h!==2)continue}}if(h===1){_s(n,0),Li(n,s,0,!0);break}e:{switch(c=n,m=h,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Li(c,s,gn,!_i);break e;case 2:Pt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=Sf+300-Et(),10<h)){if(Li(c,s,gn,!_i),cr(c,0,!0)!==0)break e;c.timeoutHandle=ey(Cg.bind(null,c,a,Pt,Ma,vf,s,gn,kr,Ns,_i,m,2,-0,0),h);break e}Cg(c,a,Pt,Ma,vf,s,gn,kr,Ns,_i,m,0,-0,0)}}break}while(!0);Un(n)}function Cg(n,s,a,c,h,m,v,w,M,R,L,j,D,_){if(n.timeoutHandle=-1,j=s.subtreeFlags,(j&8192||(j&16785408)===16785408)&&(Xo={stylesheets:null,count:0,unsuspend:dx},vg(s),j=px(),j!==null)){n.cancelPendingCommit=j(_g.bind(null,n,s,m,a,c,h,v,w,M,L,1,D,_)),Li(n,m,v,!R);return}_g(n,s,m,a,c,h,v,w,M)}function RS(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var h=a[c],m=h.getSnapshot;h=h.value;try{if(!Jt(m(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Li(n,s,a,c){s&=~bf,s&=~kr,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var h=s;0<h;){var m=31-gt(h),v=1<<m;c[m]=-1,h&=~v}a!==0&&he(n,a,s)}function Ea(){return(Oe&6)===0?(Qo(0),!1):!0}function Mf(){if(we!==null){if(Ne===0)var n=we.return;else n=we,ii=wr=null,Uc(n),Es=null,zo=0,n=we;for(;n!==null;)sg(n.alternate,n),n=n.return;we=null}}function _s(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,KS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Mf(),je=n,we=a=ei(n.current,null),Ee=s,Ne=0,tn=null,_i=!1,Os=fr(n,s),yf=!1,Ns=gn=bf=kr=zi=Qe=0,Pt=Io=null,vf=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var h=31-gt(c),m=1<<h;s|=n[h],c&=~m}return fi=s,Gl(),a}function Ag(n,s){ve=null,O.H=da,s===Eo||s===na?(s=Qp(),Ne=3):s===Hp?(s=Qp(),Ne=4):Ne=s===Ym?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,tn=s,we===null&&(Qe=1,ya(n,fn(s,n.current)))}function kg(){var n=O.H;return O.H=da,n===null?da:n}function Og(){var n=O.A;return O.A=OS,n}function Ef(){Qe=4,_i||(Ee&4194048)!==Ee&&mn.current!==null||(Os=!0),(zi&134217727)===0&&(kr&134217727)===0||je===null||Li(je,Ee,gn,!1)}function Cf(n,s,a){var c=Oe;Oe|=2;var h=kg(),m=Og();(je!==n||Ee!==s)&&(Ma=null,_s(n,s)),s=!1;var v=Qe;e:do try{if(Ne!==0&&we!==null){var w=we,M=tn;switch(Ne){case 8:Mf(),v=6;break e;case 3:case 2:case 9:case 6:mn.current===null&&(s=!0);var R=Ne;if(Ne=0,tn=null,zs(n,w,M,R),a&&Os){v=0;break e}break;default:R=Ne,Ne=0,tn=null,zs(n,w,M,R)}}DS(),v=Qe;break}catch(L){Ag(n,L)}while(!0);return s&&n.shellSuspendCounter++,ii=wr=null,Oe=c,O.H=h,O.A=m,we===null&&(je=null,Ee=0,Gl()),v}function DS(){for(;we!==null;)Ng(we)}function _S(n,s){var a=Oe;Oe|=2;var c=kg(),h=Og();je!==n||Ee!==s?(Ma=null,Ta=Et()+500,_s(n,s)):Os=fr(n,s);e:do try{if(Ne!==0&&we!==null){s=we;var m=tn;t:switch(Ne){case 1:Ne=0,tn=null,zs(n,s,m,1);break;case 2:case 9:if(Ip(m)){Ne=0,tn=null,Rg(s);break}s=function(){Ne!==2&&Ne!==9||je!==n||(Ne=7),Un(n)},m.then(s,s);break e;case 3:Ne=7;break e;case 4:Ne=5;break e;case 7:Ip(m)?(Ne=0,tn=null,Rg(s)):(Ne=0,tn=null,zs(n,s,m,7));break;case 5:var v=null;switch(we.tag){case 26:v=we.memoizedState;case 5:case 27:var w=we;if(!v||dy(v)){Ne=0,tn=null;var M=w.sibling;if(M!==null)we=M;else{var R=w.return;R!==null?(we=R,Ca(R)):we=null}break t}}Ne=0,tn=null,zs(n,s,m,5);break;case 6:Ne=0,tn=null,zs(n,s,m,6);break;case 8:Mf(),Qe=6;break e;default:throw Error(r(462))}}zS();break}catch(L){Ag(n,L)}while(!0);return ii=wr=null,O.H=c,O.A=h,Oe=a,we!==null?0:(je=null,Ee=0,Gl(),Qe)}function zS(){for(;we!==null&&!Iu();)Ng(we)}function Ng(n){var s=ig(n.alternate,n,fi);n.memoizedProps=n.pendingProps,s===null?Ca(n):we=s}function Rg(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=Jm(a,s,s.pendingProps,s.type,void 0,Ee);break;case 11:s=Jm(a,s,s.pendingProps,s.type.render,s.ref,Ee);break;case 5:Uc(s);default:sg(a,s),s=we=Dp(s,fi),s=ig(a,s,fi)}n.memoizedProps=n.pendingProps,s===null?Ca(n):we=s}function zs(n,s,a,c){ii=wr=null,Uc(s),Es=null,zo=0;var h=s.return;try{if(TS(n,h,s,a,Ee)){Qe=1,ya(n,fn(a,n.current)),we=null;return}}catch(m){if(h!==null)throw we=h,m;Qe=1,ya(n,fn(a,n.current)),we=null;return}s.flags&32768?(ke||c===1?n=!0:Os||(Ee&536870912)!==0?n=!1:(_i=n=!0,(c===2||c===9||c===3||c===6)&&(c=mn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Dg(s,n)):Ca(s)}function Ca(n){var s=n;do{if((s.flags&32768)!==0){Dg(s,_i);return}n=s.return;var a=ES(s.alternate,s,fi);if(a!==null){we=a;return}if(s=s.sibling,s!==null){we=s;return}we=s=n}while(s!==null);Qe===0&&(Qe=5)}function Dg(n,s){do{var a=CS(n.alternate,n);if(a!==null){a.flags&=32767,we=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){we=n;return}we=n=a}while(n!==null);Qe=6,we=null}function _g(n,s,a,c,h,m,v,w,M){n.cancelPendingCommit=null;do Aa();while(vt!==0);if((Oe&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=mc,Bl(n,a,m,v,w,M),n===je&&(we=je=null,Ee=0),Rs=s,qi=n,Ds=a,xf=m,wf=h,Tg=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,VS(Jr,function(){return Vg(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=O.T,O.T=null,h=$.p,$.p=2,v=Oe,Oe|=4;try{AS(n,s,a)}finally{Oe=v,$.p=h,O.T=c}}vt=1,zg(),Bg(),qg()}}function zg(){if(vt===1){vt=0;var n=qi,s=Rs,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var c=$.p;$.p=2;var h=Oe;Oe|=4;try{gg(s,n);var m=Vf,v=wp(n.containerInfo),w=m.focusedElem,M=m.selectionRange;if(v!==w&&w&&w.ownerDocument&&xp(w.ownerDocument.documentElement,w)){if(M!==null&&cc(w)){var R=M.start,L=M.end;if(L===void 0&&(L=R),"selectionStart"in w)w.selectionStart=R,w.selectionEnd=Math.min(L,w.value.length);else{var j=w.ownerDocument||document,D=j&&j.defaultView||window;if(D.getSelection){var _=D.getSelection(),ue=w.textContent.length,le=Math.min(M.start,ue),_e=M.end===void 0?le:Math.min(M.end,ue);!_.extend&&le>_e&&(v=_e,_e=le,le=v);var k=Sp(w,le),A=Sp(w,_e);if(k&&A&&(_.rangeCount!==1||_.anchorNode!==k.node||_.anchorOffset!==k.offset||_.focusNode!==A.node||_.focusOffset!==A.offset)){var N=j.createRange();N.setStart(k.node,k.offset),_.removeAllRanges(),le>_e?(_.addRange(N),_.extend(A.node,A.offset)):(N.setEnd(A.node,A.offset),_.addRange(N))}}}}for(j=[],_=w;_=_.parentNode;)_.nodeType===1&&j.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<j.length;w++){var V=j[w];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}ja=!!Lf,Vf=Lf=null}finally{Oe=h,$.p=c,O.T=a}}n.current=s,vt=2}}function Bg(){if(vt===2){vt=0;var n=qi,s=Rs,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var c=$.p;$.p=2;var h=Oe;Oe|=4;try{dg(n,s.alternate,s)}finally{Oe=h,$.p=c,O.T=a}}vt=3}}function qg(){if(vt===4||vt===3){vt=0,Nl();var n=qi,s=Rs,a=Ds,c=Tg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?vt=5:(vt=0,Rs=qi=null,Lg(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(Bi=null),yt(a),s=s.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(zn,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=O.T,h=$.p,$.p=2,O.T=null;try{for(var m=n.onRecoverableError,v=0;v<c.length;v++){var w=c[v];m(w.value,{componentStack:w.stack})}}finally{O.T=s,$.p=h}}(Ds&3)!==0&&Aa(),Un(n),h=n.pendingLanes,(a&4194090)!==0&&(h&42)!==0?n===Tf?$o++:($o=0,Tf=n):$o=0,Qo(0)}}function Lg(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,To(s)))}function Aa(n){return zg(),Bg(),qg(),Vg()}function Vg(){if(vt!==5)return!1;var n=qi,s=xf;xf=0;var a=yt(Ds),c=O.T,h=$.p;try{$.p=32>a?32:a,O.T=null,a=wf,wf=null;var m=qi,v=Ds;if(vt=0,Rs=qi=null,Ds=0,(Oe&6)!==0)throw Error(r(331));var w=Oe;if(Oe|=4,xg(m.current),bg(m,m.current,v,a),Oe=w,Qo(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(zn,m)}catch{}return!0}finally{$.p=h,O.T=c,Lg(n,s)}}function jg(n,s,a){s=fn(a,s),s=ef(n.stateNode,s,2),n=Ci(n,s,2),n!==null&&(xi(n,2),Un(n))}function qe(n,s,a){if(n.tag===3)jg(n,n,a);else for(;s!==null;){if(s.tag===3){jg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Bi===null||!Bi.has(c))){n=fn(a,n),a=$m(2),c=Ci(s,a,2),c!==null&&(Qm(a,c,s,n),xi(c,2),Un(c));break}}s=s.return}}function Af(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new NS;var h=new Set;c.set(s,h)}else h=c.get(s),h===void 0&&(h=new Set,c.set(s,h));h.has(a)||(yf=!0,h.add(a),n=BS.bind(null,n,s,a),s.then(n,n))}function BS(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,je===n&&(Ee&a)===a&&(Qe===4||Qe===3&&(Ee&62914560)===Ee&&300>Et()-Sf?(Oe&2)===0&&_s(n,0):bf|=a,Ns===Ee&&(Ns=0)),Un(n)}function Ug(n,s){s===0&&(s=zl()),n=ms(n,s),n!==null&&(xi(n,s),Un(n))}function qS(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Ug(n,a)}function LS(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),Ug(n,a)}function VS(n,s){return ro(n,s)}var ka=null,Bs=null,kf=!1,Oa=!1,Of=!1,Or=0;function Un(n){n!==Bs&&n.next===null&&(Bs===null?ka=Bs=n:Bs=Bs.next=n),Oa=!0,kf||(kf=!0,US())}function Qo(n,s){if(!Of&&Oa){Of=!0;do for(var a=!1,c=ka;c!==null;){if(n!==0){var h=c.pendingLanes;if(h===0)var m=0;else{var v=c.suspendedLanes,w=c.pingedLanes;m=(1<<31-gt(42|n)+1)-1,m&=h&~(v&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Qg(c,m))}else m=Ee,m=cr(c,c===je?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||fr(c,m)||(a=!0,Qg(c,m));c=c.next}while(a);Of=!1}}function jS(){Hg()}function Hg(){Oa=kf=!1;var n=0;Or!==0&&(FS()&&(n=Or),Or=0);for(var s=Et(),a=null,c=ka;c!==null;){var h=c.next,m=Ig(c,s);m===0?(c.next=null,a===null?ka=h:a.next=h,h===null&&(Bs=a)):(a=c,(n!==0||(m&3)!==0)&&(Oa=!0)),c=h}Qo(n)}function Ig(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-gt(m),w=1<<v,M=h[v];M===-1?((w&a)===0||(w&c)!==0)&&(h[v]=so(w,s)):M<=s&&(n.expiredLanes|=w),m&=~w}if(s=je,a=Ee,a=cr(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,a===0||n===s&&(Ne===2||Ne===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&ur(c),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||fr(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(c!==null&&ur(c),yt(a)){case 2:case 8:a=Dl;break;case 32:a=Jr;break;case 268435456:a=Xn;break;default:a=Jr}return c=$g.bind(null,n),a=ro(a,c),n.callbackPriority=s,n.callbackNode=a,s}return c!==null&&c!==null&&ur(c),n.callbackPriority=2,n.callbackNode=null,2}function $g(n,s){if(vt!==0&&vt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Aa()&&n.callbackNode!==a)return null;var c=Ee;return c=cr(n,n===je?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Eg(n,c,s),Ig(n,Et()),n.callbackNode!=null&&n.callbackNode===a?$g.bind(null,n):null)}function Qg(n,s){if(Aa())return null;Eg(n,s,!0)}function US(){XS(function(){(Oe&6)!==0?ro(an,jS):Hg()})}function Nf(){return Or===0&&(Or=Cn()),Or}function Yg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ul(""+n)}function Pg(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function HS(n,s,a,c,h){if(s==="submit"&&a&&a.stateNode===h){var m=Yg((h[Ve]||null).action),v=c.submitter;v&&(s=(s=v[Ve]||null)?Yg(s.formAction):v.getAttribute("formAction"),s!==null&&(m=s,v=null));var w=new Ql("action","action",null,c,h);n.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Or!==0){var M=v?Pg(h,v):new FormData(h);Kc(a,{pending:!0,data:M,method:h.method,action:m},null,M)}}else typeof m=="function"&&(w.preventDefault(),M=v?Pg(h,v):new FormData(h),Kc(a,{pending:!0,data:M,method:h.method,action:m},m,M))},currentTarget:h}]})}}for(var Rf=0;Rf<pc.length;Rf++){var Df=pc[Rf],IS=Df.toLowerCase(),$S=Df[0].toUpperCase()+Df.slice(1);An(IS,"on"+$S)}An(Ep,"onAnimationEnd"),An(Cp,"onAnimationIteration"),An(Ap,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(oS,"onTransitionRun"),An(lS,"onTransitionStart"),An(aS,"onTransitionCancel"),An(kp,"onTransitionEnd"),rs("onMouseEnter",["mouseout","mouseover"]),rs("onMouseLeave",["mouseout","mouseover"]),rs("onPointerEnter",["pointerout","pointerover"]),rs("onPointerLeave",["pointerout","pointerover"]),hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hr("onBeforeInput",["compositionend","keypress","textInput","paste"]),hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yo));function Gg(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],h=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var v=c.length-1;0<=v;v--){var w=c[v],M=w.instance,R=w.currentTarget;if(w=w.listener,M!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=R;try{m(h)}catch(L){ga(L)}h.currentTarget=null,m=M}else for(v=0;v<c.length;v++){if(w=c[v],M=w.instance,R=w.currentTarget,w=w.listener,M!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=R;try{m(h)}catch(L){ga(L)}h.currentTarget=null,m=M}}}}function Te(n,s){var a=s[es];a===void 0&&(a=s[es]=new Set);var c=n+"__bubble";a.has(c)||(Fg(s,n,2,!1),a.add(c))}function _f(n,s,a){var c=0;s&&(c|=4),Fg(a,n,c,s)}var Na="_reactListening"+Math.random().toString(36).slice(2);function zf(n){if(!n[Na]){n[Na]=!0,Hh.forEach(function(a){a!=="selectionchange"&&(QS.has(a)||_f(a,!1,n),_f(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Na]||(s[Na]=!0,_f("selectionchange",!1,s))}}function Fg(n,s,a,c){switch(by(s)){case 2:var h=yx;break;case 8:h=bx;break;default:h=Ff}a=h.bind(null,s,a,n),h=void 0,!tc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(s,a,{capture:!0,passive:h}):n.addEventListener(s,a,!0):h!==void 0?n.addEventListener(s,a,{passive:h}):n.addEventListener(s,a,!1)}function Bf(n,s,a,c,h){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var w=c.stateNode.containerInfo;if(w===h)break;if(v===4)for(v=c.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;w!==null;){if(v=ts(w),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){c=m=v;continue e}w=w.parentNode}}c=c.return}tp(function(){var R=m,L=Wu(a),j=[];e:{var D=Op.get(n);if(D!==void 0){var _=Ql,ue=n;switch(n){case"keypress":if(Il(a)===0)break e;case"keydown":case"keyup":_=V1;break;case"focusin":ue="focus",_=sc;break;case"focusout":ue="blur",_=sc;break;case"beforeblur":case"afterblur":_=sc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=rp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=C1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=H1;break;case Ep:case Cp:case Ap:_=O1;break;case kp:_=$1;break;case"scroll":case"scrollend":_=M1;break;case"wheel":_=Y1;break;case"copy":case"cut":case"paste":_=R1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=op;break;case"toggle":case"beforetoggle":_=G1}var le=(s&4)!==0,_e=!le&&(n==="scroll"||n==="scrollend"),k=le?D!==null?D+"Capture":null:D;le=[];for(var A=R,N;A!==null;){var V=A;if(N=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||N===null||k===null||(V=uo(A,k),V!=null&&le.push(Po(A,V,N))),_e)break;A=A.return}0<le.length&&(D=new _(D,ue,null,a,L),j.push({event:D,listeners:le}))}}if((s&7)===0){e:{if(D=n==="mouseover"||n==="pointerover",_=n==="mouseout"||n==="pointerout",D&&a!==Zu&&(ue=a.relatedTarget||a.fromElement)&&(ts(ue)||ue[lt]))break e;if((_||D)&&(D=L.window===L?L:(D=L.ownerDocument)?D.defaultView||D.parentWindow:window,_?(ue=a.relatedTarget||a.toElement,_=R,ue=ue?ts(ue):null,ue!==null&&(_e=l(ue),le=ue.tag,ue!==_e||le!==5&&le!==27&&le!==6)&&(ue=null)):(_=null,ue=R),_!==ue)){if(le=rp,V="onMouseLeave",k="onMouseEnter",A="mouse",(n==="pointerout"||n==="pointerover")&&(le=op,V="onPointerLeave",k="onPointerEnter",A="pointer"),_e=_==null?D:ao(_),N=ue==null?D:ao(ue),D=new le(V,A+"leave",_,a,L),D.target=_e,D.relatedTarget=N,V=null,ts(L)===R&&(le=new le(k,A+"enter",ue,a,L),le.target=N,le.relatedTarget=_e,V=le),_e=V,_&&ue)t:{for(le=_,k=ue,A=0,N=le;N;N=qs(N))A++;for(N=0,V=k;V;V=qs(V))N++;for(;0<A-N;)le=qs(le),A--;for(;0<N-A;)k=qs(k),N--;for(;A--;){if(le===k||k!==null&&le===k.alternate)break t;le=qs(le),k=qs(k)}le=null}else le=null;_!==null&&Kg(j,D,_,le,!1),ue!==null&&_e!==null&&Kg(j,_e,ue,le,!0)}}e:{if(D=R?ao(R):window,_=D.nodeName&&D.nodeName.toLowerCase(),_==="select"||_==="input"&&D.type==="file")var W=pp;else if(dp(D))if(mp)W=iS;else{W=tS;var xe=eS}else _=D.nodeName,!_||_.toLowerCase()!=="input"||D.type!=="checkbox"&&D.type!=="radio"?R&&Ju(R.elementType)&&(W=pp):W=nS;if(W&&(W=W(n,R))){hp(j,W,a,L);break e}xe&&xe(n,D,R),n==="focusout"&&R&&D.type==="number"&&R.memoizedProps.value!=null&&Xu(D,"number",D.value)}switch(xe=R?ao(R):window,n){case"focusin":(dp(xe)||xe.contentEditable==="true")&&(ds=xe,fc=R,bo=null);break;case"focusout":bo=fc=ds=null;break;case"mousedown":dc=!0;break;case"contextmenu":case"mouseup":case"dragend":dc=!1,Tp(j,a,L);break;case"selectionchange":if(sS)break;case"keydown":case"keyup":Tp(j,a,L)}var re;if(lc)e:{switch(n){case"compositionstart":var ae="onCompositionStart";break e;case"compositionend":ae="onCompositionEnd";break e;case"compositionupdate":ae="onCompositionUpdate";break e}ae=void 0}else fs?cp(n,a)&&(ae="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ae="onCompositionStart");ae&&(lp&&a.locale!=="ko"&&(fs||ae!=="onCompositionStart"?ae==="onCompositionEnd"&&fs&&(re=np()):(wi=L,nc="value"in wi?wi.value:wi.textContent,fs=!0)),xe=Ra(R,ae),0<xe.length&&(ae=new sp(ae,n,null,a,L),j.push({event:ae,listeners:xe}),re?ae.data=re:(re=fp(a),re!==null&&(ae.data=re)))),(re=K1?X1(n,a):J1(n,a))&&(ae=Ra(R,"onBeforeInput"),0<ae.length&&(xe=new sp("onBeforeInput","beforeinput",null,a,L),j.push({event:xe,listeners:ae}),xe.data=re)),HS(j,n,R,a,L)}Gg(j,s)})}function Po(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Ra(n,s){for(var a=s+"Capture",c=[];n!==null;){var h=n,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=uo(n,a),h!=null&&c.unshift(Po(n,h,m)),h=uo(n,s),h!=null&&c.push(Po(n,h,m))),n.tag===3)return c;n=n.return}return[]}function qs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Kg(n,s,a,c,h){for(var m=s._reactName,v=[];a!==null&&a!==c;){var w=a,M=w.alternate,R=w.stateNode;if(w=w.tag,M!==null&&M===c)break;w!==5&&w!==26&&w!==27||R===null||(M=R,h?(R=uo(a,m),R!=null&&v.unshift(Po(a,R,M))):h||(R=uo(a,m),R!=null&&v.push(Po(a,R,M)))),a=a.return}v.length!==0&&n.push({event:s,listeners:v})}var YS=/\r\n?/g,PS=/\u0000|\uFFFD/g;function Xg(n){return(typeof n=="string"?n:""+n).replace(YS,`
`).replace(PS,"")}function Jg(n,s){return s=Xg(s),Xg(n)===s}function Da(){}function De(n,s,a,c,h,m){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||as(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&as(n,""+c);break;case"className":Ll(n,"class",c);break;case"tabIndex":Ll(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ll(n,a,c);break;case"style":Wh(n,c,m);break;case"data":if(s!=="object"){Ll(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=Ul(""+c),n.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&De(n,s,"name",h.name,h,null),De(n,s,"formEncType",h.formEncType,h,null),De(n,s,"formMethod",h.formMethod,h,null),De(n,s,"formTarget",h.formTarget,h,null)):(De(n,s,"encType",h.encType,h,null),De(n,s,"method",h.method,h,null),De(n,s,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=Ul(""+c),n.setAttribute(a,c);break;case"onClick":c!=null&&(n.onclick=Da);break;case"onScroll":c!=null&&Te("scroll",n);break;case"onScrollEnd":c!=null&&Te("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(a=c.__html,a!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}a=Ul(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""+c):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":c===!0?n.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,c):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(a,c):n.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(a):n.setAttribute(a,c);break;case"popover":Te("beforetoggle",n),Te("toggle",n),ql(n,"popover",c);break;case"xlinkActuate":Zn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Zn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Zn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Zn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Zn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Zn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Zn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Zn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Zn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ql(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=w1.get(a)||a,ql(n,a,c))}}function qf(n,s,a,c,h,m){switch(a){case"style":Wh(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(a=c.__html,a!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof c=="string"?as(n,c):(typeof c=="number"||typeof c=="bigint")&&as(n,""+c);break;case"onScroll":c!=null&&Te("scroll",n);break;case"onScrollEnd":c!=null&&Te("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Da);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ih.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),m=n[Ve]||null,m=m!=null?m[a]:null,typeof m=="function"&&n.removeEventListener(s,m,h),typeof c=="function")){typeof m!="function"&&m!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,c,h);break e}a in n?n[a]=c:c===!0?n.setAttribute(a,""):ql(n,a,c)}}}function St(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",n),Te("load",n);var c=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:De(n,s,m,v,a,null)}}h&&De(n,s,"srcSet",a.srcSet,a,null),c&&De(n,s,"src",a.src,a,null);return;case"input":Te("invalid",n);var w=m=v=h=null,M=null,R=null;for(c in a)if(a.hasOwnProperty(c)){var L=a[c];if(L!=null)switch(c){case"name":h=L;break;case"type":v=L;break;case"checked":M=L;break;case"defaultChecked":R=L;break;case"value":m=L;break;case"defaultValue":w=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(137,s));break;default:De(n,s,c,L,a,null)}}Kh(n,m,w,M,R,v,h,!1),Vl(n);return;case"select":Te("invalid",n),c=v=m=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":m=w;break;case"defaultValue":v=w;break;case"multiple":c=w;default:De(n,s,h,w,a,null)}s=m,a=v,n.multiple=!!c,s!=null?ls(n,!!c,s,!1):a!=null&&ls(n,!!c,a,!0);return;case"textarea":Te("invalid",n),m=h=c=null;for(v in a)if(a.hasOwnProperty(v)&&(w=a[v],w!=null))switch(v){case"value":c=w;break;case"defaultValue":h=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:De(n,s,v,w,a,null)}Jh(n,c,h,m),Vl(n);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(c=a[M],c!=null))switch(M){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:De(n,s,M,c,a,null)}return;case"dialog":Te("beforetoggle",n),Te("toggle",n),Te("cancel",n),Te("close",n);break;case"iframe":case"object":Te("load",n);break;case"video":case"audio":for(c=0;c<Yo.length;c++)Te(Yo[c],n);break;case"image":Te("error",n),Te("load",n);break;case"details":Te("toggle",n);break;case"embed":case"source":case"link":Te("error",n),Te("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in a)if(a.hasOwnProperty(R)&&(c=a[R],c!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:De(n,s,R,c,a,null)}return;default:if(Ju(s)){for(L in a)a.hasOwnProperty(L)&&(c=a[L],c!==void 0&&qf(n,s,L,c,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(c=a[w],c!=null&&De(n,s,w,c,a,null))}function GS(n,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,v=null,w=null,M=null,R=null,L=null;for(_ in a){var j=a[_];if(a.hasOwnProperty(_)&&j!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":M=j;default:c.hasOwnProperty(_)||De(n,s,_,null,c,j)}}for(var D in c){var _=c[D];if(j=a[D],c.hasOwnProperty(D)&&(_!=null||j!=null))switch(D){case"type":m=_;break;case"name":h=_;break;case"checked":R=_;break;case"defaultChecked":L=_;break;case"value":v=_;break;case"defaultValue":w=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(137,s));break;default:_!==j&&De(n,s,D,_,c,j)}}Ku(n,v,w,M,R,L,m,h);return;case"select":_=v=w=D=null;for(m in a)if(M=a[m],a.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":_=M;default:c.hasOwnProperty(m)||De(n,s,m,null,c,M)}for(h in c)if(m=c[h],M=a[h],c.hasOwnProperty(h)&&(m!=null||M!=null))switch(h){case"value":D=m;break;case"defaultValue":w=m;break;case"multiple":v=m;default:m!==M&&De(n,s,h,m,c,M)}s=w,a=v,c=_,D!=null?ls(n,!!a,D,!1):!!c!=!!a&&(s!=null?ls(n,!!a,s,!0):ls(n,!!a,a?[]:"",!1));return;case"textarea":_=D=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:De(n,s,w,null,c,h)}for(v in c)if(h=c[v],m=a[v],c.hasOwnProperty(v)&&(h!=null||m!=null))switch(v){case"value":D=h;break;case"defaultValue":_=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==m&&De(n,s,v,h,c,m)}Xh(n,D,_);return;case"option":for(var ue in a)if(D=a[ue],a.hasOwnProperty(ue)&&D!=null&&!c.hasOwnProperty(ue))switch(ue){case"selected":n.selected=!1;break;default:De(n,s,ue,null,c,D)}for(M in c)if(D=c[M],_=a[M],c.hasOwnProperty(M)&&D!==_&&(D!=null||_!=null))switch(M){case"selected":n.selected=D&&typeof D!="function"&&typeof D!="symbol";break;default:De(n,s,M,D,c,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var le in a)D=a[le],a.hasOwnProperty(le)&&D!=null&&!c.hasOwnProperty(le)&&De(n,s,le,null,c,D);for(R in c)if(D=c[R],_=a[R],c.hasOwnProperty(R)&&D!==_&&(D!=null||_!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(137,s));break;default:De(n,s,R,D,c,_)}return;default:if(Ju(s)){for(var _e in a)D=a[_e],a.hasOwnProperty(_e)&&D!==void 0&&!c.hasOwnProperty(_e)&&qf(n,s,_e,void 0,c,D);for(L in c)D=c[L],_=a[L],!c.hasOwnProperty(L)||D===_||D===void 0&&_===void 0||qf(n,s,L,D,c,_);return}}for(var k in a)D=a[k],a.hasOwnProperty(k)&&D!=null&&!c.hasOwnProperty(k)&&De(n,s,k,null,c,D);for(j in c)D=c[j],_=a[j],!c.hasOwnProperty(j)||D===_||D==null&&_==null||De(n,s,j,D,c,_)}var Lf=null,Vf=null;function _a(n){return n.nodeType===9?n:n.ownerDocument}function Zg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wg(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function jf(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Uf=null;function FS(){var n=window.event;return n&&n.type==="popstate"?n===Uf?!1:(Uf=n,!0):(Uf=null,!1)}var ey=typeof setTimeout=="function"?setTimeout:void 0,KS=typeof clearTimeout=="function"?clearTimeout:void 0,ty=typeof Promise=="function"?Promise:void 0,XS=typeof queueMicrotask=="function"?queueMicrotask:typeof ty<"u"?function(n){return ty.resolve(null).then(n).catch(JS)}:ey;function JS(n){setTimeout(function(){throw n})}function Vi(n){return n==="head"}function ny(n,s){var a=s,c=0,h=0;do{var m=a.nextSibling;if(n.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<c&&8>c){a=c;var v=n.ownerDocument;if(a&1&&Go(v.documentElement),a&2&&Go(v.body),a&4)for(a=v.head,Go(a),v=a.firstChild;v;){var w=v.nextSibling,M=v.nodeName;v[lo]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=w}}if(h===0){n.removeChild(m),tl(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:c=a.charCodeAt(0)-48;else c=0;a=m}while(a);tl(s)}function Hf(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Hf(a),Yu(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function ZS(n,s,a,c){for(;n.nodeType===1;){var h=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[lo])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=On(n.nextSibling),n===null)break}return null}function WS(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=On(n.nextSibling),n===null))return null;return n}function If(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function ex(n,s){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function On(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var $f=null;function iy(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}function ry(n,s,a){switch(s=_a(a),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Go(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Yu(n)}var yn=new Map,sy=new Set;function za(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var di=$.d;$.d={f:tx,r:nx,D:ix,C:rx,L:sx,m:ox,X:ax,S:lx,M:ux};function tx(){var n=di.f(),s=Ea();return n||s}function nx(n){var s=ns(n);s!==null&&s.tag===5&&s.type==="form"?Em(s):di.r(n)}var Ls=typeof document>"u"?null:document;function oy(n,s,a){var c=Ls;if(c&&typeof s=="string"&&s){var h=cn(s);h='link[rel="'+n+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),sy.has(h)||(sy.add(h),n={rel:n,crossOrigin:a,href:s},c.querySelector(h)===null&&(s=c.createElement("link"),St(s,"link",n),at(s),c.head.appendChild(s)))}}function ix(n){di.D(n),oy("dns-prefetch",n,null)}function rx(n,s){di.C(n,s),oy("preconnect",n,s)}function sx(n,s,a){di.L(n,s,a);var c=Ls;if(c&&n&&s){var h='link[rel="preload"][as="'+cn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+cn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+cn(a.imageSizes)+'"]')):h+='[href="'+cn(n)+'"]';var m=h;switch(s){case"style":m=Vs(n);break;case"script":m=js(n)}yn.has(m)||(n=g({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),yn.set(m,n),c.querySelector(h)!==null||s==="style"&&c.querySelector(Fo(m))||s==="script"&&c.querySelector(Ko(m))||(s=c.createElement("link"),St(s,"link",n),at(s),c.head.appendChild(s)))}}function ox(n,s){di.m(n,s);var a=Ls;if(a&&n){var c=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+cn(c)+'"][href="'+cn(n)+'"]',m=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=js(n)}if(!yn.has(m)&&(n=g({rel:"modulepreload",href:n},s),yn.set(m,n),a.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ko(m)))return}c=a.createElement("link"),St(c,"link",n),at(c),a.head.appendChild(c)}}}function lx(n,s,a){di.S(n,s,a);var c=Ls;if(c&&n){var h=is(c).hoistableStyles,m=Vs(n);s=s||"default";var v=h.get(m);if(!v){var w={loading:0,preload:null};if(v=c.querySelector(Fo(m)))w.loading=5;else{n=g({rel:"stylesheet",href:n,"data-precedence":s},a),(a=yn.get(m))&&Qf(n,a);var M=v=c.createElement("link");at(M),St(M,"link",n),M._p=new Promise(function(R,L){M.onload=R,M.onerror=L}),M.addEventListener("load",function(){w.loading|=1}),M.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Ba(v,s,c)}v={type:"stylesheet",instance:v,count:1,state:w},h.set(m,v)}}}function ax(n,s){di.X(n,s);var a=Ls;if(a&&n){var c=is(a).hoistableScripts,h=js(n),m=c.get(h);m||(m=a.querySelector(Ko(h)),m||(n=g({src:n,async:!0},s),(s=yn.get(h))&&Yf(n,s),m=a.createElement("script"),at(m),St(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(h,m))}}function ux(n,s){di.M(n,s);var a=Ls;if(a&&n){var c=is(a).hoistableScripts,h=js(n),m=c.get(h);m||(m=a.querySelector(Ko(h)),m||(n=g({src:n,async:!0,type:"module"},s),(s=yn.get(h))&&Yf(n,s),m=a.createElement("script"),at(m),St(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(h,m))}}function ly(n,s,a,c){var h=(h=X.current)?za(h):null;if(!h)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Vs(a.href),a=is(h).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Vs(a.href);var m=is(h).hoistableStyles,v=m.get(n);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=h.querySelector(Fo(n)))&&!m._p&&(v.instance=m,v.state.loading=5),yn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},yn.set(n,a),m||cx(h,n,a,v.state))),s&&c===null)throw Error(r(528,""));return v}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=js(a),a=is(h).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Vs(n){return'href="'+cn(n)+'"'}function Fo(n){return'link[rel="stylesheet"]['+n+"]"}function ay(n){return g({},n,{"data-precedence":n.precedence,precedence:null})}function cx(n,s,a,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),St(s,"link",a),at(s),n.head.appendChild(s))}function js(n){return'[src="'+cn(n)+'"]'}function Ko(n){return"script[async]"+n}function uy(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+cn(a.href)+'"]');if(c)return s.instance=c,at(c),c;var h=g({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),at(c),St(c,"style",h),Ba(c,a.precedence,n),s.instance=c;case"stylesheet":h=Vs(a.href);var m=n.querySelector(Fo(h));if(m)return s.state.loading|=4,s.instance=m,at(m),m;c=ay(a),(h=yn.get(h))&&Qf(c,h),m=(n.ownerDocument||n).createElement("link"),at(m);var v=m;return v._p=new Promise(function(w,M){v.onload=w,v.onerror=M}),St(m,"link",c),s.state.loading|=4,Ba(m,a.precedence,n),s.instance=m;case"script":return m=js(a.src),(h=n.querySelector(Ko(m)))?(s.instance=h,at(h),h):(c=a,(h=yn.get(m))&&(c=g({},a),Yf(c,h)),n=n.ownerDocument||n,h=n.createElement("script"),at(h),St(h,"link",c),n.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Ba(c,a.precedence,n));return s.instance}function Ba(n,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,m=h,v=0;v<c.length;v++){var w=c[v];if(w.dataset.precedence===s)m=w;else if(m!==h)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Qf(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Yf(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var qa=null;function cy(n,s,a){if(qa===null){var c=new Map,h=qa=new Map;h.set(a,c)}else h=qa,c=h.get(a),c||(c=new Map,h.set(a,c));if(c.has(n))return c;for(c.set(n,null),a=a.getElementsByTagName(n),h=0;h<a.length;h++){var m=a[h];if(!(m[lo]||m[Fe]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(s)||"";v=n+v;var w=c.get(v);w?w.push(m):c.set(v,[m])}}return c}function fy(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function fx(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function dy(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Xo=null;function dx(){}function hx(n,s,a){if(Xo===null)throw Error(r(475));var c=Xo;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=Vs(a.href),m=n.querySelector(Fo(h));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=La.bind(c),n.then(c,c)),s.state.loading|=4,s.instance=m,at(m);return}m=n.ownerDocument||n,a=ay(a),(h=yn.get(h))&&Qf(a,h),m=m.createElement("link"),at(m);var v=m;v._p=new Promise(function(w,M){v.onload=w,v.onerror=M}),St(m,"link",a),s.instance=m}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=La.bind(c),n.addEventListener("load",s),n.addEventListener("error",s))}}function px(){if(Xo===null)throw Error(r(475));var n=Xo;return n.stylesheets&&n.count===0&&Pf(n,n.stylesheets),0<n.count?function(s){var a=setTimeout(function(){if(n.stylesheets&&Pf(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(a)}}:null}function La(){if(this.count--,this.count===0){if(this.stylesheets)Pf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Va=null;function Pf(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Va=new Map,s.forEach(mx,n),Va=null,La.call(n))}function mx(n,s){if(!(s.state.loading&4)){var a=Va.get(n);if(a)var c=a.get(null);else{a=new Map,Va.set(n,a);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var v=h[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),c=v)}c&&a.set(null,c)}h=s.instance,v=h.getAttribute("data-precedence"),m=a.get(v)||c,m===c&&a.set(null,h),a.set(v,h),this.count++,c=La.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),m?m.parentNode.insertBefore(h,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),s.state.loading|=4}}var Jo={$$typeof:K,Provider:null,Consumer:null,_currentValue:P,_currentValue2:P,_threadCount:0};function gx(n,s,a,c,h,m,v,w){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oo(0),this.hiddenUpdates=oo(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function hy(n,s,a,c,h,m,v,w,M,R,L,j){return n=new gx(n,s,a,v,w,M,R,j),s=1,m===!0&&(s|=24),m=Zt(3,null,null,s),n.current=m,m.stateNode=n,s=Cc(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:c,isDehydrated:a,cache:s},Nc(m),n}function py(n){return n?(n=gs,n):gs}function my(n,s,a,c,h,m){h=py(h),c.context===null?c.context=h:c.pendingContext=h,c=Ei(s),c.payload={element:a},m=m===void 0?null:m,m!==null&&(c.callback=m),a=Ci(n,c,s),a!==null&&(rn(a,n,s),Ao(a,n,s))}function gy(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Gf(n,s){gy(n,s),(n=n.alternate)&&gy(n,s)}function yy(n){if(n.tag===13){var s=ms(n,67108864);s!==null&&rn(s,n,67108864),Gf(n,67108864)}}var ja=!0;function yx(n,s,a,c){var h=O.T;O.T=null;var m=$.p;try{$.p=2,Ff(n,s,a,c)}finally{$.p=m,O.T=h}}function bx(n,s,a,c){var h=O.T;O.T=null;var m=$.p;try{$.p=8,Ff(n,s,a,c)}finally{$.p=m,O.T=h}}function Ff(n,s,a,c){if(ja){var h=Kf(c);if(h===null)Bf(n,s,c,Ua,a),vy(n,c);else if(Sx(h,n,s,a,c))c.stopPropagation();else if(vy(n,c),s&4&&-1<vx.indexOf(n)){for(;h!==null;){var m=ns(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Bn(m.pendingLanes);if(v!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var M=1<<31-gt(v);w.entanglements[1]|=M,v&=~M}Un(m),(Oe&6)===0&&(Ta=Et()+500,Qo(0))}}break;case 13:w=ms(m,2),w!==null&&rn(w,m,2),Ea(),Gf(m,2)}if(m=Kf(c),m===null&&Bf(n,s,c,Ua,a),m===h)break;h=m}h!==null&&c.stopPropagation()}else Bf(n,s,c,null,a)}}function Kf(n){return n=Wu(n),Xf(n)}var Ua=null;function Xf(n){if(Ua=null,n=ts(n),n!==null){var s=l(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=u(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Ua=n,null}function by(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rl()){case an:return 2;case Dl:return 8;case Jr:case _t:return 32;case Xn:return 268435456;default:return 32}default:return 32}}var Jf=!1,ji=null,Ui=null,Hi=null,Zo=new Map,Wo=new Map,Ii=[],vx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vy(n,s){switch(n){case"focusin":case"focusout":ji=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":Hi=null;break;case"pointerover":case"pointerout":Zo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(s.pointerId)}}function el(n,s,a,c,h,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[h]},s!==null&&(s=ns(s),s!==null&&yy(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function Sx(n,s,a,c,h){switch(s){case"focusin":return ji=el(ji,n,s,a,c,h),!0;case"dragenter":return Ui=el(Ui,n,s,a,c,h),!0;case"mouseover":return Hi=el(Hi,n,s,a,c,h),!0;case"pointerover":var m=h.pointerId;return Zo.set(m,el(Zo.get(m)||null,n,s,a,c,h)),!0;case"gotpointercapture":return m=h.pointerId,Wo.set(m,el(Wo.get(m)||null,n,s,a,c,h)),!0}return!1}function Sy(n){var s=ts(n.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){n.blockedOn=s,it(n.priority,function(){if(a.tag===13){var c=nn();c=Je(c);var h=ms(a,c);h!==null&&rn(h,a,c),Gf(a,c)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ha(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Kf(n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Zu=c,a.target.dispatchEvent(c),Zu=null}else return s=ns(a),s!==null&&yy(s),n.blockedOn=a,!1;s.shift()}return!0}function xy(n,s,a){Ha(n)&&a.delete(s)}function xx(){Jf=!1,ji!==null&&Ha(ji)&&(ji=null),Ui!==null&&Ha(Ui)&&(Ui=null),Hi!==null&&Ha(Hi)&&(Hi=null),Zo.forEach(xy),Wo.forEach(xy)}function Ia(n,s){n.blockedOn===s&&(n.blockedOn=null,Jf||(Jf=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,xx)))}var $a=null;function wy(n){$a!==n&&($a=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){$a===n&&($a=null);for(var s=0;s<n.length;s+=3){var a=n[s],c=n[s+1],h=n[s+2];if(typeof c!="function"){if(Xf(c||a)===null)continue;break}var m=ns(a);m!==null&&(n.splice(s,3),s-=3,Kc(m,{pending:!0,data:h,method:a.method,action:c},c,h))}}))}function tl(n){function s(M){return Ia(M,n)}ji!==null&&Ia(ji,n),Ui!==null&&Ia(Ui,n),Hi!==null&&Ia(Hi,n),Zo.forEach(s),Wo.forEach(s);for(var a=0;a<Ii.length;a++){var c=Ii[a];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Ii.length&&(a=Ii[0],a.blockedOn===null);)Sy(a),a.blockedOn===null&&Ii.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var h=a[c],m=a[c+1],v=h[Ve]||null;if(typeof m=="function")v||wy(a);else if(v){var w=null;if(m&&m.hasAttribute("formAction")){if(h=m,v=m[Ve]||null)w=v.formAction;else if(Xf(h)!==null)continue}else w=v.action;typeof w=="function"?a[c+1]=w:(a.splice(c,3),c-=3),wy(a)}}}function Zf(n){this._internalRoot=n}Qa.prototype.render=Zf.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,c=nn();my(a,c,n,s,null,null)},Qa.prototype.unmount=Zf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;my(n.current,2,null,n,null,null),Ea(),s[lt]=null}};function Qa(n){this._internalRoot=n}Qa.prototype.unstable_scheduleHydration=function(n){if(n){var s=dr();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Ii.length&&s!==0&&s<Ii[a].priority;a++);Ii.splice(a,0,n),a===0&&Sy(n)}};var Ty=e.version;if(Ty!=="19.1.0")throw Error(r(527,Ty,"19.1.0"));$.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=d(s),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var wx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ya.isDisabled&&Ya.supportsFiber)try{zn=Ya.inject(wx),zt=Ya}catch{}}return il.createRoot=function(n,s){if(!o(n))throw Error(r(299));var a=!1,c="",h=jm,m=Um,v=Hm,w=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=hy(n,1,!1,null,null,a,c,h,m,v,w,null),n[lt]=s.current,zf(n),new Zf(s)},il.hydrateRoot=function(n,s,a){if(!o(n))throw Error(r(299));var c=!1,h="",m=jm,v=Um,w=Hm,M=null,R=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks),a.formState!==void 0&&(R=a.formState)),s=hy(n,1,!0,s,a??null,c,h,m,v,w,M,R),s.context=py(null),a=s.current,c=nn(),c=Je(c),h=Ei(c),h.callback=null,Ci(a,h,c),a=c,s.current.lanes=a,xi(s,a),Un(s),n[lt]=s.current,zf(n),new Qa(s)},il.version="19.1.0",il}var _y;function Rx(){if(_y)return td.exports;_y=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),td.exports=Nx(),td.exports}var Dx=Rx();const Rr="1.21.1-alpha.1";var Qn=[],vn=[],_x=Uint8Array,sd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Us=0,zx=sd.length;Us<zx;++Us)Qn[Us]=sd[Us],vn[sd.charCodeAt(Us)]=Us;vn[45]=62;vn[95]=63;function Bx(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function qx(i,e,t){return(e+t)*3/4-t}function pl(i){var e,t=Bx(i),r=t[0],o=t[1],l=new _x(qx(i,r,o)),u=0,f=o>0?r-4:r,d;for(d=0;d<f;d+=4)e=vn[i.charCodeAt(d)]<<18|vn[i.charCodeAt(d+1)]<<12|vn[i.charCodeAt(d+2)]<<6|vn[i.charCodeAt(d+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=e&255;return o===2&&(e=vn[i.charCodeAt(d)]<<2|vn[i.charCodeAt(d+1)]>>4,l[u++]=e&255),o===1&&(e=vn[i.charCodeAt(d)]<<10|vn[i.charCodeAt(d+1)]<<4|vn[i.charCodeAt(d+2)]>>2,l[u++]=e>>8&255,l[u++]=e&255),l}function Lx(i){return Qn[i>>18&63]+Qn[i>>12&63]+Qn[i>>6&63]+Qn[i&63]}function Vx(i,e,t){for(var r,o=[],l=e;l<t;l+=3)r=(i[l]<<16&16711680)+(i[l+1]<<8&65280)+(i[l+2]&255),o.push(Lx(r));return o.join("")}function ml(i){for(var e,t=i.length,r=t%3,o=[],l=16383,u=0,f=t-r;u<f;u+=l)o.push(Vx(i,u,u+l>f?f:u+l));return r===1?(e=i[t-1],o.push(Qn[e>>2]+Qn[e<<4&63]+"==")):r===2&&(e=(i[t-2]<<8)+i[t-1],o.push(Qn[e>>10]+Qn[e>>4&63]+Qn[e<<2&63]+"=")),o.join("")}function Ft(i){if(i===void 0)return{};if(!hb(i))throw new Error(`The arguments to a Convex function must be an object. Received: ${i}`);return i}function db(i){if(typeof i>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof i!="string")throw new Error(`Invalid deployment address: found ${i}".`);if(!(i.startsWith("http:")||i.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${i}".`);try{new URL(i)}catch{throw new Error(`Invalid deployment address: "${i}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(i.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${i}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function hb(i){const e=typeof i=="object",t=Object.getPrototypeOf(i),r=t===null||t===Object.prototype||t?.constructor?.name==="Object";return e&&r}const pb=!0,Xs=BigInt("-9223372036854775808"),ah=BigInt("9223372036854775807"),Bd=BigInt("0"),jx=BigInt("8"),Ux=BigInt("256");function mb(i){return Number.isNaN(i)||!Number.isFinite(i)||Object.is(i,-0)}function Hx(i){i<Bd&&(i-=Xs+Xs);let e=i.toString(16);e.length%2===1&&(e="0"+e);const t=new Uint8Array(new ArrayBuffer(8));let r=0;for(const o of e.match(/.{2}/g).reverse())t.set([parseInt(o,16)],r++),i>>=jx;return ml(t)}function Ix(i){const e=pl(i);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let t=Bd,r=Bd;for(const o of e)t+=BigInt(o)*Ux**r,r++;return t>ah&&(t+=Xs+Xs),t}function $x(i){if(i<Xs||ah<i)throw new Error(`BigInt ${i} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,i,!0),ml(new Uint8Array(e))}function Qx(i){const e=pl(i);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const Yx=DataView.prototype.setBigInt64?$x:Hx,Px=DataView.prototype.getBigInt64?Qx:Ix,zy=1024;function gb(i){if(i.length>zy)throw new Error(`Field name ${i} exceeds maximum field name length ${zy}.`);if(i.startsWith("$"))throw new Error(`Field name ${i} starts with a '$', which is reserved.`);for(let e=0;e<i.length;e+=1){const t=i.charCodeAt(e);if(t<32||t>=127)throw new Error(`Field name ${i} has invalid character '${i[e]}': Field names can only contain non-control ASCII characters`)}}function Rn(i){if(i===null||typeof i=="boolean"||typeof i=="number"||typeof i=="string")return i;if(Array.isArray(i))return i.map(r=>Rn(r));if(typeof i!="object")throw new Error(`Unexpected type of ${i}`);const e=Object.entries(i);if(e.length===1){const r=e[0][0];if(r==="$bytes"){if(typeof i.$bytes!="string")throw new Error(`Malformed $bytes field on ${i}`);return pl(i.$bytes).buffer}if(r==="$integer"){if(typeof i.$integer!="string")throw new Error(`Malformed $integer field on ${i}`);return Px(i.$integer)}if(r==="$float"){if(typeof i.$float!="string")throw new Error(`Malformed $float field on ${i}`);const o=pl(i.$float);if(o.byteLength!==8)throw new Error(`Received ${o.byteLength} bytes, expected 8 for $float`);const u=new DataView(o.buffer).getFloat64(0,pb);if(!mb(u))throw new Error(`Float ${u} should be encoded as a number`);return u}if(r==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(r==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const t={};for(const[r,o]of Object.entries(i))gb(r),t[r]=Rn(o);return t}function ul(i){return JSON.stringify(i,(e,t)=>t===void 0?"undefined":typeof t=="bigint"?`${t.toString()}n`:t)}function qd(i,e,t,r){if(i===void 0){const u=t&&` (present at path ${t} in original object ${ul(e)})`;throw new Error(`undefined is not a valid Convex value${u}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(i===null)return i;if(typeof i=="bigint"){if(i<Xs||ah<i)throw new Error(`BigInt ${i} does not fit into a 64-bit signed integer.`);return{$integer:Yx(i)}}if(typeof i=="number")if(mb(i)){const u=new ArrayBuffer(8);return new DataView(u).setFloat64(0,i,pb),{$float:ml(new Uint8Array(u))}}else return i;if(typeof i=="boolean"||typeof i=="string")return i;if(i instanceof ArrayBuffer)return{$bytes:ml(new Uint8Array(i))};if(Array.isArray(i))return i.map((u,f)=>qd(u,e,t+`[${f}]`));if(i instanceof Set)throw new Error(od(t,"Set",[...i],e));if(i instanceof Map)throw new Error(od(t,"Map",[...i],e));if(!hb(i)){const u=i?.constructor?.name,f=u?`${u} `:"";throw new Error(od(t,f,i,e))}const o={},l=Object.entries(i);l.sort(([u,f],[d,p])=>u===d?0:u<d?-1:1);for(const[u,f]of l)f!==void 0&&(gb(u),o[u]=qd(f,e,t+`.${u}`));return o}function od(i,e,t,r){return i?`${e}${ul(t)} is not a supported Convex type (present at path ${i} in original object ${ul(r)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${ul(t)} is not a supported Convex type.`}function wn(i){return qd(i,i,"")}var Gx=Object.defineProperty,Fx=(i,e,t)=>e in i?Gx(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ld=(i,e,t)=>Fx(i,typeof e!="symbol"?e+"":e,t),By,qy;const Kx=Symbol.for("ConvexError");class zr extends(qy=Error,By=Kx,qy){constructor(e){super(typeof e=="string"?e:ul(e)),ld(this,"name","ConvexError"),ld(this,"data"),ld(this,By,!0),this.data=e}}var Xx=Object.defineProperty,Jx=(i,e,t)=>e in i?Xx(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ly=(i,e,t)=>Jx(i,typeof e!="symbol"?e+"":e,t);const Zx="color:rgb(0, 145, 255)";function yb(i){switch(i){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class Wx{constructor(e){Ly(this,"_onLogLineFuncs"),Ly(this,"_verbose"),this._onLogLineFuncs={},this._verbose=e.verbose}addLogLineListener(e){let t=Math.random().toString(36).substring(2,15);for(let r=0;r<10&&this._onLogLineFuncs[t]!==void 0;r++)t=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[t]=e,()=>{delete this._onLogLineFuncs[t]}}logVerbose(...e){if(this._verbose)for(const t of Object.values(this._onLogLineFuncs))t("debug",`${new Date().toISOString()}`,...e)}log(...e){for(const t of Object.values(this._onLogLineFuncs))t("info",...e)}warn(...e){for(const t of Object.values(this._onLogLineFuncs))t("warn",...e)}error(...e){for(const t of Object.values(this._onLogLineFuncs))t("error",...e)}}function uh(i){const e=new Wx(i);return e.addLogLineListener((t,...r)=>{switch(t){case"debug":console.debug(...r);break;case"info":console.log(...r);break;case"warn":console.warn(...r);break;case"error":console.error(...r);break;default:console.log(...r)}}),e}function Ki(i,e,t,r,o){const l=yb(t);if(typeof o=="object"&&(o=`ConvexError ${JSON.stringify(o.errorData,null,2)}`),e==="info"){const u=o.match(/^\[.*?\] /);if(u===null){i.error(`[CONVEX ${l}(${r})] Could not parse console.log`);return}const f=o.slice(1,u[0].length-2),d=o.slice(u[0].length);i.log(`%c[CONVEX ${l}(${r})] [${f}]`,Zx,d)}else i.error(`[CONVEX ${l}(${r})] ${o}`)}function ew(i,e){const t=`[CONVEX FATAL ERROR] ${e}`;return i.error(t),new Error(t)}function Ys(i,e,t){return`[CONVEX ${yb(i)}(${e})] ${t.errorMessage}
  Called by client`}function Ld(i,e){return e.data=i.errorData,e}function fu(i){const e=i.split(":");let t,r;return e.length===1?(t=e[0],r="default"):(t=e.slice(0,e.length-1).join(":"),r=e[e.length-1]),t.endsWith(".js")&&(t=t.slice(0,-3)),`${t}:${r}`}function Vr(i,e){return JSON.stringify({udfPath:fu(i),args:wn(e)})}var tw=Object.defineProperty,nw=(i,e,t)=>e in i?tw(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Hn=(i,e,t)=>nw(i,typeof e!="symbol"?e+"":e,t);class iw{constructor(){Hn(this,"nextQueryId"),Hn(this,"querySetVersion"),Hn(this,"querySet"),Hn(this,"queryIdToToken"),Hn(this,"identityVersion"),Hn(this,"auth"),Hn(this,"outstandingQueriesOlderThanRestart"),Hn(this,"outstandingAuthOlderThanRestart"),Hn(this,"paused"),Hn(this,"pendingQuerySetModifications"),this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1,this.paused=!1,this.pendingQuerySetModifications=new Map}hasSyncedPastLastReconnect(){return this.outstandingQueriesOlderThanRestart.size===0&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(e,t,r,o){const l=fu(e),u=Vr(l,t),f=this.querySet.get(u);if(f!==void 0)return f.numSubscribers+=1,{queryToken:u,modification:null,unsubscribe:()=>this.removeSubscriber(u)};{const d=this.nextQueryId++,p={id:d,canonicalizedUdfPath:l,args:t,numSubscribers:1,journal:r,componentPath:o};this.querySet.set(u,p),this.queryIdToToken.set(d,u);const g=this.querySetVersion,y=this.querySetVersion+1,b={type:"Add",queryId:d,udfPath:l,args:[wn(t)],journal:r,componentPath:o};return this.paused?this.pendingQuerySetModifications.set(d,b):this.querySetVersion=y,{queryToken:u,modification:{type:"ModifyQuerySet",baseVersion:g,newVersion:y,modifications:[b]},unsubscribe:()=>this.removeSubscriber(u)}}}transition(e){for(const t of e.modifications)switch(t.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);const r=t.journal;if(r!==void 0){const o=this.queryIdToToken.get(t.queryId);o!==void 0&&(this.querySet.get(o).journal=r)}break}case"QueryRemoved":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);break}default:throw new Error(`Invalid modification ${t.type}`)}}queryId(e,t){const r=fu(e),o=Vr(r,t),l=this.querySet.get(o);return l!==void 0?l.id:null}isCurrentOrNewerAuthVersion(e){return e>=this.identityVersion}setAuth(e){this.auth={tokenType:"User",value:e};const t=this.identityVersion;return this.paused||(this.identityVersion=t+1),{type:"Authenticate",baseVersion:t,...this.auth}}setAdminAuth(e,t){const r={tokenType:"Admin",value:e,impersonating:t};this.auth=r;const o=this.identityVersion;return this.paused||(this.identityVersion=o+1),{type:"Authenticate",baseVersion:o,...r}}clearAuth(){this.auth=void 0,this.markAuthCompletion();const e=this.identityVersion;return this.paused||(this.identityVersion=e+1),{type:"Authenticate",tokenType:"None",baseVersion:e}}hasAuth(){return!!this.auth}isNewAuth(e){return this.auth?.value!==e}queryPath(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).canonicalizedUdfPath:null}queryArgs(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).args:null}queryToken(e){return this.queryIdToToken.get(e)??null}queryJournal(e){return this.querySet.get(e)?.journal}restart(e){this.unpause(),this.outstandingQueriesOlderThanRestart.clear();const t=[];for(const l of this.querySet.values()){const u={type:"Add",queryId:l.id,udfPath:l.canonicalizedUdfPath,args:[wn(l.args)],journal:l.journal,componentPath:l.componentPath};t.push(u),e.has(l.id)||this.outstandingQueriesOlderThanRestart.add(l.id)}this.querySetVersion=1;const r={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:t};if(!this.auth)return this.identityVersion=0,[r,void 0];this.outstandingAuthOlderThanRestart=!0;const o={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[r,o]}pause(){this.paused=!0}resume(){const e=this.pendingQuerySetModifications.size>0?{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:Array.from(this.pendingQuerySetModifications.values())}:void 0,t=this.auth!==void 0?{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}:void 0;return this.unpause(),[e,t]}unpause(){this.paused=!1,this.pendingQuerySetModifications.clear()}removeSubscriber(e){const t=this.querySet.get(e);if(t.numSubscribers>1)return t.numSubscribers-=1,null;{this.querySet.delete(e),this.queryIdToToken.delete(t.id),this.outstandingQueriesOlderThanRestart.delete(t.id);const r=this.querySetVersion,o=this.querySetVersion+1,l={type:"Remove",queryId:t.id};return this.paused?this.pendingQuerySetModifications.has(t.id)?this.pendingQuerySetModifications.delete(t.id):this.pendingQuerySetModifications.set(t.id,l):this.querySetVersion=o,{type:"ModifyQuerySet",baseVersion:r,newVersion:o,modifications:[l]}}}}var rw=Object.defineProperty,sw=(i,e,t)=>e in i?rw(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Vy=(i,e,t)=>sw(i,typeof e!="symbol"?e+"":e,t);class ow{constructor(e){this.logger=e,Vy(this,"inflightRequests"),Vy(this,"requestsOlderThanRestart"),this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(e,t){return new Promise(o=>{const l=t?"Requested":"NotSent";this.inflightRequests.set(e.requestId,{message:e,status:{status:l,requestedAt:new Date,onResult:o}})})}onResponse(e){const t=this.inflightRequests.get(e.requestId);if(t===void 0||t.status.status==="Completed")return null;const r=t.message.type==="Mutation"?"mutation":"action",o=t.message.udfPath;for(const d of e.logLines)Ki(this.logger,"info",r,o,d);const l=t.status;let u,f;if(e.success)u={success:!0,logLines:e.logLines,value:Rn(e.result)},f=()=>l.onResult(u);else{const d=e.result,{errorData:p}=e;Ki(this.logger,"error",r,o,d),u={success:!1,errorMessage:d,errorData:p!==void 0?Rn(p):void 0,logLines:e.logLines},f=()=>l.onResult(u)}return e.type==="ActionResponse"||!e.success?(f(),this.inflightRequests.delete(e.requestId),this.requestsOlderThanRestart.delete(e.requestId),{requestId:e.requestId,result:u}):(t.status={status:"Completed",result:u,ts:e.ts,onResolve:f},null)}removeCompleted(e){const t=new Map;for(const[r,o]of this.inflightRequests.entries()){const l=o.status;l.status==="Completed"&&l.ts.lessThanOrEqual(e)&&(l.onResolve(),t.set(r,l.result),this.inflightRequests.delete(r),this.requestsOlderThanRestart.delete(r))}return t}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());const e=[];for(const[t,r]of this.inflightRequests){if(r.status.status==="NotSent"){r.status.status="Requested",e.push(r.message);continue}if(r.message.type==="Mutation")e.push(r.message);else{if(this.inflightRequests.delete(t),this.requestsOlderThanRestart.delete(t),r.status.status==="Completed")throw new Error("Action should never be in 'Completed' state");r.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return e}resume(){const e=[];for(const[,t]of this.inflightRequests)if(t.status.status==="NotSent"){t.status.status="Requested",e.push(t.message);continue}return e}hasIncompleteRequests(){for(const e of this.inflightRequests.values())if(e.status.status==="Requested")return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return this.requestsOlderThanRestart.size===0}timeOfOldestInflightRequest(){if(this.inflightRequests.size===0)return null;let e=Date.now();for(const t of this.inflightRequests.values())t.status.status!=="Completed"&&t.status.requestedAt.getTime()<e&&(e=t.status.requestedAt.getTime());return new Date(e)}}const gl=Symbol.for("functionName"),lw=Symbol.for("toReferencePath");function aw(i){return i[lw]??null}function uw(i){return i.startsWith("function://")}function cw(i){let e;if(typeof i=="string")uw(i)?e={functionHandle:i}:e={name:i};else if(i[gl])e={name:i[gl]};else{const t=aw(i);if(!t)throw new Error(`${i} is not a functionReference`);e={reference:t}}return e}function Mt(i){const e=cw(i);if(e.name===void 0)throw e.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${e.functionHandle}`):e.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${e.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(e)}`);if(typeof i=="string")return i;const t=i[gl];if(!t)throw new Error(`${i} is not a functionReference`);return t}function bb(i){return{[gl]:i}}function vb(i=[]){const e={get(t,r){if(typeof r=="string"){const o=[...i,r];return vb(o)}else if(r===gl){if(i.length<2){const u=["api",...i].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${u}\``)}const o=i.slice(0,-1).join("/"),l=i[i.length-1];return l==="default"?o:o+":"+l}else return r===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}const fw=vb();var dw=Object.defineProperty,hw=(i,e,t)=>e in i?dw(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,du=(i,e,t)=>hw(i,typeof e!="symbol"?e+"":e,t);class yl{constructor(e){du(this,"queryResults"),du(this,"modifiedQueries"),this.queryResults=e,this.modifiedQueries=[]}getQuery(e,...t){const r=Ft(t[0]),o=Mt(e),l=this.queryResults.get(Vr(o,r));if(l!==void 0)return yl.queryValue(l.result)}getAllQueries(e){const t=[],r=Mt(e);for(const o of this.queryResults.values())o.udfPath===fu(r)&&t.push({args:o.args,value:yl.queryValue(o.result)});return t}setQuery(e,t,r){const o=Ft(t),l=Mt(e),u=Vr(l,o);let f;r===void 0?f=void 0:f={success:!0,value:r,logLines:[]};const d={udfPath:l,args:o,result:f};this.queryResults.set(u,d),this.modifiedQueries.push(u)}static queryValue(e){if(e!==void 0)return e.success?e.value:void 0}}class pw{constructor(){du(this,"queryResults"),du(this,"optimisticUpdates"),this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(e,t){this.optimisticUpdates=this.optimisticUpdates.filter(u=>!t.has(u.mutationId));const r=this.queryResults;this.queryResults=new Map(e);const o=new yl(this.queryResults);for(const u of this.optimisticUpdates)u.update(o);const l=[];for(const[u,f]of this.queryResults){const d=r.get(u);(d===void 0||d.result!==f.result)&&l.push(u)}return l}applyOptimisticUpdate(e,t){this.optimisticUpdates.push({update:e,mutationId:t});const r=new yl(this.queryResults);return e(r),r.modifiedQueries}queryResult(e){const t=this.queryResults.get(e);if(t===void 0)return;const r=t.result;if(r!==void 0){if(r.success)return r.value;throw r.errorData!==void 0?Ld(r,new zr(Ys("query",t.udfPath,r))):new Error(Ys("query",t.udfPath,r))}}hasQueryResult(e){return this.queryResults.get(e)!==void 0}queryLogs(e){return this.queryResults.get(e)?.result?.logLines}}var mw=Object.defineProperty,gw=(i,e,t)=>e in i?mw(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ad=(i,e,t)=>gw(i,typeof e!="symbol"?e+"":e,t);class sn{constructor(e,t){ad(this,"low"),ad(this,"high"),ad(this,"__isUnsignedLong__"),this.low=e|0,this.high=t|0,this.__isUnsignedLong__=!0}static isLong(e){return(e&&e.__isUnsignedLong__)===!0}static fromBytesLE(e){return new sn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24)}toBytesLE(){const e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}static fromNumber(e){return isNaN(e)||e<0?jy:e>=yw?bw:new sn(e%cl|0,e/cl|0)}toString(){return(BigInt(this.high)*BigInt(cl)+BigInt(this.low)).toString()}equals(e){return sn.isLong(e)||(e=sn.fromValue(e)),this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}notEquals(e){return!this.equals(e)}comp(e){return sn.isLong(e)||(e=sn.fromValue(e)),this.equals(e)?0:e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(e){return this.comp(e)<=0}static fromValue(e){return typeof e=="number"?sn.fromNumber(e):new sn(e.low,e.high)}}const jy=new sn(0,0),Uy=65536,cl=Uy*Uy,yw=cl*cl,bw=new sn(-1,-1);var vw=Object.defineProperty,Sw=(i,e,t)=>e in i?vw(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Pa=(i,e,t)=>Sw(i,typeof e!="symbol"?e+"":e,t);class Hy{constructor(e,t){Pa(this,"version"),Pa(this,"remoteQuerySet"),Pa(this,"queryPath"),Pa(this,"logger"),this.version={querySet:0,ts:sn.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=e,this.logger=t}transition(e){const t=e.startVersion;if(this.version.querySet!==t.querySet||this.version.ts.notEquals(t.ts)||this.version.identity!==t.identity)throw new Error(`Invalid start version: ${t.ts.toString()}:${t.querySet}`);for(const r of e.modifications)switch(r.type){case"QueryUpdated":{const o=this.queryPath(r.queryId);if(o)for(const u of r.logLines)Ki(this.logger,"info","query",o,u);const l=Rn(r.value??null);this.remoteQuerySet.set(r.queryId,{success:!0,value:l,logLines:r.logLines});break}case"QueryFailed":{const o=this.queryPath(r.queryId);if(o)for(const u of r.logLines)Ki(this.logger,"info","query",o,u);const{errorData:l}=r;this.remoteQuerySet.set(r.queryId,{success:!1,errorMessage:r.errorMessage,errorData:l!==void 0?Rn(l):void 0,logLines:r.logLines});break}case"QueryRemoved":{this.remoteQuerySet.delete(r.queryId);break}default:throw new Error(`Invalid modification ${r.type}`)}this.version=e.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function ud(i){const e=pl(i);return sn.fromBytesLE(Array.from(e))}function xw(i){const e=new Uint8Array(i.toBytesLE());return ml(e)}function ww(i){switch(i.type){case"FatalError":case"AuthError":case"ActionResponse":case"Ping":return{...i};case"MutationResponse":return i.success?{...i,ts:ud(i.ts)}:{...i};case"Transition":return{...i,startVersion:{...i.startVersion,ts:ud(i.startVersion.ts)},endVersion:{...i.endVersion,ts:ud(i.endVersion.ts)}}}}function Tw(i){switch(i.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...i};case"Connect":return i.maxObservedTimestamp!==void 0?{...i,maxObservedTimestamp:xw(i.maxObservedTimestamp)}:{...i,maxObservedTimestamp:void 0}}}var Mw=Object.defineProperty,Ew=(i,e,t)=>e in i?Mw(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,qt=(i,e,t)=>Ew(i,typeof e!="symbol"?e+"":e,t);const Cw=1e3,Aw=1001,kw=1005,Ow=4040;class Nw{constructor(e,t,r,o){qt(this,"socket"),qt(this,"connectionCount"),qt(this,"_hasEverConnected",!1),qt(this,"lastCloseReason"),qt(this,"initialBackoff"),qt(this,"maxBackoff"),qt(this,"retries"),qt(this,"serverInactivityThreshold"),qt(this,"reconnectDueToServerInactivityTimeout"),qt(this,"uri"),qt(this,"onOpen"),qt(this,"onResume"),qt(this,"onMessage"),qt(this,"webSocketConstructor"),qt(this,"logger"),this.webSocketConstructor=r,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.initialBackoff=100,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=3e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=e,this.onOpen=t.onOpen,this.onResume=t.onResume,this.onMessage=t.onMessage,this.logger=o,this.connect()}setSocketState(e){this.socket=e,this._logVerbose(`socket state changed: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}`)}connect(){if(this.socket.state==="terminated")return;if(this.socket.state!=="disconnected"&&this.socket.state!=="stopped")throw new Error("Didn't start connection from disconnected state: "+this.socket.state);const e=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.setSocketState({state:"connecting",ws:e,paused:"no"}),this.resetServerInactivityTimeout(),e.onopen=()=>{if(this.logger.logVerbose("begin ws.onopen"),this.socket.state!=="connecting")throw new Error("onopen called with socket not in connecting state");this.setSocketState({state:"ready",ws:e,paused:this.socket.paused==="yes"?"uninitialized":"no"}),this.resetServerInactivityTimeout(),this.socket.paused==="no"&&(this._hasEverConnected=!0,this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason})),this.lastCloseReason!=="InitialConnect"&&this.logger.log("WebSocket reconnected"),this.connectionCount+=1,this.lastCloseReason=null},e.onerror=t=>{const r=t.message;this.logger.log(`WebSocket error: ${r}`)},e.onmessage=t=>{this.resetServerInactivityTimeout();const r=ww(JSON.parse(t.data));this._logVerbose(`received ws message with type ${r.type}`),this.onMessage(r).hasSyncedPastLastReconnect&&(this.retries=0)},e.onclose=t=>{if(this._logVerbose("begin ws.onclose"),this.lastCloseReason===null&&(this.lastCloseReason=t.reason??"OnCloseInvoked"),t.code!==Cw&&t.code!==Aw&&t.code!==kw&&t.code!==Ow){let r=`WebSocket closed with code ${t.code}`;t.reason&&(r+=`: ${t.reason}`),this.logger.log(r)}this.scheduleReconnect()}}socketState(){return this.socket.state}sendMessage(e){const t={type:e.type,...e.type==="Authenticate"&&e.tokenType==="User"?{value:`...${e.value.slice(-7)}`}:{}};if(this.socket.state==="ready"&&this.socket.paused==="no"){const r=Tw(e),o=JSON.stringify(r);try{this.socket.ws.send(o)}catch(l){this.logger.log(`Failed to send message on WebSocket, reconnecting: ${l}`),this.closeAndReconnect("FailedToSendMessage")}return this._logVerbose(`sent message with type ${e.type}: ${JSON.stringify(t)}`),!0}return this._logVerbose(`message not sent (socket state: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}): ${JSON.stringify(t)}`),!1}resetServerInactivityTimeout(){this.socket.state!=="terminated"&&(this.reconnectDueToServerInactivityTimeout!==null&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(){this.socket={state:"disconnected"};const e=this.nextBackoff();this.logger.log(`Attempting reconnect in ${e}ms`),setTimeout(()=>this.connect(),e)}closeAndReconnect(e){switch(this._logVerbose(`begin closeAndReconnect with reason ${e}`),this.socket.state){case"disconnected":case"terminated":case"stopped":return;case"connecting":case"ready":{this.lastCloseReason=e,this.close(),this.scheduleReconnect();return}default:this.socket}}close(){switch(this.socket.state){case"disconnected":case"terminated":case"stopped":return Promise.resolve();case"connecting":{const e=this.socket.ws;return new Promise(t=>{e.onclose=()=>{this._logVerbose("Closed after connecting"),t()},e.onopen=()=>{this._logVerbose("Opened after connecting"),e.close()}})}case"ready":{this._logVerbose("ws.close called");const e=this.socket.ws,t=new Promise(r=>{e.onclose=()=>{r()}});return e.close(),t}default:return this.socket,Promise.resolve()}}terminate(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"terminated":case"stopped":case"disconnected":case"connecting":case"ready":{const e=this.close();return this.setSocketState({state:"terminated"}),e}default:throw this.socket,new Error(`Invalid websocket state: ${this.socket.state}`)}}stop(){switch(this.socket.state){case"terminated":return Promise.resolve();case"connecting":case"stopped":case"disconnected":case"ready":{const e=this.close();return this.socket={state:"stopped"},e}default:return this.socket,Promise.resolve()}}tryRestart(){switch(this.socket.state){case"stopped":break;case"terminated":case"connecting":case"ready":case"disconnected":this.logger.logVerbose("Restart called without stopping first");return;default:this.socket}this.connect()}pause(){switch(this.socket.state){case"disconnected":case"stopped":case"terminated":return;case"connecting":case"ready":{this.socket={...this.socket,paused:"yes"};return}default:{this.socket;return}}}resume(){switch(this.socket.state){case"connecting":this.socket={...this.socket,paused:"no"};return;case"ready":this.socket.paused==="uninitialized"?(this.socket={...this.socket,paused:"no"},this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason})):this.socket.paused==="yes"&&(this.socket={...this.socket,paused:"no"},this.onResume());return;case"terminated":case"stopped":case"disconnected":return;default:this.socket}this.connect()}connectionState(){return{isConnected:this.socket.state==="ready",hasEverConnected:this._hasEverConnected,connectionCount:this.connectionCount,connectionRetries:this.retries}}_logVerbose(e){this.logger.logVerbose(e)}nextBackoff(){const e=this.initialBackoff*Math.pow(2,this.retries);this.retries+=1;const t=Math.min(e,this.maxBackoff),r=t*(Math.random()-.5);return t+r}}function Rw(){return Dw()}function Dw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const e=Math.random()*16|0;return(i==="x"?e:e&3|8).toString(16)})}function Vd(i){this.message=i}Vd.prototype=new Error,Vd.prototype.name="InvalidCharacterError";var Iy=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(i){var e=String(i).replace(/=+$/,"");if(e.length%4==1)throw new Vd("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,r,o=0,l=0,u="";r=e.charAt(l++);~r&&(t=o%4?64*t+r:r,o++%4)?u+=String.fromCharCode(255&t>>(-2*o&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return u};function _w(i){var e=i.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(Iy(t).replace(/(.)/g,function(r,o){var l=o.charCodeAt(0).toString(16).toUpperCase();return l.length<2&&(l="0"+l),"%"+l}))}(e)}catch{return Iy(e)}}function hu(i){this.message=i}function zw(i,e){if(typeof i!="string")throw new hu("Invalid token specified");var t=(e=e||{}).header===!0?0:1;try{return JSON.parse(_w(i.split(".")[t]))}catch(r){throw new hu("Invalid token specified: "+r.message)}}hu.prototype=new Error,hu.prototype.name="InvalidTokenError";var Bw=Object.defineProperty,qw=(i,e,t)=>e in i?Bw(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,bn=(i,e,t)=>qw(i,typeof e!="symbol"?e+"":e,t);const Lw=20*24*60*60*1e3,$y=2;class Vw{constructor(e,t,r){bn(this,"authState",{state:"noAuth"}),bn(this,"configVersion",0),bn(this,"syncState"),bn(this,"authenticate"),bn(this,"stopSocket"),bn(this,"tryRestartSocket"),bn(this,"pauseSocket"),bn(this,"resumeSocket"),bn(this,"clearAuth"),bn(this,"logger"),bn(this,"refreshTokenLeewaySeconds"),bn(this,"tokenConfirmationAttempts",0),this.syncState=e,this.authenticate=t.authenticate,this.stopSocket=t.stopSocket,this.tryRestartSocket=t.tryRestartSocket,this.pauseSocket=t.pauseSocket,this.resumeSocket=t.resumeSocket,this.clearAuth=t.clearAuth,this.logger=r.logger,this.refreshTokenLeewaySeconds=r.refreshTokenLeewaySeconds}async setConfig(e,t){this.resetAuthState(),this._logVerbose("pausing WS for auth token fetch"),this.pauseSocket();const r=await this.fetchTokenAndGuardAgainstRace(e,{forceRefreshToken:!1});r.isFromOutdatedConfig||(r.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:e,onAuthChange:t},hasRetried:!1}),this.authenticate(r.value)):(this.setAuthState({state:"initialRefetch",config:{fetchToken:e,onAuthChange:t}}),await this.refetchToken()),this._logVerbose("resuming WS after auth token fetch"),this.resumeSocket())}onTransition(e){if(this.syncState.isCurrentOrNewerAuthVersion(e.endVersion.identity)&&!(e.endVersion.identity<=e.startVersion.identity)){if(this.authState.state==="waitingForServerConfirmationOfCachedToken"){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.tokenConfirmationAttempts=0,this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(e){if(e.authUpdateAttempted===!1&&(this.authState.state==="waitingForServerConfirmationOfFreshToken"||this.authState.state==="waitingForServerConfirmationOfCachedToken")){this._logVerbose("ignoring non-auth token expired error");return}const{baseVersion:t}=e;if(!this.syncState.isCurrentOrNewerAuthVersion(t+1)){this._logVerbose("ignoring auth error for previous auth attempt");return}this.tryToReauthenticate(e)}async tryToReauthenticate(e){if(this._logVerbose(`attempting to reauthenticate: ${e.error}`),this.authState.state==="noAuth"||this.authState.state==="waitingForServerConfirmationOfFreshToken"&&this.tokenConfirmationAttempts>=$y){this.logger.error(`Failed to authenticate: "${e.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.authState.state!=="noAuth"&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this.tokenConfirmationAttempts++,this._logVerbose(`retrying reauthentication, ${$y-this.tokenConfirmationAttempts} attempts remaining`)),await this.stopSocket();const t=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});t.isFromOutdatedConfig||(t.value&&this.syncState.isNewAuth(t.value)?(this.authenticate(t.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:t.value,hadAuth:this.authState.state==="notRefetching"||this.authState.state==="waitingForScheduledRefetch"})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this.tryRestartSocket())}async refetchToken(){if(this.authState.state==="noAuth")return;this._logVerbose("refetching auth token");const e=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});e.isFromOutdatedConfig||(e.value?this.syncState.isNewAuth(e.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:e.value,config:this.authState.config}),this.authenticate(e.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this._logVerbose("restarting WS after auth token fetch (if currently stopped)"),this.tryRestartSocket())}scheduleTokenRefetch(e){if(this.authState.state==="noAuth")return;const t=this.decodeToken(e);if(!t){this.logger.error("Auth token is not a valid JWT, cannot refetch the token");return}const{iat:r,exp:o}=t;if(!r||!o){this.logger.error("Auth token does not have required fields, cannot refetch the token");return}const l=o-r;if(l<=2){this.logger.error("Auth token does not live long enough, cannot refetch the token");return}let u=Math.min(Lw,(l-this.refreshTokenLeewaySeconds)*1e3);u<=0&&(this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${l}s`),u=0);const f=setTimeout(()=>{this._logVerbose("running scheduled token refetch"),this.refetchToken()},u);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:f,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${u}ms`)}async fetchTokenAndGuardAgainstRace(e,t){const r=++this.configVersion;this._logVerbose(`fetching token with config version ${r}`);const o=await e(t);return this.configVersion!==r?(this._logVerbose(`stale config version, expected ${r}, got ${this.configVersion}`),{isFromOutdatedConfig:!0}):{isFromOutdatedConfig:!1,value:o}}stop(){this.resetAuthState(),this.configVersion++,this._logVerbose(`config version bumped to ${this.configVersion}`)}setAndReportAuthFailed(e){e(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(e){const t=e.state==="waitingForServerConfirmationOfFreshToken"?{hadAuth:e.hadAuth,state:e.state,token:`...${e.token.slice(-7)}`}:{state:e.state};switch(this._logVerbose(`setting auth state to ${JSON.stringify(t)}`),e.state){case"waitingForScheduledRefetch":case"notRefetching":case"noAuth":this.tokenConfirmationAttempts=0;break}this.authState.state==="waitingForScheduledRefetch"&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=e}decodeToken(e){try{return zw(e)}catch(t){return this._logVerbose(`Error decoding token: ${t instanceof Error?t.message:"Unknown error"}`),null}}_logVerbose(e){this.logger.logVerbose(`${e} [v${this.configVersion}]`)}}const jw=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function Uw(i,e){const t={sessionId:e};typeof performance>"u"||!performance.mark||performance.mark(i,{detail:t})}function Hw(i){let e=i.name.slice(6);return e=e.charAt(0).toLowerCase()+e.slice(1),{name:e,startTime:i.startTime}}function Iw(i){if(typeof performance>"u"||!performance.getEntriesByName)return[];const e=[];for(const t of jw){const r=performance.getEntriesByName(t).filter(o=>o.entryType==="mark").filter(o=>o.detail.sessionId===i);e.push(...r)}return e.map(Hw)}var $w=Object.defineProperty,Qw=(i,e,t)=>e in i?$w(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,kt=(i,e,t)=>Qw(i,typeof e!="symbol"?e+"":e,t);class Yw{constructor(e,t,r){if(kt(this,"address"),kt(this,"state"),kt(this,"requestManager"),kt(this,"webSocketManager"),kt(this,"authenticationManager"),kt(this,"remoteQuerySet"),kt(this,"optimisticQueryResults"),kt(this,"_transitionHandlerCounter",0),kt(this,"_nextRequestId"),kt(this,"_onTransitionFns",new Map),kt(this,"_sessionId"),kt(this,"firstMessageReceived",!1),kt(this,"debug"),kt(this,"logger"),kt(this,"maxObservedTimestamp"),kt(this,"mark",b=>{this.debug&&Uw(b,this.sessionId)}),typeof e=="object")throw new Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");r?.skipConvexDeploymentUrlCheck!==!0&&db(e),r={...r};const o=r.authRefreshTokenLeewaySeconds??2;let l=r.webSocketConstructor;if(!l&&typeof WebSocket>"u")throw new Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");l=l||WebSocket,this.debug=r.reportDebugInfoToConvex??!1,this.address=e,this.logger=r.logger??uh({verbose:r.verbose??!1});const u=e.search("://");if(u===-1)throw new Error("Provided address was not an absolute URL.");const f=e.substring(u+3),d=e.substring(0,u);let p;if(d==="http")p="ws";else if(d==="https")p="wss";else throw new Error(`Unknown parent protocol ${d}`);const g=`${p}://${f}/api/${Rr}/sync`;this.state=new iw,this.remoteQuerySet=new Hy(b=>this.state.queryPath(b),this.logger),this.requestManager=new ow(this.logger),this.authenticationManager=new Vw(this.state,{authenticate:b=>{const S=this.state.setAuth(b);return this.webSocketManager.sendMessage(S),S.baseVersion},stopSocket:()=>this.webSocketManager.stop(),tryRestartSocket:()=>this.webSocketManager.tryRestart(),pauseSocket:()=>{this.webSocketManager.pause(),this.state.pause()},resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()}},{logger:this.logger,refreshTokenLeewaySeconds:o}),this.optimisticQueryResults=new pw,this.addOnTransitionHandler(b=>{t(b.queries.map(S=>S.token))}),this._nextRequestId=0,this._sessionId=Rw();const{unsavedChangesWarning:y}=r;if(typeof window>"u"||typeof window.addEventListener>"u"){if(y===!0)throw new Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.")}else y!==!1&&window.addEventListener("beforeunload",b=>{if(this.requestManager.hasIncompleteRequests()){b.preventDefault();const S="Are you sure you want to leave? Your changes may not be saved.";return(b||window.event).returnValue=S,S}});this.webSocketManager=new Nw(g,{onOpen:b=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...b,type:"Connect",sessionId:this._sessionId,maxObservedTimestamp:this.maxObservedTimestamp});const S=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new Hy(E=>this.state.queryPath(E),this.logger);const[x,T]=this.state.restart(S);T&&this.webSocketManager.sendMessage(T),this.webSocketManager.sendMessage(x);for(const E of this.requestManager.restart())this.webSocketManager.sendMessage(E)},onResume:()=>{const[b,S]=this.state.resume();S&&this.webSocketManager.sendMessage(S),b&&this.webSocketManager.sendMessage(b);for(const x of this.requestManager.resume())this.webSocketManager.sendMessage(x)},onMessage:b=>{switch(this.firstMessageReceived||(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),b.type){case"Transition":{this.observedTimestamp(b.endVersion.ts),this.authenticationManager.onTransition(b),this.remoteQuerySet.transition(b),this.state.transition(b);const S=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(S);break}case"MutationResponse":{b.success&&this.observedTimestamp(b.ts);const S=this.requestManager.onResponse(b);S!==null&&this.notifyOnQueryResultChanges(new Map([[S.requestId,S.result]]));break}case"ActionResponse":{this.requestManager.onResponse(b);break}case"AuthError":{this.authenticationManager.onAuthError(b);break}case"FatalError":{const S=ew(this.logger,b.error);throw this.webSocketManager.terminate(),S}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}}},l,this.logger),this.mark("convexClientConstructed")}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(e){(this.maxObservedTimestamp===void 0||this.maxObservedTimestamp.lessThanOrEqual(e))&&(this.maxObservedTimestamp=e)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(e){const t=this.remoteQuerySet.remoteQueryResults(),r=new Map;for(const[l,u]of t){const f=this.state.queryToken(l);if(f!==null){const d={result:u,udfPath:this.state.queryPath(l),args:this.state.queryArgs(l)};r.set(f,d)}}const o=this.optimisticQueryResults.ingestQueryResultsFromServer(r,new Set(e.keys()));this.handleTransition({queries:o.map(l=>({token:l,modification:{kind:"Updated",result:r.get(l).result}})),reflectedMutations:Array.from(e).map(([l,u])=>({requestId:l,result:u})),timestamp:this.remoteQuerySet.timestamp()})}handleTransition(e){for(const t of this._onTransitionFns.values())t(e)}addOnTransitionHandler(e){const t=this._transitionHandlerCounter++;return this._onTransitionFns.set(t,e),()=>this._onTransitionFns.delete(t)}setAuth(e,t){this.authenticationManager.setConfig(e,t)}hasAuth(){return this.state.hasAuth()}setAdminAuth(e,t){const r=this.state.setAdminAuth(e,t);this.webSocketManager.sendMessage(r)}clearAuth(){const e=this.state.clearAuth();this.webSocketManager.sendMessage(e)}subscribe(e,t,r){const o=Ft(t),{modification:l,queryToken:u,unsubscribe:f}=this.state.subscribe(e,o,r?.journal,r?.componentPath);return l!==null&&this.webSocketManager.sendMessage(l),{queryToken:u,unsubscribe:()=>{const d=f();d&&this.webSocketManager.sendMessage(d)}}}localQueryResult(e,t){const r=Ft(t),o=Vr(e,r);return this.optimisticQueryResults.queryResult(o)}localQueryResultByToken(e){return this.optimisticQueryResults.queryResult(e)}hasLocalQueryResultByToken(e){return this.optimisticQueryResults.hasQueryResult(e)}localQueryLogs(e,t){const r=Ft(t),o=Vr(e,r);return this.optimisticQueryResults.queryLogs(o)}queryJournal(e,t){const r=Ft(t),o=Vr(e,r);return this.state.queryJournal(o)}connectionState(){const e=this.webSocketManager.connectionState();return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:e.isConnected,hasEverConnected:e.hasEverConnected,connectionCount:e.connectionCount,connectionRetries:e.connectionRetries,timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest()}}async mutation(e,t,r){const o=await this.mutationInternal(e,t,r);if(!o.success)throw o.errorData!==void 0?Ld(o,new zr(Ys("mutation",e,o))):new Error(Ys("mutation",e,o));return o.value}async mutationInternal(e,t,r,o){const{mutationPromise:l}=this.enqueueMutation(e,t,r,o);return l}enqueueMutation(e,t,r,o){const l=Ft(t);this.tryReportLongDisconnect();const u=this.nextRequestId;if(this._nextRequestId++,r!==void 0){const g=r.optimisticUpdate;if(g!==void 0){const y=x=>{g(x,l)},S=this.optimisticQueryResults.applyOptimisticUpdate(y,u).map(x=>{const T=this.localQueryResultByToken(x);return{token:x,modification:{kind:"Updated",result:T===void 0?void 0:{success:!0,value:T,logLines:[]}}}});this.handleTransition({queries:S,reflectedMutations:[],timestamp:this.remoteQuerySet.timestamp()})}}const f={type:"Mutation",requestId:u,udfPath:e,componentPath:o,args:[wn(l)]},d=this.webSocketManager.sendMessage(f),p=this.requestManager.request(f,d);return{requestId:u,mutationPromise:p}}async action(e,t){const r=await this.actionInternal(e,t);if(!r.success)throw r.errorData!==void 0?Ld(r,new zr(Ys("action",e,r))):new Error(Ys("action",e,r));return r.value}async actionInternal(e,t,r){const o=Ft(t),l=this.nextRequestId;this._nextRequestId++,this.tryReportLongDisconnect();const u={type:"Action",requestId:l,udfPath:e,componentPath:r,args:[wn(o)]},f=this.webSocketManager.sendMessage(u);return this.requestManager.request(u,f)}async close(){return this.authenticationManager.stop(),this.webSocketManager.terminate()}get url(){return this.address}get nextRequestId(){return this._nextRequestId}get sessionId(){return this._sessionId}reportMarks(){if(this.debug){const e=Iw(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:e})}}tryReportLongDisconnect(){if(!this.debug)return;const e=this.connectionState().timeOfOldestInflightRequest;if(e===null||Date.now()-e.getTime()<=60*1e3)return;const t=`${this.address}/api/debug_event`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${Rr}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(r=>{r.ok||this.logger.warn("Analytics request failed with response:",r.body)}).catch(r=>{this.logger.warn("Analytics response failed with error:",r)})}}var Pw=Object.defineProperty,Gw=(i,e,t)=>e in i?Pw(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Nr=(i,e,t)=>Gw(i,typeof e!="symbol"?e+"":e,t);const Ga=560;class Fw{constructor(e,t){if(Nr(this,"address"),Nr(this,"auth"),Nr(this,"adminAuth"),Nr(this,"encodedTsPromise"),Nr(this,"debug"),Nr(this,"fetchOptions"),Nr(this,"logger"),typeof t=="boolean")throw new Error("skipConvexDeploymentUrlCheck as the second argument is no longer supported. Please pass an options object, `{ skipConvexDeploymentUrlCheck: true }`.");const r=t??{};r.skipConvexDeploymentUrlCheck!==!0&&db(e),this.logger=r.logger??uh({verbose:!1}),this.address=e,this.debug=!0}backendUrl(){return`${this.address}/api`}get url(){return this.address}setAuth(e){this.clearAuth(),this.auth=e}setAdminAuth(e,t){if(this.clearAuth(),t!==void 0){const r=new TextEncoder().encode(JSON.stringify(t)),o=btoa(String.fromCodePoint(...r));this.adminAuth=`${e}:${o}`}else this.adminAuth=e}clearAuth(){this.auth=void 0,this.adminAuth=void 0}setDebug(e){this.debug=e}setFetchOptions(e){this.fetchOptions=e}async consistentQuery(e,...t){const r=Ft(t[0]),o=this.getTimestamp();return await this.queryInner(e,r,{timestampPromise:o})}async getTimestamp(){return this.encodedTsPromise?this.encodedTsPromise:this.encodedTsPromise=this.getTimestampInner()}async getTimestampInner(){const e=fetch,t={"Content-Type":"application/json","Convex-Client":`npm-${Rr}`},r=await e(`${this.address}/api/query_ts`,{...this.fetchOptions,method:"POST",headers:t});if(!r.ok)throw new Error(await r.text());const{ts:o}=await r.json();return o}async query(e,...t){const r=Ft(t[0]);return await this.queryInner(e,r,{})}async queryInner(e,t,r){const o=Mt(e),l=[wn(t)],u={"Content-Type":"application/json","Convex-Client":`npm-${Rr}`};this.adminAuth?u.Authorization=`Convex ${this.adminAuth}`:this.auth&&(u.Authorization=`Bearer ${this.auth}`);const f=fetch,d=r.timestampPromise?await r.timestampPromise:void 0,p=JSON.stringify({path:o,format:"convex_encoded_json",args:l,...d?{ts:d}:{}}),g=d?`${this.address}/api/query_at_ts`:`${this.address}/api/query`,y=await f(g,{...this.fetchOptions,body:p,method:"POST",headers:u});if(!y.ok&&y.status!==Ga)throw new Error(await y.text());const b=await y.json();if(this.debug)for(const S of b.logLines??[])Ki(this.logger,"info","query",o,S);switch(b.status){case"success":return Rn(b.value);case"error":throw b.errorData!==void 0?Fa(b.errorData,new zr(b.errorMessage)):new Error(b.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(b)}`)}}async mutation(e,...t){const r=Ft(t[0]),o=Mt(e),l=JSON.stringify({path:o,format:"convex_encoded_json",args:[wn(r)]}),u={"Content-Type":"application/json","Convex-Client":`npm-${Rr}`};this.adminAuth?u.Authorization=`Convex ${this.adminAuth}`:this.auth&&(u.Authorization=`Bearer ${this.auth}`);const d=await fetch(`${this.address}/api/mutation`,{...this.fetchOptions,body:l,method:"POST",headers:u});if(!d.ok&&d.status!==Ga)throw new Error(await d.text());const p=await d.json();if(this.debug)for(const g of p.logLines??[])Ki(this.logger,"info","mutation",o,g);switch(p.status){case"success":return Rn(p.value);case"error":throw p.errorData!==void 0?Fa(p.errorData,new zr(p.errorMessage)):new Error(p.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(p)}`)}}async action(e,...t){const r=Ft(t[0]),o=Mt(e),l=JSON.stringify({path:o,format:"convex_encoded_json",args:[wn(r)]}),u={"Content-Type":"application/json","Convex-Client":`npm-${Rr}`};this.adminAuth?u.Authorization=`Convex ${this.adminAuth}`:this.auth&&(u.Authorization=`Bearer ${this.auth}`);const d=await fetch(`${this.address}/api/action`,{...this.fetchOptions,body:l,method:"POST",headers:u});if(!d.ok&&d.status!==Ga)throw new Error(await d.text());const p=await d.json();if(this.debug)for(const g of p.logLines??[])Ki(this.logger,"info","action",o,g);switch(p.status){case"success":return Rn(p.value);case"error":throw p.errorData!==void 0?Fa(p.errorData,new zr(p.errorMessage)):new Error(p.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(p)}`)}}async function(e,t,...r){const o=Ft(r[0]),l=typeof e=="string"?e:Mt(e),u=JSON.stringify({componentPath:t,path:l,format:"convex_encoded_json",args:wn(o)}),f={"Content-Type":"application/json","Convex-Client":`npm-${Rr}`};this.adminAuth?f.Authorization=`Convex ${this.adminAuth}`:this.auth&&(f.Authorization=`Bearer ${this.auth}`);const p=await fetch(`${this.address}/api/function`,{...this.fetchOptions,body:u,method:"POST",headers:f});if(!p.ok&&p.status!==Ga)throw new Error(await p.text());const g=await p.json();if(this.debug)for(const y of g.logLines??[])Ki(this.logger,"info","any",l,y);switch(g.status){case"success":return Rn(g.value);case"error":throw g.errorData!==void 0?Fa(g.errorData,new zr(g.errorMessage)):new Error(g.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(g)}`)}}}function Fa(i,e){return e.data=Rn(i),e}var Kw=fb();const ku=cb(Kw);var Xw=Object.defineProperty,Jw=(i,e,t)=>e in i?Xw(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Qi=(i,e,t)=>Jw(i,typeof e!="symbol"?e+"":e,t);if(typeof U>"u")throw new Error("Required dependency 'react' not found");if(typeof ku>"u")throw new Error("Required dependency 'react-dom' not found");function Sb(i,e,t){function r(o){return tT(o),e.mutation(i,o,{optimisticUpdate:t})}return r.withOptimisticUpdate=function(l){if(t!==void 0)throw new Error(`Already specified optimistic update for mutation ${Mt(i)}`);return Sb(i,e,l)},r}class Zw{constructor(e,t){if(Qi(this,"address"),Qi(this,"cachedSync"),Qi(this,"listeners"),Qi(this,"options"),Qi(this,"closed",!1),Qi(this,"_logger"),Qi(this,"adminAuth"),Qi(this,"fakeUserIdentity"),e===void 0)throw new Error("No address provided to ConvexReactClient.\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.");if(typeof e!="string")throw new Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof e} instead.`);if(!e.includes("://"))throw new Error("Provided address was not an absolute URL.");this.address=e,this.listeners=new Map,this._logger=t?.logger??uh({verbose:t?.verbose??!1}),this.options={...t,logger:this._logger}}get sync(){if(this.closed)throw new Error("ConvexReactClient has already been closed.");return this.cachedSync?this.cachedSync:(this.cachedSync=new Yw(this.address,e=>this.transition(e),this.options),this.adminAuth&&this.cachedSync.setAdminAuth(this.adminAuth,this.fakeUserIdentity),this.cachedSync)}setAuth(e,t){if(typeof e=="string")throw new Error("Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.");this.sync.setAuth(e,t??(()=>{}))}clearAuth(){this.sync.clearAuth()}setAdminAuth(e,t){if(this.adminAuth=e,this.fakeUserIdentity=t,this.closed)throw new Error("ConvexReactClient has already been closed.");this.cachedSync&&this.sync.setAdminAuth(e,t)}watchQuery(e,...t){const[r,o]=t,l=Mt(e);return{onUpdate:u=>{const{queryToken:f,unsubscribe:d}=this.sync.subscribe(l,r,o),p=this.listeners.get(f);return p!==void 0?p.add(u):this.listeners.set(f,new Set([u])),()=>{if(this.closed)return;const g=this.listeners.get(f);g.delete(u),g.size===0&&this.listeners.delete(f),d()}},localQueryResult:()=>{if(this.cachedSync)return this.cachedSync.localQueryResult(l,r)},localQueryLogs:()=>{if(this.cachedSync)return this.cachedSync.localQueryLogs(l,r)},journal:()=>{if(this.cachedSync)return this.cachedSync.queryJournal(l,r)}}}mutation(e,...t){const[r,o]=t,l=Mt(e);return this.sync.mutation(l,r,o)}action(e,...t){const r=Mt(e);return this.sync.action(r,...t)}query(e,...t){const r=this.watchQuery(e,...t),o=r.localQueryResult();return o!==void 0?Promise.resolve(o):new Promise((l,u)=>{const f=r.onUpdate(()=>{f();try{l(r.localQueryResult())}catch(d){u(d)}})})}connectionState(){return this.sync.connectionState()}get logger(){return this._logger}async close(){if(this.closed=!0,this.listeners=new Map,this.cachedSync){const e=this.cachedSync;this.cachedSync=void 0,await e.close()}}transition(e){ku.unstable_batchedUpdates(()=>{for(const t of e){const r=this.listeners.get(t);if(r)for(const o of r)o()}})}}const ch=U.createContext(void 0);function Ww(){return G.useContext(ch)}const eT=({client:i,children:e})=>U.createElement(ch.Provider,{value:i},e);function Dn(i,...e){const t=e[0]==="skip",r=e[0]==="skip"?{}:Ft(e[0]),o=typeof i=="string"?bb(i):i,l=Mt(o),u=G.useMemo(()=>t?{}:{query:{query:o,args:r}},[JSON.stringify(wn(r)),l,t]),d=oT(u).query;if(d instanceof Error)throw d;return d}function gi(i){const e=typeof i=="string"?bb(i):i,t=G.useContext(ch);if(t===void 0)throw new Error("Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return G.useMemo(()=>Sb(e,t),[t,Mt(e)])}function tT(i){if(typeof i=="object"&&i!==null&&"bubbles"in i&&"persist"in i&&"isDefaultPrevented"in i)throw new Error("Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like `const handler = () => myMutation();` and using `handler` in the event handler.")}var nT=Object.defineProperty,iT=(i,e,t)=>e in i?nT(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,cd=(i,e,t)=>iT(i,typeof e!="symbol"?e+"":e,t);class rT{constructor(e){cd(this,"createWatch"),cd(this,"queries"),cd(this,"listeners"),this.createWatch=e,this.queries={},this.listeners=new Set}setQueries(e){for(const t of Object.keys(e)){const{query:r,args:o}=e[t];if(Mt(r),this.queries[t]===void 0)this.addQuery(t,r,o);else{const l=this.queries[t];(Mt(r)!==Mt(l.query)||JSON.stringify(wn(o))!==JSON.stringify(wn(l.args)))&&(this.removeQuery(t),this.addQuery(t,r,o))}}for(const t of Object.keys(this.queries))e[t]===void 0&&this.removeQuery(t)}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}getLocalResults(e){const t={};for(const r of Object.keys(e)){const{query:o,args:l}=e[r];Mt(o);const u=this.createWatch(o,l);let f;try{f=u.localQueryResult()}catch(d){if(d instanceof Error)f=d;else throw d}t[r]=f}return t}setCreateWatch(e){this.createWatch=e;for(const t of Object.keys(this.queries)){const{query:r,args:o,watch:l}=this.queries[t],u=l.journal();this.removeQuery(t),this.addQuery(t,r,o,u)}}destroy(){for(const e of Object.keys(this.queries))this.removeQuery(e);this.listeners=new Set}addQuery(e,t,r,o){if(this.queries[e]!==void 0)throw new Error(`Tried to add a new query with identifier ${e} when it already exists.`);const l=this.createWatch(t,r,o),u=l.onUpdate(()=>this.notifyListeners());this.queries[e]={query:t,args:r,watch:l,unsubscribe:u}}removeQuery(e){const t=this.queries[e];if(t===void 0)throw new Error(`No query found with identifier ${e}.`);t.unsubscribe(),delete this.queries[e]}notifyListeners(){for(const e of this.listeners)e()}}function sT({getCurrentValue:i,subscribe:e}){const[t,r]=G.useState(()=>({getCurrentValue:i,subscribe:e,value:i()}));let o=t.value;return(t.getCurrentValue!==i||t.subscribe!==e)&&(o=i(),r({getCurrentValue:i,subscribe:e,value:o})),G.useEffect(()=>{let l=!1;const u=()=>{l||r(d=>{if(d.getCurrentValue!==i||d.subscribe!==e)return d;const p=i();return d.value===p?d:{...d,value:p}})},f=e(u);return u(),()=>{l=!0,f()}},[i,e]),o}function oT(i){const e=Ww();if(e===void 0)throw new Error("Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");const t=G.useMemo(()=>(r,o,l)=>e.watchQuery(r,o,{journal:l}),[e]);return lT(i,t)}function lT(i,e){const[t]=G.useState(()=>new rT(e));t.createWatch!==e&&t.setCreateWatch(e),G.useEffect(()=>()=>t.destroy(),[t]);const r=G.useMemo(()=>({getCurrentValue:()=>t.getLocalResults(i),subscribe:o=>(t.setQueries(i),t.subscribe(o))}),[t,i]);return sT(r)}const xb=G.createContext(void 0);function fh(){const i=G.useContext(xb);if(i===void 0)throw new Error("Could not find `ConvexProviderWithAuth` (or `ConvexProviderWithClerk` or `ConvexProviderWithAuth0`) as an ancestor component. This component may be missing, or you might have two instances of the `convex/react` module loaded in your project.");return i}function aT({children:i,client:e,useAuth:t}){const{isLoading:r,isAuthenticated:o,fetchAccessToken:l}=t(),[u,f]=G.useState(null);return r&&u!==null&&f(null),!r&&!o&&u!==!1&&f(!1),U.createElement(xb.Provider,{value:{isLoading:u===null,isAuthenticated:o&&(u??!1)}},U.createElement(uT,{authProviderAuthenticated:o,fetchAccessToken:l,authProviderLoading:r,client:e,setIsConvexAuthenticated:f}),U.createElement(eT,{client:e},i),U.createElement(cT,{authProviderAuthenticated:o,fetchAccessToken:l,authProviderLoading:r,client:e,setIsConvexAuthenticated:f}))}function uT({authProviderAuthenticated:i,fetchAccessToken:e,authProviderLoading:t,client:r,setIsConvexAuthenticated:o}){return G.useEffect(()=>{let l=!0;if(i)return r.setAuth(e,u=>{l&&o(()=>u)}),()=>{l=!1,o(u=>u?!1:null)}},[i,e,t,r,o]),null}function cT({authProviderAuthenticated:i,fetchAccessToken:e,authProviderLoading:t,client:r,setIsConvexAuthenticated:o}){return G.useEffect(()=>{if(i)return()=>{r.clearAuth(),o(()=>null)}},[i,e,t,r,o]),null}function fT({children:i}){const{isLoading:e,isAuthenticated:t}=fh();return e||!t?null:U.createElement(U.Fragment,null,i)}function dT({children:i}){const{isLoading:e,isAuthenticated:t}=fh();return e||t?null:U.createElement(U.Fragment,null,i)}const wb=G.createContext(void 0),Tb=G.createContext(void 0);function hT(){return G.useContext(Tb)}const pT=G.createContext(null),fd="__convexAuthOAuthVerifier",Ka="__convexAuthJWT",Xa="__convexAuthRefreshToken",Qy="__convexAuthServerStateFetchTime";function mT({client:i,serverState:e,onChange:t,storage:r,storageNamespace:o,replaceURL:l,children:u}){const f=G.useRef(e?._state.token??null),[d,p]=G.useState(f.current===null),[g,y]=G.useState(f.current),b=i.verbose??!1,S=G.useCallback(ye=>{b&&console.debug(`${new Date().toISOString()} ${ye}`)},[b]),{storageSet:x,storageGet:T,storageRemove:E,storageKey:B}=gT(r,o),[J,K]=G.useState(!1),ne=G.useCallback(async ye=>{const Me=f.current!==null;let ie;if(ye.tokens===null)f.current=null,ye.shouldStore&&(await E(Ka),await E(Xa)),ie=null;else{const{token:O}=ye.tokens;if(f.current=O,ye.shouldStore){const{refreshToken:$}=ye.tokens;await x(Ka,O),await x(Xa,$)}ie=O}Me!==(ie!==null)&&await t?.(),y(ie),p(!1)},[x,E]);G.useEffect(()=>{const ye=async Me=>{if(J){Me.preventDefault();const ie="Are you sure you want to leave? Your changes may not be saved.";return Me.returnValue=!0,ie}};return Yy("beforeunload",ye),()=>{Py("beforeunload",ye)}}),G.useEffect(()=>{const ye=Me=>{(async()=>{if(Me.storageArea===r&&Me.key===B(Ka)){const ie=Me.newValue;S(`synced access token, is null: ${ie===null}`),await ne({shouldStore:!1,tokens:ie===null?null:{token:ie}})}})()};return Yy("storage",ye),()=>Py("storage",ye)},[ne]);const Y=G.useCallback(async ye=>{const{tokens:Me}=await i.unauthenticatedCall("auth:signIn","code"in ye?{params:{code:ye.code},verifier:ye.verifier}:ye);return S(`retrieved tokens, is null: ${Me===null}`),await ne({shouldStore:!0,tokens:Me??null}),Me!==null},[i,ne]),te=G.useCallback(async(ye,Me)=>{const ie=Me instanceof FormData?Array.from(Me.entries()).reduce((P,[fe,C])=>(P[fe]=C,P),{}):Me??{},O=await T(fd)??void 0;await E(fd);const $=await i.authenticatedCall("auth:signIn",{provider:ye,params:ie,verifier:O});if($.redirect!==void 0){const P=new URL($.redirect);return await x(fd,$.verifier),window.location!==void 0&&(window.location.href=P.toString()),{signingIn:!1,redirect:P}}else if($.tokens!==void 0){const{tokens:P}=$;return S(`signed in and got tokens, is null: ${P===null}`),await ne({shouldStore:!0,tokens:P}),{signingIn:$.tokens!==null}}return{signingIn:!1}},[i,ne,T]),de=G.useCallback(async()=>{try{await i.authenticatedCall("auth:signOut")}catch{}S("signed out, erasing tokens"),await ne({shouldStore:!0,tokens:null})},[ne,i]),ge=G.useCallback(async({forceRefreshToken:ye})=>{if(ye){const Me=f.current;return await bT(Xa,async()=>{const ie=f.current;if(ie!==Me)return S(`returning synced token, is null: ${ie===null}`),ie;const O=await T(Xa)??null;return O!==null?(K(!0),await Y({refreshToken:O}).finally(()=>{K(!1)}),S(`returning retrieved token, is null: ${ie===null}`),f.current):(K(!1),S("returning null, there is no refresh token"),null)})}return f.current},[Y,de,T]),se=G.useRef(!1);G.useEffect(()=>{if(r===void 0)throw new Error("`localStorage` is not available in this environment, set the `storage` prop on `ConvexAuthProvider`!");const ye=async()=>{const ie=await T(Ka)??null;S(`retrieved token from storage, is null: ${ie===null}`),await ne({shouldStore:!1,tokens:ie===null?null:{token:ie}})};if(e!==void 0){const ie=T(Qy),O=$=>{if(!$||e._timeFetched>+$){const{token:P,refreshToken:fe}=e._state,C=P===null||fe===null?null:{token:P,refreshToken:fe};x(Qy,e._timeFetched.toString()),ne({tokens:C,shouldStore:!0})}else ye()};ie instanceof Promise?ie.then(O):O(ie);return}const Me=typeof window?.location<"u"?new URLSearchParams(window.location.search).get("code"):null;if(se.current||Me){if(Me&&!se.current){se.current=!0;const ie=new URL(window.location.href);ie.searchParams.delete("code"),(async()=>(await l(ie.pathname+ie.search+ie.hash),await te(void 0,{code:Me}),se.current=!1))()}}else ye()},[i,T]);const Ie=G.useMemo(()=>({signIn:te,signOut:de}),[te,de]),ze=g!==null,Be=G.useMemo(()=>({isLoading:d,isAuthenticated:ze,fetchAccessToken:ge}),[ge,d,ze]);return z.jsx(Tb.Provider,{value:Be,children:z.jsx(wb.Provider,{value:Ie,children:z.jsx(pT.Provider,{value:g,children:u})})})}function gT(i,e){const t=yT(),r=G.useMemo(()=>i??t(),[i]),o=e.replace(/[^a-zA-Z0-9]/g,""),l=G.useCallback(p=>`${p}_${o}`,[e]),u=G.useCallback((p,g)=>r.setItem(l(p),g),[r,l]),f=G.useCallback(p=>r.getItem(l(p)),[r,l]),d=G.useCallback(p=>r.removeItem(l(p)),[r,l]);return{storageSet:u,storageGet:f,storageRemove:d,storageKey:l}}function yT(){const[i,e]=G.useState({});return()=>({getItem:t=>i[t],setItem:(t,r)=>{e(o=>({...o,[t]:r}))},removeItem:t=>{e(r=>{const{[t]:o,...l}=r;return l})}})}async function bT(i,e){const t=window?.navigator?.locks;return t!==void 0?await t.request(i,e):await vT(i,e)}function Ja(i){globalThis.__convexAuthMutexes===void 0&&(globalThis.__convexAuthMutexes={});let e=globalThis.__convexAuthMutexes[i];return e===void 0&&(globalThis.__convexAuthMutexes[i]={currentlyRunning:null,waiting:[]}),e=globalThis.__convexAuthMutexes[i],e}function dd(i,e){globalThis.__convexAuthMutexes[i]=e}async function Mb(i,e){const t=Ja(i);t.currentlyRunning===null?dd(i,{currentlyRunning:e().finally(()=>{const r=Ja(i).waiting.shift();Ja(i).currentlyRunning=null,dd(i,{...Ja(i),currentlyRunning:r===void 0?null:Mb(i,r)})}),waiting:[]}):dd(i,{...t,waiting:[...t.waiting,e]})}async function vT(i,e){return new Promise((r,o)=>{Mb(i,()=>e().then(u=>r(u)).catch(u=>o(u)))})}function Yy(i,e,t){window.addEventListener?.(i,e,t)}function Py(i,e,t){window.removeEventListener?.(i,e,t)}function Eb(){return G.useContext(wb)}function ST(i){const{client:e,storage:t,storageNamespace:r,replaceURL:o,children:l}=i,u=G.useMemo(()=>({authenticatedCall(f,d){return e.action(f,d)},unauthenticatedCall(f,d){return new Fw(e.address).action(f,d)},verbose:e.options?.verbose}),[e]);return z.jsx(mT,{client:u,storage:t??(typeof window>"u"?void 0:window?.localStorage),storageNamespace:r??e.address,replaceURL:o??(f=>{window.history.replaceState({},"",f)}),children:z.jsx(aT,{client:e,useAuth:hT,children:l})})}function xT(i){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i))}const wT=i=>{switch(i){case"success":return ET;case"info":return AT;case"warning":return CT;case"error":return kT;default:return null}},TT=Array(12).fill(0),MT=({visible:i,className:e})=>U.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":i},U.createElement("div",{className:"sonner-spinner"},TT.map((t,r)=>U.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),ET=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),CT=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),AT=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),kT=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),OT=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},U.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),NT=()=>{const[i,e]=U.useState(document.hidden);return U.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),i};let jd=1;class RT{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...o}=e,l=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:jd++,u=this.toasts.find(d=>d.id===l),f=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),u?this.toasts=this.toasts.map(d=>d.id===l?(this.publish({...d,...e,id:l,title:r}),{...d,...e,id:l,dismissible:f,title:r}):d):this.addToast({title:r,...o,dismissible:f,id:l}),l},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const o=Promise.resolve(e instanceof Function?e():e);let l=r!==void 0,u;const f=o.then(async p=>{if(u=["resolve",p],U.isValidElement(p))l=!1,this.create({id:r,type:"default",message:p});else if(_T(p)&&!p.ok){l=!1;const y=typeof t.error=="function"?await t.error(`HTTP error! status: ${p.status}`):t.error,b=typeof t.description=="function"?await t.description(`HTTP error! status: ${p.status}`):t.description,x=typeof y=="object"&&!U.isValidElement(y)?y:{message:y};this.create({id:r,type:"error",description:b,...x})}else if(p instanceof Error){l=!1;const y=typeof t.error=="function"?await t.error(p):t.error,b=typeof t.description=="function"?await t.description(p):t.description,x=typeof y=="object"&&!U.isValidElement(y)?y:{message:y};this.create({id:r,type:"error",description:b,...x})}else if(t.success!==void 0){l=!1;const y=typeof t.success=="function"?await t.success(p):t.success,b=typeof t.description=="function"?await t.description(p):t.description,x=typeof y=="object"&&!U.isValidElement(y)?y:{message:y};this.create({id:r,type:"success",description:b,...x})}}).catch(async p=>{if(u=["reject",p],t.error!==void 0){l=!1;const g=typeof t.error=="function"?await t.error(p):t.error,y=typeof t.description=="function"?await t.description(p):t.description,S=typeof g=="object"&&!U.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:y,...S})}}).finally(()=>{l&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),d=()=>new Promise((p,g)=>f.then(()=>u[0]==="reject"?g(u[1]):p(u[1])).catch(g));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(e,t)=>{const r=t?.id||jd++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Gt=new RT,DT=(i,e)=>{const t=e?.id||jd++;return Gt.addToast({title:i,...e,id:t}),t},_T=i=>i&&typeof i=="object"&&"ok"in i&&typeof i.ok=="boolean"&&"status"in i&&typeof i.status=="number",zT=DT,BT=()=>Gt.toasts,qT=()=>Gt.getActiveToasts(),sl=Object.assign(zT,{success:Gt.success,info:Gt.info,warning:Gt.warning,error:Gt.error,custom:Gt.custom,message:Gt.message,promise:Gt.promise,dismiss:Gt.dismiss,loading:Gt.loading},{getHistory:BT,getToasts:qT});xT("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Za(i){return i.label!==void 0}const LT=3,VT="24px",jT="16px",Gy=4e3,UT=356,HT=14,IT=45,$T=200;function In(...i){return i.filter(Boolean).join(" ")}function QT(i){const[e,t]=i.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const YT=i=>{var e,t,r,o,l,u,f,d,p;const{invert:g,toast:y,unstyled:b,interacting:S,setHeights:x,visibleToasts:T,heights:E,index:B,toasts:J,expanded:K,removeToast:ne,defaultRichColors:Y,closeButton:te,style:de,cancelButtonStyle:ge,actionButtonStyle:se,className:Ie="",descriptionClassName:ze="",duration:Be,position:ye,gap:Me,expandByDefault:ie,classNames:O,icons:$,closeButtonAriaLabel:P="Close toast"}=i,[fe,C]=U.useState(null),[q,Q]=U.useState(null),[I,Z]=U.useState(!1),[be,X]=U.useState(!1),[nt,Ae]=U.useState(!1),[It,Kn]=U.useState(!1),[Kr,Xr]=U.useState(!1),[ro,ur]=U.useState(0),[Iu,Nl]=U.useState(0),Et=U.useRef(y.duration||Be||Gy),Rl=U.useRef(null),an=U.useRef(null),Dl=B===0,Jr=B+1<=T,_t=y.type,Xn=y.dismissible!==!1,$u=y.className||"",Qu=y.descriptionClassName||"",zn=U.useMemo(()=>E.findIndex(he=>he.toastId===y.id)||0,[E,y.id]),zt=U.useMemo(()=>{var he;return(he=y.closeButton)!=null?he:te},[y.closeButton,te]),En=U.useMemo(()=>y.duration||Be||Gy,[y.duration,Be]),gt=U.useRef(0),vi=U.useRef(0),_l=U.useRef(0),Si=U.useRef(null),[Zr,Wr]=ye.split("-"),Bn=U.useMemo(()=>E.reduce((he,Pe,Je)=>Je>=zn?he:he+Pe.height,0),[E,zn]),cr=NT(),fr=y.invert||g,so=_t==="loading";vi.current=U.useMemo(()=>zn*Me+Bn,[zn,Bn]),U.useEffect(()=>{Et.current=En},[En]),U.useEffect(()=>{Z(!0)},[]),U.useEffect(()=>{const he=an.current;if(he){const Pe=he.getBoundingClientRect().height;return Nl(Pe),x(Je=>[{toastId:y.id,height:Pe,position:y.position},...Je]),()=>x(Je=>Je.filter(yt=>yt.toastId!==y.id))}},[x,y.id]),U.useLayoutEffect(()=>{if(!I)return;const he=an.current,Pe=he.style.height;he.style.height="auto";const Je=he.getBoundingClientRect().height;he.style.height=Pe,Nl(Je),x(yt=>yt.find(it=>it.toastId===y.id)?yt.map(it=>it.toastId===y.id?{...it,height:Je}:it):[{toastId:y.id,height:Je,position:y.position},...yt])},[I,y.title,y.description,x,y.id]);const Cn=U.useCallback(()=>{X(!0),ur(vi.current),x(he=>he.filter(Pe=>Pe.toastId!==y.id)),setTimeout(()=>{ne(y)},$T)},[y,ne,x,vi]);U.useEffect(()=>{if(y.promise&&_t==="loading"||y.duration===1/0||y.type==="loading")return;let he;return K||S||cr?(()=>{if(_l.current<gt.current){const yt=new Date().getTime()-gt.current;Et.current=Et.current-yt}_l.current=new Date().getTime()})():(()=>{Et.current!==1/0&&(gt.current=new Date().getTime(),he=setTimeout(()=>{y.onAutoClose==null||y.onAutoClose.call(y,y),Cn()},Et.current))})(),()=>clearTimeout(he)},[K,S,y,_t,cr,Cn]),U.useEffect(()=>{y.delete&&Cn()},[Cn,y.delete]);function zl(){var he;if($?.loading){var Pe;return U.createElement("div",{className:In(O?.loader,y==null||(Pe=y.classNames)==null?void 0:Pe.loader,"sonner-loader"),"data-visible":_t==="loading"},$.loading)}return U.createElement(MT,{className:In(O?.loader,y==null||(he=y.classNames)==null?void 0:he.loader),visible:_t==="loading"})}const oo=y.icon||$?.[_t]||wT(_t);var xi,Bl;return U.createElement("li",{tabIndex:0,ref:an,className:In(Ie,$u,O?.toast,y==null||(e=y.classNames)==null?void 0:e.toast,O?.default,O?.[_t],y==null||(t=y.classNames)==null?void 0:t[_t]),"data-sonner-toast":"","data-rich-colors":(xi=y.richColors)!=null?xi:Y,"data-styled":!(y.jsx||y.unstyled||b),"data-mounted":I,"data-promise":!!y.promise,"data-swiped":Kr,"data-removed":be,"data-visible":Jr,"data-y-position":Zr,"data-x-position":Wr,"data-index":B,"data-front":Dl,"data-swiping":nt,"data-dismissible":Xn,"data-type":_t,"data-invert":fr,"data-swipe-out":It,"data-swipe-direction":q,"data-expanded":!!(K||ie&&I),style:{"--index":B,"--toasts-before":B,"--z-index":J.length-B,"--offset":`${be?ro:vi.current}px`,"--initial-height":ie?"auto":`${Iu}px`,...de,...y.style},onDragEnd:()=>{Ae(!1),C(null),Si.current=null},onPointerDown:he=>{so||!Xn||(Rl.current=new Date,ur(vi.current),he.target.setPointerCapture(he.pointerId),he.target.tagName!=="BUTTON"&&(Ae(!0),Si.current={x:he.clientX,y:he.clientY}))},onPointerUp:()=>{var he,Pe,Je;if(It||!Xn)return;Si.current=null;const yt=Number(((he=an.current)==null?void 0:he.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),dr=Number(((Pe=an.current)==null?void 0:Pe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),it=new Date().getTime()-((Je=Rl.current)==null?void 0:Je.getTime()),Ge=fe==="x"?yt:dr,Fe=Math.abs(Ge)/it;if(Math.abs(Ge)>=IT||Fe>.11){ur(vi.current),y.onDismiss==null||y.onDismiss.call(y,y),Q(fe==="x"?yt>0?"right":"left":dr>0?"down":"up"),Cn(),Kn(!0);return}else{var Ve,lt;(Ve=an.current)==null||Ve.style.setProperty("--swipe-amount-x","0px"),(lt=an.current)==null||lt.style.setProperty("--swipe-amount-y","0px")}Xr(!1),Ae(!1),C(null)},onPointerMove:he=>{var Pe,Je,yt;if(!Si.current||!Xn||((Pe=window.getSelection())==null?void 0:Pe.toString().length)>0)return;const it=he.clientY-Si.current.y,Ge=he.clientX-Si.current.x;var Fe;const Ve=(Fe=i.swipeDirections)!=null?Fe:QT(ye);!fe&&(Math.abs(Ge)>1||Math.abs(it)>1)&&C(Math.abs(Ge)>Math.abs(it)?"x":"y");let lt={x:0,y:0};const es=Jn=>1/(1.5+Math.abs(Jn)/20);if(fe==="y"){if(Ve.includes("top")||Ve.includes("bottom"))if(Ve.includes("top")&&it<0||Ve.includes("bottom")&&it>0)lt.y=it;else{const Jn=it*es(it);lt.y=Math.abs(Jn)<Math.abs(it)?Jn:it}}else if(fe==="x"&&(Ve.includes("left")||Ve.includes("right")))if(Ve.includes("left")&&Ge<0||Ve.includes("right")&&Ge>0)lt.x=Ge;else{const Jn=Ge*es(Ge);lt.x=Math.abs(Jn)<Math.abs(Ge)?Jn:Ge}(Math.abs(lt.x)>0||Math.abs(lt.y)>0)&&Xr(!0),(Je=an.current)==null||Je.style.setProperty("--swipe-amount-x",`${lt.x}px`),(yt=an.current)==null||yt.style.setProperty("--swipe-amount-y",`${lt.y}px`)}},zt&&!y.jsx&&_t!=="loading"?U.createElement("button",{"aria-label":P,"data-disabled":so,"data-close-button":!0,onClick:so||!Xn?()=>{}:()=>{Cn(),y.onDismiss==null||y.onDismiss.call(y,y)},className:In(O?.closeButton,y==null||(r=y.classNames)==null?void 0:r.closeButton)},(Bl=$?.close)!=null?Bl:OT):null,(_t||y.icon||y.promise)&&y.icon!==null&&($?.[_t]!==null||y.icon)?U.createElement("div",{"data-icon":"",className:In(O?.icon,y==null||(o=y.classNames)==null?void 0:o.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||zl():null,y.type!=="loading"?oo:null):null,U.createElement("div",{"data-content":"",className:In(O?.content,y==null||(l=y.classNames)==null?void 0:l.content)},U.createElement("div",{"data-title":"",className:In(O?.title,y==null||(u=y.classNames)==null?void 0:u.title)},y.jsx?y.jsx:typeof y.title=="function"?y.title():y.title),y.description?U.createElement("div",{"data-description":"",className:In(ze,Qu,O?.description,y==null||(f=y.classNames)==null?void 0:f.description)},typeof y.description=="function"?y.description():y.description):null),U.isValidElement(y.cancel)?y.cancel:y.cancel&&Za(y.cancel)?U.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||ge,onClick:he=>{Za(y.cancel)&&Xn&&(y.cancel.onClick==null||y.cancel.onClick.call(y.cancel,he),Cn())},className:In(O?.cancelButton,y==null||(d=y.classNames)==null?void 0:d.cancelButton)},y.cancel.label):null,U.isValidElement(y.action)?y.action:y.action&&Za(y.action)?U.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||se,onClick:he=>{Za(y.action)&&(y.action.onClick==null||y.action.onClick.call(y.action,he),!he.defaultPrevented&&Cn())},className:In(O?.actionButton,y==null||(p=y.classNames)==null?void 0:p.actionButton)},y.action.label):null)};function Fy(){if(typeof window>"u"||typeof document>"u")return"ltr";const i=document.documentElement.getAttribute("dir");return i==="auto"||!i?window.getComputedStyle(document.documentElement).direction:i}function PT(i,e){const t={};return[i,e].forEach((r,o)=>{const l=o===1,u=l?"--mobile-offset":"--offset",f=l?jT:VT;function d(p){["top","right","bottom","left"].forEach(g=>{t[`${u}-${g}`]=typeof p=="number"?`${p}px`:p})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(p=>{r[p]===void 0?t[`${u}-${p}`]=f:t[`${u}-${p}`]=typeof r[p]=="number"?`${r[p]}px`:r[p]}):d(f)}),t}const GT=U.forwardRef(function(e,t){const{invert:r,position:o="bottom-right",hotkey:l=["altKey","KeyT"],expand:u,closeButton:f,className:d,offset:p,mobileOffset:g,theme:y="light",richColors:b,duration:S,style:x,visibleToasts:T=LT,toastOptions:E,dir:B=Fy(),gap:J=HT,icons:K,containerAriaLabel:ne="Notifications"}=e,[Y,te]=U.useState([]),de=U.useMemo(()=>Array.from(new Set([o].concat(Y.filter(q=>q.position).map(q=>q.position)))),[Y,o]),[ge,se]=U.useState([]),[Ie,ze]=U.useState(!1),[Be,ye]=U.useState(!1),[Me,ie]=U.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=U.useRef(null),$=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),P=U.useRef(null),fe=U.useRef(!1),C=U.useCallback(q=>{te(Q=>{var I;return(I=Q.find(Z=>Z.id===q.id))!=null&&I.delete||Gt.dismiss(q.id),Q.filter(({id:Z})=>Z!==q.id)})},[]);return U.useEffect(()=>Gt.subscribe(q=>{if(q.dismiss){requestAnimationFrame(()=>{te(Q=>Q.map(I=>I.id===q.id?{...I,delete:!0}:I))});return}setTimeout(()=>{ku.flushSync(()=>{te(Q=>{const I=Q.findIndex(Z=>Z.id===q.id);return I!==-1?[...Q.slice(0,I),{...Q[I],...q},...Q.slice(I+1)]:[q,...Q]})})})}),[Y]),U.useEffect(()=>{if(y!=="system"){ie(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;const q=window.matchMedia("(prefers-color-scheme: dark)");try{q.addEventListener("change",({matches:Q})=>{ie(Q?"dark":"light")})}catch{q.addListener(({matches:I})=>{try{ie(I?"dark":"light")}catch(Z){console.error(Z)}})}},[y]),U.useEffect(()=>{Y.length<=1&&ze(!1)},[Y]),U.useEffect(()=>{const q=Q=>{var I;if(l.every(X=>Q[X]||Q.code===X)){var be;ze(!0),(be=O.current)==null||be.focus()}Q.code==="Escape"&&(document.activeElement===O.current||(I=O.current)!=null&&I.contains(document.activeElement))&&ze(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[l]),U.useEffect(()=>{if(O.current)return()=>{P.current&&(P.current.focus({preventScroll:!0}),P.current=null,fe.current=!1)}},[O.current]),U.createElement("section",{ref:t,"aria-label":`${ne} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},de.map((q,Q)=>{var I;const[Z,be]=q.split("-");return Y.length?U.createElement("ol",{key:q,dir:B==="auto"?Fy():B,tabIndex:-1,ref:O,className:d,"data-sonner-toaster":!0,"data-sonner-theme":Me,"data-y-position":Z,"data-lifted":Ie&&Y.length>1&&!u,"data-x-position":be,style:{"--front-toast-height":`${((I=ge[0])==null?void 0:I.height)||0}px`,"--width":`${UT}px`,"--gap":`${J}px`,...x,...PT(p,g)},onBlur:X=>{fe.current&&!X.currentTarget.contains(X.relatedTarget)&&(fe.current=!1,P.current&&(P.current.focus({preventScroll:!0}),P.current=null))},onFocus:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||fe.current||(fe.current=!0,P.current=X.relatedTarget)},onMouseEnter:()=>ze(!0),onMouseMove:()=>ze(!0),onMouseLeave:()=>{Be||ze(!1)},onDragEnd:()=>ze(!1),onPointerDown:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||ye(!0)},onPointerUp:()=>ye(!1)},Y.filter(X=>!X.position&&Q===0||X.position===q).map((X,nt)=>{var Ae,It;return U.createElement(YT,{key:X.id,icons:K,index:nt,toast:X,defaultRichColors:b,duration:(Ae=E?.duration)!=null?Ae:S,className:E?.className,descriptionClassName:E?.descriptionClassName,invert:r,visibleToasts:T,closeButton:(It=E?.closeButton)!=null?It:f,interacting:Be,position:q,style:E?.style,unstyled:E?.unstyled,classNames:E?.classNames,cancelButtonStyle:E?.cancelButtonStyle,actionButtonStyle:E?.actionButtonStyle,closeButtonAriaLabel:E?.closeButtonAriaLabel,removeToast:C,toasts:Y.filter(Kn=>Kn.position==X.position),heights:ge.filter(Kn=>Kn.position==X.position),setHeights:se,expandByDefault:u,gap:J,expanded:Ie,swipeDirections:e.swipeDirections})})):null}))});function FT(){const{signIn:i}=Eb(),[e,t]=G.useState("signIn"),[r,o]=G.useState(!1);return z.jsxs("div",{className:"w-full",children:[z.jsxs("form",{className:"flex flex-col gap-4",onSubmit:l=>{l.preventDefault(),o(!0);const u=new FormData(l.target);u.set("flow",e),i("password",u).catch(f=>{const d=e==="signIn"?"Could not sign in, did you mean to sign up?":"Could not sign up, did you mean to sign in?";sl.error(d),o(!1)})},children:[z.jsx("input",{className:"input-field",type:"email",name:"email",placeholder:"Email",required:!0}),z.jsx("input",{className:"input-field",type:"password",name:"password",placeholder:"Password",required:!0}),z.jsx("button",{className:"auth-button",type:"submit",disabled:r,children:e==="signIn"?"Sign in":"Sign up"}),z.jsxs("div",{className:"text-center text-sm text-slate-600",children:[z.jsx("span",{children:e==="signIn"?"Don't have an account? ":"Already have an account? "}),z.jsx("button",{type:"button",className:"text-blue-500 cursor-pointer",onClick:()=>t(e==="signIn"?"signUp":"signIn"),children:e==="signIn"?"Sign up instead":"Sign in instead"})]})]}),z.jsxs("div",{className:"flex items-center justify-center my-3",children:[z.jsx("hr",{className:"my-4 grow"}),z.jsx("span",{className:"mx-4 text-slate-400 ",children:"or"}),z.jsx("hr",{className:"my-4 grow"})]}),z.jsx("button",{className:"auth-button",onClick:()=>void i("anonymous"),children:"Sign in anonymously"})]})}function KT(){const{isAuthenticated:i}=fh(),{signOut:e}=Eb();return i?z.jsx("button",{className:"px-4 py-2 rounded-lg transition-colors bg-blue-500 text-white",onClick:()=>void e(),children:"Sign out"}):null}const et=fw;function Cb({targetType:i,targetId:e}){const t=Dn(et.comments.list,{targetType:i,targetId:e}),r=gi(et.comments.create),[o,l]=G.useState("");Dn(et.profiles.getCurrentProfile);async function u(f){f.preventDefault(),o.trim()&&(await r({content:o,targetType:i,targetId:e}),l(""))}return z.jsxs("div",{className:"mt-4 space-y-4",children:[z.jsx("h4",{className:"font-medium text-gray-900",children:"Comments"}),z.jsxs("form",{onSubmit:u,className:"flex gap-2",children:[z.jsx("input",{type:"text",value:o,onChange:f=>l(f.target.value),placeholder:"Write a comment...",className:"flex-1 p-2 border rounded"}),z.jsx("button",{type:"submit",disabled:!o.trim(),className:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 disabled:opacity-50",children:"Post"})]}),z.jsx("div",{className:"space-y-4",children:t?.map(f=>z.jsx(XT,{comment:f},f._id))})]})}function XT({comment:i}){const e=Dn(et.profiles.get,{userId:i.authorId});return z.jsxs("div",{className:"flex gap-3",children:[z.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-100 flex-shrink-0",children:e?.pictureUrl?z.jsx("img",{src:e.pictureUrl,alt:e.name,className:"w-full h-full object-cover"}):z.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"?"})}),z.jsxs("div",{children:[z.jsxs("div",{className:"flex items-baseline gap-2",children:[z.jsx("span",{className:"font-medium",children:e?.name??"Anonymous"}),z.jsx("span",{className:"text-sm text-gray-500",children:new Date(i.createdAt).toLocaleDateString()})]}),z.jsx("p",{className:"text-gray-700 mt-1",children:i.content})]})]})}function JT(){const i=Dn(et.media.list),e=gi(et.media.generateUploadUrl),t=gi(et.media.create),r=Dn(et.profiles.getCurrentProfile),[o,l]=G.useState(!1);async function u(f){const d=f.target.files?.[0];if(d)try{l(!0);const p=await e(),g=await fetch(p,{method:"POST",headers:{"Content-Type":d.type},body:d}),{storageId:y}=await g.json();await t({title:d.name,type:d.type.startsWith("image/")?"image":"video",storageId:y})}finally{l(!1)}}return r?z.jsxs("div",{className:"max-w-6xl mx-auto",children:[z.jsxs("div",{className:"flex justify-between items-center mb-8",children:[z.jsx("h1",{className:"text-3xl font-bold text-emerald-800",children:"Photographs & Videos"}),z.jsxs("label",{className:"bg-emerald-600 text-white px-4 py-2 rounded cursor-pointer hover:bg-emerald-700",children:[o?"Uploading...":"Upload Media",z.jsx("input",{type:"file",accept:"image/*,video/*",onChange:u,disabled:o,className:"hidden"})]})]}),z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i?.map(f=>z.jsx(ZT,{item:f},f._id))})]}):z.jsxs("div",{className:"max-w-6xl mx-auto",children:[z.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-8",children:"Photographs & Videos"}),z.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-amber-800",children:"Please complete your profile to view and share media."})]})}function ZT({item:i}){const e=Dn(et.profiles.get,{userId:i.authorId}),t=gi(et.media.update),[r,o]=G.useState(!1),[l,u]=G.useState(i.caption||"");async function f(){await t({id:i._id,caption:l}),o(!1)}return z.jsxs("div",{className:"rounded-lg overflow-hidden shadow-lg",children:[i.type==="image"?z.jsx("img",{src:i.url,alt:i.title,className:"w-full h-64 object-cover"}):z.jsx("video",{src:i.url,controls:!0,className:"w-full h-64 object-cover"}),z.jsxs("div",{className:"p-4",children:[z.jsx("h3",{className:"text-lg font-semibold",children:i.title}),r?z.jsxs("div",{className:"mt-2 space-y-2",children:[z.jsx("textarea",{value:l,onChange:d=>u(d.target.value),className:"w-full p-2 border rounded",placeholder:"Add a caption...",rows:2}),z.jsxs("div",{className:"flex gap-2",children:[z.jsx("button",{onClick:f,className:"px-3 py-1 bg-emerald-600 text-white rounded hover:bg-emerald-700",children:"Save"}),z.jsx("button",{onClick:()=>{o(!1),u(i.caption||"")},className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"})]})]}):z.jsxs("div",{className:"mt-2",children:[i.caption?z.jsx("p",{className:"text-gray-600",children:i.caption}):z.jsx("button",{onClick:()=>o(!0),className:"text-sm text-emerald-600 hover:text-emerald-700",children:"Add caption"}),i.caption&&z.jsx("button",{onClick:()=>o(!0),className:"text-sm text-emerald-600 hover:text-emerald-700 ml-2",children:"Edit"})]}),z.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[z.jsx("div",{className:"w-6 h-6 rounded-full overflow-hidden bg-gray-100 flex-shrink-0",children:e?.pictureUrl?z.jsx("img",{src:e.pictureUrl,alt:"Author",className:"w-full h-full object-cover"}):z.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:"?"})}),z.jsx("span",{className:"text-sm text-gray-600",children:e?.name??"Anonymous"})]}),z.jsx("p",{className:"text-sm text-gray-500 mt-1",children:new Date(i.createdAt).toLocaleDateString()}),z.jsx(Cb,{targetType:"media",targetId:i._id})]})]})}function xt(i){this.content=i}xt.prototype={constructor:xt,find:function(i){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===i)return e;return-1},get:function(i){var e=this.find(i);return e==-1?void 0:this.content[e+1]},update:function(i,e,t){var r=t&&t!=i?this.remove(t):this,o=r.find(i),l=r.content.slice();return o==-1?l.push(t||i,e):(l[o+1]=e,t&&(l[o]=t)),new xt(l)},remove:function(i){var e=this.find(i);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new xt(t)},addToStart:function(i,e){return new xt([i,e].concat(this.remove(i).content))},addToEnd:function(i,e){var t=this.remove(i).content.slice();return t.push(i,e),new xt(t)},addBefore:function(i,e,t){var r=this.remove(e),o=r.content.slice(),l=r.find(i);return o.splice(l==-1?o.length:l,0,e,t),new xt(o)},forEach:function(i){for(var e=0;e<this.content.length;e+=2)i(this.content[e],this.content[e+1])},prepend:function(i){return i=xt.from(i),i.size?new xt(i.content.concat(this.subtract(i).content)):this},append:function(i){return i=xt.from(i),i.size?new xt(this.subtract(i).content.concat(i.content)):this},subtract:function(i){var e=this;i=xt.from(i);for(var t=0;t<i.content.length;t+=2)e=e.remove(i.content[t]);return e},toObject:function(){var i={};return this.forEach(function(e,t){i[e]=t}),i},get size(){return this.content.length>>1}};xt.from=function(i){if(i instanceof xt)return i;var e=[];if(i)for(var t in i)e.push(t,i[t]);return new xt(e)};function Ab(i,e,t){for(let r=0;;r++){if(r==i.childCount||r==e.childCount)return i.childCount==e.childCount?null:t;let o=i.child(r),l=e.child(r);if(o==l){t+=o.nodeSize;continue}if(!o.sameMarkup(l))return t;if(o.isText&&o.text!=l.text){for(let u=0;o.text[u]==l.text[u];u++)t++;return t}if(o.content.size||l.content.size){let u=Ab(o.content,l.content,t+1);if(u!=null)return u}t+=o.nodeSize}}function kb(i,e,t,r){for(let o=i.childCount,l=e.childCount;;){if(o==0||l==0)return o==l?null:{a:t,b:r};let u=i.child(--o),f=e.child(--l),d=u.nodeSize;if(u==f){t-=d,r-=d;continue}if(!u.sameMarkup(f))return{a:t,b:r};if(u.isText&&u.text!=f.text){let p=0,g=Math.min(u.text.length,f.text.length);for(;p<g&&u.text[u.text.length-p-1]==f.text[f.text.length-p-1];)p++,t--,r--;return{a:t,b:r}}if(u.content.size||f.content.size){let p=kb(u.content,f.content,t-1,r-1);if(p)return p}t-=d,r-=d}}class H{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,o=0,l){for(let u=0,f=0;f<t;u++){let d=this.content[u],p=f+d.nodeSize;if(p>e&&r(d,o+f,l||null,u)!==!1&&d.content.size){let g=f+1;d.nodesBetween(Math.max(0,e-g),Math.min(d.content.size,t-g),r,o+g)}f=p}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,o){let l="",u=!0;return this.nodesBetween(e,t,(f,d)=>{let p=f.isText?f.text.slice(Math.max(e,d)-d,t-d):f.isLeaf?o?typeof o=="function"?o(f):o:f.type.spec.leafText?f.type.spec.leafText(f):"":"";f.isBlock&&(f.isLeaf&&p||f.isTextblock)&&r&&(u?u=!1:l+=r),l+=p},0),l}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,o=this.content.slice(),l=0;for(t.isText&&t.sameMarkup(r)&&(o[o.length-1]=t.withText(t.text+r.text),l=1);l<e.content.length;l++)o.push(e.content[l]);return new H(o,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],o=0;if(t>e)for(let l=0,u=0;u<t;l++){let f=this.content[l],d=u+f.nodeSize;d>e&&((u<e||d>t)&&(f.isText?f=f.cut(Math.max(0,e-u),Math.min(f.text.length,t-u)):f=f.cut(Math.max(0,e-u-1),Math.min(f.content.size,t-u-1))),r.push(f),o+=f.nodeSize),u=d}return new H(r,o)}cutByIndex(e,t){return e==t?H.empty:e==0&&t==this.content.length?this:new H(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let o=this.content.slice(),l=this.size+t.nodeSize-r.nodeSize;return o[e]=t,new H(o,l)}addToStart(e){return new H([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new H(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let o=this.content[t];e(o,r,t),r+=o.nodeSize}}findDiffStart(e,t=0){return Ab(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return kb(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Wa(0,e);if(e==this.size)return Wa(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let l=this.child(r),u=o+l.nodeSize;if(u>=e)return u==e||t>0?Wa(r+1,u):Wa(r,o);o=u}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return H.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new H(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return H.empty;let t,r=0;for(let o=0;o<e.length;o++){let l=e[o];r+=l.nodeSize,o&&l.isText&&e[o-1].sameMarkup(l)?(t||(t=e.slice(0,o)),t[t.length-1]=l.withText(t[t.length-1].text+l.text)):t&&t.push(l)}return new H(t||e,r)}static from(e){if(!e)return H.empty;if(e instanceof H)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new H([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}H.empty=new H([],0);const hd={index:0,offset:0};function Wa(i,e){return hd.index=i,hd.offset=e,hd}function pu(i,e){if(i===e)return!0;if(!(i&&typeof i=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(i);if(Array.isArray(e)!=t)return!1;if(t){if(i.length!=e.length)return!1;for(let r=0;r<i.length;r++)if(!pu(i[r],e[r]))return!1}else{for(let r in i)if(!(r in e)||!pu(i[r],e[r]))return!1;for(let r in e)if(!(r in i))return!1}return!0}let Le=class Ud{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let o=0;o<e.length;o++){let l=e[o];if(this.eq(l))return e;if(this.type.excludes(l.type))t||(t=e.slice(0,o));else{if(l.type.excludes(this.type))return e;!r&&l.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),r=!0),t&&t.push(l)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&pu(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let o=r.create(t.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ud.none;if(e instanceof Ud)return[e];let t=e.slice();return t.sort((r,o)=>r.type.rank-o.type.rank),t}};Le.none=[];class mu extends Error{}class F{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Nb(this.content,e+this.openStart,t);return r&&new F(r,this.openStart,this.openEnd)}removeBetween(e,t){return new F(Ob(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return F.empty;let r=t.openStart||0,o=t.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new F(H.fromJSON(e,t.content),r,o)}static maxOpen(e,t=!0){let r=0,o=0;for(let l=e.firstChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.firstChild)r++;for(let l=e.lastChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.lastChild)o++;return new F(e,r,o)}}F.empty=new F(H.empty,0,0);function Ob(i,e,t){let{index:r,offset:o}=i.findIndex(e),l=i.maybeChild(r),{index:u,offset:f}=i.findIndex(t);if(o==e||l.isText){if(f!=t&&!i.child(u).isText)throw new RangeError("Removing non-flat range");return i.cut(0,e).append(i.cut(t))}if(r!=u)throw new RangeError("Removing non-flat range");return i.replaceChild(r,l.copy(Ob(l.content,e-o-1,t-o-1)))}function Nb(i,e,t,r){let{index:o,offset:l}=i.findIndex(e),u=i.maybeChild(o);if(l==e||u.isText)return i.cut(0,e).append(t).append(i.cut(e));let f=Nb(u.content,e-l-1,t);return f&&i.replaceChild(o,u.copy(f))}function WT(i,e,t){if(t.openStart>i.depth)throw new mu("Inserted content deeper than insertion position");if(i.depth-t.openStart!=e.depth-t.openEnd)throw new mu("Inconsistent open depths");return Rb(i,e,t,0)}function Rb(i,e,t,r){let o=i.index(r),l=i.node(r);if(o==e.index(r)&&r<i.depth-t.openStart){let u=Rb(i,e,t,r+1);return l.copy(l.content.replaceChild(o,u))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&i.depth==r&&e.depth==r){let u=i.parent,f=u.content;return Ur(u,f.cut(0,i.parentOffset).append(t.content).append(f.cut(e.parentOffset)))}else{let{start:u,end:f}=eM(t,i);return Ur(l,_b(i,u,f,e,r))}else return Ur(l,gu(i,e,r))}function Db(i,e){if(!e.type.compatibleContent(i.type))throw new mu("Cannot join "+e.type.name+" onto "+i.type.name)}function Hd(i,e,t){let r=i.node(t);return Db(r,e.node(t)),r}function jr(i,e){let t=e.length-1;t>=0&&i.isText&&i.sameMarkup(e[t])?e[t]=i.withText(e[t].text+i.text):e.push(i)}function fl(i,e,t,r){let o=(e||i).node(t),l=0,u=e?e.index(t):o.childCount;i&&(l=i.index(t),i.depth>t?l++:i.textOffset&&(jr(i.nodeAfter,r),l++));for(let f=l;f<u;f++)jr(o.child(f),r);e&&e.depth==t&&e.textOffset&&jr(e.nodeBefore,r)}function Ur(i,e){return i.type.checkContent(e),i.copy(e)}function _b(i,e,t,r,o){let l=i.depth>o&&Hd(i,e,o+1),u=r.depth>o&&Hd(t,r,o+1),f=[];return fl(null,i,o,f),l&&u&&e.index(o)==t.index(o)?(Db(l,u),jr(Ur(l,_b(i,e,t,r,o+1)),f)):(l&&jr(Ur(l,gu(i,e,o+1)),f),fl(e,t,o,f),u&&jr(Ur(u,gu(t,r,o+1)),f)),fl(r,null,o,f),new H(f)}function gu(i,e,t){let r=[];if(fl(null,i,t,r),i.depth>t){let o=Hd(i,e,t+1);jr(Ur(o,gu(i,e,t+1)),r)}return fl(e,null,t,r),new H(r)}function eM(i,e){let t=e.depth-i.openStart,o=e.node(t).copy(i.content);for(let l=t-1;l>=0;l--)o=e.node(l).copy(H.from(o));return{start:o.resolveNoCache(i.openStart+t),end:o.resolveNoCache(o.content.size-i.openEnd-t)}}class bl{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(t);return r?e.child(t).cut(r):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],o=t==0?0:this.path[t*3-1]+1;for(let l=0;l<e;l++)o+=r.child(l).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Le.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),o=e.maybeChild(t);if(!r){let f=r;r=o,o=f}let l=r.marks;for(var u=0;u<l.length;u++)l[u].type.spec.inclusive===!1&&(!o||!l[u].isInSet(o.marks))&&(l=l[u--].removeFromSet(l));return l}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,o=e.parent.maybeChild(e.index());for(var l=0;l<r.length;l++)r[l].type.spec.inclusive===!1&&(!o||!r[l].isInSet(o.marks))&&(r=r[l--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new yu(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],o=0,l=t;for(let u=e;;){let{index:f,offset:d}=u.content.findIndex(l),p=l-d;if(r.push(u,f,o+d),!p||(u=u.child(f),u.isText))break;l=p-1,o+=d+1}return new bl(t,r,l)}static resolveCached(e,t){let r=Ky.get(e);if(r)for(let l=0;l<r.elts.length;l++){let u=r.elts[l];if(u.pos==t)return u}else Ky.set(e,r=new tM);let o=r.elts[r.i]=bl.resolve(e,t);return r.i=(r.i+1)%nM,o}}class tM{constructor(){this.elts=[],this.i=0}}const nM=12,Ky=new WeakMap;class yu{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const iM=Object.create(null);let Wi=class Id{constructor(e,t,r,o=Le.none){this.type=e,this.attrs=t,this.marks=o,this.content=r||H.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,o=0){this.content.nodesBetween(e,t,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,o){return this.content.textBetween(e,t,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&pu(this.attrs,t||e.defaultAttrs||iM)&&Le.sameSet(this.marks,r||Le.none)}copy(e=null){return e==this.content?this:new Id(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Id(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return F.empty;let o=this.resolve(e),l=this.resolve(t),u=r?0:o.sharedDepth(t),f=o.start(u),p=o.node(u).content.cut(o.pos-f,l.pos-f);return new F(p,o.depth-u,l.depth-u)}replace(e,t,r){return WT(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:o}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let o=this.content.child(t-1);return{node:o,index:t-1,offset:r-o.nodeSize}}resolve(e){return bl.resolveCached(this,e)}resolveNoCache(e){return bl.resolve(this,e)}rangeHasMark(e,t,r){let o=!1;return t>e&&this.nodesBetween(e,t,l=>(r.isInSet(l.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),zb(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=H.empty,o=0,l=r.childCount){let u=this.contentMatchAt(e).matchFragment(r,o,l),f=u&&u.matchFragment(this.content,t);if(!f||!f.validEnd)return!1;for(let d=o;d<l;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,t,r,o){if(o&&!this.type.allowsMarks(o))return!1;let l=this.contentMatchAt(e).matchType(r),u=l&&l.matchFragment(this.content,t);return u?u.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Le.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Le.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let o=H.fromJSON(e,t.content),l=e.nodeType(t.type).create(t.attrs,o,r);return l.type.checkAttrs(l.attrs),l}};Wi.prototype.text=void 0;class bu extends Wi{constructor(e,t,r,o){if(super(e,t,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):zb(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new bu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new bu(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function zb(i,e){for(let t=i.length-1;t>=0;t--)e=i[t].type.name+"("+e+")";return e}class Qr{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new rM(e,t);if(r.next==null)return Qr.empty;let o=Bb(r);r.next&&r.err("Unexpected trailing text");let l=fM(cM(o));return dM(l,r),l}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let o=this;for(let l=t;o&&l<r;l++)o=o.matchType(e.child(l).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let o=[this];function l(u,f){let d=u.matchFragment(e,r);if(d&&(!t||d.validEnd))return H.from(f.map(p=>p.createAndFill()));for(let p=0;p<u.next.length;p++){let{type:g,next:y}=u.next[p];if(!(g.isText||g.hasRequiredAttrs())&&o.indexOf(y)==-1){o.push(y);let b=l(y,f.concat(g));if(b)return b}}return null}return l(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),l=o.match;if(l.matchType(e)){let u=[];for(let f=o;f.type;f=f.via)u.push(f.type);return u.reverse()}for(let u=0;u<l.next.length;u++){let{type:f,next:d}=l.next[u];!f.isLeaf&&!f.hasRequiredAttrs()&&!(f.name in t)&&(!o.type||d.validEnd)&&(r.push({match:f.contentMatch,type:f,via:o}),t[f.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&t(r.next[o].next)}return t(this),e.map((r,o)=>{let l=o+(r.validEnd?"*":" ")+" ";for(let u=0;u<r.next.length;u++)l+=(u?", ":"")+r.next[u].type.name+"->"+e.indexOf(r.next[u].next);return l}).join(`
`)}}Qr.empty=new Qr(!0);class rM{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Bb(i){let e=[];do e.push(sM(i));while(i.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function sM(i){let e=[];do e.push(oM(i));while(i.next&&i.next!=")"&&i.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function oM(i){let e=uM(i);for(;;)if(i.eat("+"))e={type:"plus",expr:e};else if(i.eat("*"))e={type:"star",expr:e};else if(i.eat("?"))e={type:"opt",expr:e};else if(i.eat("{"))e=lM(i,e);else break;return e}function Xy(i){/\D/.test(i.next)&&i.err("Expected number, got '"+i.next+"'");let e=Number(i.next);return i.pos++,e}function lM(i,e){let t=Xy(i),r=t;return i.eat(",")&&(i.next!="}"?r=Xy(i):r=-1),i.eat("}")||i.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function aM(i,e){let t=i.nodeTypes,r=t[e];if(r)return[r];let o=[];for(let l in t){let u=t[l];u.isInGroup(e)&&o.push(u)}return o.length==0&&i.err("No node type or group '"+e+"' found"),o}function uM(i){if(i.eat("(")){let e=Bb(i);return i.eat(")")||i.err("Missing closing paren"),e}else if(/\W/.test(i.next))i.err("Unexpected token '"+i.next+"'");else{let e=aM(i,i.next).map(t=>(i.inline==null?i.inline=t.isInline:i.inline!=t.isInline&&i.err("Mixing inline and block content"),{type:"name",value:t}));return i.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function cM(i){let e=[[]];return o(l(i,0),t()),e;function t(){return e.push([])-1}function r(u,f,d){let p={term:d,to:f};return e[u].push(p),p}function o(u,f){u.forEach(d=>d.to=f)}function l(u,f){if(u.type=="choice")return u.exprs.reduce((d,p)=>d.concat(l(p,f)),[]);if(u.type=="seq")for(let d=0;;d++){let p=l(u.exprs[d],f);if(d==u.exprs.length-1)return p;o(p,f=t())}else if(u.type=="star"){let d=t();return r(f,d),o(l(u.expr,d),d),[r(d)]}else if(u.type=="plus"){let d=t();return o(l(u.expr,f),d),o(l(u.expr,d),d),[r(d)]}else{if(u.type=="opt")return[r(f)].concat(l(u.expr,f));if(u.type=="range"){let d=f;for(let p=0;p<u.min;p++){let g=t();o(l(u.expr,d),g),d=g}if(u.max==-1)o(l(u.expr,d),d);else for(let p=u.min;p<u.max;p++){let g=t();r(d,g),o(l(u.expr,d),g),d=g}return[r(d)]}else{if(u.type=="name")return[r(f,void 0,u.value)];throw new Error("Unknown expr type")}}}}function qb(i,e){return e-i}function Jy(i,e){let t=[];return r(e),t.sort(qb);function r(o){let l=i[o];if(l.length==1&&!l[0].term)return r(l[0].to);t.push(o);for(let u=0;u<l.length;u++){let{term:f,to:d}=l[u];!f&&t.indexOf(d)==-1&&r(d)}}}function fM(i){let e=Object.create(null);return t(Jy(i,0));function t(r){let o=[];r.forEach(u=>{i[u].forEach(({term:f,to:d})=>{if(!f)return;let p;for(let g=0;g<o.length;g++)o[g][0]==f&&(p=o[g][1]);Jy(i,d).forEach(g=>{p||o.push([f,p=[]]),p.indexOf(g)==-1&&p.push(g)})})});let l=e[r.join(",")]=new Qr(r.indexOf(i.length-1)>-1);for(let u=0;u<o.length;u++){let f=o[u][1].sort(qb);l.next.push({type:o[u][0],next:e[f.join(",")]||t(f)})}return l}}function dM(i,e){for(let t=0,r=[i];t<r.length;t++){let o=r[t],l=!o.validEnd,u=[];for(let f=0;f<o.next.length;f++){let{type:d,next:p}=o.next[f];u.push(d.name),l&&!(d.isText||d.hasRequiredAttrs())&&(l=!1),r.indexOf(p)==-1&&r.push(p)}l&&e.err("Only non-generatable nodes ("+u.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Lb(i){let e=Object.create(null);for(let t in i){let r=i[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function Vb(i,e){let t=Object.create(null);for(let r in i){let o=e&&e[r];if(o===void 0){let l=i[r];if(l.hasDefault)o=l.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=o}return t}function jb(i,e,t,r){for(let o in e)if(!(o in i))throw new RangeError(`Unsupported attribute ${o} for ${t} of type ${o}`);for(let o in i){let l=i[o];l.validate&&l.validate(e[o])}}function Ub(i,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new pM(i,r,e[r]);return t}let Zy=class Hb{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Ub(e,r.attrs),this.defaultAttrs=Lb(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Qr.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Vb(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Wi(this,this.computeAttrs(e),H.from(t),Le.setFrom(r))}createChecked(e=null,t,r){return t=H.from(t),this.checkContent(t),new Wi(this,this.computeAttrs(e),t,Le.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=H.from(t),t.size){let u=this.contentMatch.fillBefore(t);if(!u)return null;t=u.append(t)}let o=this.contentMatch.matchFragment(t),l=o&&o.fillBefore(H.empty,!0);return l?new Wi(this,e,t.append(l),Le.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){jb(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Le.none:e}static compile(e,t){let r=Object.create(null);e.forEach((l,u)=>r[l]=new Hb(l,t,u));let o=t.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let l in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function hM(i,e,t){let r=t.split("|");return o=>{let l=o===null?"null":typeof o;if(r.indexOf(l)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${i}, got ${l}`)}}class pM{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?hM(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Ou{constructor(e,t,r,o){this.name=e,this.rank=t,this.schema=r,this.spec=o,this.attrs=Ub(e,o.attrs),this.excluded=null;let l=Lb(this.attrs);this.instance=l?new Le(this,l):null}create(e=null){return!e&&this.instance?this.instance:new Le(this,Vb(this.attrs,e))}static compile(e,t){let r=Object.create(null),o=0;return e.forEach((l,u)=>r[l]=new Ou(l,o++,t,u)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){jb(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Ib{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let o in e)t[o]=e[o];t.nodes=xt.from(e.nodes),t.marks=xt.from(e.marks||{}),this.nodes=Zy.compile(this.spec.nodes,this),this.marks=Ou.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let l=this.nodes[o],u=l.spec.content||"",f=l.spec.marks;if(l.contentMatch=r[u]||(r[u]=Qr.parse(u,this.nodes)),l.inlineContent=l.contentMatch.inlineContent,l.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!l.isInline||!l.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=l}l.markSet=f=="_"?null:f?Wy(this,f.split(" ")):f==""||!l.inlineContent?[]:null}for(let o in this.marks){let l=this.marks[o],u=l.spec.excludes;l.excluded=u==null?[l]:u==""?[]:Wy(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Zy){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,o)}text(e,t){let r=this.nodes.text;return new bu(r,r.defaultAttrs,e,Le.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Wi.fromJSON(this,e)}markFromJSON(e){return Le.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Wy(i,e){let t=[];for(let r=0;r<e.length;r++){let o=e[r],l=i.marks[o],u=l;if(l)t.push(l);else for(let f in i.marks){let d=i.marks[f];(o=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(o)>-1)&&t.push(u=d)}if(!u)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function mM(i){return i.tag!=null}function gM(i){return i.style!=null}class er{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(o=>{if(mM(o))this.tags.push(o);else if(gM(o)){let l=/[^=]*/.exec(o.style)[0];r.indexOf(l)<0&&r.push(l),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let l=e.nodes[o.node];return l.contentMatch.matchType(l)})}parse(e,t={}){let r=new t0(this,t,!1);return r.addAll(e,Le.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new t0(this,t,!0);return r.addAll(e,Le.none,t.from,t.to),F.maxOpen(r.finish())}matchTag(e,t,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let l=this.tags[o];if(vM(e,l.tag)&&(l.namespace===void 0||e.namespaceURI==l.namespace)&&(!l.context||t.matchesContext(l.context))){if(l.getAttrs){let u=l.getAttrs(e);if(u===!1)continue;l.attrs=u||void 0}return l}}}matchStyle(e,t,r,o){for(let l=o?this.styles.indexOf(o)+1:0;l<this.styles.length;l++){let u=this.styles[l],f=u.style;if(!(f.indexOf(e)!=0||u.context&&!r.matchesContext(u.context)||f.length>e.length&&(f.charCodeAt(e.length)!=61||f.slice(e.length+1)!=t))){if(u.getAttrs){let d=u.getAttrs(t);if(d===!1)continue;u.attrs=d||void 0}return u}}}static schemaRules(e){let t=[];function r(o){let l=o.priority==null?50:o.priority,u=0;for(;u<t.length;u++){let f=t[u];if((f.priority==null?50:f.priority)<l)break}t.splice(u,0,o)}for(let o in e.marks){let l=e.marks[o].spec.parseDOM;l&&l.forEach(u=>{r(u=n0(u)),u.mark||u.ignore||u.clearMark||(u.mark=o)})}for(let o in e.nodes){let l=e.nodes[o].spec.parseDOM;l&&l.forEach(u=>{r(u=n0(u)),u.node||u.ignore||u.mark||(u.node=o)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new er(e,er.schemaRules(e)))}}const $b={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},yM={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Qb={ol:!0,ul:!0},vl=1,$d=2,ou=4;function e0(i,e,t){return e!=null?(e?vl:0)|(e==="full"?$d:0):i&&i.whitespace=="pre"?vl|$d:t&-5}class eu{constructor(e,t,r,o,l,u){this.type=e,this.attrs=t,this.marks=r,this.solid=o,this.options=u,this.content=[],this.activeMarks=Le.none,this.match=l||(u&ou?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(H.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&vl)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let l=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=l.withText(l.text.slice(0,l.text.length-o[0].length))}}let t=H.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(H.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!$b.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class t0{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=t.topNode,l,u=e0(null,t.preserveWhitespace,0)|(r?ou:0);o?l=new eu(o.type,o.attrs,Le.none,!0,t.topMatch||o.type.contentMatch,u):r?l=new eu(null,null,Le.none,!0,null,u):l=new eu(e.schema.topNodeType,null,Le.none,!0,null,u),this.nodes=[l],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,o=this.top,l=o.options&$d?"full":this.localPreserveWS||(o.options&vl)>0;if(l==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(l)l!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=o.content[o.content.length-1],f=e.previousSibling;(!u||f&&f.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let o=this.localPreserveWS,l=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let u=e.nodeName.toLowerCase(),f;Qb.hasOwnProperty(u)&&this.parser.normalizeLists&&bM(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(f=this.parser.matchTag(e,this,r));e:if(d?d.ignore:yM.hasOwnProperty(u))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let p,g=this.needsBlock;if($b.hasOwnProperty(u))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),p=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let y=d&&d.skip?t:this.readStyles(e,t);y&&this.addAll(e,y),p&&this.sync(l),this.needsBlock=g}else{let p=this.readStyles(e,t);p&&this.addElementByRule(e,d,p,d.consuming===!1?f:void 0)}this.localPreserveWS=o}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let l=this.parser.matchedStyles[o],u=r.getPropertyValue(l);if(u)for(let f=void 0;;){let d=this.parser.matchStyle(l,u,this,f);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(p=>!d.clearMark(p)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)f=d;else break}}return t}addElementByRule(e,t,r,o){let l,u;if(t.node)if(u=this.parser.schema.nodes[t.node],u.isLeaf)this.insertNode(u.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(u,t.attrs||null,r,t.preserveWhitespace);d&&(l=!0,r=d)}else{let d=this.parser.schema.marks[t.mark];r=r.concat(d.create(t.attrs))}let f=this.top;if(u&&u.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}l&&this.sync(f)&&this.open--}addAll(e,t,r,o){let l=r||0;for(let u=r?e.childNodes[r]:e.firstChild,f=o==null?null:e.childNodes[o];u!=f;u=u.nextSibling,++l)this.findAtPoint(e,l),this.addDOM(u,t);this.findAtPoint(e,l)}findPlace(e,t,r){let o,l;for(let u=this.open,f=0;u>=0;u--){let d=this.nodes[u],p=d.findWrapping(e);if(p&&(!o||o.length>p.length+f)&&(o=p,l=d,!p.length))break;if(d.solid){if(r)break;f+=2}}if(!o)return null;this.sync(l);for(let u=0;u<o.length;u++)t=this.enterInner(o[u],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let l=this.textblockFromContext();l&&(t=this.enterInner(l,null,t))}let o=this.findPlace(e,t,r);if(o){this.closeExtra();let l=this.top;l.match&&(l.match=l.match.matchType(e.type));let u=Le.none;for(let f of o.concat(e.marks))(l.type?l.type.allowsMarkType(f.type):i0(f.type,e.type))&&(u=f.addToSet(u));return l.content.push(e.mark(u)),!0}return!1}enter(e,t,r,o){let l=this.findPlace(e.create(t),r,!1);return l&&(l=this.enterInner(e,t,r,!0,o)),l}enterInner(e,t,r,o=!1,l){this.closeExtra();let u=this.top;u.match=u.match&&u.match.matchType(e);let f=e0(e,l,u.options);u.options&ou&&u.content.length==0&&(f|=ou);let d=Le.none;return r=r.filter(p=>(u.type?u.type.allowsMarkType(p.type):i0(p.type,e))?(d=p.addToSet(d),!1):!0),this.nodes.push(new eu(e,t,d,o,null,f)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=vl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&t.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),l=-(r?r.depth+1:0)+(o?0:1),u=(f,d)=>{for(;f>=0;f--){let p=t[f];if(p==""){if(f==t.length-1||f==0)continue;for(;d>=l;d--)if(u(f-1,d))return!0;return!1}else{let g=d>0||d==0&&o?this.nodes[d].type:r&&d>=l?r.node(d-l).type:null;if(!g||g.name!=p&&!g.isInGroup(p))return!1;d--}}return!0};return u(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function bM(i){for(let e=i.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Qb.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function vM(i,e){return(i.matches||i.msMatchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector).call(i,e)}function n0(i){let e={};for(let t in i)e[t]=i[t];return e}function i0(i,e){let t=e.schema.nodes;for(let r in t){let o=t[r];if(!o.allowsMarkType(i))continue;let l=[],u=f=>{l.push(f);for(let d=0;d<f.edgeCount;d++){let{type:p,next:g}=f.edge(d);if(p==e||l.indexOf(g)<0&&u(g))return!0}};if(u(o.contentMatch))return!0}}class Fr{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=pd(t).createDocumentFragment());let o=r,l=[];return e.forEach(u=>{if(l.length||u.marks.length){let f=0,d=0;for(;f<l.length&&d<u.marks.length;){let p=u.marks[d];if(!this.marks[p.type.name]){d++;continue}if(!p.eq(l[f][0])||p.type.spec.spanning===!1)break;f++,d++}for(;f<l.length;)o=l.pop()[1];for(;d<u.marks.length;){let p=u.marks[d++],g=this.serializeMark(p,u.isInline,t);g&&(l.push([p,o]),o.appendChild(g.dom),o=g.contentDOM||g.dom)}}o.appendChild(this.serializeNodeInner(u,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:o}=lu(pd(t),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let l=this.serializeMark(e.marks[o],e.isInline,t);l&&((l.contentDOM||l.dom).appendChild(r),r=l.dom)}return r}serializeMark(e,t,r={}){let o=this.marks[e.type.name];return o&&lu(pd(r),o(e,t),null,e.attrs)}static renderSpec(e,t,r=null,o){return lu(e,t,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Fr(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=r0(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return r0(e.marks)}}function r0(i){let e={};for(let t in i){let r=i[t].spec.toDOM;r&&(e[t]=r)}return e}function pd(i){return i.document||window.document}const s0=new WeakMap;function SM(i){let e=s0.get(i);return e===void 0&&s0.set(i,e=xM(i)),e}function xM(i){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)t(r[o]);else for(let o in r)t(r[o])}return t(i),e}function lu(i,e,t,r){if(typeof e=="string")return{dom:i.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],l;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(l=SM(r))&&l.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let u=o.indexOf(" ");u>0&&(t=o.slice(0,u),o=o.slice(u+1));let f,d=t?i.createElementNS(t,o):i.createElement(o),p=e[1],g=1;if(p&&typeof p=="object"&&p.nodeType==null&&!Array.isArray(p)){g=2;for(let y in p)if(p[y]!=null){let b=y.indexOf(" ");b>0?d.setAttributeNS(y.slice(0,b),y.slice(b+1),p[y]):d.setAttribute(y,p[y])}}for(let y=g;y<e.length;y++){let b=e[y];if(b===0){if(y<e.length-1||y>g)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:S,contentDOM:x}=lu(i,b,t,r);if(d.appendChild(S),x){if(f)throw new RangeError("Multiple content holes");f=x}}}return{dom:d,contentDOM:f}}const Yb=65535,Pb=Math.pow(2,16);function wM(i,e){return i+e*Pb}function o0(i){return i&Yb}function TM(i){return(i-(i&Yb))/Pb}const Gb=1,Fb=2,au=4,Kb=8;class Qd{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Kb)>0}get deletedBefore(){return(this.delInfo&(Gb|au))>0}get deletedAfter(){return(this.delInfo&(Fb|au))>0}get deletedAcross(){return(this.delInfo&au)>0}}class on{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&on.empty)return on.empty}recover(e){let t=0,r=o0(e);if(!this.inverted)for(let o=0;o<r;o++)t+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+t+TM(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let o=0,l=this.inverted?2:1,u=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?o:0);if(d>e)break;let p=this.ranges[f+l],g=this.ranges[f+u],y=d+p;if(e<=y){let b=p?e==d?-1:e==y?1:t:t,S=d+o+(b<0?0:g);if(r)return S;let x=e==(t<0?d:y)?null:wM(f/3,e-d),T=e==d?Fb:e==y?Gb:au;return(t<0?e!=d:e!=y)&&(T|=Kb),new Qd(S,T,x)}o+=g-p}return r?e+o:new Qd(e+o,0,null)}touches(e,t){let r=0,o=o0(t),l=this.inverted?2:1,u=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?r:0);if(d>e)break;let p=this.ranges[f+l],g=d+p;if(e<=g&&f==o*3)return!0;r+=this.ranges[f+u]-p}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,l=0;o<this.ranges.length;o+=3){let u=this.ranges[o],f=u-(this.inverted?l:0),d=u+(this.inverted?0:l),p=this.ranges[o+t],g=this.ranges[o+r];e(f,f+p,d,d+g),l+=g-p}}invert(){return new on(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?on.empty:new on(e<0?[0,-e,0]:[0,0,e])}}on.empty=new on([]);class Sl{constructor(e,t,r=0,o=e?e.length:0){this.mirror=t,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Sl(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let o=e.getMirror(t);this.appendMap(e._maps[t],o!=null&&o<t?r+o:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e._maps[t].invert(),o!=null&&o>t?r-o-1:void 0)}}invert(){let e=new Sl;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let o=0;for(let l=this.from;l<this.to;l++){let u=this._maps[l],f=u.mapResult(e,t);if(f.recover!=null){let d=this.getMirror(l);if(d!=null&&d>l&&d<this.to){l=d,e=this._maps[d].recover(f.recover);continue}}o|=f.delInfo,e=f.pos}return r?e:new Qd(e,o,null)}}const md=Object.create(null);class Dt{getMap(){return on.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=md[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in md)throw new RangeError("Duplicate use of step JSON ID "+e);return md[e]=t,t.prototype.jsonID=e,t}}class tt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new tt(e,null)}static fail(e){return new tt(null,e)}static fromReplace(e,t,r,o){try{return tt.ok(e.replace(t,r,o))}catch(l){if(l instanceof mu)return tt.fail(l.message);throw l}}}function dh(i,e,t){let r=[];for(let o=0;o<i.childCount;o++){let l=i.child(o);l.content.size&&(l=l.copy(dh(l.content,e,l))),l.isInline&&(l=e(l,t,o)),r.push(l)}return H.fromArray(r)}class Xi extends Dt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),l=new F(dh(t.content,(u,f)=>!u.isAtom||!f.type.allowsMarkType(this.mark.type)?u:u.mark(this.mark.addToSet(u.marks)),o),t.openStart,t.openEnd);return tt.fromReplace(e,this.from,this.to,l)}invert(){return new Yn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Xi(t.pos,r.pos,this.mark)}merge(e){return e instanceof Xi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Xi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Xi(t.from,t.to,e.markFromJSON(t.mark))}}Dt.jsonID("addMark",Xi);class Yn extends Dt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new F(dh(t.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),t.openStart,t.openEnd);return tt.fromReplace(e,this.from,this.to,r)}invert(){return new Xi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Yn(t.pos,r.pos,this.mark)}merge(e){return e instanceof Yn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Yn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Yn(t.from,t.to,e.markFromJSON(t.mark))}}Dt.jsonID("removeMark",Yn);class Ji extends Dt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return tt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return tt.fromReplace(e,this.pos,this.pos+1,new F(H.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(r))return new Ji(this.pos,t.marks[o]);return new Ji(this.pos,this.mark)}}return new Yr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ji(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ji(t.pos,e.markFromJSON(t.mark))}}Dt.jsonID("addNodeMark",Ji);class Yr extends Dt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return tt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return tt.fromReplace(e,this.pos,this.pos+1,new F(H.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Ji(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Yr(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Yr(t.pos,e.markFromJSON(t.mark))}}Dt.jsonID("removeNodeMark",Yr);class dt extends Dt{constructor(e,t,r,o=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=o}apply(e){return this.structure&&Yd(e,this.from,this.to)?tt.fail("Structure replace would overwrite content"):tt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new on([this.from,this.to-this.from,this.slice.size])}invert(e){return new dt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new dt(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof dt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?F.empty:new F(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new dt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?F.empty:new F(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new dt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new dt(t.from,t.to,F.fromJSON(e,t.slice),!!t.structure)}}Dt.jsonID("replace",dt);class ht extends Dt{constructor(e,t,r,o,l,u,f=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=o,this.slice=l,this.insert=u,this.structure=f}apply(e){if(this.structure&&(Yd(e,this.from,this.gapFrom)||Yd(e,this.gapTo,this.to)))return tt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return tt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?tt.fromReplace(e,this.from,this.to,r):tt.fail("Content does not fit in gap")}getMap(){return new on([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ht(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),l=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||o<t.pos||l>r.pos?null:new ht(t.pos,r.pos,o,l,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ht(t.from,t.to,t.gapFrom,t.gapTo,F.fromJSON(e,t.slice),t.insert,!!t.structure)}}Dt.jsonID("replaceAround",ht);function Yd(i,e,t){let r=i.resolve(e),o=t-e,l=r.depth;for(;o>0&&l>0&&r.indexAfter(l)==r.node(l).childCount;)l--,o--;if(o>0){let u=r.node(l).maybeChild(r.indexAfter(l));for(;o>0;){if(!u||u.isLeaf)return!0;u=u.firstChild,o--}}return!1}function MM(i,e,t,r){let o=[],l=[],u,f;i.doc.nodesBetween(e,t,(d,p,g)=>{if(!d.isInline)return;let y=d.marks;if(!r.isInSet(y)&&g.type.allowsMarkType(r.type)){let b=Math.max(p,e),S=Math.min(p+d.nodeSize,t),x=r.addToSet(y);for(let T=0;T<y.length;T++)y[T].isInSet(x)||(u&&u.to==b&&u.mark.eq(y[T])?u.to=S:o.push(u=new Yn(b,S,y[T])));f&&f.to==b?f.to=S:l.push(f=new Xi(b,S,r))}}),o.forEach(d=>i.step(d)),l.forEach(d=>i.step(d))}function EM(i,e,t,r){let o=[],l=0;i.doc.nodesBetween(e,t,(u,f)=>{if(!u.isInline)return;l++;let d=null;if(r instanceof Ou){let p=u.marks,g;for(;g=r.isInSet(p);)(d||(d=[])).push(g),p=g.removeFromSet(p)}else r?r.isInSet(u.marks)&&(d=[r]):d=u.marks;if(d&&d.length){let p=Math.min(f+u.nodeSize,t);for(let g=0;g<d.length;g++){let y=d[g],b;for(let S=0;S<o.length;S++){let x=o[S];x.step==l-1&&y.eq(o[S].style)&&(b=x)}b?(b.to=p,b.step=l):o.push({style:y,from:Math.max(f,e),to:p,step:l})}}}),o.forEach(u=>i.step(new Yn(u.from,u.to,u.style)))}function hh(i,e,t,r=t.contentMatch,o=!0){let l=i.doc.nodeAt(e),u=[],f=e+1;for(let d=0;d<l.childCount;d++){let p=l.child(d),g=f+p.nodeSize,y=r.matchType(p.type);if(!y)u.push(new dt(f,g,F.empty));else{r=y;for(let b=0;b<p.marks.length;b++)t.allowsMarkType(p.marks[b].type)||i.step(new Yn(f,g,p.marks[b]));if(o&&p.isText&&t.whitespace!="pre"){let b,S=/\r?\n|\r/g,x;for(;b=S.exec(p.text);)x||(x=new F(H.from(t.schema.text(" ",t.allowedMarks(p.marks))),0,0)),u.push(new dt(f+b.index,f+b.index+b[0].length,x))}}f=g}if(!r.validEnd){let d=r.fillBefore(H.empty,!0);i.replace(f,f,new F(d,0,0))}for(let d=u.length-1;d>=0;d--)i.step(u[d])}function CM(i,e,t){return(e==0||i.canReplace(e,i.childCount))&&(t==i.childCount||i.canReplace(0,t))}function io(i){let t=i.parent.content.cutByIndex(i.startIndex,i.endIndex);for(let r=i.depth;;--r){let o=i.$from.node(r),l=i.$from.index(r),u=i.$to.indexAfter(r);if(r<i.depth&&o.canReplace(l,u,t))return r;if(r==0||o.type.spec.isolating||!CM(o,l,u))break}return null}function AM(i,e,t){let{$from:r,$to:o,depth:l}=e,u=r.before(l+1),f=o.after(l+1),d=u,p=f,g=H.empty,y=0;for(let x=l,T=!1;x>t;x--)T||r.index(x)>0?(T=!0,g=H.from(r.node(x).copy(g)),y++):d--;let b=H.empty,S=0;for(let x=l,T=!1;x>t;x--)T||o.after(x+1)<o.end(x)?(T=!0,b=H.from(o.node(x).copy(b)),S++):p++;i.step(new ht(d,p,u,f,new F(g.append(b),y,S),g.size-y,!0))}function ph(i,e,t=null,r=i){let o=kM(i,e),l=o&&OM(r,e);return l?o.map(l0).concat({type:e,attrs:t}).concat(l.map(l0)):null}function l0(i){return{type:i,attrs:null}}function kM(i,e){let{parent:t,startIndex:r,endIndex:o}=i,l=t.contentMatchAt(r).findWrapping(e);if(!l)return null;let u=l.length?l[0]:e;return t.canReplaceWith(r,o,u)?l:null}function OM(i,e){let{parent:t,startIndex:r,endIndex:o}=i,l=t.child(r),u=e.contentMatch.findWrapping(l.type);if(!u)return null;let d=(u.length?u[u.length-1]:e).contentMatch;for(let p=r;d&&p<o;p++)d=d.matchType(t.child(p).type);return!d||!d.validEnd?null:u}function NM(i,e,t){let r=H.empty;for(let u=t.length-1;u>=0;u--){if(r.size){let f=t[u].type.contentMatch.matchFragment(r);if(!f||!f.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=H.from(t[u].type.create(t[u].attrs,r))}let o=e.start,l=e.end;i.step(new ht(o,l,o,l,new F(r,0,0),t.length,!0))}function RM(i,e,t,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let l=i.steps.length;i.doc.nodesBetween(e,t,(u,f)=>{let d=typeof o=="function"?o(u):o;if(u.isTextblock&&!u.hasMarkup(r,d)&&DM(i.doc,i.mapping.slice(l).map(f),r)){let p=null;if(r.schema.linebreakReplacement){let S=r.whitespace=="pre",x=!!r.contentMatch.matchType(r.schema.linebreakReplacement);S&&!x?p=!1:!S&&x&&(p=!0)}p===!1&&Jb(i,u,f,l),hh(i,i.mapping.slice(l).map(f,1),r,void 0,p===null);let g=i.mapping.slice(l),y=g.map(f,1),b=g.map(f+u.nodeSize,1);return i.step(new ht(y,b,y+1,b-1,new F(H.from(r.create(d,null,u.marks)),0,0),1,!0)),p===!0&&Xb(i,u,f,l),!1}})}function Xb(i,e,t,r){e.forEach((o,l)=>{if(o.isText){let u,f=/\r?\n|\r/g;for(;u=f.exec(o.text);){let d=i.mapping.slice(r).map(t+1+l+u.index);i.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function Jb(i,e,t,r){e.forEach((o,l)=>{if(o.type==o.type.schema.linebreakReplacement){let u=i.mapping.slice(r).map(t+1+l);i.replaceWith(u,u+1,e.type.schema.text(`
`))}})}function DM(i,e,t){let r=i.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,t)}function _M(i,e,t,r,o){let l=i.doc.nodeAt(e);if(!l)throw new RangeError("No node at given position");t||(t=l.type);let u=t.create(r,null,o||l.marks);if(l.isLeaf)return i.replaceWith(e,e+l.nodeSize,u);if(!t.validContent(l.content))throw new RangeError("Invalid content for node type "+t.name);i.step(new ht(e,e+l.nodeSize,e+1,e+l.nodeSize-1,new F(H.from(u),0,0),1,!0))}function yi(i,e,t=1,r){let o=i.resolve(e),l=o.depth-t,u=r&&r[r.length-1]||o.parent;if(l<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!u.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let p=o.depth-1,g=t-2;p>l;p--,g--){let y=o.node(p),b=o.index(p);if(y.type.spec.isolating)return!1;let S=y.content.cutByIndex(b,y.childCount),x=r&&r[g+1];x&&(S=S.replaceChild(0,x.type.create(x.attrs)));let T=r&&r[g]||y;if(!y.canReplace(b+1,y.childCount)||!T.type.validContent(S))return!1}let f=o.indexAfter(l),d=r&&r[0];return o.node(l).canReplaceWith(f,f,d?d.type:o.node(l+1).type)}function zM(i,e,t=1,r){let o=i.doc.resolve(e),l=H.empty,u=H.empty;for(let f=o.depth,d=o.depth-t,p=t-1;f>d;f--,p--){l=H.from(o.node(f).copy(l));let g=r&&r[p];u=H.from(g?g.type.create(g.attrs,u):o.node(f).copy(u))}i.step(new dt(e,e,new F(l.append(u),t,t),!0))}function or(i,e){let t=i.resolve(e),r=t.index();return Zb(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function BM(i,e){e.content.size||i.type.compatibleContent(e.type);let t=i.contentMatchAt(i.childCount),{linebreakReplacement:r}=i.type.schema;for(let o=0;o<e.childCount;o++){let l=e.child(o),u=l.type==r?i.type.schema.nodes.text:l.type;if(t=t.matchType(u),!t||!i.type.allowsMarks(l.marks))return!1}return t.validEnd}function Zb(i,e){return!!(i&&e&&!i.isLeaf&&BM(i,e))}function Nu(i,e,t=-1){let r=i.resolve(e);for(let o=r.depth;;o--){let l,u,f=r.index(o);if(o==r.depth?(l=r.nodeBefore,u=r.nodeAfter):t>0?(l=r.node(o+1),f++,u=r.node(o).maybeChild(f)):(l=r.node(o).maybeChild(f-1),u=r.node(o+1)),l&&!l.isTextblock&&Zb(l,u)&&r.node(o).canReplace(f,f+1))return e;if(o==0)break;e=t<0?r.before(o):r.after(o)}}function qM(i,e,t){let r=null,{linebreakReplacement:o}=i.doc.type.schema,l=i.doc.resolve(e-t),u=l.node().type;if(o&&u.inlineContent){let g=u.whitespace=="pre",y=!!u.contentMatch.matchType(o);g&&!y?r=!1:!g&&y&&(r=!0)}let f=i.steps.length;if(r===!1){let g=i.doc.resolve(e+t);Jb(i,g.node(),g.before(),f)}u.inlineContent&&hh(i,e+t-1,u,l.node().contentMatchAt(l.index()),r==null);let d=i.mapping.slice(f),p=d.map(e-t);if(i.step(new dt(p,d.map(e+t,-1),F.empty,!0)),r===!0){let g=i.doc.resolve(p);Xb(i,g.node(),g.before(),i.steps.length)}return i}function LM(i,e,t){let r=i.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let l=r.index(o);if(r.node(o).canReplaceWith(l,l,t))return r.before(o+1);if(l>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let l=r.indexAfter(o);if(r.node(o).canReplaceWith(l,l,t))return r.after(o+1);if(l<r.node(o).childCount)return null}return null}function Wb(i,e,t){let r=i.resolve(e);if(!t.content.size)return e;let o=t.content;for(let l=0;l<t.openStart;l++)o=o.firstChild.content;for(let l=1;l<=(t.openStart==0&&t.size?2:1);l++)for(let u=r.depth;u>=0;u--){let f=u==r.depth?0:r.pos<=(r.start(u+1)+r.end(u+1))/2?-1:1,d=r.index(u)+(f>0?1:0),p=r.node(u),g=!1;if(l==1)g=p.canReplace(d,d,o);else{let y=p.contentMatchAt(d).findWrapping(o.firstChild.type);g=y&&p.canReplaceWith(d,d,y[0])}if(g)return f==0?r.pos:f<0?r.before(u+1):r.after(u+1)}return null}function Ru(i,e,t=e,r=F.empty){if(e==t&&!r.size)return null;let o=i.resolve(e),l=i.resolve(t);return ev(o,l,r)?new dt(e,t,r):new VM(o,l,r).fit()}function ev(i,e,t){return!t.openStart&&!t.openEnd&&i.start()==e.start()&&i.parent.canReplace(i.index(),e.index(),t.content)}class VM{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=H.empty;for(let o=0;o<=e.depth;o++){let l=e.node(o);this.frontier.push({type:l.type,match:l.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=H.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let p=this.findFittable();p?this.placeNodes(p):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let l=this.placed,u=r.depth,f=o.depth;for(;u&&f&&l.childCount==1;)l=l.firstChild.content,u--,f--;let d=new F(l,u,f);return e>-1?new ht(r.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||r.pos!=this.$to.pos?new dt(r.pos,o.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let l=t.firstChild;if(t.childCount>1&&(o=0),l.type.spec.isolating&&o<=r){e=r;break}t=l.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let o,l=null;r?(l=gd(this.unplaced.content,r-1).firstChild,o=l.content):o=this.unplaced.content;let u=o.firstChild;for(let f=this.depth;f>=0;f--){let{type:d,match:p}=this.frontier[f],g,y=null;if(t==1&&(u?p.matchType(u.type)||(y=p.fillBefore(H.from(u),!1)):l&&d.compatibleContent(l.type)))return{sliceDepth:r,frontierDepth:f,parent:l,inject:y};if(t==2&&u&&(g=p.findWrapping(u.type)))return{sliceDepth:r,frontierDepth:f,parent:l,wrap:g};if(l&&p.matchType(l.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=gd(e,t);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new F(e,t+1,Math.max(r,o.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=gd(e,t);if(o.childCount<=1&&t>0){let l=e.size-t<=t+o.size;this.unplaced=new F(ol(e,t-1,1),t-1,l?t-1:r)}else this.unplaced=new F(ol(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:o,wrap:l}){for(;this.depth>t;)this.closeFrontierNode();if(l)for(let T=0;T<l.length;T++)this.openFrontierNode(l[T]);let u=this.unplaced,f=r?r.content:u.content,d=u.openStart-e,p=0,g=[],{match:y,type:b}=this.frontier[t];if(o){for(let T=0;T<o.childCount;T++)g.push(o.child(T));y=y.matchFragment(o)}let S=f.size+e-(u.content.size-u.openEnd);for(;p<f.childCount;){let T=f.child(p),E=y.matchType(T.type);if(!E)break;p++,(p>1||d==0||T.content.size)&&(y=E,g.push(tv(T.mark(b.allowedMarks(T.marks)),p==1?d:0,p==f.childCount?S:-1)))}let x=p==f.childCount;x||(S=-1),this.placed=ll(this.placed,t,H.from(g)),this.frontier[t].match=y,x&&S<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let T=0,E=f;T<S;T++){let B=E.lastChild;this.frontier.push({type:B.type,match:B.contentMatchAt(B.childCount)}),E=B.content}this.unplaced=x?e==0?F.empty:new F(ol(u.content,e-1,1),e-1,S<0?u.openEnd:e-1):new F(ol(u.content,e,p),u.openStart,u.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!yd(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:o}=this.frontier[t],l=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),u=yd(e,t,o,r,l);if(u){for(let f=t-1;f>=0;f--){let{match:d,type:p}=this.frontier[f],g=yd(e,f,p,d,!0);if(!g||g.childCount)continue e}return{depth:t,fit:u,move:l?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=ll(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let o=e.node(r),l=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,l)}return e}openFrontierNode(e,t=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=ll(this.placed,this.depth,H.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(H.empty,!0);t.childCount&&(this.placed=ll(this.placed,this.frontier.length,t))}}function ol(i,e,t){return e==0?i.cutByIndex(t,i.childCount):i.replaceChild(0,i.firstChild.copy(ol(i.firstChild.content,e-1,t)))}function ll(i,e,t){return e==0?i.append(t):i.replaceChild(i.childCount-1,i.lastChild.copy(ll(i.lastChild.content,e-1,t)))}function gd(i,e){for(let t=0;t<e;t++)i=i.firstChild.content;return i}function tv(i,e,t){if(e<=0)return i;let r=i.content;return e>1&&(r=r.replaceChild(0,tv(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=i.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(i.type.contentMatch.matchFragment(r).fillBefore(H.empty,!0)))),i.copy(r)}function yd(i,e,t,r,o){let l=i.node(e),u=o?i.indexAfter(e):i.index(e);if(u==l.childCount&&!t.compatibleContent(l.type))return null;let f=r.fillBefore(l.content,!0,u);return f&&!jM(t,l.content,u)?f:null}function jM(i,e,t){for(let r=t;r<e.childCount;r++)if(!i.allowsMarks(e.child(r).marks))return!0;return!1}function UM(i){return i.spec.defining||i.spec.definingForContent}function HM(i,e,t,r){if(!r.size)return i.deleteRange(e,t);let o=i.doc.resolve(e),l=i.doc.resolve(t);if(ev(o,l,r))return i.step(new dt(e,t,r));let u=iv(o,i.doc.resolve(t));u[u.length-1]==0&&u.pop();let f=-(o.depth+1);u.unshift(f);for(let b=o.depth,S=o.pos-1;b>0;b--,S--){let x=o.node(b).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;u.indexOf(b)>-1?f=b:o.before(b)==S&&u.splice(1,0,-b)}let d=u.indexOf(f),p=[],g=r.openStart;for(let b=r.content,S=0;;S++){let x=b.firstChild;if(p.push(x),S==r.openStart)break;b=x.content}for(let b=g-1;b>=0;b--){let S=p[b],x=UM(S.type);if(x&&!S.sameMarkup(o.node(Math.abs(f)-1)))g=b;else if(x||!S.type.isTextblock)break}for(let b=r.openStart;b>=0;b--){let S=(b+g+1)%(r.openStart+1),x=p[S];if(x)for(let T=0;T<u.length;T++){let E=u[(T+d)%u.length],B=!0;E<0&&(B=!1,E=-E);let J=o.node(E-1),K=o.index(E-1);if(J.canReplaceWith(K,K,x.type,x.marks))return i.replace(o.before(E),B?l.after(E):t,new F(nv(r.content,0,r.openStart,S),S,r.openEnd))}}let y=i.steps.length;for(let b=u.length-1;b>=0&&(i.replace(e,t,r),!(i.steps.length>y));b--){let S=u[b];S<0||(e=o.before(S),t=l.after(S))}}function nv(i,e,t,r,o){if(e<t){let l=i.firstChild;i=i.replaceChild(0,l.copy(nv(l.content,e+1,t,r,l)))}if(e>r){let l=o.contentMatchAt(0),u=l.fillBefore(i).append(i);i=u.append(l.matchFragment(u).fillBefore(H.empty,!0))}return i}function IM(i,e,t,r){if(!r.isInline&&e==t&&i.doc.resolve(e).parent.content.size){let o=LM(i.doc,e,r.type);o!=null&&(e=t=o)}i.replaceRange(e,t,new F(H.from(r),0,0))}function $M(i,e,t){let r=i.doc.resolve(e),o=i.doc.resolve(t),l=iv(r,o);for(let u=0;u<l.length;u++){let f=l[u],d=u==l.length-1;if(d&&f==0||r.node(f).type.contentMatch.validEnd)return i.delete(r.start(f),o.end(f));if(f>0&&(d||r.node(f-1).canReplace(r.index(f-1),o.indexAfter(f-1))))return i.delete(r.before(f),o.after(f))}for(let u=1;u<=r.depth&&u<=o.depth;u++)if(e-r.start(u)==r.depth-u&&t>r.end(u)&&o.end(u)-t!=o.depth-u&&r.start(u-1)==o.start(u-1)&&r.node(u-1).canReplace(r.index(u-1),o.index(u-1)))return i.delete(r.before(u),t);i.delete(e,t)}function iv(i,e){let t=[],r=Math.min(i.depth,e.depth);for(let o=r;o>=0;o--){let l=i.start(o);if(l<i.pos-(i.depth-o)||e.end(o)>e.pos+(e.depth-o)||i.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(l==e.start(o)||o==i.depth&&o==e.depth&&i.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==l-1)&&t.push(o)}return t}class Fs extends Dt{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return tt.fail("No node at attribute step's position");let r=Object.create(null);for(let l in t.attrs)r[l]=t.attrs[l];r[this.attr]=this.value;let o=t.type.create(r,null,t.marks);return tt.fromReplace(e,this.pos,this.pos+1,new F(H.from(o),0,t.isLeaf?0:1))}getMap(){return on.empty}invert(e){return new Fs(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Fs(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Fs(t.pos,t.attr,t.value)}}Dt.jsonID("attr",Fs);class xl extends Dt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let o in e.attrs)t[o]=e.attrs[o];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return tt.ok(r)}getMap(){return on.empty}invert(e){return new xl(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new xl(t.attr,t.value)}}Dt.jsonID("docAttr",xl);let Js=class extends Error{};Js=function i(e){let t=Error.call(this,e);return t.__proto__=i.prototype,t};Js.prototype=Object.create(Error.prototype);Js.prototype.constructor=Js;Js.prototype.name="TransformError";class QM{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Sl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Js(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=F.empty){let o=Ru(this.doc,e,t,r);return o&&this.step(o),this}replaceWith(e,t,r){return this.replace(e,t,new F(H.from(r),0,0))}delete(e,t){return this.replace(e,t,F.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return HM(this,e,t,r),this}replaceRangeWith(e,t,r){return IM(this,e,t,r),this}deleteRange(e,t){return $M(this,e,t),this}lift(e,t){return AM(this,e,t),this}join(e,t=1){return qM(this,e,t),this}wrap(e,t){return NM(this,e,t),this}setBlockType(e,t=e,r,o=null){return RM(this,e,t,r,o),this}setNodeMarkup(e,t,r=null,o){return _M(this,e,t,r,o),this}setNodeAttribute(e,t,r){return this.step(new Fs(e,t,r)),this}setDocAttribute(e,t){return this.step(new xl(e,t)),this}addNodeMark(e,t){return this.step(new Ji(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof Le)t.isInSet(r.marks)&&this.step(new Yr(e,t));else{let o=r.marks,l,u=[];for(;l=t.isInSet(o);)u.push(new Yr(e,l)),o=l.removeFromSet(o);for(let f=u.length-1;f>=0;f--)this.step(u[f])}return this}split(e,t=1,r){return zM(this,e,t,r),this}addMark(e,t,r){return MM(this,e,t,r),this}removeMark(e,t,r){return EM(this,e,t,r),this}clearIncompatible(e,t,r){return hh(this,e,t,r),this}}const bd=Object.create(null);class me{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new YM(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=F.empty){let r=t.content.lastChild,o=null;for(let f=0;f<t.openEnd;f++)o=r,r=r.lastChild;let l=e.steps.length,u=this.ranges;for(let f=0;f<u.length;f++){let{$from:d,$to:p}=u[f],g=e.mapping.slice(l);e.replaceRange(g.map(d.pos),g.map(p.pos),f?F.empty:t),f==0&&c0(e,l,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:u,$to:f}=o[l],d=e.mapping.slice(r),p=d.map(u.pos),g=d.map(f.pos);l?e.deleteRange(p,g):(e.replaceRangeWith(p,g,t),c0(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let o=e.parent.inlineContent?new ce(e):$s(e.node(0),e.parent,e.pos,e.index(),t,r);if(o)return o;for(let l=e.depth-1;l>=0;l--){let u=t<0?$s(e.node(0),e.node(l),e.before(l+1),e.index(l),t,r):$s(e.node(0),e.node(l),e.after(l+1),e.index(l)+1,t,r);if(u)return u}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new ln(e.node(0))}static atStart(e){return $s(e,e,0,0,1)||new ln(e)}static atEnd(e){return $s(e,e,e.content.size,e.childCount,-1)||new ln(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=bd[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in bd)throw new RangeError("Duplicate use of selection JSON ID "+e);return bd[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ce.between(this.$anchor,this.$head).getBookmark()}}me.prototype.visible=!0;class YM{constructor(e,t){this.$from=e,this.$to=t}}let a0=!1;function u0(i){!a0&&!i.parent.inlineContent&&(a0=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+i.parent.type.name+")"))}class ce extends me{constructor(e,t=e){u0(e),u0(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return me.near(r);let o=e.resolve(t.map(this.anchor));return new ce(o.parent.inlineContent?o:r,r)}replace(e,t=F.empty){if(super.replace(e,t),t==F.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ce&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Du(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ce(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let o=e.resolve(t);return new this(o,r==t?o:e.resolve(r))}static between(e,t,r){let o=e.pos-t.pos;if((!r||o)&&(r=o>=0?1:-1),!t.parent.inlineContent){let l=me.findFrom(t,r,!0)||me.findFrom(t,-r,!0);if(l)t=l.$head;else return me.near(t,r)}return e.parent.inlineContent||(o==0?e=t:(e=(me.findFrom(e,-r,!0)||me.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=o<0&&(e=t))),new ce(e,t)}}me.jsonID("text",ce);class Du{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Du(e.map(this.anchor),e.map(this.head))}resolve(e){return ce.between(e.resolve(this.anchor),e.resolve(this.head))}}class oe extends me{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:o}=t.mapResult(this.anchor),l=e.resolve(o);return r?me.near(l):new oe(l)}content(){return new F(H.from(this.node),0,0)}eq(e){return e instanceof oe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new mh(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new oe(e.resolve(t.anchor))}static create(e,t){return new oe(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}oe.prototype.visible=!1;me.jsonID("node",oe);class mh{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new Du(r,r):new mh(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&oe.isSelectable(r)?new oe(t):me.near(t)}}class ln extends me{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=F.empty){if(t==F.empty){e.delete(0,e.doc.content.size);let r=me.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new ln(e)}map(e){return new ln(e)}eq(e){return e instanceof ln}getBookmark(){return PM}}me.jsonID("all",ln);const PM={map(){return this},resolve(i){return new ln(i)}};function $s(i,e,t,r,o,l=!1){if(e.inlineContent)return ce.create(i,t);for(let u=r-(o>0?0:1);o>0?u<e.childCount:u>=0;u+=o){let f=e.child(u);if(f.isAtom){if(!l&&oe.isSelectable(f))return oe.create(i,t-(o<0?f.nodeSize:0))}else{let d=$s(i,f,t+o,o<0?f.childCount:0,o,l);if(d)return d}t+=f.nodeSize*o}return null}function c0(i,e,t){let r=i.steps.length-1;if(r<e)return;let o=i.steps[r];if(!(o instanceof dt||o instanceof ht))return;let l=i.mapping.maps[r],u;l.forEach((f,d,p,g)=>{u==null&&(u=g)}),i.setSelection(me.near(i.doc.resolve(u),t))}const f0=1,d0=2,h0=4;class GM extends QM{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|f0)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&f0)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=d0,this}ensureMarks(e){return Le.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&d0)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Le.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let o=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let l=this.storedMarks;if(!l){let u=this.doc.resolve(t);l=r==t?u.marks():u.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,o.text(e,l)),this.selection.empty||this.setSelection(me.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=h0,this}get scrolledIntoView(){return(this.updated&h0)>0}}function p0(i,e){return!e||!i?i:i.bind(e)}class al{constructor(e,t,r){this.name=e,this.init=p0(t.init,r),this.apply=p0(t.apply,r)}}const FM=[new al("doc",{init(i){return i.doc||i.schema.topNodeType.createAndFill()},apply(i){return i.doc}}),new al("selection",{init(i,e){return i.selection||me.atStart(e.doc)},apply(i){return i.selection}}),new al("storedMarks",{init(i){return i.storedMarks||null},apply(i,e,t,r){return r.selection.$cursor?i.storedMarks:null}}),new al("scrollToSelection",{init(){return 0},apply(i,e){return i.scrolledIntoView?e+1:e}})];class vd{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=FM.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new al(r.key,r.spec.state,r))})}}class Ps{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),o=null;for(;;){let l=!1;for(let u=0;u<this.config.plugins.length;u++){let f=this.config.plugins[u];if(f.spec.appendTransaction){let d=o?o[u].n:0,p=o?o[u].state:this,g=d<t.length&&f.spec.appendTransaction.call(f,d?t.slice(d):t,p,r);if(g&&r.filterTransaction(g,u)){if(g.setMeta("appendedTransaction",e),!o){o=[];for(let y=0;y<this.config.plugins.length;y++)o.push(y<u?{state:r,n:t.length}:{state:this,n:0})}t.push(g),r=r.applyInner(g),l=!0}o&&(o[u]={state:r,n:t.length})}}if(!l)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Ps(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let l=r[o];t[l.name]=l.apply(e,this[l.name],this,t)}return t}get tr(){return new GM(this)}static create(e){let t=new vd(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ps(t);for(let o=0;o<t.fields.length;o++)r[t.fields[o].name]=t.fields[o].init(e,r);return r}reconfigure(e){let t=new vd(this.schema,e.plugins),r=t.fields,o=new Ps(t);for(let l=0;l<r.length;l++){let u=r[l].name;o[u]=this.hasOwnProperty(u)?this[u]:r[l].init(e,o)}return o}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],l=o.spec.state;l&&l.toJSON&&(t[r]=l.toJSON.call(o,this[o.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new vd(e.schema,e.plugins),l=new Ps(o);return o.fields.forEach(u=>{if(u.name=="doc")l.doc=Wi.fromJSON(e.schema,t.doc);else if(u.name=="selection")l.selection=me.fromJSON(l.doc,t.selection);else if(u.name=="storedMarks")t.storedMarks&&(l.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let f in r){let d=r[f],p=d.spec.state;if(d.key==u.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(t,f)){l[u.name]=p.fromJSON.call(d,e,t[f],l);return}}l[u.name]=u.init(e,l)}}),l}}function rv(i,e,t){for(let r in i){let o=i[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=rv(o,e,{})),t[r]=o}return t}class Xt{constructor(e){this.spec=e,this.props={},e.props&&rv(e.props,this,this.props),this.key=e.key?e.key.key:sv("plugin")}getState(e){return e[this.key]}}const Sd=Object.create(null);function sv(i){return i in Sd?i+"$"+ ++Sd[i]:(Sd[i]=0,i+"$")}class Fn{constructor(e="key"){this.key=sv(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const wt=function(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e},Zs=function(i){let e=i.assignedSlot||i.parentNode;return e&&e.nodeType==11?e.host:e};let Pd=null;const pi=function(i,e,t){let r=Pd||(Pd=document.createRange());return r.setEnd(i,t??i.nodeValue.length),r.setStart(i,e||0),r},KM=function(){Pd=null},Pr=function(i,e,t,r){return t&&(m0(i,e,t,r,-1)||m0(i,e,t,r,1))},XM=/^(img|br|input|textarea|hr)$/i;function m0(i,e,t,r,o){for(;;){if(i==t&&e==r)return!0;if(e==(o<0?0:xn(i))){let l=i.parentNode;if(!l||l.nodeType!=1||Al(i)||XM.test(i.nodeName)||i.contentEditable=="false")return!1;e=wt(i)+(o<0?0:1),i=l}else if(i.nodeType==1){if(i=i.childNodes[e+(o<0?-1:0)],i.contentEditable=="false")return!1;e=o<0?xn(i):0}else return!1}}function xn(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function JM(i,e){for(;;){if(i.nodeType==3&&e)return i;if(i.nodeType==1&&e>0){if(i.contentEditable=="false")return null;i=i.childNodes[e-1],e=xn(i)}else if(i.parentNode&&!Al(i))e=wt(i),i=i.parentNode;else return null}}function ZM(i,e){for(;;){if(i.nodeType==3&&e<i.nodeValue.length)return i;if(i.nodeType==1&&e<i.childNodes.length){if(i.contentEditable=="false")return null;i=i.childNodes[e],e=0}else if(i.parentNode&&!Al(i))e=wt(i)+1,i=i.parentNode;else return null}}function WM(i,e,t){for(let r=e==0,o=e==xn(i);r||o;){if(i==t)return!0;let l=wt(i);if(i=i.parentNode,!i)return!1;r=r&&l==0,o=o&&l==xn(i)}}function Al(i){let e;for(let t=i;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==i||e.contentDOM==i)}const _u=function(i){return i.focusNode&&Pr(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)};function Dr(i,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=i,t.key=t.code=e,t}function eE(i){let e=i.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function tE(i,e,t){if(i.caretPositionFromPoint)try{let r=i.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(xn(r.offsetNode),r.offset)}}catch{}if(i.caretRangeFromPoint){let r=i.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(xn(r.startContainer),r.startOffset)}}}const Pn=typeof navigator<"u"?navigator:null,g0=typeof document<"u"?document:null,lr=Pn&&Pn.userAgent||"",Gd=/Edge\/(\d+)/.exec(lr),ov=/MSIE \d/.exec(lr),Fd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(lr),Kt=!!(ov||Fd||Gd),tr=ov?document.documentMode:Fd?+Fd[1]:Gd?+Gd[1]:0,_n=!Kt&&/gecko\/(\d+)/i.test(lr);_n&&+(/Firefox\/(\d+)/.exec(lr)||[0,0])[1];const Kd=!Kt&&/Chrome\/(\d+)/.exec(lr),Nt=!!Kd,lv=Kd?+Kd[1]:0,Lt=!Kt&&!!Pn&&/Apple Computer/.test(Pn.vendor),Ws=Lt&&(/Mobile\/\w+/.test(lr)||!!Pn&&Pn.maxTouchPoints>2),Sn=Ws||(Pn?/Mac/.test(Pn.platform):!1),nE=Pn?/Win/.test(Pn.platform):!1,mi=/Android \d/.test(lr),kl=!!g0&&"webkitFontSmoothing"in g0.documentElement.style,iE=kl?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function rE(i){let e=i.defaultView&&i.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:i.documentElement.clientWidth,top:0,bottom:i.documentElement.clientHeight}}function hi(i,e){return typeof i=="number"?i:i[e]}function sE(i){let e=i.getBoundingClientRect(),t=e.width/i.offsetWidth||1,r=e.height/i.offsetHeight||1;return{left:e.left,right:e.left+i.clientWidth*t,top:e.top,bottom:e.top+i.clientHeight*r}}function y0(i,e,t){let r=i.someProp("scrollThreshold")||0,o=i.someProp("scrollMargin")||5,l=i.dom.ownerDocument;for(let u=t||i.dom;u;){if(u.nodeType!=1){u=Zs(u);continue}let f=u,d=f==l.body,p=d?rE(l):sE(f),g=0,y=0;if(e.top<p.top+hi(r,"top")?y=-(p.top-e.top+hi(o,"top")):e.bottom>p.bottom-hi(r,"bottom")&&(y=e.bottom-e.top>p.bottom-p.top?e.top+hi(o,"top")-p.top:e.bottom-p.bottom+hi(o,"bottom")),e.left<p.left+hi(r,"left")?g=-(p.left-e.left+hi(o,"left")):e.right>p.right-hi(r,"right")&&(g=e.right-p.right+hi(o,"right")),g||y)if(d)l.defaultView.scrollBy(g,y);else{let S=f.scrollLeft,x=f.scrollTop;y&&(f.scrollTop+=y),g&&(f.scrollLeft+=g);let T=f.scrollLeft-S,E=f.scrollTop-x;e={left:e.left-T,top:e.top-E,right:e.right-T,bottom:e.bottom-E}}let b=d?"fixed":getComputedStyle(u).position;if(/^(fixed|sticky)$/.test(b))break;u=b=="absolute"?u.offsetParent:Zs(u)}}function oE(i){let e=i.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,o;for(let l=(e.left+e.right)/2,u=t+1;u<Math.min(innerHeight,e.bottom);u+=5){let f=i.root.elementFromPoint(l,u);if(!f||f==i.dom||!i.dom.contains(f))continue;let d=f.getBoundingClientRect();if(d.top>=t-20){r=f,o=d.top;break}}return{refDOM:r,refTop:o,stack:av(i.dom)}}function av(i){let e=[],t=i.ownerDocument;for(let r=i;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),i!=t);r=Zs(r));return e}function lE({refDOM:i,refTop:e,stack:t}){let r=i?i.getBoundingClientRect().top:0;uv(t,r==0?0:r-e)}function uv(i,e){for(let t=0;t<i.length;t++){let{dom:r,top:o,left:l}=i[t];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=l&&(r.scrollLeft=l)}}let Hs=null;function aE(i){if(i.setActive)return i.setActive();if(Hs)return i.focus(Hs);let e=av(i);i.focus(Hs==null?{get preventScroll(){return Hs={preventScroll:!0},!0}}:void 0),Hs||(Hs=!1,uv(e,0))}function cv(i,e){let t,r=2e8,o,l=0,u=e.top,f=e.top,d,p;for(let g=i.firstChild,y=0;g;g=g.nextSibling,y++){let b;if(g.nodeType==1)b=g.getClientRects();else if(g.nodeType==3)b=pi(g).getClientRects();else continue;for(let S=0;S<b.length;S++){let x=b[S];if(x.top<=u&&x.bottom>=f){u=Math.max(x.bottom,u),f=Math.min(x.top,f);let T=x.left>e.left?x.left-e.left:x.right<e.left?e.left-x.right:0;if(T<r){t=g,r=T,o=T&&t.nodeType==3?{left:x.right<e.left?x.right:x.left,top:e.top}:e,g.nodeType==1&&T&&(l=y+(e.left>=(x.left+x.right)/2?1:0));continue}}else x.top>e.top&&!d&&x.left<=e.left&&x.right>=e.left&&(d=g,p={left:Math.max(x.left,Math.min(x.right,e.left)),top:x.top});!t&&(e.left>=x.right&&e.top>=x.top||e.left>=x.left&&e.top>=x.bottom)&&(l=y+1)}}return!t&&d&&(t=d,o=p,r=0),t&&t.nodeType==3?uE(t,o):!t||r&&t.nodeType==1?{node:i,offset:l}:cv(t,o)}function uE(i,e){let t=i.nodeValue.length,r=document.createRange();for(let o=0;o<t;o++){r.setEnd(i,o+1),r.setStart(i,o);let l=Yi(r,1);if(l.top!=l.bottom&&gh(e,l))return{node:i,offset:o+(e.left>=(l.left+l.right)/2?1:0)}}return{node:i,offset:0}}function gh(i,e){return i.left>=e.left-1&&i.left<=e.right+1&&i.top>=e.top-1&&i.top<=e.bottom+1}function cE(i,e){let t=i.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<i.getBoundingClientRect().left?t:i}function fE(i,e,t){let{node:r,offset:o}=cv(e,t),l=-1;if(r.nodeType==1&&!r.firstChild){let u=r.getBoundingClientRect();l=u.left!=u.right&&t.left>(u.left+u.right)/2?1:-1}return i.docView.posFromDOM(r,o,l)}function dE(i,e,t,r){let o=-1;for(let l=e,u=!1;l!=i.dom;){let f=i.docView.nearestDesc(l,!0),d;if(!f)return null;if(f.dom.nodeType==1&&(f.node.isBlock&&f.parent||!f.contentDOM)&&((d=f.dom.getBoundingClientRect()).width||d.height)&&(f.node.isBlock&&f.parent&&(!u&&d.left>r.left||d.top>r.top?o=f.posBefore:(!u&&d.right<r.left||d.bottom<r.top)&&(o=f.posAfter),u=!0),!f.contentDOM&&o<0&&!f.node.isText))return(f.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?f.posBefore:f.posAfter;l=f.dom.parentNode}return o>-1?o:i.docView.posFromDOM(e,t,-1)}function fv(i,e,t){let r=i.childNodes.length;if(r&&t.top<t.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),l=o;;){let u=i.childNodes[l];if(u.nodeType==1){let f=u.getClientRects();for(let d=0;d<f.length;d++){let p=f[d];if(gh(e,p))return fv(u,e,p)}}if((l=(l+1)%r)==o)break}return i}function hE(i,e){let t=i.dom.ownerDocument,r,o=0,l=tE(t,e.left,e.top);l&&({node:r,offset:o}=l);let u=(i.root.elementFromPoint?i.root:t).elementFromPoint(e.left,e.top),f;if(!u||!i.dom.contains(u.nodeType!=1?u.parentNode:u)){let p=i.dom.getBoundingClientRect();if(!gh(e,p)||(u=fv(i.dom,e,p),!u))return null}if(Lt)for(let p=u;r&&p;p=Zs(p))p.draggable&&(r=void 0);if(u=cE(u,e),r){if(_n&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let g=r.childNodes[o],y;g.nodeName=="IMG"&&(y=g.getBoundingClientRect()).right<=e.left&&y.bottom>e.top&&o++}let p;kl&&o&&r.nodeType==1&&(p=r.childNodes[o-1]).nodeType==1&&p.contentEditable=="false"&&p.getBoundingClientRect().top>=e.top&&o--,r==i.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?f=i.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(f=dE(i,r,o,e))}f==null&&(f=fE(i,u,e));let d=i.docView.nearestDesc(u,!0);return{pos:f,inside:d?d.posAtStart-d.border:-1}}function b0(i){return i.top<i.bottom||i.left<i.right}function Yi(i,e){let t=i.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(b0(r))return r}return Array.prototype.find.call(t,b0)||i.getBoundingClientRect()}const pE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function dv(i,e,t){let{node:r,offset:o,atom:l}=i.docView.domFromPos(e,t<0?-1:1),u=kl||_n;if(r.nodeType==3)if(u&&(pE.test(r.nodeValue)||(t<0?!o:o==r.nodeValue.length))){let d=Yi(pi(r,o,o),t);if(_n&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let p=Yi(pi(r,o-1,o-1),-1);if(p.top==d.top){let g=Yi(pi(r,o,o+1),-1);if(g.top!=d.top)return rl(g,g.left<p.left)}}return d}else{let d=o,p=o,g=t<0?1:-1;return t<0&&!o?(p++,g=-1):t>=0&&o==r.nodeValue.length?(d--,g=1):t<0?d--:p++,rl(Yi(pi(r,d,p),g),g<0)}if(!i.state.doc.resolve(e-(l||0)).parent.inlineContent){if(l==null&&o&&(t<0||o==xn(r))){let d=r.childNodes[o-1];if(d.nodeType==1)return xd(d.getBoundingClientRect(),!1)}if(l==null&&o<xn(r)){let d=r.childNodes[o];if(d.nodeType==1)return xd(d.getBoundingClientRect(),!0)}return xd(r.getBoundingClientRect(),t>=0)}if(l==null&&o&&(t<0||o==xn(r))){let d=r.childNodes[o-1],p=d.nodeType==3?pi(d,xn(d)-(u?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(p)return rl(Yi(p,1),!1)}if(l==null&&o<xn(r)){let d=r.childNodes[o];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let p=d?d.nodeType==3?pi(d,0,u?0:1):d.nodeType==1?d:null:null;if(p)return rl(Yi(p,-1),!0)}return rl(Yi(r.nodeType==3?pi(r):r,-t),t>=0)}function rl(i,e){if(i.width==0)return i;let t=e?i.left:i.right;return{top:i.top,bottom:i.bottom,left:t,right:t}}function xd(i,e){if(i.height==0)return i;let t=e?i.top:i.bottom;return{top:t,bottom:t,left:i.left,right:i.right}}function hv(i,e,t){let r=i.state,o=i.root.activeElement;r!=e&&i.updateState(e),o!=i.dom&&i.focus();try{return t()}finally{r!=e&&i.updateState(r),o!=i.dom&&o&&o.focus()}}function mE(i,e,t){let r=e.selection,o=t=="up"?r.$from:r.$to;return hv(i,e,()=>{let{node:l}=i.docView.domFromPos(o.pos,t=="up"?-1:1);for(;;){let f=i.docView.nearestDesc(l,!0);if(!f)break;if(f.node.isBlock){l=f.contentDOM||f.dom;break}l=f.dom.parentNode}let u=dv(i,o.pos,1);for(let f=l.firstChild;f;f=f.nextSibling){let d;if(f.nodeType==1)d=f.getClientRects();else if(f.nodeType==3)d=pi(f,0,f.nodeValue.length).getClientRects();else continue;for(let p=0;p<d.length;p++){let g=d[p];if(g.bottom>g.top+1&&(t=="up"?u.top-g.top>(g.bottom-u.top)*2:g.bottom-u.bottom>(u.bottom-g.top)*2))return!1}}return!0})}const gE=/[\u0590-\u08ac]/;function yE(i,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,l=!o,u=o==r.parent.content.size,f=i.domSelection();return f?!gE.test(r.parent.textContent)||!f.modify?t=="left"||t=="backward"?l:u:hv(i,e,()=>{let{focusNode:d,focusOffset:p,anchorNode:g,anchorOffset:y}=i.domSelectionRange(),b=f.caretBidiLevel;f.modify("move",t,"character");let S=r.depth?i.docView.domAfterPos(r.before()):i.dom,{focusNode:x,focusOffset:T}=i.domSelectionRange(),E=x&&!S.contains(x.nodeType==1?x:x.parentNode)||d==x&&p==T;try{f.collapse(g,y),d&&(d!=g||p!=y)&&f.extend&&f.extend(d,p)}catch{}return b!=null&&(f.caretBidiLevel=b),E}):r.pos==r.start()||r.pos==r.end()}let v0=null,S0=null,x0=!1;function bE(i,e,t){return v0==e&&S0==t?x0:(v0=e,S0=t,x0=t=="up"||t=="down"?mE(i,e,t):yE(i,e,t))}const Mn=0,w0=1,Br=2,Gn=3;class Ol{constructor(e,t,r,o){this.parent=e,this.children=t,this.dom=r,this.contentDOM=o,this.dirty=Mn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let o=this.children[t];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let l,u;if(e==this.contentDOM)l=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.previousSibling}for(;l&&!((u=l.pmViewDesc)&&u.parent==this);)l=l.previousSibling;return l?this.posBeforeChild(u)+u.size:this.posAtStart}else{let l,u;if(e==this.contentDOM)l=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.nextSibling}for(;l&&!((u=l.pmViewDesc)&&u.parent==this);)l=l.nextSibling;return l?this.posBeforeChild(u):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=t>wt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let l=e;;l=l.parentNode){if(l==this.dom){o=!1;break}if(l.previousSibling)break}if(o==null&&t==e.childNodes.length)for(let l=e;;l=l.parentNode){if(l==this.dom){o=!0;break}if(l.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,o=e;o;o=o.parentNode){let l=this.getDesc(o),u;if(l&&(!t||l.node))if(r&&(u=l.nodeDOM)&&!(u.nodeType==1?u.contains(e.nodeType==1?e:e.parentNode):u==e))r=!1;else return l}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let o=e;o;o=o.parentNode){let l=this.getDesc(o);if(l)return l.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let o=this.children[t],l=r+o.size;if(r==e&&l!=r){for(;!o.border&&o.children.length;)for(let u=0;u<o.children.length;u++){let f=o.children[u];if(f.size){o=f;break}}return o}if(e<l)return o.descAt(e-r-o.border);r=l}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let l=0;r<this.children.length;r++){let u=this.children[r],f=l+u.size;if(f>e||u instanceof mv){o=e-l;break}l=f}if(o)return this.children[r].domFromPos(o-this.children[r].border,t);for(let l;r&&!(l=this.children[r-1]).size&&l instanceof pv&&l.side>=0;r--);if(t<=0){let l,u=!0;for(;l=r?this.children[r-1]:null,!(!l||l.dom.parentNode==this.contentDOM);r--,u=!1);return l&&t&&u&&!l.border&&!l.domAtom?l.domFromPos(l.size,t):{node:this.contentDOM,offset:l?wt(l.dom)+1:0}}else{let l,u=!0;for(;l=r<this.children.length?this.children[r]:null,!(!l||l.dom.parentNode==this.contentDOM);r++,u=!1);return l&&u&&!l.border&&!l.domAtom?l.domFromPos(0,t):{node:this.contentDOM,offset:l?wt(l.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,l=-1;for(let u=r,f=0;;f++){let d=this.children[f],p=u+d.size;if(o==-1&&e<=p){let g=u+d.border;if(e>=g&&t<=p-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,t,g);e=u;for(let y=f;y>0;y--){let b=this.children[y-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){o=wt(b.dom)+1;break}e-=b.size}o==-1&&(o=0)}if(o>-1&&(p>t||f==this.children.length-1)){t=p;for(let g=f+1;g<this.children.length;g++){let y=this.children[g];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){l=wt(y.dom);break}t+=y.size}l==-1&&(l=this.contentDOM.childNodes.length);break}u=p}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:l}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,o=!1){let l=Math.min(e,t),u=Math.max(e,t);for(let S=0,x=0;S<this.children.length;S++){let T=this.children[S],E=x+T.size;if(l>x&&u<E)return T.setSelection(e-x-T.border,t-x-T.border,r,o);x=E}let f=this.domFromPos(e,e?-1:1),d=t==e?f:this.domFromPos(t,t?-1:1),p=r.root.getSelection(),g=r.domSelectionRange(),y=!1;if((_n||Lt)&&e==t){let{node:S,offset:x}=f;if(S.nodeType==3){if(y=!!(x&&S.nodeValue[x-1]==`
`),y&&x==S.nodeValue.length)for(let T=S,E;T;T=T.parentNode){if(E=T.nextSibling){E.nodeName=="BR"&&(f=d={node:E.parentNode,offset:wt(E)+1});break}let B=T.pmViewDesc;if(B&&B.node&&B.node.isBlock)break}}else{let T=S.childNodes[x-1];y=T&&(T.nodeName=="BR"||T.contentEditable=="false")}}if(_n&&g.focusNode&&g.focusNode!=d.node&&g.focusNode.nodeType==1){let S=g.focusNode.childNodes[g.focusOffset];S&&S.contentEditable=="false"&&(o=!0)}if(!(o||y&&Lt)&&Pr(f.node,f.offset,g.anchorNode,g.anchorOffset)&&Pr(d.node,d.offset,g.focusNode,g.focusOffset))return;let b=!1;if((p.extend||e==t)&&!y){p.collapse(f.node,f.offset);try{e!=t&&p.extend(d.node,d.offset),b=!0}catch{}}if(!b){if(e>t){let x=f;f=d,d=x}let S=document.createRange();S.setEnd(d.node,d.offset),S.setStart(f.node,f.offset),p.removeAllRanges(),p.addRange(S)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,o=0;o<this.children.length;o++){let l=this.children[o],u=r+l.size;if(r==u?e<=u&&t>=r:e<u&&t>r){let f=r+l.border,d=u-l.border;if(e>=f&&t<=d){this.dirty=e==r||t==u?Br:w0,e==f&&t==d&&(l.contentLost||l.dom.parentNode!=this.contentDOM)?l.dirty=Gn:l.markDirty(e-f,t-f);return}else l.dirty=l.dom==l.contentDOM&&l.dom.parentNode==this.contentDOM&&!l.children.length?Br:Gn}r=u}this.dirty=Br}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Br:w0;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class pv extends Ol{constructor(e,t,r,o){let l,u=t.type.toDOM;if(typeof u=="function"&&(u=u(r,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)})),!t.type.spec.raw){if(u.nodeType!=1){let f=document.createElement("span");f.appendChild(u),u=f}u.contentEditable="false",u.classList.add("ProseMirror-widget")}super(e,[],u,null),this.widget=t,this.widget=t,l=this}matchesWidget(e){return this.dirty==Mn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class vE extends Ol{constructor(e,t,r,o){super(e,[],t,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Gr extends Ol{constructor(e,t,r,o,l){super(e,[],r,o),this.mark=t,this.spec=l}static create(e,t,r,o){let l=o.nodeViews[t.type.name],u=l&&l(t,o,r);return(!u||!u.dom)&&(u=Fr.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Gr(e,t,u.dom,u.contentDOM||u.dom,u)}parseRule(){return this.dirty&Gn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Gn&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Mn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Mn}}slice(e,t,r){let o=Gr.create(this.parent,this.mark,!0,r),l=this.children,u=this.size;t<u&&(l=Jd(l,t,u,r)),e>0&&(l=Jd(l,0,e,r));for(let f=0;f<l.length;f++)l[f].parent=o;return o.children=l,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class nr extends Ol{constructor(e,t,r,o,l,u,f,d,p){super(e,[],l,u),this.node=t,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=f}static create(e,t,r,o,l,u){let f=l.nodeViews[t.type.name],d,p=f&&f(t,l,()=>{if(!d)return u;if(d.parent)return d.parent.posBeforeChild(d)},r,o),g=p&&p.dom,y=p&&p.contentDOM;if(t.isText){if(!g)g=document.createTextNode(t.text);else if(g.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else g||({dom:g,contentDOM:y}=Fr.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!y&&!t.isText&&g.nodeName!="BR"&&(g.hasAttribute("contenteditable")||(g.contentEditable="false"),t.type.spec.draggable&&(g.draggable=!0));let b=g;return g=bv(g,r,t),p?d=new SE(e,t,r,o,g,y||null,b,p,l,u+1):t.isText?new zu(e,t,r,o,g,b,l):new nr(e,t,r,o,g,y||null,b,l,u+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>H.empty)}return e}matchesNode(e,t,r){return this.dirty==Mn&&e.eq(this.node)&&vu(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,o=t,l=e.composing?this.localCompositionInfo(e,t):null,u=l&&l.pos>-1?l:null,f=l&&l.pos<0,d=new wE(this,u&&u.node,e);EE(this.node,this.innerDeco,(p,g,y)=>{p.spec.marks?d.syncToMarks(p.spec.marks,r,e):p.type.side>=0&&!y&&d.syncToMarks(g==this.node.childCount?Le.none:this.node.child(g).marks,r,e),d.placeWidget(p,e,o)},(p,g,y,b)=>{d.syncToMarks(p.marks,r,e);let S;d.findNodeMatch(p,g,y,b)||f&&e.state.selection.from>o&&e.state.selection.to<o+p.nodeSize&&(S=d.findIndexWithChild(l.node))>-1&&d.updateNodeAt(p,g,y,S,e)||d.updateNextNode(p,g,y,e,b,o)||d.addNode(p,g,y,e,o),o+=p.nodeSize}),d.syncToMarks([],r,e),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==Br)&&(u&&this.protectLocalComposition(e,u),gv(this.contentDOM,this.children,e),Ws&&CE(this.dom))}localCompositionInfo(e,t){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof ce)||r<t||o>t+this.node.content.size)return null;let l=e.input.compositionNode;if(!l||!this.dom.contains(l.parentNode))return null;if(this.node.inlineContent){let u=l.nodeValue,f=AE(this.node.content,u,r-t,o-t);return f<0?null:{node:l,pos:f,text:u}}else return{node:l,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:o}){if(this.getDesc(t))return;let l=t;for(;l.parentNode!=this.contentDOM;l=l.parentNode){for(;l.previousSibling;)l.parentNode.removeChild(l.previousSibling);for(;l.nextSibling;)l.parentNode.removeChild(l.nextSibling);l.pmViewDesc&&(l.pmViewDesc=void 0)}let u=new vE(this,l,t,o);e.input.compositionNodes.push(u),this.children=Jd(this.children,r,r+o.length,e,u)}update(e,t,r,o){return this.dirty==Gn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,o),!0)}updateInner(e,t,r,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=Mn}updateOuterDeco(e){if(vu(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=yv(this.dom,this.nodeDOM,Xd(this.outerDeco,this.node,t),Xd(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function T0(i,e,t,r,o){bv(r,e,i);let l=new nr(void 0,i,e,t,r,r,r,o,0);return l.contentDOM&&l.updateChildren(o,0),l}class zu extends nr{constructor(e,t,r,o,l,u,f){super(e,t,r,o,l,null,u,f,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,o){return this.dirty==Gn||this.dirty!=Mn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Mn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=Mn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let o=this.node.cut(e,t),l=document.createTextNode(o.text);return new zu(this.parent,o,this.outerDeco,this.innerDeco,l,l,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Gn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class mv extends Ol{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Mn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class SE extends nr{constructor(e,t,r,o,l,u,f,d,p,g){super(e,t,r,o,l,u,f,p,g),this.spec=d}update(e,t,r,o){if(this.dirty==Gn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let l=this.spec.update(e,t,r);return l&&this.updateInner(e,t,r,o),l}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,o){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function gv(i,e,t){let r=i.firstChild,o=!1;for(let l=0;l<e.length;l++){let u=e[l],f=u.dom;if(f.parentNode==i){for(;f!=r;)r=M0(r),o=!0;r=r.nextSibling}else o=!0,i.insertBefore(f,r);if(u instanceof Gr){let d=r?r.previousSibling:i.lastChild;gv(u.contentDOM,u.children,t),r=d?d.nextSibling:i.firstChild}}for(;r;)r=M0(r),o=!0;o&&t.trackWrites==i&&(t.trackWrites=null)}const dl=function(i){i&&(this.nodeName=i)};dl.prototype=Object.create(null);const qr=[new dl];function Xd(i,e,t){if(i.length==0)return qr;let r=t?qr[0]:new dl,o=[r];for(let l=0;l<i.length;l++){let u=i[l].type.attrs;if(u){u.nodeName&&o.push(r=new dl(u.nodeName));for(let f in u){let d=u[f];d!=null&&(t&&o.length==1&&o.push(r=new dl(e.isInline?"span":"div")),f=="class"?r.class=(r.class?r.class+" ":"")+d:f=="style"?r.style=(r.style?r.style+";":"")+d:f!="nodeName"&&(r[f]=d))}}}return o}function yv(i,e,t,r){if(t==qr&&r==qr)return e;let o=e;for(let l=0;l<r.length;l++){let u=r[l],f=t[l];if(l){let d;f&&f.nodeName==u.nodeName&&o!=i&&(d=o.parentNode)&&d.nodeName.toLowerCase()==u.nodeName||(d=document.createElement(u.nodeName),d.pmIsDeco=!0,d.appendChild(o),f=qr[0]),o=d}xE(o,f||qr[0],u)}return o}function xE(i,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&i.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&i.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=t.class?t.class.split(" ").filter(Boolean):[];for(let l=0;l<r.length;l++)o.indexOf(r[l])==-1&&i.classList.remove(r[l]);for(let l=0;l<o.length;l++)r.indexOf(o[l])==-1&&i.classList.add(o[l]);i.classList.length==0&&i.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)i.style.removeProperty(o[1])}t.style&&(i.style.cssText+=t.style)}}function bv(i,e,t){return yv(i,i,qr,Xd(e,t,i.nodeType!=1))}function vu(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].type.eq(e[t].type))return!1;return!0}function M0(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}class wE{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=TE(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let o=0,l=this.stack.length>>1,u=Math.min(l,e.length);for(;o<u&&(o==l-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<l;)this.destroyRest(),this.top.dirty=Mn,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let f=-1;for(let d=this.index;d<Math.min(this.index+3,this.top.children.length);d++){let p=this.top.children[d];if(p.matchesMark(e[l])&&!this.isLocked(p.dom)){f=d;break}}if(f>-1)f>this.index&&(this.changed=!0,this.destroyBetween(this.index,f)),this.top=this.top.children[this.index];else{let d=Gr.create(this.top,e[l],t,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,l++}}findNodeMatch(e,t,r,o){let l=-1,u;if(o>=this.preMatch.index&&(u=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&u.matchesNode(e,t,r))l=this.top.children.indexOf(u,this.index);else for(let f=this.index,d=Math.min(this.top.children.length,f+5);f<d;f++){let p=this.top.children[f];if(p.matchesNode(e,t,r)&&!this.preMatch.matched.has(p)){l=f;break}}return l<0?!1:(this.destroyBetween(this.index,l),this.index++,!0)}updateNodeAt(e,t,r,o,l){let u=this.top.children[o];return u.dirty==Gn&&u.dom==u.contentDOM&&(u.dirty=Br),u.update(e,t,r,l)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=t}}updateNextNode(e,t,r,o,l,u){for(let f=this.index;f<this.top.children.length;f++){let d=this.top.children[f];if(d instanceof nr){let p=this.preMatch.matched.get(d);if(p!=null&&p!=l)return!1;let g=d.dom,y,b=this.isLocked(g)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=Gn&&vu(t,d.outerDeco));if(!b&&d.update(e,t,r,o))return this.destroyBetween(this.index,f),d.dom!=g&&(this.changed=!0),this.index++,!0;if(!b&&(y=this.recreateWrapper(d,e,t,r,o,u)))return this.destroyBetween(this.index,f),this.top.children[this.index]=y,y.contentDOM&&(y.dirty=Br,y.updateChildren(o,u+1),y.dirty=Mn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,o,l,u){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!vu(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let f=nr.create(this.top,t,r,o,l,u);if(f.contentDOM){f.children=e.children,e.children=[];for(let d of f.children)d.parent=f}return e.destroy(),f}addNode(e,t,r,o,l){let u=nr.create(this.top,e,t,r,o,l);u.contentDOM&&u.updateChildren(o,l+1),this.top.children.splice(this.index++,0,u),this.changed=!0}placeWidget(e,t,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let l=new pv(this.top,e,t,r);this.top.children.splice(this.index++,0,l),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Gr;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof zu)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Lt||Nt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new mv(this.top,[],r,null);t!=this.top?t.children.push(o):t.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function TE(i,e){let t=e,r=t.children.length,o=i.childCount,l=new Map,u=[];e:for(;o>0;){let f;for(;;)if(r){let p=t.children[r-1];if(p instanceof Gr)t=p,r=p.children.length;else{f=p,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let d=f.node;if(d){if(d!=i.child(o-1))break;--o,l.set(f,o),u.push(f)}}return{index:o,matched:l,matches:u.reverse()}}function ME(i,e){return i.type.side-e.type.side}function EE(i,e,t,r){let o=e.locals(i),l=0;if(o.length==0){for(let p=0;p<i.childCount;p++){let g=i.child(p);r(g,o,e.forChild(l,g),p),l+=g.nodeSize}return}let u=0,f=[],d=null;for(let p=0;;){let g,y;for(;u<o.length&&o[u].to==l;){let E=o[u++];E.widget&&(g?(y||(y=[g])).push(E):g=E)}if(g)if(y){y.sort(ME);for(let E=0;E<y.length;E++)t(y[E],p,!!d)}else t(g,p,!!d);let b,S;if(d)S=-1,b=d,d=null;else if(p<i.childCount)S=p,b=i.child(p++);else break;for(let E=0;E<f.length;E++)f[E].to<=l&&f.splice(E--,1);for(;u<o.length&&o[u].from<=l&&o[u].to>l;)f.push(o[u++]);let x=l+b.nodeSize;if(b.isText){let E=x;u<o.length&&o[u].from<E&&(E=o[u].from);for(let B=0;B<f.length;B++)f[B].to<E&&(E=f[B].to);E<x&&(d=b.cut(E-l),b=b.cut(0,E-l),x=E,S=-1)}else for(;u<o.length&&o[u].to<x;)u++;let T=b.isInline&&!b.isLeaf?f.filter(E=>!E.inline):f.slice();r(b,T,e.forChild(l,b),S),l=x}}function CE(i){if(i.nodeName=="UL"||i.nodeName=="OL"){let e=i.style.cssText;i.style.cssText=e+"; list-style: square !important",window.getComputedStyle(i).listStyle,i.style.cssText=e}}function AE(i,e,t,r){for(let o=0,l=0;o<i.childCount&&l<=r;){let u=i.child(o++),f=l;if(l+=u.nodeSize,!u.isText)continue;let d=u.text;for(;o<i.childCount;){let p=i.child(o++);if(l+=p.nodeSize,!p.isText)break;d+=p.text}if(l>=t){if(l>=r&&d.slice(r-e.length-f,r-f)==e)return r-e.length;let p=f<r?d.lastIndexOf(e,r-f-1):-1;if(p>=0&&p+e.length+f>=t)return f+p;if(t==r&&d.length>=r+e.length-f&&d.slice(r-f,r-f+e.length)==e)return r}}return-1}function Jd(i,e,t,r,o){let l=[];for(let u=0,f=0;u<i.length;u++){let d=i[u],p=f,g=f+=d.size;p>=t||g<=e?l.push(d):(p<e&&l.push(d.slice(0,e-p,r)),o&&(l.push(o),o=void 0),g>t&&l.push(d.slice(t-p,d.size,r)))}return l}function yh(i,e=null){let t=i.domSelectionRange(),r=i.state.doc;if(!t.focusNode)return null;let o=i.docView.nearestDesc(t.focusNode),l=o&&o.size==0,u=i.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(u<0)return null;let f=r.resolve(u),d,p;if(_u(t)){for(d=u;o&&!o.node;)o=o.parent;let y=o.node;if(o&&y.isAtom&&oe.isSelectable(y)&&o.parent&&!(y.isInline&&WM(t.focusNode,t.focusOffset,o.dom))){let b=o.posBefore;p=new oe(u==b?f:r.resolve(b))}}else{if(t instanceof i.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let y=u,b=u;for(let S=0;S<t.rangeCount;S++){let x=t.getRangeAt(S);y=Math.min(y,i.docView.posFromDOM(x.startContainer,x.startOffset,1)),b=Math.max(b,i.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(y<0)return null;[d,u]=b==i.state.selection.anchor?[b,y]:[y,b],f=r.resolve(u)}else d=i.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let g=r.resolve(d);if(!p){let y=e=="pointer"||i.state.selection.head<f.pos&&!l?1:-1;p=bh(i,g,f,y)}return p}function vv(i){return i.editable?i.hasFocus():xv(i)&&document.activeElement&&document.activeElement.contains(i.dom)}function bi(i,e=!1){let t=i.state.selection;if(Sv(i,t),!!vv(i)){if(!e&&i.input.mouseDown&&i.input.mouseDown.allowDefault&&Nt){let r=i.domSelectionRange(),o=i.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&Pr(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){i.input.mouseDown.delayedSelectionSync=!0,i.domObserver.setCurSelection();return}}if(i.domObserver.disconnectSelection(),i.cursorWrapper)OE(i);else{let{anchor:r,head:o}=t,l,u;E0&&!(t instanceof ce)&&(t.$from.parent.inlineContent||(l=C0(i,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(u=C0(i,t.to))),i.docView.setSelection(r,o,i,e),E0&&(l&&A0(l),u&&A0(u)),t.visible?i.dom.classList.remove("ProseMirror-hideselection"):(i.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&kE(i))}i.domObserver.setCurSelection(),i.domObserver.connectSelection()}}const E0=Lt||Nt&&lv<63;function C0(i,e){let{node:t,offset:r}=i.docView.domFromPos(e,0),o=r<t.childNodes.length?t.childNodes[r]:null,l=r?t.childNodes[r-1]:null;if(Lt&&o&&o.contentEditable=="false")return wd(o);if((!o||o.contentEditable=="false")&&(!l||l.contentEditable=="false")){if(o)return wd(o);if(l)return wd(l)}}function wd(i){return i.contentEditable="true",Lt&&i.draggable&&(i.draggable=!1,i.wasDraggable=!0),i}function A0(i){i.contentEditable="false",i.wasDraggable&&(i.draggable=!0,i.wasDraggable=null)}function kE(i){let e=i.dom.ownerDocument;e.removeEventListener("selectionchange",i.input.hideSelectionGuard);let t=i.domSelectionRange(),r=t.anchorNode,o=t.anchorOffset;e.addEventListener("selectionchange",i.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=o)&&(e.removeEventListener("selectionchange",i.input.hideSelectionGuard),setTimeout(()=>{(!vv(i)||i.state.selection.visible)&&i.dom.classList.remove("ProseMirror-hideselection")},20))})}function OE(i){let e=i.domSelection(),t=document.createRange();if(!e)return;let r=i.cursorWrapper.dom,o=r.nodeName=="IMG";o?t.setStart(r.parentNode,wt(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!o&&!i.state.selection.visible&&Kt&&tr<=11&&(r.disabled=!0,r.disabled=!1)}function Sv(i,e){if(e instanceof oe){let t=i.docView.descAt(e.from);t!=i.lastSelectedViewDesc&&(k0(i),t&&t.selectNode(),i.lastSelectedViewDesc=t)}else k0(i)}function k0(i){i.lastSelectedViewDesc&&(i.lastSelectedViewDesc.parent&&i.lastSelectedViewDesc.deselectNode(),i.lastSelectedViewDesc=void 0)}function bh(i,e,t,r){return i.someProp("createSelectionBetween",o=>o(i,e,t))||ce.between(e,t,r)}function O0(i){return i.editable&&!i.hasFocus()?!1:xv(i)}function xv(i){let e=i.domSelectionRange();if(!e.anchorNode)return!1;try{return i.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(i.editable||i.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function NE(i){let e=i.docView.domFromPos(i.state.selection.anchor,0),t=i.domSelectionRange();return Pr(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Zd(i,e){let{$anchor:t,$head:r}=i.selection,o=e>0?t.max(r):t.min(r),l=o.parent.inlineContent?o.depth?i.doc.resolve(e>0?o.after():o.before()):null:o;return l&&me.findFrom(l,e)}function Pi(i,e){return i.dispatch(i.state.tr.setSelection(e).scrollIntoView()),!0}function N0(i,e,t){let r=i.state.selection;if(r instanceof ce)if(t.indexOf("s")>-1){let{$head:o}=r,l=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!l||l.isText||!l.isLeaf)return!1;let u=i.state.doc.resolve(o.pos+l.nodeSize*(e<0?-1:1));return Pi(i,new ce(r.$anchor,u))}else if(r.empty){if(i.endOfTextblock(e>0?"forward":"backward")){let o=Zd(i.state,e);return o&&o instanceof oe?Pi(i,o):!1}else if(!(Sn&&t.indexOf("m")>-1)){let o=r.$head,l=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,u;if(!l||l.isText)return!1;let f=e<0?o.pos-l.nodeSize:o.pos;return l.isAtom||(u=i.docView.descAt(f))&&!u.contentDOM?oe.isSelectable(l)?Pi(i,new oe(e<0?i.state.doc.resolve(o.pos-l.nodeSize):o)):kl?Pi(i,new ce(i.state.doc.resolve(e<0?f:f+l.nodeSize))):!1:!1}}else return!1;else{if(r instanceof oe&&r.node.isInline)return Pi(i,new ce(e>0?r.$to:r.$from));{let o=Zd(i.state,e);return o?Pi(i,o):!1}}}function Su(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function hl(i,e){let t=i.pmViewDesc;return t&&t.size==0&&(e<0||i.nextSibling||i.nodeName!="BR")}function Is(i,e){return e<0?RE(i):DE(i)}function RE(i){let e=i.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o,l,u=!1;for(_n&&t.nodeType==1&&r<Su(t)&&hl(t.childNodes[r],-1)&&(u=!0);;)if(r>0){if(t.nodeType!=1)break;{let f=t.childNodes[r-1];if(hl(f,-1))o=t,l=--r;else if(f.nodeType==3)t=f,r=t.nodeValue.length;else break}}else{if(wv(t))break;{let f=t.previousSibling;for(;f&&hl(f,-1);)o=t.parentNode,l=wt(f),f=f.previousSibling;if(f)t=f,r=Su(t);else{if(t=t.parentNode,t==i.dom)break;r=0}}}u?Wd(i,t,r):o&&Wd(i,o,l)}function DE(i){let e=i.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o=Su(t),l,u;for(;;)if(r<o){if(t.nodeType!=1)break;let f=t.childNodes[r];if(hl(f,1))l=t,u=++r;else break}else{if(wv(t))break;{let f=t.nextSibling;for(;f&&hl(f,1);)l=f.parentNode,u=wt(f)+1,f=f.nextSibling;if(f)t=f,r=0,o=Su(t);else{if(t=t.parentNode,t==i.dom)break;r=o=0}}}l&&Wd(i,l,u)}function wv(i){let e=i.pmViewDesc;return e&&e.node&&e.node.isBlock}function _E(i,e){for(;i&&e==i.childNodes.length&&!Al(i);)e=wt(i)+1,i=i.parentNode;for(;i&&e<i.childNodes.length;){let t=i.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;i=t,e=0}}function zE(i,e){for(;i&&!e&&!Al(i);)e=wt(i),i=i.parentNode;for(;i&&e;){let t=i.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;i=t,e=i.childNodes.length}}function Wd(i,e,t){if(e.nodeType!=3){let l,u;(u=_E(e,t))?(e=u,t=0):(l=zE(e,t))&&(e=l,t=l.nodeValue.length)}let r=i.domSelection();if(!r)return;if(_u(r)){let l=document.createRange();l.setEnd(e,t),l.setStart(e,t),r.removeAllRanges(),r.addRange(l)}else r.extend&&r.extend(e,t);i.domObserver.setCurSelection();let{state:o}=i;setTimeout(()=>{i.state==o&&bi(i)},50)}function R0(i,e){let t=i.state.doc.resolve(e);if(!(Nt||nE)&&t.parent.inlineContent){let o=i.coordsAtPos(e);if(e>t.start()){let l=i.coordsAtPos(e-1),u=(l.top+l.bottom)/2;if(u>o.top&&u<o.bottom&&Math.abs(l.left-o.left)>1)return l.left<o.left?"ltr":"rtl"}if(e<t.end()){let l=i.coordsAtPos(e+1),u=(l.top+l.bottom)/2;if(u>o.top&&u<o.bottom&&Math.abs(l.left-o.left)>1)return l.left>o.left?"ltr":"rtl"}}return getComputedStyle(i.dom).direction=="rtl"?"rtl":"ltr"}function D0(i,e,t){let r=i.state.selection;if(r instanceof ce&&!r.empty||t.indexOf("s")>-1||Sn&&t.indexOf("m")>-1)return!1;let{$from:o,$to:l}=r;if(!o.parent.inlineContent||i.endOfTextblock(e<0?"up":"down")){let u=Zd(i.state,e);if(u&&u instanceof oe)return Pi(i,u)}if(!o.parent.inlineContent){let u=e<0?o:l,f=r instanceof ln?me.near(u,e):me.findFrom(u,e);return f?Pi(i,f):!1}return!1}function _0(i,e){if(!(i.state.selection instanceof ce))return!0;let{$head:t,$anchor:r,empty:o}=i.state.selection;if(!t.sameParent(r))return!0;if(!o)return!1;if(i.endOfTextblock(e>0?"forward":"backward"))return!0;let l=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(l&&!l.isText){let u=i.state.tr;return e<0?u.delete(t.pos-l.nodeSize,t.pos):u.delete(t.pos,t.pos+l.nodeSize),i.dispatch(u),!0}return!1}function z0(i,e,t){i.domObserver.stop(),e.contentEditable=t,i.domObserver.start()}function BE(i){if(!Lt||i.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=i.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;z0(i,r,"true"),setTimeout(()=>z0(i,r,"false"),20)}return!1}function qE(i){let e="";return i.ctrlKey&&(e+="c"),i.metaKey&&(e+="m"),i.altKey&&(e+="a"),i.shiftKey&&(e+="s"),e}function LE(i,e){let t=e.keyCode,r=qE(e);if(t==8||Sn&&t==72&&r=="c")return _0(i,-1)||Is(i,-1);if(t==46&&!e.shiftKey||Sn&&t==68&&r=="c")return _0(i,1)||Is(i,1);if(t==13||t==27)return!0;if(t==37||Sn&&t==66&&r=="c"){let o=t==37?R0(i,i.state.selection.from)=="ltr"?-1:1:-1;return N0(i,o,r)||Is(i,o)}else if(t==39||Sn&&t==70&&r=="c"){let o=t==39?R0(i,i.state.selection.from)=="ltr"?1:-1:1;return N0(i,o,r)||Is(i,o)}else{if(t==38||Sn&&t==80&&r=="c")return D0(i,-1,r)||Is(i,-1);if(t==40||Sn&&t==78&&r=="c")return BE(i)||D0(i,1,r)||Is(i,1);if(r==(Sn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function vh(i,e){i.someProp("transformCopied",S=>{e=S(e,i)});let t=[],{content:r,openStart:o,openEnd:l}=e;for(;o>1&&l>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,l--;let S=r.firstChild;t.push(S.type.name,S.attrs!=S.type.defaultAttrs?S.attrs:null),r=S.content}let u=i.someProp("clipboardSerializer")||Fr.fromSchema(i.state.schema),f=kv(),d=f.createElement("div");d.appendChild(u.serializeFragment(r,{document:f}));let p=d.firstChild,g,y=0;for(;p&&p.nodeType==1&&(g=Av[p.nodeName.toLowerCase()]);){for(let S=g.length-1;S>=0;S--){let x=f.createElement(g[S]);for(;d.firstChild;)x.appendChild(d.firstChild);d.appendChild(x),y++}p=d.firstChild}p&&p.nodeType==1&&p.setAttribute("data-pm-slice",`${o} ${l}${y?` -${y}`:""} ${JSON.stringify(t)}`);let b=i.someProp("clipboardTextSerializer",S=>S(e,i))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:b,slice:e}}function Tv(i,e,t,r,o){let l=o.parent.type.spec.code,u,f;if(!t&&!e)return null;let d=e&&(r||l||!t);if(d){if(i.someProp("transformPastedText",b=>{e=b(e,l||r,i)}),l)return e?new F(H.from(i.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):F.empty;let y=i.someProp("clipboardTextParser",b=>b(e,o,r,i));if(y)f=y;else{let b=o.marks(),{schema:S}=i.state,x=Fr.fromSchema(S);u=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(T=>{let E=u.appendChild(document.createElement("p"));T&&E.appendChild(x.serializeNode(S.text(T,b)))})}}else i.someProp("transformPastedHTML",y=>{t=y(t,i)}),u=HE(t),kl&&IE(u);let p=u&&u.querySelector("[data-pm-slice]"),g=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(g&&g[3])for(let y=+g[3];y>0;y--){let b=u.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;u=b}if(f||(f=(i.someProp("clipboardParser")||i.someProp("domParser")||er.fromSchema(i.state.schema)).parseSlice(u,{preserveWhitespace:!!(d||g),context:o,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!VE.test(b.parentNode.nodeName)?{ignore:!0}:null}})),g)f=$E(B0(f,+g[1],+g[2]),g[4]);else if(f=F.maxOpen(jE(f.content,o),!0),f.openStart||f.openEnd){let y=0,b=0;for(let S=f.content.firstChild;y<f.openStart&&!S.type.spec.isolating;y++,S=S.firstChild);for(let S=f.content.lastChild;b<f.openEnd&&!S.type.spec.isolating;b++,S=S.lastChild);f=B0(f,y,b)}return i.someProp("transformPasted",y=>{f=y(f,i)}),f}const VE=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function jE(i,e){if(i.childCount<2)return i;for(let t=e.depth;t>=0;t--){let o=e.node(t).contentMatchAt(e.index(t)),l,u=[];if(i.forEach(f=>{if(!u)return;let d=o.findWrapping(f.type),p;if(!d)return u=null;if(p=u.length&&l.length&&Ev(d,l,f,u[u.length-1],0))u[u.length-1]=p;else{u.length&&(u[u.length-1]=Cv(u[u.length-1],l.length));let g=Mv(f,d);u.push(g),o=o.matchType(g.type),l=d}}),u)return H.from(u)}return i}function Mv(i,e,t=0){for(let r=e.length-1;r>=t;r--)i=e[r].create(null,H.from(i));return i}function Ev(i,e,t,r,o){if(o<i.length&&o<e.length&&i[o]==e[o]){let l=Ev(i,e,t,r.lastChild,o+1);if(l)return r.copy(r.content.replaceChild(r.childCount-1,l));if(r.contentMatchAt(r.childCount).matchType(o==i.length-1?t.type:i[o+1]))return r.copy(r.content.append(H.from(Mv(t,i,o+1))))}}function Cv(i,e){if(e==0)return i;let t=i.content.replaceChild(i.childCount-1,Cv(i.lastChild,e-1)),r=i.contentMatchAt(i.childCount).fillBefore(H.empty,!0);return i.copy(t.append(r))}function eh(i,e,t,r,o,l){let u=e<0?i.firstChild:i.lastChild,f=u.content;return i.childCount>1&&(l=0),o<r-1&&(f=eh(f,e,t,r,o+1,l)),o>=t&&(f=e<0?u.contentMatchAt(0).fillBefore(f,l<=o).append(f):f.append(u.contentMatchAt(u.childCount).fillBefore(H.empty,!0))),i.replaceChild(e<0?0:i.childCount-1,u.copy(f))}function B0(i,e,t){return e<i.openStart&&(i=new F(eh(i.content,-1,e,i.openStart,0,i.openEnd),e,i.openEnd)),t<i.openEnd&&(i=new F(eh(i.content,1,t,i.openEnd,0,0),i.openStart,t)),i}const Av={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let q0=null;function kv(){return q0||(q0=document.implementation.createHTMLDocument("title"))}let Td=null;function UE(i){let e=window.trustedTypes;return e?(Td||(Td=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Td.createHTML(i)):i}function HE(i){let e=/^(\s*<meta [^>]*>)*/.exec(i);e&&(i=i.slice(e[0].length));let t=kv().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(i),o;if((o=r&&Av[r[1].toLowerCase()])&&(i=o.map(l=>"<"+l+">").join("")+i+o.map(l=>"</"+l+">").reverse().join("")),t.innerHTML=UE(i),o)for(let l=0;l<o.length;l++)t=t.querySelector(o[l])||t;return t}function IE(i){let e=i.querySelectorAll(Nt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(i.ownerDocument.createTextNode(" "),r)}}function $E(i,e){if(!i.size)return i;let t=i.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return i}let{content:o,openStart:l,openEnd:u}=i;for(let f=r.length-2;f>=0;f-=2){let d=t.nodes[r[f]];if(!d||d.hasRequiredAttrs())break;o=H.from(d.create(r[f+1],o)),l++,u++}return new F(o,l,u)}const Vt={},jt={},QE={touchstart:!0,touchmove:!0};class YE{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function PE(i){for(let e in Vt){let t=Vt[e];i.dom.addEventListener(e,i.input.eventHandlers[e]=r=>{FE(i,r)&&!Sh(i,r)&&(i.editable||!(r.type in jt))&&t(i,r)},QE[e]?{passive:!0}:void 0)}Lt&&i.dom.addEventListener("input",()=>null),th(i)}function Zi(i,e){i.input.lastSelectionOrigin=e,i.input.lastSelectionTime=Date.now()}function GE(i){i.domObserver.stop();for(let e in i.input.eventHandlers)i.dom.removeEventListener(e,i.input.eventHandlers[e]);clearTimeout(i.input.composingTimeout),clearTimeout(i.input.lastIOSEnterFallbackTimeout)}function th(i){i.someProp("handleDOMEvents",e=>{for(let t in e)i.input.eventHandlers[t]||i.dom.addEventListener(t,i.input.eventHandlers[t]=r=>Sh(i,r))})}function Sh(i,e){return i.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(i,e)||e.defaultPrevented:!1})}function FE(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=i.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function KE(i,e){!Sh(i,e)&&Vt[e.type]&&(i.editable||!(e.type in jt))&&Vt[e.type](i,e)}jt.keydown=(i,e)=>{let t=e;if(i.input.shiftKey=t.keyCode==16||t.shiftKey,!Nv(i,t)&&(i.input.lastKeyCode=t.keyCode,i.input.lastKeyCodeTime=Date.now(),!(mi&&Nt&&t.keyCode==13)))if(t.keyCode!=229&&i.domObserver.forceFlush(),Ws&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();i.input.lastIOSEnter=r,i.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{i.input.lastIOSEnter==r&&(i.someProp("handleKeyDown",o=>o(i,Dr(13,"Enter"))),i.input.lastIOSEnter=0)},200)}else i.someProp("handleKeyDown",r=>r(i,t))||LE(i,t)?t.preventDefault():Zi(i,"key")};jt.keyup=(i,e)=>{e.keyCode==16&&(i.input.shiftKey=!1)};jt.keypress=(i,e)=>{let t=e;if(Nv(i,t)||!t.charCode||t.ctrlKey&&!t.altKey||Sn&&t.metaKey)return;if(i.someProp("handleKeyPress",o=>o(i,t))){t.preventDefault();return}let r=i.state.selection;if(!(r instanceof ce)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(t.charCode);!/[\r\n]/.test(o)&&!i.someProp("handleTextInput",l=>l(i,r.$from.pos,r.$to.pos,o))&&i.dispatch(i.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}};function Bu(i){return{left:i.clientX,top:i.clientY}}function XE(i,e){let t=e.x-i.clientX,r=e.y-i.clientY;return t*t+r*r<100}function xh(i,e,t,r,o){if(r==-1)return!1;let l=i.state.doc.resolve(r);for(let u=l.depth+1;u>0;u--)if(i.someProp(e,f=>u>l.depth?f(i,t,l.nodeAfter,l.before(u),o,!0):f(i,t,l.node(u),l.before(u),o,!1)))return!0;return!1}function Ks(i,e,t){if(i.focused||i.focus(),i.state.selection.eq(e))return;let r=i.state.tr.setSelection(e);r.setMeta("pointer",!0),i.dispatch(r)}function JE(i,e){if(e==-1)return!1;let t=i.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&oe.isSelectable(r)?(Ks(i,new oe(t)),!0):!1}function ZE(i,e){if(e==-1)return!1;let t=i.state.selection,r,o;t instanceof oe&&(r=t.node);let l=i.state.doc.resolve(e);for(let u=l.depth+1;u>0;u--){let f=u>l.depth?l.nodeAfter:l.node(u);if(oe.isSelectable(f)){r&&t.$from.depth>0&&u>=t.$from.depth&&l.before(t.$from.depth+1)==t.$from.pos?o=l.before(t.$from.depth):o=l.before(u);break}}return o!=null?(Ks(i,oe.create(i.state.doc,o)),!0):!1}function WE(i,e,t,r,o){return xh(i,"handleClickOn",e,t,r)||i.someProp("handleClick",l=>l(i,e,r))||(o?ZE(i,t):JE(i,t))}function eC(i,e,t,r){return xh(i,"handleDoubleClickOn",e,t,r)||i.someProp("handleDoubleClick",o=>o(i,e,r))}function tC(i,e,t,r){return xh(i,"handleTripleClickOn",e,t,r)||i.someProp("handleTripleClick",o=>o(i,e,r))||nC(i,t,r)}function nC(i,e,t){if(t.button!=0)return!1;let r=i.state.doc;if(e==-1)return r.inlineContent?(Ks(i,ce.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let l=o.depth+1;l>0;l--){let u=l>o.depth?o.nodeAfter:o.node(l),f=o.before(l);if(u.inlineContent)Ks(i,ce.create(r,f+1,f+1+u.content.size));else if(oe.isSelectable(u))Ks(i,oe.create(r,f));else continue;return!0}}function wh(i){return xu(i)}const Ov=Sn?"metaKey":"ctrlKey";Vt.mousedown=(i,e)=>{let t=e;i.input.shiftKey=t.shiftKey;let r=wh(i),o=Date.now(),l="singleClick";o-i.input.lastClick.time<500&&XE(t,i.input.lastClick)&&!t[Ov]&&(i.input.lastClick.type=="singleClick"?l="doubleClick":i.input.lastClick.type=="doubleClick"&&(l="tripleClick")),i.input.lastClick={time:o,x:t.clientX,y:t.clientY,type:l};let u=i.posAtCoords(Bu(t));u&&(l=="singleClick"?(i.input.mouseDown&&i.input.mouseDown.done(),i.input.mouseDown=new iC(i,u,t,!!r)):(l=="doubleClick"?eC:tC)(i,u.pos,u.inside,t)?t.preventDefault():Zi(i,"pointer"))};class iC{constructor(e,t,r,o){this.view=e,this.pos=t,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Ov],this.allowDefault=r.shiftKey;let l,u;if(t.inside>-1)l=e.state.doc.nodeAt(t.inside),u=t.inside;else{let g=e.state.doc.resolve(t.pos);l=g.parent,u=g.depth?g.before():0}const f=o?null:r.target,d=f?e.docView.nearestDesc(f,!0):null;this.target=d&&d.dom.nodeType==1?d.dom:null;let{selection:p}=e.state;(r.button==0&&l.type.spec.draggable&&l.type.spec.selectable!==!1||p instanceof oe&&p.from<=u&&p.to>u)&&(this.mightDrag={node:l,pos:u,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&_n&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Zi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>bi(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Bu(e))),this.updateAllowDefault(e),this.allowDefault||!t?Zi(this.view,"pointer"):WE(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Lt&&this.mightDrag&&!this.mightDrag.node.isAtom||Nt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Ks(this.view,me.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Zi(this.view,"pointer")}move(e){this.updateAllowDefault(e),Zi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Vt.touchstart=i=>{i.input.lastTouch=Date.now(),wh(i),Zi(i,"pointer")};Vt.touchmove=i=>{i.input.lastTouch=Date.now(),Zi(i,"pointer")};Vt.contextmenu=i=>wh(i);function Nv(i,e){return i.composing?!0:Lt&&Math.abs(e.timeStamp-i.input.compositionEndedAt)<500?(i.input.compositionEndedAt=-2e8,!0):!1}const rC=mi?5e3:-1;jt.compositionstart=jt.compositionupdate=i=>{if(!i.composing){i.domObserver.flush();let{state:e}=i,t=e.selection.$to;if(e.selection instanceof ce&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))i.markCursor=i.state.storedMarks||t.marks(),xu(i,!0),i.markCursor=null;else if(xu(i,!e.selection.empty),_n&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=i.domSelectionRange();for(let o=r.focusNode,l=r.focusOffset;o&&o.nodeType==1&&l!=0;){let u=l<0?o.lastChild:o.childNodes[l-1];if(!u)break;if(u.nodeType==3){let f=i.domSelection();f&&f.collapse(u,u.nodeValue.length);break}else o=u,l=-1}}i.input.composing=!0}Rv(i,rC)};jt.compositionend=(i,e)=>{i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=e.timeStamp,i.input.compositionPendingChanges=i.domObserver.pendingRecords().length?i.input.compositionID:0,i.input.compositionNode=null,i.input.compositionPendingChanges&&Promise.resolve().then(()=>i.domObserver.flush()),i.input.compositionID++,Rv(i,20))};function Rv(i,e){clearTimeout(i.input.composingTimeout),e>-1&&(i.input.composingTimeout=setTimeout(()=>xu(i),e))}function Dv(i){for(i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=oC());i.input.compositionNodes.length>0;)i.input.compositionNodes.pop().markParentsDirty()}function sC(i){let e=i.domSelectionRange();if(!e.focusNode)return null;let t=JM(e.focusNode,e.focusOffset),r=ZM(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let o=r.pmViewDesc,l=i.domObserver.lastChangedTextNode;if(t==l||r==l)return l;if(!o||!o.isText(r.nodeValue))return r;if(i.input.compositionNode==r){let u=t.pmViewDesc;if(!(!u||!u.isText(t.nodeValue)))return r}}return t||r}function oC(){let i=document.createEvent("Event");return i.initEvent("event",!0,!0),i.timeStamp}function xu(i,e=!1){if(!(mi&&i.domObserver.flushingSoon>=0)){if(i.domObserver.forceFlush(),Dv(i),e||i.docView&&i.docView.dirty){let t=yh(i);return t&&!t.eq(i.state.selection)?i.dispatch(i.state.tr.setSelection(t)):(i.markCursor||e)&&!i.state.selection.empty?i.dispatch(i.state.tr.deleteSelection()):i.updateState(i.state),!0}return!1}}function lC(i,e){if(!i.dom.parentNode)return;let t=i.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),i.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),i.focus()},50)}const wl=Kt&&tr<15||Ws&&iE<604;Vt.copy=jt.cut=(i,e)=>{let t=e,r=i.state.selection,o=t.type=="cut";if(r.empty)return;let l=wl?null:t.clipboardData,u=r.content(),{dom:f,text:d}=vh(i,u);l?(t.preventDefault(),l.clearData(),l.setData("text/html",f.innerHTML),l.setData("text/plain",d)):lC(i,f),o&&i.dispatch(i.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function aC(i){return i.openStart==0&&i.openEnd==0&&i.content.childCount==1?i.content.firstChild:null}function uC(i,e){if(!i.dom.parentNode)return;let t=i.input.shiftKey||i.state.selection.$from.parent.type.spec.code,r=i.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=i.input.shiftKey&&i.input.lastKeyCode!=45;setTimeout(()=>{i.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Tl(i,r.value,null,o,e):Tl(i,r.textContent,r.innerHTML,o,e)},50)}function Tl(i,e,t,r,o){let l=Tv(i,e,t,r,i.state.selection.$from);if(i.someProp("handlePaste",d=>d(i,o,l||F.empty)))return!0;if(!l)return!1;let u=aC(l),f=u?i.state.tr.replaceSelectionWith(u,r):i.state.tr.replaceSelection(l);return i.dispatch(f.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function _v(i){let e=i.getData("text/plain")||i.getData("Text");if(e)return e;let t=i.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}jt.paste=(i,e)=>{let t=e;if(i.composing&&!mi)return;let r=wl?null:t.clipboardData,o=i.input.shiftKey&&i.input.lastKeyCode!=45;r&&Tl(i,_v(r),r.getData("text/html"),o,t)?t.preventDefault():uC(i,t)};class zv{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const cC=Sn?"altKey":"ctrlKey";function Bv(i,e){let t=i.someProp("dragCopies",r=>!r(e));return t??!e[cC]}Vt.dragstart=(i,e)=>{let t=e,r=i.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let o=i.state.selection,l=o.empty?null:i.posAtCoords(Bu(t)),u;if(!(l&&l.pos>=o.from&&l.pos<=(o instanceof oe?o.to-1:o.to))){if(r&&r.mightDrag)u=oe.create(i.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let y=i.docView.nearestDesc(t.target,!0);y&&y.node.type.spec.draggable&&y!=i.docView&&(u=oe.create(i.state.doc,y.posBefore))}}let f=(u||i.state.selection).content(),{dom:d,text:p,slice:g}=vh(i,f);(!t.dataTransfer.files.length||!Nt||lv>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(wl?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",wl||t.dataTransfer.setData("text/plain",p),i.dragging=new zv(g,Bv(i,t),u)};Vt.dragend=i=>{let e=i.dragging;window.setTimeout(()=>{i.dragging==e&&(i.dragging=null)},50)};jt.dragover=jt.dragenter=(i,e)=>e.preventDefault();jt.drop=(i,e)=>{let t=e,r=i.dragging;if(i.dragging=null,!t.dataTransfer)return;let o=i.posAtCoords(Bu(t));if(!o)return;let l=i.state.doc.resolve(o.pos),u=r&&r.slice;u?i.someProp("transformPasted",x=>{u=x(u,i)}):u=Tv(i,_v(t.dataTransfer),wl?null:t.dataTransfer.getData("text/html"),!1,l);let f=!!(r&&Bv(i,t));if(i.someProp("handleDrop",x=>x(i,t,u||F.empty,f))){t.preventDefault();return}if(!u)return;t.preventDefault();let d=u?Wb(i.state.doc,l.pos,u):l.pos;d==null&&(d=l.pos);let p=i.state.tr;if(f){let{node:x}=r;x?x.replace(p):p.deleteSelection()}let g=p.mapping.map(d),y=u.openStart==0&&u.openEnd==0&&u.content.childCount==1,b=p.doc;if(y?p.replaceRangeWith(g,g,u.content.firstChild):p.replaceRange(g,g,u),p.doc.eq(b))return;let S=p.doc.resolve(g);if(y&&oe.isSelectable(u.content.firstChild)&&S.nodeAfter&&S.nodeAfter.sameMarkup(u.content.firstChild))p.setSelection(new oe(S));else{let x=p.mapping.map(d);p.mapping.maps[p.mapping.maps.length-1].forEach((T,E,B,J)=>x=J),p.setSelection(bh(i,S,p.doc.resolve(x)))}i.focus(),i.dispatch(p.setMeta("uiEvent","drop"))};Vt.focus=i=>{i.input.lastFocus=Date.now(),i.focused||(i.domObserver.stop(),i.dom.classList.add("ProseMirror-focused"),i.domObserver.start(),i.focused=!0,setTimeout(()=>{i.docView&&i.hasFocus()&&!i.domObserver.currentSelection.eq(i.domSelectionRange())&&bi(i)},20))};Vt.blur=(i,e)=>{let t=e;i.focused&&(i.domObserver.stop(),i.dom.classList.remove("ProseMirror-focused"),i.domObserver.start(),t.relatedTarget&&i.dom.contains(t.relatedTarget)&&i.domObserver.currentSelection.clear(),i.focused=!1)};Vt.beforeinput=(i,e)=>{if(Nt&&mi&&e.inputType=="deleteContentBackward"){i.domObserver.flushSoon();let{domChangeCount:r}=i.input;setTimeout(()=>{if(i.input.domChangeCount!=r||(i.dom.blur(),i.focus(),i.someProp("handleKeyDown",l=>l(i,Dr(8,"Backspace")))))return;let{$cursor:o}=i.state.selection;o&&o.pos>0&&i.dispatch(i.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let i in jt)Vt[i]=jt[i];function Ml(i,e){if(i==e)return!0;for(let t in i)if(i[t]!==e[t])return!1;for(let t in e)if(!(t in i))return!1;return!0}class wu{constructor(e,t){this.toDOM=e,this.spec=t||Hr,this.side=this.spec.side||0}map(e,t,r,o){let{pos:l,deleted:u}=e.mapResult(t.from+o,this.side<0?-1:1);return u?null:new Tn(l-r,l-r,this)}valid(){return!0}eq(e){return this==e||e instanceof wu&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ml(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ir{constructor(e,t){this.attrs=e,this.spec=t||Hr}map(e,t,r,o){let l=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-r,u=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-r;return l>=u?null:new Tn(l,u,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ir&&Ml(this.attrs,e.attrs)&&Ml(this.spec,e.spec)}static is(e){return e.type instanceof ir}destroy(){}}class Th{constructor(e,t){this.attrs=e,this.spec=t||Hr}map(e,t,r,o){let l=e.mapResult(t.from+o,1);if(l.deleted)return null;let u=e.mapResult(t.to+o,-1);return u.deleted||u.pos<=l.pos?null:new Tn(l.pos-r,u.pos-r,this)}valid(e,t){let{index:r,offset:o}=e.content.findIndex(t.from),l;return o==t.from&&!(l=e.child(r)).isText&&o+l.nodeSize==t.to}eq(e){return this==e||e instanceof Th&&Ml(this.attrs,e.attrs)&&Ml(this.spec,e.spec)}destroy(){}}class Tn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Tn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Tn(e,e,new wu(t,r))}static inline(e,t,r,o){return new Tn(e,t,new ir(r,o))}static node(e,t,r,o){return new Tn(e,t,new Th(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof ir}get widget(){return this.type instanceof wu}}const Qs=[],Hr={};class ot{constructor(e,t){this.local=e.length?e:Qs,this.children=t.length?t:Qs}static create(e,t){return t.length?Tu(t,e,0,Hr):Ot}find(e,t,r){let o=[];return this.findInner(e??0,t??1e9,o,0,r),o}findInner(e,t,r,o,l){for(let u=0;u<this.local.length;u++){let f=this.local[u];f.from<=t&&f.to>=e&&(!l||l(f.spec))&&r.push(f.copy(f.from+o,f.to+o))}for(let u=0;u<this.children.length;u+=3)if(this.children[u]<t&&this.children[u+1]>e){let f=this.children[u]+1;this.children[u+2].findInner(e-f,t-f,r,o+f,l)}}map(e,t,r){return this==Ot||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Hr)}mapInner(e,t,r,o,l){let u;for(let f=0;f<this.local.length;f++){let d=this.local[f].map(e,r,o);d&&d.type.valid(t,d)?(u||(u=[])).push(d):l.onRemove&&l.onRemove(this.local[f].spec)}return this.children.length?fC(this.children,u||[],e,t,r,o,l):u?new ot(u.sort(Ir),Qs):Ot}add(e,t){return t.length?this==Ot?ot.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let o,l=0;e.forEach((f,d)=>{let p=d+r,g;if(g=Lv(t,f,p)){for(o||(o=this.children.slice());l<o.length&&o[l]<d;)l+=3;o[l]==d?o[l+2]=o[l+2].addInner(f,g,p+1):o.splice(l,0,d,d+f.nodeSize,Tu(g,f,p+1,Hr)),l+=3}});let u=qv(l?Vv(t):t,-r);for(let f=0;f<u.length;f++)u[f].type.valid(e,u[f])||u.splice(f--,1);return new ot(u.length?this.local.concat(u).sort(Ir):this.local,o||this.children)}remove(e){return e.length==0||this==Ot?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,o=this.local;for(let l=0;l<r.length;l+=3){let u,f=r[l]+t,d=r[l+1]+t;for(let g=0,y;g<e.length;g++)(y=e[g])&&y.from>f&&y.to<d&&(e[g]=null,(u||(u=[])).push(y));if(!u)continue;r==this.children&&(r=this.children.slice());let p=r[l+2].removeInner(u,f+1);p!=Ot?r[l+2]=p:(r.splice(l,3),l-=3)}if(o.length){for(let l=0,u;l<e.length;l++)if(u=e[l])for(let f=0;f<o.length;f++)o[f].eq(u,t)&&(o==this.local&&(o=this.local.slice()),o.splice(f--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new ot(o,r):Ot}forChild(e,t){if(this==Ot)return this;if(t.isLeaf)return ot.empty;let r,o;for(let f=0;f<this.children.length;f+=3)if(this.children[f]>=e){this.children[f]==e&&(r=this.children[f+2]);break}let l=e+1,u=l+t.content.size;for(let f=0;f<this.local.length;f++){let d=this.local[f];if(d.from<u&&d.to>l&&d.type instanceof ir){let p=Math.max(l,d.from)-l,g=Math.min(u,d.to)-l;p<g&&(o||(o=[])).push(d.copy(p,g))}}if(o){let f=new ot(o.sort(Ir),Qs);return r?new Fi([f,r]):f}return r||Ot}eq(e){if(this==e)return!0;if(!(e instanceof ot)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Mh(this.localsInner(e))}localsInner(e){if(this==Ot)return Qs;if(e.inlineContent||!this.local.some(ir.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ir||t.push(this.local[r]);return t}forEachSet(e){e(this)}}ot.empty=new ot([],[]);ot.removeOverlap=Mh;const Ot=ot.empty;class Fi{constructor(e){this.members=e}map(e,t){const r=this.members.map(o=>o.map(e,t,Hr));return Fi.from(r)}forChild(e,t){if(t.isLeaf)return ot.empty;let r=[];for(let o=0;o<this.members.length;o++){let l=this.members[o].forChild(e,t);l!=Ot&&(l instanceof Fi?r=r.concat(l.members):r.push(l))}return Fi.from(r)}eq(e){if(!(e instanceof Fi)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let o=0;o<this.members.length;o++){let l=this.members[o].localsInner(e);if(l.length)if(!t)t=l;else{r&&(t=t.slice(),r=!1);for(let u=0;u<l.length;u++)t.push(l[u])}}return t?Mh(r?t:t.sort(Ir)):Qs}static from(e){switch(e.length){case 0:return Ot;case 1:return e[0];default:return new Fi(e.every(t=>t instanceof ot)?e:e.reduce((t,r)=>t.concat(r instanceof ot?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function fC(i,e,t,r,o,l,u){let f=i.slice();for(let p=0,g=l;p<t.maps.length;p++){let y=0;t.maps[p].forEach((b,S,x,T)=>{let E=T-x-(S-b);for(let B=0;B<f.length;B+=3){let J=f[B+1];if(J<0||b>J+g-y)continue;let K=f[B]+g-y;S>=K?f[B+1]=b<=K?-2:-1:b>=g&&E&&(f[B]+=E,f[B+1]+=E)}y+=E}),g=t.maps[p].map(g,-1)}let d=!1;for(let p=0;p<f.length;p+=3)if(f[p+1]<0){if(f[p+1]==-2){d=!0,f[p+1]=-1;continue}let g=t.map(i[p]+l),y=g-o;if(y<0||y>=r.content.size){d=!0;continue}let b=t.map(i[p+1]+l,-1),S=b-o,{index:x,offset:T}=r.content.findIndex(y),E=r.maybeChild(x);if(E&&T==y&&T+E.nodeSize==S){let B=f[p+2].mapInner(t,E,g+1,i[p]+l+1,u);B!=Ot?(f[p]=y,f[p+1]=S,f[p+2]=B):(f[p+1]=-2,d=!0)}else d=!0}if(d){let p=dC(f,i,e,t,o,l,u),g=Tu(p,r,0,u);e=g.local;for(let y=0;y<f.length;y+=3)f[y+1]<0&&(f.splice(y,3),y-=3);for(let y=0,b=0;y<g.children.length;y+=3){let S=g.children[y];for(;b<f.length&&f[b]<S;)b+=3;f.splice(b,0,g.children[y],g.children[y+1],g.children[y+2])}}return new ot(e.sort(Ir),f)}function qv(i,e){if(!e||!i.length)return i;let t=[];for(let r=0;r<i.length;r++){let o=i[r];t.push(new Tn(o.from+e,o.to+e,o.type))}return t}function dC(i,e,t,r,o,l,u){function f(d,p){for(let g=0;g<d.local.length;g++){let y=d.local[g].map(r,o,p);y?t.push(y):u.onRemove&&u.onRemove(d.local[g].spec)}for(let g=0;g<d.children.length;g+=3)f(d.children[g+2],d.children[g]+p+1)}for(let d=0;d<i.length;d+=3)i[d+1]==-1&&f(i[d+2],e[d]+l+1);return t}function Lv(i,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,o=null;for(let l=0,u;l<i.length;l++)(u=i[l])&&u.from>t&&u.to<r&&((o||(o=[])).push(u),i[l]=null);return o}function Vv(i){let e=[];for(let t=0;t<i.length;t++)i[t]!=null&&e.push(i[t]);return e}function Tu(i,e,t,r){let o=[],l=!1;e.forEach((f,d)=>{let p=Lv(i,f,d+t);if(p){l=!0;let g=Tu(p,f,t+d+1,r);g!=Ot&&o.push(d,d+f.nodeSize,g)}});let u=qv(l?Vv(i):i,-t).sort(Ir);for(let f=0;f<u.length;f++)u[f].type.valid(e,u[f])||(r.onRemove&&r.onRemove(u[f].spec),u.splice(f--,1));return u.length||o.length?new ot(u,o):Ot}function Ir(i,e){return i.from-e.from||i.to-e.to}function Mh(i){let e=i;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let o=t+1;o<e.length;o++){let l=e[o];if(l.from==r.from){l.to!=r.to&&(e==i&&(e=i.slice()),e[o]=l.copy(l.from,r.to),L0(e,o+1,l.copy(r.to,l.to)));continue}else{l.from<r.to&&(e==i&&(e=i.slice()),e[t]=r.copy(r.from,l.from),L0(e,o,r.copy(l.from,r.to)));break}}}return e}function L0(i,e,t){for(;e<i.length&&Ir(t,i[e])>0;)e++;i.splice(e,0,t)}function Md(i){let e=[];return i.someProp("decorations",t=>{let r=t(i.state);r&&r!=Ot&&e.push(r)}),i.cursorWrapper&&e.push(ot.create(i.state.doc,[i.cursorWrapper.deco])),Fi.from(e)}const hC={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},pC=Kt&&tr<=11;class mC{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class gC{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new mC,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);Kt&&tr<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),pC&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,hC)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(O0(this.view)){if(this.suppressingSelectionUpdates)return bi(this.view);if(Kt&&tr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Pr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let l=e.focusNode;l;l=Zs(l))t.add(l);for(let l=e.anchorNode;l;l=Zs(l))if(t.has(l)){r=l;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&O0(e)&&!this.ignoreSelectionChange(r),l=-1,u=-1,f=!1,d=[];if(e.editable)for(let g=0;g<t.length;g++){let y=this.registerMutation(t[g],d);y&&(l=l<0?y.from:Math.min(y.from,l),u=u<0?y.to:Math.max(y.to,u),y.typeOver&&(f=!0))}if(_n&&d.length){let g=d.filter(y=>y.nodeName=="BR");if(g.length==2){let[y,b]=g;y.parentNode&&y.parentNode.parentNode==b.parentNode?b.remove():y.remove()}else{let{focusNode:y}=this.currentSelection;for(let b of g){let S=b.parentNode;S&&S.nodeName=="LI"&&(!y||vC(e,y)!=S)&&b.remove()}}}let p=null;l<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&_u(r)&&(p=yh(e))&&p.eq(me.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,bi(e),this.currentSelection.set(r),e.scrollToSelection()):(l>-1||o)&&(l>-1&&(e.docView.markDirty(l,u),yC(e)),this.handleDOMChange(l,u,f,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||bi(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let g=0;g<e.addedNodes.length;g++){let y=e.addedNodes[g];t.push(y),y.nodeType==3&&(this.lastChangedTextNode=y)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,l=e.nextSibling;if(Kt&&tr<=11&&e.addedNodes.length)for(let g=0;g<e.addedNodes.length;g++){let{previousSibling:y,nextSibling:b}=e.addedNodes[g];(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(o=y),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(l=b)}let u=o&&o.parentNode==e.target?wt(o)+1:0,f=r.localPosFromDOM(e.target,u,-1),d=l&&l.parentNode==e.target?wt(l):e.target.childNodes.length,p=r.localPosFromDOM(e.target,d,1);return{from:f,to:p}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let V0=new WeakMap,j0=!1;function yC(i){if(!V0.has(i)&&(V0.set(i,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(i.dom).whiteSpace)!==-1)){if(i.requiresGeckoHackNode=_n,j0)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),j0=!0}}function U0(i,e){let t=e.startContainer,r=e.startOffset,o=e.endContainer,l=e.endOffset,u=i.domAtPos(i.state.selection.anchor);return Pr(u.node,u.offset,o,l)&&([t,r,o,l]=[o,l,t,r]),{anchorNode:t,anchorOffset:r,focusNode:o,focusOffset:l}}function bC(i,e){if(e.getComposedRanges){let o=e.getComposedRanges(i.root)[0];if(o)return U0(i,o)}let t;function r(o){o.preventDefault(),o.stopImmediatePropagation(),t=o.getTargetRanges()[0]}return i.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),i.dom.removeEventListener("beforeinput",r,!0),t?U0(i,t):null}function vC(i,e){for(let t=e.parentNode;t&&t!=i.dom;t=t.parentNode){let r=i.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function SC(i,e,t){let{node:r,fromOffset:o,toOffset:l,from:u,to:f}=i.docView.parseRange(e,t),d=i.domSelectionRange(),p,g=d.anchorNode;if(g&&i.dom.contains(g.nodeType==1?g:g.parentNode)&&(p=[{node:g,offset:d.anchorOffset}],_u(d)||p.push({node:d.focusNode,offset:d.focusOffset})),Nt&&i.input.lastKeyCode===8)for(let E=l;E>o;E--){let B=r.childNodes[E-1],J=B.pmViewDesc;if(B.nodeName=="BR"&&!J){l=E;break}if(!J||J.size)break}let y=i.state.doc,b=i.someProp("domParser")||er.fromSchema(i.state.schema),S=y.resolve(u),x=null,T=b.parse(r,{topNode:S.parent,topMatch:S.parent.contentMatchAt(S.index()),topOpen:!0,from:o,to:l,preserveWhitespace:S.parent.type.whitespace=="pre"?"full":!0,findPositions:p,ruleFromNode:xC,context:S});if(p&&p[0].pos!=null){let E=p[0].pos,B=p[1]&&p[1].pos;B==null&&(B=E),x={anchor:E+u,head:B+u}}return{doc:T,sel:x,from:u,to:f}}function xC(i){let e=i.pmViewDesc;if(e)return e.parseRule();if(i.nodeName=="BR"&&i.parentNode){if(Lt&&/^(ul|ol)$/i.test(i.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(i.parentNode.lastChild==i||Lt&&/^(tr|table)$/i.test(i.parentNode.nodeName))return{ignore:!0}}else if(i.nodeName=="IMG"&&i.getAttribute("mark-placeholder"))return{ignore:!0};return null}const wC=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function TC(i,e,t,r,o){let l=i.input.compositionPendingChanges||(i.composing?i.input.compositionID:0);if(i.input.compositionPendingChanges=0,e<0){let se=i.input.lastSelectionTime>Date.now()-50?i.input.lastSelectionOrigin:null,Ie=yh(i,se);if(Ie&&!i.state.selection.eq(Ie)){if(Nt&&mi&&i.input.lastKeyCode===13&&Date.now()-100<i.input.lastKeyCodeTime&&i.someProp("handleKeyDown",Be=>Be(i,Dr(13,"Enter"))))return;let ze=i.state.tr.setSelection(Ie);se=="pointer"?ze.setMeta("pointer",!0):se=="key"&&ze.scrollIntoView(),l&&ze.setMeta("composition",l),i.dispatch(ze)}return}let u=i.state.doc.resolve(e),f=u.sharedDepth(t);e=u.before(f+1),t=i.state.doc.resolve(t).after(f+1);let d=i.state.selection,p=SC(i,e,t),g=i.state.doc,y=g.slice(p.from,p.to),b,S;i.input.lastKeyCode===8&&Date.now()-100<i.input.lastKeyCodeTime?(b=i.state.selection.to,S="end"):(b=i.state.selection.from,S="start"),i.input.lastKeyCode=null;let x=CC(y.content,p.doc.content,p.from,b,S);if(x&&i.input.domChangeCount++,(Ws&&i.input.lastIOSEnter>Date.now()-225||mi)&&o.some(se=>se.nodeType==1&&!wC.test(se.nodeName))&&(!x||x.endA>=x.endB)&&i.someProp("handleKeyDown",se=>se(i,Dr(13,"Enter")))){i.input.lastIOSEnter=0;return}if(!x)if(r&&d instanceof ce&&!d.empty&&d.$head.sameParent(d.$anchor)&&!i.composing&&!(p.sel&&p.sel.anchor!=p.sel.head))x={start:d.from,endA:d.to,endB:d.to};else{if(p.sel){let se=H0(i,i.state.doc,p.sel);if(se&&!se.eq(i.state.selection)){let Ie=i.state.tr.setSelection(se);l&&Ie.setMeta("composition",l),i.dispatch(Ie)}}return}i.state.selection.from<i.state.selection.to&&x.start==x.endB&&i.state.selection instanceof ce&&(x.start>i.state.selection.from&&x.start<=i.state.selection.from+2&&i.state.selection.from>=p.from?x.start=i.state.selection.from:x.endA<i.state.selection.to&&x.endA>=i.state.selection.to-2&&i.state.selection.to<=p.to&&(x.endB+=i.state.selection.to-x.endA,x.endA=i.state.selection.to)),Kt&&tr<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>p.from&&p.doc.textBetween(x.start-p.from-1,x.start-p.from+1)==" "&&(x.start--,x.endA--,x.endB--);let T=p.doc.resolveNoCache(x.start-p.from),E=p.doc.resolveNoCache(x.endB-p.from),B=g.resolve(x.start),J=T.sameParent(E)&&T.parent.inlineContent&&B.end()>=x.endA,K;if((Ws&&i.input.lastIOSEnter>Date.now()-225&&(!J||o.some(se=>se.nodeName=="DIV"||se.nodeName=="P"))||!J&&T.pos<p.doc.content.size&&(!T.sameParent(E)||!T.parent.inlineContent)&&!/\S/.test(p.doc.textBetween(T.pos,E.pos,"",""))&&(K=me.findFrom(p.doc.resolve(T.pos+1),1,!0))&&K.head>T.pos)&&i.someProp("handleKeyDown",se=>se(i,Dr(13,"Enter")))){i.input.lastIOSEnter=0;return}if(i.state.selection.anchor>x.start&&EC(g,x.start,x.endA,T,E)&&i.someProp("handleKeyDown",se=>se(i,Dr(8,"Backspace")))){mi&&Nt&&i.domObserver.suppressSelectionUpdates();return}Nt&&x.endB==x.start&&(i.input.lastChromeDelete=Date.now()),mi&&!J&&T.start()!=E.start()&&E.parentOffset==0&&T.depth==E.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==x.endA&&(x.endB-=2,E=p.doc.resolveNoCache(x.endB-p.from),setTimeout(()=>{i.someProp("handleKeyDown",function(se){return se(i,Dr(13,"Enter"))})},20));let ne=x.start,Y=x.endA,te,de,ge;if(J){if(T.pos==E.pos)Kt&&tr<=11&&T.parentOffset==0&&(i.domObserver.suppressSelectionUpdates(),setTimeout(()=>bi(i),20)),te=i.state.tr.delete(ne,Y),de=g.resolve(x.start).marksAcross(g.resolve(x.endA));else if(x.endA==x.endB&&(ge=MC(T.parent.content.cut(T.parentOffset,E.parentOffset),B.parent.content.cut(B.parentOffset,x.endA-B.start()))))te=i.state.tr,ge.type=="add"?te.addMark(ne,Y,ge.mark):te.removeMark(ne,Y,ge.mark);else if(T.parent.child(T.index()).isText&&T.index()==E.index()-(E.textOffset?0:1)){let se=T.parent.textBetween(T.parentOffset,E.parentOffset);if(i.someProp("handleTextInput",Ie=>Ie(i,ne,Y,se)))return;te=i.state.tr.insertText(se,ne,Y)}}if(te||(te=i.state.tr.replace(ne,Y,p.doc.slice(x.start-p.from,x.endB-p.from))),p.sel){let se=H0(i,te.doc,p.sel);se&&!(Nt&&i.composing&&se.empty&&(x.start!=x.endB||i.input.lastChromeDelete<Date.now()-100)&&(se.head==ne||se.head==te.mapping.map(Y)-1)||Kt&&se.empty&&se.head==ne)&&te.setSelection(se)}de&&te.ensureMarks(de),l&&te.setMeta("composition",l),i.dispatch(te.scrollIntoView())}function H0(i,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:bh(i,e.resolve(t.anchor),e.resolve(t.head))}function MC(i,e){let t=i.firstChild.marks,r=e.firstChild.marks,o=t,l=r,u,f,d;for(let g=0;g<r.length;g++)o=r[g].removeFromSet(o);for(let g=0;g<t.length;g++)l=t[g].removeFromSet(l);if(o.length==1&&l.length==0)f=o[0],u="add",d=g=>g.mark(f.addToSet(g.marks));else if(o.length==0&&l.length==1)f=l[0],u="remove",d=g=>g.mark(f.removeFromSet(g.marks));else return null;let p=[];for(let g=0;g<e.childCount;g++)p.push(d(e.child(g)));if(H.from(p).eq(i))return{mark:f,type:u}}function EC(i,e,t,r,o){if(t-e<=o.pos-r.pos||Ed(r,!0,!1)<o.pos)return!1;let l=i.resolve(e);if(!r.parent.isTextblock){let f=l.nodeAfter;return f!=null&&t==e+f.nodeSize}if(l.parentOffset<l.parent.content.size||!l.parent.isTextblock)return!1;let u=i.resolve(Ed(l,!0,!0));return!u.parent.isTextblock||u.pos>t||Ed(u,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(u.parent.content)}function Ed(i,e,t){let r=i.depth,o=e?i.end():i.pos;for(;r>0&&(e||i.indexAfter(r)==i.node(r).childCount);)r--,o++,e=!1;if(t){let l=i.node(r).maybeChild(i.indexAfter(r));for(;l&&!l.isLeaf;)l=l.firstChild,o++}return o}function CC(i,e,t,r,o){let l=i.findDiffStart(e,t);if(l==null)return null;let{a:u,b:f}=i.findDiffEnd(e,t+i.size,t+e.size);if(o=="end"){let d=Math.max(0,l-Math.min(u,f));r-=u+d-l}if(u<l&&i.size<e.size){let d=r<=l&&r>=u?l-r:0;l-=d,l&&l<e.size&&I0(e.textBetween(l-1,l+1))&&(l+=d?1:-1),f=l+(f-u),u=l}else if(f<l){let d=r<=l&&r>=f?l-r:0;l-=d,l&&l<i.size&&I0(i.textBetween(l-1,l+1))&&(l+=d?1:-1),u=l+(u-f),f=l}return{start:l,endA:u,endB:f}}function I0(i){if(i.length!=2)return!1;let e=i.charCodeAt(0),t=i.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class AC{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new YE,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(G0),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Y0(this),Q0(this),this.nodeViews=P0(this),this.docView=T0(this.state.doc,$0(this),Md(this),this.dom,this),this.domObserver=new gC(this,(r,o,l,u)=>TC(this,r,o,l,u)),this.domObserver.start(),PE(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&th(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(G0),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let o=this.state,l=!1,u=!1;e.storedMarks&&this.composing&&(Dv(this),u=!0),this.state=e;let f=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(f||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let S=P0(this);OC(S,this.nodeViews)&&(this.nodeViews=S,l=!0)}(f||t.handleDOMEvents!=this._props.handleDOMEvents)&&th(this),this.editable=Y0(this),Q0(this);let d=Md(this),p=$0(this),g=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",y=l||!this.docView.matchesNode(e.doc,p,d);(y||!e.selection.eq(o.selection))&&(u=!0);let b=g=="preserve"&&u&&this.dom.style.overflowAnchor==null&&oE(this);if(u){this.domObserver.stop();let S=y&&(Kt||Nt)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&kC(o.selection,e.selection);if(y){let x=Nt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=sC(this)),(l||!this.docView.update(e.doc,p,d,this))&&(this.docView.updateOuterDeco(p),this.docView.destroy(),this.docView=T0(e.doc,p,d,this.dom,this)),x&&!this.trackWrites&&(S=!0)}S||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&NE(this))?bi(this,S):(Sv(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),g=="reset"?this.dom.scrollTop=0:g=="to selection"?this.scrollToSelection():b&&lE(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof oe){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&y0(this,t.getBoundingClientRect(),e)}else y0(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let l=r.from+(this.state.doc.content.size-t.doc.content.size);(l>0&&this.state.doc.nodeAt(l))==r.node&&(o=l)}this.dragging=new zv(e.slice,e.move,o<0?void 0:oe.create(this.state.doc,o))}someProp(e,t){let r=this._props&&this._props[e],o;if(r!=null&&(o=t?t(r):r))return o;for(let u=0;u<this.directPlugins.length;u++){let f=this.directPlugins[u].props[e];if(f!=null&&(o=t?t(f):f))return o}let l=this.state.plugins;if(l)for(let u=0;u<l.length;u++){let f=l[u].props[e];if(f!=null&&(o=t?t(f):f))return o}}hasFocus(){if(Kt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&aE(this.dom),bi(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return hE(this,e)}coordsAtPos(e,t=1){return dv(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let o=this.docView.posFromDOM(e,t,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,t){return bE(this,t||this.state,e)}pasteHTML(e,t){return Tl(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Tl(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return vh(this,e)}destroy(){this.docView&&(GE(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Md(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,KM())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return KE(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Lt&&this.root.nodeType===11&&eE(this.dom.ownerDocument)==this.dom&&bC(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function $0(i){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(i.editable),i.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(i.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Tn.node(0,i.state.doc.content.size,e)]}function Q0(i){if(i.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),i.cursorWrapper={dom:e,deco:Tn.widget(i.state.selection.from,e,{raw:!0,marks:i.markCursor})}}else i.cursorWrapper=null}function Y0(i){return!i.someProp("editable",e=>e(i.state)===!1)}function kC(i,e){let t=Math.min(i.$anchor.sharedDepth(i.head),e.$anchor.sharedDepth(e.head));return i.$anchor.start(t)!=e.$anchor.start(t)}function P0(i){let e=Object.create(null);function t(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return i.someProp("nodeViews",t),i.someProp("markViews",t),e}function OC(i,e){let t=0,r=0;for(let o in i){if(i[o]!=e[o])return!0;t++}for(let o in e)r++;return t!=r}function G0(i){if(i.spec.state||i.spec.filterTransaction||i.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var rr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Mu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},NC=typeof navigator<"u"&&/Mac/.test(navigator.platform),RC=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Tt=0;Tt<10;Tt++)rr[48+Tt]=rr[96+Tt]=String(Tt);for(var Tt=1;Tt<=24;Tt++)rr[Tt+111]="F"+Tt;for(var Tt=65;Tt<=90;Tt++)rr[Tt]=String.fromCharCode(Tt+32),Mu[Tt]=String.fromCharCode(Tt);for(var Cd in rr)Mu.hasOwnProperty(Cd)||(Mu[Cd]=rr[Cd]);function DC(i){var e=NC&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||RC&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",t=!e&&i.key||(i.shiftKey?Mu:rr)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const _C=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function zC(i){let e=i.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,o,l,u;for(let f=0;f<e.length-1;f++){let d=e[f];if(/^(cmd|meta|m)$/i.test(d))u=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))l=!0;else if(/^mod$/i.test(d))_C?u=!0:o=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(t="Alt-"+t),o&&(t="Ctrl-"+t),u&&(t="Meta-"+t),l&&(t="Shift-"+t),t}function BC(i){let e=Object.create(null);for(let t in i)e[zC(t)]=i[t];return e}function Ad(i,e,t=!0){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t&&e.shiftKey&&(i="Shift-"+i),i}function qC(i){return new Xt({props:{handleKeyDown:jv(i)}})}function jv(i){let e=BC(i);return function(t,r){let o=DC(r),l,u=e[Ad(o,r)];if(u&&u(t.state,t.dispatch,t))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let f=e[Ad(o,r,!1)];if(f&&f(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(l=rr[r.keyCode])&&l!=o){let f=e[Ad(l,r)];if(f&&f(t.state,t.dispatch,t))return!0}}return!1}}const Eh=(i,e)=>i.selection.empty?!1:(e&&e(i.tr.deleteSelection().scrollIntoView()),!0);function Uv(i,e){let{$cursor:t}=i.selection;return!t||(e?!e.endOfTextblock("backward",i):t.parentOffset>0)?null:t}const Hv=(i,e,t)=>{let r=Uv(i,t);if(!r)return!1;let o=Ch(r);if(!o){let u=r.blockRange(),f=u&&io(u);return f==null?!1:(e&&e(i.tr.lift(u,f).scrollIntoView()),!0)}let l=o.nodeBefore;if(Xv(i,o,e,-1))return!0;if(r.parent.content.size==0&&(eo(l,"end")||oe.isSelectable(l)))for(let u=r.depth;;u--){let f=Ru(i.doc,r.before(u),r.after(u),F.empty);if(f&&f.slice.size<f.to-f.from){if(e){let d=i.tr.step(f);d.setSelection(eo(l,"end")?me.findFrom(d.doc.resolve(d.mapping.map(o.pos,-1)),-1):oe.create(d.doc,o.pos-l.nodeSize)),e(d.scrollIntoView())}return!0}if(u==1||r.node(u-1).childCount>1)break}return l.isAtom&&o.depth==r.depth-1?(e&&e(i.tr.delete(o.pos-l.nodeSize,o.pos).scrollIntoView()),!0):!1},LC=(i,e,t)=>{let r=Uv(i,t);if(!r)return!1;let o=Ch(r);return o?Iv(i,o,e):!1},VC=(i,e,t)=>{let r=Qv(i,t);if(!r)return!1;let o=Ah(r);return o?Iv(i,o,e):!1};function Iv(i,e,t){let r=e.nodeBefore,o=r,l=e.pos-1;for(;!o.isTextblock;l--){if(o.type.spec.isolating)return!1;let g=o.lastChild;if(!g)return!1;o=g}let u=e.nodeAfter,f=u,d=e.pos+1;for(;!f.isTextblock;d++){if(f.type.spec.isolating)return!1;let g=f.firstChild;if(!g)return!1;f=g}let p=Ru(i.doc,l,d,F.empty);if(!p||p.from!=l||p instanceof dt&&p.slice.size>=d-l)return!1;if(t){let g=i.tr.step(p);g.setSelection(ce.create(g.doc,l)),t(g.scrollIntoView())}return!0}function eo(i,e,t=!1){for(let r=i;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const $v=(i,e,t)=>{let{$head:r,empty:o}=i.selection,l=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",i):r.parentOffset>0)return!1;l=Ch(r)}let u=l&&l.nodeBefore;return!u||!oe.isSelectable(u)?!1:(e&&e(i.tr.setSelection(oe.create(i.doc,l.pos-u.nodeSize)).scrollIntoView()),!0)};function Ch(i){if(!i.parent.type.spec.isolating)for(let e=i.depth-1;e>=0;e--){if(i.index(e)>0)return i.doc.resolve(i.before(e+1));if(i.node(e).type.spec.isolating)break}return null}function Qv(i,e){let{$cursor:t}=i.selection;return!t||(e?!e.endOfTextblock("forward",i):t.parentOffset<t.parent.content.size)?null:t}const Yv=(i,e,t)=>{let r=Qv(i,t);if(!r)return!1;let o=Ah(r);if(!o)return!1;let l=o.nodeAfter;if(Xv(i,o,e,1))return!0;if(r.parent.content.size==0&&(eo(l,"start")||oe.isSelectable(l))){let u=Ru(i.doc,r.before(),r.after(),F.empty);if(u&&u.slice.size<u.to-u.from){if(e){let f=i.tr.step(u);f.setSelection(eo(l,"start")?me.findFrom(f.doc.resolve(f.mapping.map(o.pos)),1):oe.create(f.doc,f.mapping.map(o.pos))),e(f.scrollIntoView())}return!0}}return l.isAtom&&o.depth==r.depth-1?(e&&e(i.tr.delete(o.pos,o.pos+l.nodeSize).scrollIntoView()),!0):!1},Pv=(i,e,t)=>{let{$head:r,empty:o}=i.selection,l=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",i):r.parentOffset<r.parent.content.size)return!1;l=Ah(r)}let u=l&&l.nodeAfter;return!u||!oe.isSelectable(u)?!1:(e&&e(i.tr.setSelection(oe.create(i.doc,l.pos)).scrollIntoView()),!0)};function Ah(i){if(!i.parent.type.spec.isolating)for(let e=i.depth-1;e>=0;e--){let t=i.node(e);if(i.index(e)+1<t.childCount)return i.doc.resolve(i.after(e+1));if(t.type.spec.isolating)break}return null}const jC=(i,e)=>{let t=i.selection,r=t instanceof oe,o;if(r){if(t.node.isTextblock||!or(i.doc,t.from))return!1;o=t.from}else if(o=Nu(i.doc,t.from,-1),o==null)return!1;if(e){let l=i.tr.join(o);r&&l.setSelection(oe.create(l.doc,o-i.doc.resolve(o).nodeBefore.nodeSize)),e(l.scrollIntoView())}return!0},UC=(i,e)=>{let t=i.selection,r;if(t instanceof oe){if(t.node.isTextblock||!or(i.doc,t.to))return!1;r=t.to}else if(r=Nu(i.doc,t.to,1),r==null)return!1;return e&&e(i.tr.join(r).scrollIntoView()),!0},HC=(i,e)=>{let{$from:t,$to:r}=i.selection,o=t.blockRange(r),l=o&&io(o);return l==null?!1:(e&&e(i.tr.lift(o,l).scrollIntoView()),!0)},Gv=(i,e)=>{let{$head:t,$anchor:r}=i.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(i.tr.insertText(`
`).scrollIntoView()),!0)};function kh(i){for(let e=0;e<i.edgeCount;e++){let{type:t}=i.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const IC=(i,e)=>{let{$head:t,$anchor:r}=i.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let o=t.node(-1),l=t.indexAfter(-1),u=kh(o.contentMatchAt(l));if(!u||!o.canReplaceWith(l,l,u))return!1;if(e){let f=t.after(),d=i.tr.replaceWith(f,f,u.createAndFill());d.setSelection(me.near(d.doc.resolve(f),1)),e(d.scrollIntoView())}return!0},Fv=(i,e)=>{let t=i.selection,{$from:r,$to:o}=t;if(t instanceof ln||r.parent.inlineContent||o.parent.inlineContent)return!1;let l=kh(o.parent.contentMatchAt(o.indexAfter()));if(!l||!l.isTextblock)return!1;if(e){let u=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,f=i.tr.insert(u,l.createAndFill());f.setSelection(ce.create(f.doc,u+1)),e(f.scrollIntoView())}return!0},Kv=(i,e)=>{let{$cursor:t}=i.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let l=t.before();if(yi(i.doc,l))return e&&e(i.tr.split(l).scrollIntoView()),!0}let r=t.blockRange(),o=r&&io(r);return o==null?!1:(e&&e(i.tr.lift(r,o).scrollIntoView()),!0)};function $C(i){return(e,t)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof oe&&e.selection.node.isBlock)return!r.parentOffset||!yi(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let l=[],u,f,d=!1,p=!1;for(let S=r.depth;;S--)if(r.node(S).isBlock){d=r.end(S)==r.pos+(r.depth-S),p=r.start(S)==r.pos-(r.depth-S),f=kh(r.node(S-1).contentMatchAt(r.indexAfter(S-1))),l.unshift(d&&f?{type:f}:null),u=S;break}else{if(S==1)return!1;l.unshift(null)}let g=e.tr;(e.selection instanceof ce||e.selection instanceof ln)&&g.deleteSelection();let y=g.mapping.map(r.pos),b=yi(g.doc,y,l.length,l);if(b||(l[0]=f?{type:f}:null,b=yi(g.doc,y,l.length,l)),!b)return!1;if(g.split(y,l.length,l),!d&&p&&r.node(u).type!=f){let S=g.mapping.map(r.before(u)),x=g.doc.resolve(S);f&&r.node(u-1).canReplaceWith(x.index(),x.index()+1,f)&&g.setNodeMarkup(g.mapping.map(r.before(u)),f)}return t&&t(g.scrollIntoView()),!0}}const QC=$C(),YC=(i,e)=>{let{$from:t,to:r}=i.selection,o,l=t.sharedDepth(r);return l==0?!1:(o=t.before(l),e&&e(i.tr.setSelection(oe.create(i.doc,o))),!0)};function PC(i,e,t){let r=e.nodeBefore,o=e.nodeAfter,l=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(l-1,l)?(t&&t(i.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(l,l+1)||!(o.isTextblock||or(i.doc,e.pos))?!1:(t&&t(i.tr.join(e.pos).scrollIntoView()),!0)}function Xv(i,e,t,r){let o=e.nodeBefore,l=e.nodeAfter,u,f,d=o.type.spec.isolating||l.type.spec.isolating;if(!d&&PC(i,e,t))return!0;let p=!d&&e.parent.canReplace(e.index(),e.index()+1);if(p&&(u=(f=o.contentMatchAt(o.childCount)).findWrapping(l.type))&&f.matchType(u[0]||l.type).validEnd){if(t){let S=e.pos+l.nodeSize,x=H.empty;for(let B=u.length-1;B>=0;B--)x=H.from(u[B].create(null,x));x=H.from(o.copy(x));let T=i.tr.step(new ht(e.pos-1,S,e.pos,S,new F(x,1,0),u.length,!0)),E=T.doc.resolve(S+2*u.length);E.nodeAfter&&E.nodeAfter.type==o.type&&or(T.doc,E.pos)&&T.join(E.pos),t(T.scrollIntoView())}return!0}let g=l.type.spec.isolating||r>0&&d?null:me.findFrom(e,1),y=g&&g.$from.blockRange(g.$to),b=y&&io(y);if(b!=null&&b>=e.depth)return t&&t(i.tr.lift(y,b).scrollIntoView()),!0;if(p&&eo(l,"start",!0)&&eo(o,"end")){let S=o,x=[];for(;x.push(S),!S.isTextblock;)S=S.lastChild;let T=l,E=1;for(;!T.isTextblock;T=T.firstChild)E++;if(S.canReplace(S.childCount,S.childCount,T.content)){if(t){let B=H.empty;for(let K=x.length-1;K>=0;K--)B=H.from(x[K].copy(B));let J=i.tr.step(new ht(e.pos-x.length,e.pos+l.nodeSize,e.pos+E,e.pos+l.nodeSize-E,new F(B,x.length,0),0,!0));t(J.scrollIntoView())}return!0}}return!1}function Jv(i){return function(e,t){let r=e.selection,o=i<0?r.$from:r.$to,l=o.depth;for(;o.node(l).isInline;){if(!l)return!1;l--}return o.node(l).isTextblock?(t&&t(e.tr.setSelection(ce.create(e.doc,i<0?o.start(l):o.end(l)))),!0):!1}}const GC=Jv(-1),FC=Jv(1);function KC(i,e=null){return function(t,r){let{$from:o,$to:l}=t.selection,u=o.blockRange(l),f=u&&ph(u,i,e);return f?(r&&r(t.tr.wrap(u,f).scrollIntoView()),!0):!1}}function F0(i,e=null){return function(t,r){let o=!1;for(let l=0;l<t.selection.ranges.length&&!o;l++){let{$from:{pos:u},$to:{pos:f}}=t.selection.ranges[l];t.doc.nodesBetween(u,f,(d,p)=>{if(o)return!1;if(!(!d.isTextblock||d.hasMarkup(i,e)))if(d.type==i)o=!0;else{let g=t.doc.resolve(p),y=g.index();o=g.parent.canReplaceWith(y,y+1,i)}})}if(!o)return!1;if(r){let l=t.tr;for(let u=0;u<t.selection.ranges.length;u++){let{$from:{pos:f},$to:{pos:d}}=t.selection.ranges[u];l.setBlockType(f,d,i,e)}r(l.scrollIntoView())}return!0}}function Oh(...i){return function(e,t,r){for(let o=0;o<i.length;o++)if(i[o](e,t,r))return!0;return!1}}Oh(Eh,Hv,$v);Oh(Eh,Yv,Pv);Oh(Gv,Fv,Kv,QC);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function XC(i,e=null){return function(t,r){let{$from:o,$to:l}=t.selection,u=o.blockRange(l);if(!u)return!1;let f=r?t.tr:null;return JC(f,u,i,e)?(r&&r(f.scrollIntoView()),!0):!1}}function JC(i,e,t,r=null){let o=!1,l=e,u=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=u.resolve(e.start-2);l=new yu(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new yu(e.$from,u.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let f=ph(l,t,r,e);return f?(i&&ZC(i,e,f,o,t),!0):!1}function ZC(i,e,t,r,o){let l=H.empty;for(let g=t.length-1;g>=0;g--)l=H.from(t[g].type.create(t[g].attrs,l));i.step(new ht(e.start-(r?2:0),e.end,e.start,e.end,new F(l,0,0),t.length,!0));let u=0;for(let g=0;g<t.length;g++)t[g].type==o&&(u=g+1);let f=t.length-u,d=e.start+t.length-(r?2:0),p=e.parent;for(let g=e.startIndex,y=e.endIndex,b=!0;g<y;g++,b=!1)!b&&yi(i.doc,d,f)&&(i.split(d,f),d+=2*f),d+=p.child(g).nodeSize;return i}function WC(i){return function(e,t){let{$from:r,$to:o}=e.selection,l=r.blockRange(o,u=>u.childCount>0&&u.firstChild.type==i);return l?t?r.node(l.depth-1).type==i?eA(e,t,i,l):tA(e,t,l):!0:!1}}function eA(i,e,t,r){let o=i.tr,l=r.end,u=r.$to.end(r.depth);l<u&&(o.step(new ht(l-1,u,l,u,new F(H.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new yu(o.doc.resolve(r.$from.pos),o.doc.resolve(u),r.depth));const f=io(r);if(f==null)return!1;o.lift(r,f);let d=o.doc.resolve(o.mapping.map(l,-1)-1);return or(o.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&o.join(d.pos),e(o.scrollIntoView()),!0}function tA(i,e,t){let r=i.tr,o=t.parent;for(let S=t.end,x=t.endIndex-1,T=t.startIndex;x>T;x--)S-=o.child(x).nodeSize,r.delete(S-1,S+1);let l=r.doc.resolve(t.start),u=l.nodeAfter;if(r.mapping.map(t.end)!=t.start+l.nodeAfter.nodeSize)return!1;let f=t.startIndex==0,d=t.endIndex==o.childCount,p=l.node(-1),g=l.index(-1);if(!p.canReplace(g+(f?0:1),g+1,u.content.append(d?H.empty:H.from(o))))return!1;let y=l.pos,b=y+u.nodeSize;return r.step(new ht(y-(f?1:0),b+(d?1:0),y+1,b-1,new F((f?H.empty:H.from(o.copy(H.empty))).append(d?H.empty:H.from(o.copy(H.empty))),f?0:1,d?0:1),f?0:1)),e(r.scrollIntoView()),!0}function nA(i){return function(e,t){let{$from:r,$to:o}=e.selection,l=r.blockRange(o,p=>p.childCount>0&&p.firstChild.type==i);if(!l)return!1;let u=l.startIndex;if(u==0)return!1;let f=l.parent,d=f.child(u-1);if(d.type!=i)return!1;if(t){let p=d.lastChild&&d.lastChild.type==f.type,g=H.from(p?i.create():null),y=new F(H.from(i.create(null,H.from(f.type.create(null,g)))),p?3:1,0),b=l.start,S=l.end;t(e.tr.step(new ht(b-(p?3:1),S,b,S,y,1,!0)).scrollIntoView())}return!0}}function qu(i){const{state:e,transaction:t}=i;let{selection:r}=t,{doc:o}=t,{storedMarks:l}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return l},get selection(){return r},get doc(){return o},get tr(){return r=t.selection,o=t.doc,l=t.storedMarks,t}}}class Lu{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:o}=t,{tr:l}=r,u=this.buildProps(l);return Object.fromEntries(Object.entries(e).map(([f,d])=>[f,(...g)=>{const y=d(...g)(u);return!l.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(l),y}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:o,state:l}=this,{view:u}=o,f=[],d=!!e,p=e||l.tr,g=()=>(!d&&t&&!p.getMeta("preventDispatch")&&!this.hasCustomState&&u.dispatch(p),f.every(b=>b===!0)),y={...Object.fromEntries(Object.entries(r).map(([b,S])=>[b,(...T)=>{const E=this.buildProps(p,t),B=S(...T)(E);return f.push(B),y}])),run:g};return y}createCan(e){const{rawCommands:t,state:r}=this,o=!1,l=e||r.tr,u=this.buildProps(l,o);return{...Object.fromEntries(Object.entries(t).map(([d,p])=>[d,(...g)=>p(...g)({...u,dispatch:void 0})])),chain:()=>this.createChain(l,o)}}buildProps(e,t=!0){const{rawCommands:r,editor:o,state:l}=this,{view:u}=o,f={tr:e,editor:o,view:u,state:qu({state:l,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([d,p])=>[d,(...g)=>p(...g)(f)]))}};return f}}class iA{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(o=>o!==t):delete this.callbacks[e]),this}once(e,t){const r=(...o)=>{this.off(e,r),t.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function ee(i,e,t){return i.config[e]===void 0&&i.parent?ee(i.parent,e,t):typeof i.config[e]=="function"?i.config[e].bind({...t,parent:i.parent?ee(i.parent,e,t):null}):i.config[e]}function Vu(i){const e=i.filter(o=>o.type==="extension"),t=i.filter(o=>o.type==="node"),r=i.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Zv(i){const e=[],{nodeExtensions:t,markExtensions:r}=Vu(i),o=[...t,...r],l={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return i.forEach(u=>{const f={name:u.name,options:u.options,storage:u.storage,extensions:o},d=ee(u,"addGlobalAttributes",f);if(!d)return;d().forEach(g=>{g.types.forEach(y=>{Object.entries(g.attributes).forEach(([b,S])=>{e.push({type:y,name:b,attribute:{...l,...S}})})})})}),o.forEach(u=>{const f={name:u.name,options:u.options,storage:u.storage},d=ee(u,"addAttributes",f);if(!d)return;const p=d();Object.entries(p).forEach(([g,y])=>{const b={...l,...y};typeof b?.default=="function"&&(b.default=b.default()),b?.isRequired&&b?.default===void 0&&delete b.default,e.push({type:u.name,name:g,attribute:b})})}),e}function mt(i,e){if(typeof i=="string"){if(!e.nodes[i])throw Error(`There is no node type named '${i}'. Maybe you forgot to add the extension?`);return e.nodes[i]}return i}function Rt(...i){return i.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([o,l])=>{if(!r[o]){r[o]=l;return}if(o==="class"){const f=l?String(l).split(" "):[],d=r[o]?r[o].split(" "):[],p=f.filter(g=>!d.includes(g));r[o]=[...d,...p].join(" ")}else if(o==="style"){const f=l?l.split(";").map(g=>g.trim()).filter(Boolean):[],d=r[o]?r[o].split(";").map(g=>g.trim()).filter(Boolean):[],p=new Map;d.forEach(g=>{const[y,b]=g.split(":").map(S=>S.trim());p.set(y,b)}),f.forEach(g=>{const[y,b]=g.split(":").map(S=>S.trim());p.set(y,b)}),r[o]=Array.from(p.entries()).map(([g,y])=>`${g}: ${y}`).join("; ")}else r[o]=l}),r},{})}function nh(i,e){return e.filter(t=>t.type===i.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(i.attrs)||{}:{[t.name]:i.attrs[t.name]}).reduce((t,r)=>Rt(t,r),{})}function Wv(i){return typeof i=="function"}function Se(i,e=void 0,...t){return Wv(i)?e?i.bind(e)(...t):i(...t):i}function rA(i={}){return Object.keys(i).length===0&&i.constructor===Object}function sA(i){return typeof i!="string"?i:i.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(i):i==="true"?!0:i==="false"?!1:i}function K0(i,e){return"style"in i?i:{...i,getAttrs:t=>{const r=i.getAttrs?i.getAttrs(t):i.attrs;if(r===!1)return!1;const o=e.reduce((l,u)=>{const f=u.attribute.parseHTML?u.attribute.parseHTML(t):sA(t.getAttribute(u.name));return f==null?l:{...l,[u.name]:f}},{});return{...r,...o}}}}function X0(i){return Object.fromEntries(Object.entries(i).filter(([e,t])=>e==="attrs"&&rA(t)?!1:t!=null))}function oA(i,e){var t;const r=Zv(i),{nodeExtensions:o,markExtensions:l}=Vu(i),u=(t=o.find(p=>ee(p,"topNode")))===null||t===void 0?void 0:t.name,f=Object.fromEntries(o.map(p=>{const g=r.filter(B=>B.type===p.name),y={name:p.name,options:p.options,storage:p.storage,editor:e},b=i.reduce((B,J)=>{const K=ee(J,"extendNodeSchema",y);return{...B,...K?K(p):{}}},{}),S=X0({...b,content:Se(ee(p,"content",y)),marks:Se(ee(p,"marks",y)),group:Se(ee(p,"group",y)),inline:Se(ee(p,"inline",y)),atom:Se(ee(p,"atom",y)),selectable:Se(ee(p,"selectable",y)),draggable:Se(ee(p,"draggable",y)),code:Se(ee(p,"code",y)),whitespace:Se(ee(p,"whitespace",y)),linebreakReplacement:Se(ee(p,"linebreakReplacement",y)),defining:Se(ee(p,"defining",y)),isolating:Se(ee(p,"isolating",y)),attrs:Object.fromEntries(g.map(B=>{var J;return[B.name,{default:(J=B?.attribute)===null||J===void 0?void 0:J.default}]}))}),x=Se(ee(p,"parseHTML",y));x&&(S.parseDOM=x.map(B=>K0(B,g)));const T=ee(p,"renderHTML",y);T&&(S.toDOM=B=>T({node:B,HTMLAttributes:nh(B,g)}));const E=ee(p,"renderText",y);return E&&(S.toText=E),[p.name,S]})),d=Object.fromEntries(l.map(p=>{const g=r.filter(E=>E.type===p.name),y={name:p.name,options:p.options,storage:p.storage,editor:e},b=i.reduce((E,B)=>{const J=ee(B,"extendMarkSchema",y);return{...E,...J?J(p):{}}},{}),S=X0({...b,inclusive:Se(ee(p,"inclusive",y)),excludes:Se(ee(p,"excludes",y)),group:Se(ee(p,"group",y)),spanning:Se(ee(p,"spanning",y)),code:Se(ee(p,"code",y)),attrs:Object.fromEntries(g.map(E=>{var B;return[E.name,{default:(B=E?.attribute)===null||B===void 0?void 0:B.default}]}))}),x=Se(ee(p,"parseHTML",y));x&&(S.parseDOM=x.map(E=>K0(E,g)));const T=ee(p,"renderHTML",y);return T&&(S.toDOM=E=>T({mark:E,HTMLAttributes:nh(E,g)})),[p.name,S]}));return new Ib({topNode:u,nodes:f,marks:d})}function kd(i,e){return e.nodes[i]||e.marks[i]||null}function J0(i,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===i.name):e}function Nh(i,e){const t=Fr.fromSchema(e).serializeFragment(i),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(t),o.innerHTML}const lA=(i,e=500)=>{let t="";const r=i.parentOffset;return i.parent.nodesBetween(Math.max(0,r-e),r,(o,l,u,f)=>{var d,p;const g=((p=(d=o.type.spec).toText)===null||p===void 0?void 0:p.call(d,{node:o,pos:l,parent:u,index:f}))||o.textContent||"%leaf%";t+=o.isAtom&&!o.isText?g:g.slice(0,Math.max(0,r-l))}),t};function Rh(i){return Object.prototype.toString.call(i)==="[object RegExp]"}class ju{constructor(e){this.find=e.find,this.handler=e.handler}}const aA=(i,e)=>{if(Rh(e))return e.exec(i);const t=e(i);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=i,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function tu(i){var e;const{editor:t,from:r,to:o,text:l,rules:u,plugin:f}=i,{view:d}=t;if(d.composing)return!1;const p=d.state.doc.resolve(r);if(p.parent.type.spec.code||!((e=p.nodeBefore||p.nodeAfter)===null||e===void 0)&&e.marks.find(b=>b.type.spec.code))return!1;let g=!1;const y=lA(p)+l;return u.forEach(b=>{if(g)return;const S=aA(y,b.find);if(!S)return;const x=d.state.tr,T=qu({state:d.state,transaction:x}),E={from:r-(S[0].length-l.length),to:o},{commands:B,chain:J,can:K}=new Lu({editor:t,state:T});b.handler({state:T,range:E,match:S,commands:B,chain:J,can:K})===null||!x.steps.length||(x.setMeta(f,{transform:x,from:r,to:o,text:l}),d.dispatch(x),g=!0)}),g}function uA(i){const{editor:e,rules:t}=i,r=new Xt({state:{init(){return null},apply(o,l,u){const f=o.getMeta(r);if(f)return f;const d=o.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:g}=d;typeof g=="string"?g=g:g=Nh(H.from(g),u.schema);const{from:y}=d,b=y+g.length;tu({editor:e,from:y,to:b,text:g,rules:t,plugin:r})}),o.selectionSet||o.docChanged?null:l}},props:{handleTextInput(o,l,u,f){return tu({editor:e,from:l,to:u,text:f,rules:t,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:l}=o.state.selection;l&&tu({editor:e,from:l.pos,to:l.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(o,l){if(l.key!=="Enter")return!1;const{$cursor:u}=o.state.selection;return u?tu({editor:e,from:u.pos,to:u.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function cA(i){return Object.prototype.toString.call(i).slice(8,-1)}function nu(i){return cA(i)!=="Object"?!1:i.constructor===Object&&Object.getPrototypeOf(i)===Object.prototype}function Uu(i,e){const t={...i};return nu(i)&&nu(e)&&Object.keys(e).forEach(r=>{nu(e[r])&&nu(i[r])?t[r]=Uu(i[r],e[r]):t[r]=e[r]}),t}class sr{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Se(ee(this,"addOptions",{name:this.name}))),this.storage=Se(ee(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new sr(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Uu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new sr(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Se(ee(t,"addOptions",{name:t.name})),t.storage=Se(ee(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const u=o.marks();if(!!!u.find(p=>p?.type.name===t.name))return!1;const d=u.find(p=>p?.type.name===t.name);return d&&r.removeStoredMark(d),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function fA(i){return typeof i=="number"}class dA{constructor(e){this.find=e.find,this.handler=e.handler}}const hA=(i,e,t)=>{if(Rh(e))return[...i.matchAll(e)];const r=e(i,t);return r?r.map(o=>{const l=[o.text];return l.index=o.index,l.input=i,l.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),l.push(o.replaceWith)),l}):[]};function pA(i){const{editor:e,state:t,from:r,to:o,rule:l,pasteEvent:u,dropEvent:f}=i,{commands:d,chain:p,can:g}=new Lu({editor:e,state:t}),y=[];return t.doc.nodesBetween(r,o,(S,x)=>{if(!S.isTextblock||S.type.spec.code)return;const T=Math.max(r,x),E=Math.min(o,x+S.content.size),B=S.textBetween(T-x,E-x,void 0,"");hA(B,l.find,u).forEach(K=>{if(K.index===void 0)return;const ne=T+K.index+1,Y=ne+K[0].length,te={from:t.tr.mapping.map(ne),to:t.tr.mapping.map(Y)},de=l.handler({state:t,range:te,match:K,commands:d,chain:p,can:g,pasteEvent:u,dropEvent:f});y.push(de)})}),y.every(S=>S!==null)}let iu=null;const mA=i=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",i),t};function gA(i){const{editor:e,rules:t}=i;let r=null,o=!1,l=!1,u=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,f;try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}const d=({state:g,from:y,to:b,rule:S,pasteEvt:x})=>{const T=g.tr,E=qu({state:g,transaction:T});if(!(!pA({editor:e,state:E,from:Math.max(y-1,0),to:b.b-1,rule:S,pasteEvent:x,dropEvent:f})||!T.steps.length)){try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}return u=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,T}};return t.map(g=>new Xt({view(y){const b=x=>{var T;r=!((T=y.dom.parentElement)===null||T===void 0)&&T.contains(x.target)?y.dom.parentElement:null,r&&(iu=e)},S=()=>{iu&&(iu=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",S),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",S)}}},props:{handleDOMEvents:{drop:(y,b)=>{if(l=r===y.dom.parentElement,f=b,!l){const S=iu;S&&setTimeout(()=>{const x=S.state.selection;x&&S.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(y,b)=>{var S;const x=(S=b.clipboardData)===null||S===void 0?void 0:S.getData("text/html");return u=b,o=!!x?.includes("data-pm-slice"),!1}}},appendTransaction:(y,b,S)=>{const x=y[0],T=x.getMeta("uiEvent")==="paste"&&!o,E=x.getMeta("uiEvent")==="drop"&&!l,B=x.getMeta("applyPasteRules"),J=!!B;if(!T&&!E&&!J)return;if(J){let{text:Y}=B;typeof Y=="string"?Y=Y:Y=Nh(H.from(Y),S.schema);const{from:te}=B,de=te+Y.length,ge=mA(Y);return d({rule:g,state:S,from:te,to:{b:de},pasteEvt:ge})}const K=b.doc.content.findDiffStart(S.doc.content),ne=b.doc.content.findDiffEnd(S.doc.content);if(!(!fA(K)||!ne||K===ne.b))return d({rule:g,state:S,from:K,to:ne,pasteEvt:u})}}))}function yA(i){const e=i.filter((t,r)=>i.indexOf(t)!==r);return Array.from(new Set(e))}class Gs{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Gs.resolve(e),this.schema=oA(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Gs.sort(Gs.flatten(e)),r=yA(t.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},o=ee(t,"addExtensions",r);return o?[t,...this.flatten(o())]:t}).flat(10)}static sort(e){return e.sort((r,o)=>{const l=ee(r,"priority")||100,u=ee(o,"priority")||100;return l>u?-1:l<u?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:kd(t.name,this.schema)},o=ee(t,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,t=Gs.sort([...this.extensions].reverse()),r=[],o=[],l=t.map(u=>{const f={name:u.name,options:u.options,storage:u.storage,editor:e,type:kd(u.name,this.schema)},d=[],p=ee(u,"addKeyboardShortcuts",f);let g={};if(u.type==="mark"&&ee(u,"exitable",f)&&(g.ArrowRight=()=>sr.handleExit({editor:e,mark:u})),p){const T=Object.fromEntries(Object.entries(p()).map(([E,B])=>[E,()=>B({editor:e})]));g={...g,...T}}const y=qC(g);d.push(y);const b=ee(u,"addInputRules",f);J0(u,e.options.enableInputRules)&&b&&r.push(...b());const S=ee(u,"addPasteRules",f);J0(u,e.options.enablePasteRules)&&S&&o.push(...S());const x=ee(u,"addProseMirrorPlugins",f);if(x){const T=x();d.push(...T)}return d}).flat();return[uA({editor:e,rules:r}),...gA({editor:e,rules:o}),...l]}get attributes(){return Zv(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Vu(this.extensions);return Object.fromEntries(t.filter(r=>!!ee(r,"addNodeView")).map(r=>{const o=this.attributes.filter(d=>d.type===r.name),l={name:r.name,options:r.options,storage:r.storage,editor:e,type:mt(r.name,this.schema)},u=ee(r,"addNodeView",l);if(!u)return[];const f=(d,p,g,y,b)=>{const S=nh(d,o);return u()({node:d,view:p,getPos:g,decorations:y,innerDecorations:b,editor:e,extension:r,HTMLAttributes:S})};return[r.name,f]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:kd(e.name,this.schema)};e.type==="mark"&&(!((t=Se(ee(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const o=ee(e,"onBeforeCreate",r),l=ee(e,"onCreate",r),u=ee(e,"onUpdate",r),f=ee(e,"onSelectionUpdate",r),d=ee(e,"onTransaction",r),p=ee(e,"onFocus",r),g=ee(e,"onBlur",r),y=ee(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),l&&this.editor.on("create",l),u&&this.editor.on("update",u),f&&this.editor.on("selectionUpdate",f),d&&this.editor.on("transaction",d),p&&this.editor.on("focus",p),g&&this.editor.on("blur",g),y&&this.editor.on("destroy",y)})}}class Ut{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Se(ee(this,"addOptions",{name:this.name}))),this.storage=Se(ee(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ut(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Uu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Ut({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Se(ee(t,"addOptions",{name:t.name})),t.storage=Se(ee(t,"addStorage",{name:t.name,options:t.options})),t}}function e1(i,e,t){const{from:r,to:o}=e,{blockSeparator:l=`

`,textSerializers:u={}}=t||{};let f="";return i.nodesBetween(r,o,(d,p,g,y)=>{var b;d.isBlock&&p>r&&(f+=l);const S=u?.[d.type.name];if(S)return g&&(f+=S({node:d,pos:p,parent:g,index:y,range:e})),!1;d.isText&&(f+=(b=d?.text)===null||b===void 0?void 0:b.slice(Math.max(r,p)-p,o-p))}),f}function t1(i){return Object.fromEntries(Object.entries(i.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const bA=Ut.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Xt({key:new Fn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:i}=this,{state:e,schema:t}=i,{doc:r,selection:o}=e,{ranges:l}=o,u=Math.min(...l.map(g=>g.$from.pos)),f=Math.max(...l.map(g=>g.$to.pos)),d=t1(t);return e1(r,{from:u,to:f},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),vA=()=>({editor:i,view:e})=>(requestAnimationFrame(()=>{var t;i.isDestroyed||(e.dom.blur(),(t=window?.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),SA=(i=!1)=>({commands:e})=>e.setContent("",i),xA=()=>({state:i,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:o}=r;return t&&o.forEach(({$from:l,$to:u})=>{i.doc.nodesBetween(l.pos,u.pos,(f,d)=>{if(f.type.isText)return;const{doc:p,mapping:g}=e,y=p.resolve(g.map(d)),b=p.resolve(g.map(d+f.nodeSize)),S=y.blockRange(b);if(!S)return;const x=io(S);if(f.type.isTextblock){const{defaultType:T}=y.parent.contentMatchAt(y.index());e.setNodeMarkup(S.start,T)}(x||x===0)&&e.lift(S,x)})}),!0},wA=i=>e=>i(e),TA=()=>({state:i,dispatch:e})=>Fv(i,e),MA=(i,e)=>({editor:t,tr:r})=>{const{state:o}=t,l=o.doc.slice(i.from,i.to);r.deleteRange(i.from,i.to);const u=r.mapping.map(e);return r.insert(u,l.content),r.setSelection(new ce(r.doc.resolve(u-1))),!0},EA=()=>({tr:i,dispatch:e})=>{const{selection:t}=i,r=t.$anchor.node();if(r.content.size>0)return!1;const o=i.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===r.type){if(e){const f=o.before(l),d=o.after(l);i.delete(f,d).scrollIntoView()}return!0}return!1},CA=i=>({tr:e,state:t,dispatch:r})=>{const o=mt(i,t.schema),l=e.selection.$anchor;for(let u=l.depth;u>0;u-=1)if(l.node(u).type===o){if(r){const d=l.before(u),p=l.after(u);e.delete(d,p).scrollIntoView()}return!0}return!1},AA=i=>({tr:e,dispatch:t})=>{const{from:r,to:o}=i;return t&&e.delete(r,o),!0},kA=()=>({state:i,dispatch:e})=>Eh(i,e),OA=()=>({commands:i})=>i.keyboardShortcut("Enter"),NA=()=>({state:i,dispatch:e})=>IC(i,e);function Eu(i,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>t.strict?e[o]===i[o]:Rh(e[o])?e[o].test(i[o]):e[o]===i[o]):!0}function n1(i,e,t={}){return i.find(r=>r.type===e&&Eu(Object.fromEntries(Object.keys(t).map(o=>[o,r.attrs[o]])),t))}function Z0(i,e,t={}){return!!n1(i,e,t)}function Dh(i,e,t){var r;if(!i||!e)return;let o=i.parent.childAfter(i.parentOffset);if((!o.node||!o.node.marks.some(g=>g.type===e))&&(o=i.parent.childBefore(i.parentOffset)),!o.node||!o.node.marks.some(g=>g.type===e)||(t=t||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!n1([...o.node.marks],e,t)))return;let u=o.index,f=i.start()+o.offset,d=u+1,p=f+o.node.nodeSize;for(;u>0&&Z0([...i.parent.child(u-1).marks],e,t);)u-=1,f-=i.parent.child(u).nodeSize;for(;d<i.parent.childCount&&Z0([...i.parent.child(d).marks],e,t);)p+=i.parent.child(d).nodeSize,d+=1;return{from:f,to:p}}function ar(i,e){if(typeof i=="string"){if(!e.marks[i])throw Error(`There is no mark type named '${i}'. Maybe you forgot to add the extension?`);return e.marks[i]}return i}const RA=(i,e={})=>({tr:t,state:r,dispatch:o})=>{const l=ar(i,r.schema),{doc:u,selection:f}=t,{$from:d,from:p,to:g}=f;if(o){const y=Dh(d,l,e);if(y&&y.from<=p&&y.to>=g){const b=ce.create(u,y.from,y.to);t.setSelection(b)}}return!0},DA=i=>e=>{const t=typeof i=="function"?i(e):i;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function i1(i){return i instanceof ce}function Lr(i=0,e=0,t=0){return Math.min(Math.max(i,e),t)}function r1(i,e=null){if(!e)return null;const t=me.atStart(i),r=me.atEnd(i);if(e==="start"||e===!0)return t;if(e==="end")return r;const o=t.from,l=r.to;return e==="all"?ce.create(i,Lr(0,o,l),Lr(i.content.size,o,l)):ce.create(i,Lr(e,o,l),Lr(e,o,l))}function _A(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function _h(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const zA=(i=null,e={})=>({editor:t,view:r,tr:o,dispatch:l})=>{e={scrollIntoView:!0,...e};const u=()=>{(_h()||_A())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&i===null||i===!1)return!0;if(l&&i===null&&!i1(t.state.selection))return u(),!0;const f=r1(o.doc,i)||t.state.selection,d=t.state.selection.eq(f);return l&&(d||o.setSelection(f),d&&o.storedMarks&&o.setStoredMarks(o.storedMarks),u()),!0},BA=(i,e)=>t=>i.every((r,o)=>e(r,{...t,index:o})),qA=(i,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},i,e),s1=i=>{const e=i.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?i.removeChild(r):r.nodeType===1&&s1(r)}return i};function ru(i){const e=`<body>${i}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return s1(t)}function Cu(i,e,t){if(i instanceof Wi||i instanceof H)return i;t={slice:!0,parseOptions:{},...t};const r=typeof i=="object"&&i!==null,o=typeof i=="string";if(r)try{if(Array.isArray(i)&&i.length>0)return H.fromArray(i.map(f=>e.nodeFromJSON(f)));const u=e.nodeFromJSON(i);return t.errorOnInvalidContent&&u.check(),u}catch(l){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:l});return console.warn("[tiptap warn]: Invalid content.","Passed value:",i,"Error:",l),Cu("",e,t)}if(o){if(t.errorOnInvalidContent){let u=!1,f="";const d=new Ib({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:p=>(u=!0,f=typeof p=="string"?p:p.outerHTML,null)}]}})});if(t.slice?er.fromSchema(d).parseSlice(ru(i),t.parseOptions):er.fromSchema(d).parse(ru(i),t.parseOptions),t.errorOnInvalidContent&&u)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${f}`)})}const l=er.fromSchema(e);return t.slice?l.parseSlice(ru(i),t.parseOptions).content:l.parse(ru(i),t.parseOptions)}return Cu("",e,t)}function LA(i,e,t){const r=i.steps.length-1;if(r<e)return;const o=i.steps[r];if(!(o instanceof dt||o instanceof ht))return;const l=i.mapping.maps[r];let u=0;l.forEach((f,d,p,g)=>{u===0&&(u=g)}),i.setSelection(me.near(i.doc.resolve(u),t))}const VA=i=>!("type"in i),jA=(i,e,t)=>({tr:r,dispatch:o,editor:l})=>{var u;if(o){t={parseOptions:l.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let f;try{f=Cu(e,l.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(u=t.errorOnInvalidContent)!==null&&u!==void 0?u:l.options.enableContentCheck})}catch(x){return l.emit("contentError",{editor:l,error:x,disableCollaboration:()=>{l.storage.collaboration&&(l.storage.collaboration.isDisabled=!0)}}),!1}let{from:d,to:p}=typeof i=="number"?{from:i,to:i}:{from:i.from,to:i.to},g=!0,y=!0;if((VA(f)?f:[f]).forEach(x=>{x.check(),g=g?x.isText&&x.marks.length===0:!1,y=y?x.isBlock:!1}),d===p&&y){const{parent:x}=r.doc.resolve(d);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(d-=1,p+=1)}let S;if(g){if(Array.isArray(e))S=e.map(x=>x.text||"").join("");else if(e instanceof H){let x="";e.forEach(T=>{T.text&&(x+=T.text)}),S=x}else typeof e=="object"&&e&&e.text?S=e.text:S=e;r.insertText(S,d,p)}else S=f,r.replaceWith(d,p,S);t.updateSelection&&LA(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:S}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:S})}return!0},UA=()=>({state:i,dispatch:e})=>jC(i,e),HA=()=>({state:i,dispatch:e})=>UC(i,e),IA=()=>({state:i,dispatch:e})=>Hv(i,e),$A=()=>({state:i,dispatch:e})=>Yv(i,e),QA=()=>({state:i,dispatch:e,tr:t})=>{try{const r=Nu(i.doc,i.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},YA=()=>({state:i,dispatch:e,tr:t})=>{try{const r=Nu(i.doc,i.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},PA=()=>({state:i,dispatch:e})=>LC(i,e),GA=()=>({state:i,dispatch:e})=>VC(i,e);function o1(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function FA(i){const e=i.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,o,l,u;for(let f=0;f<e.length-1;f+=1){const d=e[f];if(/^(cmd|meta|m)$/i.test(d))u=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))l=!0;else if(/^mod$/i.test(d))_h()||o1()?u=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(t=`Alt-${t}`),o&&(t=`Ctrl-${t}`),u&&(t=`Meta-${t}`),l&&(t=`Shift-${t}`),t}const KA=i=>({editor:e,view:t,tr:r,dispatch:o})=>{const l=FA(i).split(/-(?!$)/),u=l.find(p=>!["Alt","Ctrl","Meta","Shift"].includes(p)),f=new KeyboardEvent("keydown",{key:u==="Space"?" ":u,altKey:l.includes("Alt"),ctrlKey:l.includes("Ctrl"),metaKey:l.includes("Meta"),shiftKey:l.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",p=>p(t,f))});return d?.steps.forEach(p=>{const g=p.map(r.mapping);g&&o&&r.maybeStep(g)}),!0};function El(i,e,t={}){const{from:r,to:o,empty:l}=i.selection,u=e?mt(e,i.schema):null,f=[];i.doc.nodesBetween(r,o,(y,b)=>{if(y.isText)return;const S=Math.max(r,b),x=Math.min(o,b+y.nodeSize);f.push({node:y,from:S,to:x})});const d=o-r,p=f.filter(y=>u?u.name===y.node.type.name:!0).filter(y=>Eu(y.node.attrs,t,{strict:!1}));return l?!!p.length:p.reduce((y,b)=>y+b.to-b.from,0)>=d}const XA=(i,e={})=>({state:t,dispatch:r})=>{const o=mt(i,t.schema);return El(t,o,e)?HC(t,r):!1},JA=()=>({state:i,dispatch:e})=>Kv(i,e),ZA=i=>({state:e,dispatch:t})=>{const r=mt(i,e.schema);return WC(r)(e,t)},WA=()=>({state:i,dispatch:e})=>Gv(i,e);function Hu(i,e){return e.nodes[i]?"node":e.marks[i]?"mark":null}function W0(i,e){const t=typeof e=="string"?[e]:e;return Object.keys(i).reduce((r,o)=>(t.includes(o)||(r[o]=i[o]),r),{})}const ek=(i,e)=>({tr:t,state:r,dispatch:o})=>{let l=null,u=null;const f=Hu(typeof i=="string"?i:i.name,r.schema);return f?(f==="node"&&(l=mt(i,r.schema)),f==="mark"&&(u=ar(i,r.schema)),o&&t.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(p,g)=>{l&&l===p.type&&t.setNodeMarkup(g,void 0,W0(p.attrs,e)),u&&p.marks.length&&p.marks.forEach(y=>{u===y.type&&t.addMark(g,g+p.nodeSize,u.create(W0(y.attrs,e)))})})}),!0):!1},tk=()=>({tr:i,dispatch:e})=>(e&&i.scrollIntoView(),!0),nk=()=>({tr:i,dispatch:e})=>{if(e){const t=new ln(i.doc);i.setSelection(t)}return!0},ik=()=>({state:i,dispatch:e})=>$v(i,e),rk=()=>({state:i,dispatch:e})=>Pv(i,e),sk=()=>({state:i,dispatch:e})=>YC(i,e),ok=()=>({state:i,dispatch:e})=>FC(i,e),lk=()=>({state:i,dispatch:e})=>GC(i,e);function ih(i,e,t={},r={}){return Cu(i,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const ak=(i,e=!1,t={},r={})=>({editor:o,tr:l,dispatch:u,commands:f})=>{var d,p;const{doc:g}=l;if(t.preserveWhitespace!=="full"){const y=ih(i,o.schema,t,{errorOnInvalidContent:(d=r.errorOnInvalidContent)!==null&&d!==void 0?d:o.options.enableContentCheck});return u&&l.replaceWith(0,g.content.size,y).setMeta("preventUpdate",!e),!0}return u&&l.setMeta("preventUpdate",!e),f.insertContentAt({from:0,to:g.content.size},i,{parseOptions:t,errorOnInvalidContent:(p=r.errorOnInvalidContent)!==null&&p!==void 0?p:o.options.enableContentCheck})};function l1(i,e){const t=ar(e,i.schema),{from:r,to:o,empty:l}=i.selection,u=[];l?(i.storedMarks&&u.push(...i.storedMarks),u.push(...i.selection.$head.marks())):i.doc.nodesBetween(r,o,d=>{u.push(...d.marks)});const f=u.find(d=>d.type.name===t.name);return f?{...f.attrs}:{}}function uk(i){for(let e=0;e<i.edgeCount;e+=1){const{type:t}=i.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function ck(i,e){for(let t=i.depth;t>0;t-=1){const r=i.node(t);if(e(r))return{pos:t>0?i.before(t):0,start:i.start(t),depth:t,node:r}}}function zh(i){return e=>ck(e.$from,i)}function fk(i,e){const t={from:0,to:i.content.size};return e1(i,t,e)}function dk(i,e){const t=mt(e,i.schema),{from:r,to:o}=i.selection,l=[];i.doc.nodesBetween(r,o,f=>{l.push(f)});const u=l.reverse().find(f=>f.type.name===t.name);return u?{...u.attrs}:{}}function hk(i,e){const t=Hu(typeof e=="string"?e:e.name,i.schema);return t==="node"?dk(i,e):t==="mark"?l1(i,e):{}}function a1(i,e,t){const r=[];return i===e?t.resolve(i).marks().forEach(o=>{const l=t.resolve(i),u=Dh(l,o.type);u&&r.push({mark:o,...u})}):t.nodesBetween(i,e,(o,l)=>{!o||o?.nodeSize===void 0||r.push(...o.marks.map(u=>({from:l,to:l+o.nodeSize,mark:u})))}),r}function uu(i,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const o=i.find(l=>l.type===e&&l.name===r);return o?o.attribute.keepOnSplit:!1}))}function rh(i,e,t={}){const{empty:r,ranges:o}=i.selection,l=e?ar(e,i.schema):null;if(r)return!!(i.storedMarks||i.selection.$from.marks()).filter(y=>l?l.name===y.type.name:!0).find(y=>Eu(y.attrs,t,{strict:!1}));let u=0;const f=[];if(o.forEach(({$from:y,$to:b})=>{const S=y.pos,x=b.pos;i.doc.nodesBetween(S,x,(T,E)=>{if(!T.isText&&!T.marks.length)return;const B=Math.max(S,E),J=Math.min(x,E+T.nodeSize),K=J-B;u+=K,f.push(...T.marks.map(ne=>({mark:ne,from:B,to:J})))})}),u===0)return!1;const d=f.filter(y=>l?l.name===y.mark.type.name:!0).filter(y=>Eu(y.mark.attrs,t,{strict:!1})).reduce((y,b)=>y+b.to-b.from,0),p=f.filter(y=>l?y.mark.type!==l&&y.mark.type.excludes(l):!0).reduce((y,b)=>y+b.to-b.from,0);return(d>0?d+p:d)>=u}function pk(i,e,t={}){if(!e)return El(i,null,t)||rh(i,null,t);const r=Hu(e,i.schema);return r==="node"?El(i,e,t):r==="mark"?rh(i,e,t):!1}function eb(i,e){const{nodeExtensions:t}=Vu(e),r=t.find(u=>u.name===i);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},l=Se(ee(r,"group",o));return typeof l!="string"?!1:l.split(" ").includes("list")}function Bh(i,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(i.type.name==="hardBreak")return!0;if(i.isText)return/^\s*$/m.test((r=i.text)!==null&&r!==void 0?r:"")}if(i.isText)return!i.text;if(i.isAtom||i.isLeaf)return!1;if(i.content.childCount===0)return!0;if(e){let o=!0;return i.content.forEach(l=>{o!==!1&&(Bh(l,{ignoreWhitespace:t,checkChildren:e})||(o=!1))}),o}return!1}function mk(i){return i instanceof oe}function gk(i,e,t){var r;const{selection:o}=e;let l=null;if(i1(o)&&(l=o.$cursor),l){const f=(r=i.storedMarks)!==null&&r!==void 0?r:l.marks();return!!t.isInSet(f)||!f.some(d=>d.type.excludes(t))}const{ranges:u}=o;return u.some(({$from:f,$to:d})=>{let p=f.depth===0?i.doc.inlineContent&&i.doc.type.allowsMarkType(t):!1;return i.doc.nodesBetween(f.pos,d.pos,(g,y,b)=>{if(p)return!1;if(g.isInline){const S=!b||b.type.allowsMarkType(t),x=!!t.isInSet(g.marks)||!g.marks.some(T=>T.type.excludes(t));p=S&&x}return!p}),p})}const yk=(i,e={})=>({tr:t,state:r,dispatch:o})=>{const{selection:l}=t,{empty:u,ranges:f}=l,d=ar(i,r.schema);if(o)if(u){const p=l1(r,d);t.addStoredMark(d.create({...p,...e}))}else f.forEach(p=>{const g=p.$from.pos,y=p.$to.pos;r.doc.nodesBetween(g,y,(b,S)=>{const x=Math.max(S,g),T=Math.min(S+b.nodeSize,y);b.marks.find(B=>B.type===d)?b.marks.forEach(B=>{d===B.type&&t.addMark(x,T,d.create({...B.attrs,...e}))}):t.addMark(x,T,d.create(e))})});return gk(r,t,d)},bk=(i,e)=>({tr:t})=>(t.setMeta(i,e),!0),vk=(i,e={})=>({state:t,dispatch:r,chain:o})=>{const l=mt(i,t.schema);let u;return t.selection.$anchor.sameParent(t.selection.$head)&&(u=t.selection.$anchor.parent.attrs),l.isTextblock?o().command(({commands:f})=>F0(l,{...u,...e})(t)?!0:f.clearNodes()).command(({state:f})=>F0(l,{...u,...e})(f,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Sk=i=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,o=Lr(i,0,r.content.size),l=oe.create(r,o);e.setSelection(l)}return!0},xk=i=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:o,to:l}=typeof i=="number"?{from:i,to:i}:i,u=ce.atStart(r).from,f=ce.atEnd(r).to,d=Lr(o,u,f),p=Lr(l,u,f),g=ce.create(r,d,p);e.setSelection(g)}return!0},wk=i=>({state:e,dispatch:t})=>{const r=mt(i,e.schema);return nA(r)(e,t)};function tb(i,e){const t=i.storedMarks||i.selection.$to.parentOffset&&i.selection.$from.marks();if(t){const r=t.filter(o=>e?.includes(o.type.name));i.tr.ensureMarks(r)}}const Tk=({keepMarks:i=!0}={})=>({tr:e,state:t,dispatch:r,editor:o})=>{const{selection:l,doc:u}=e,{$from:f,$to:d}=l,p=o.extensionManager.attributes,g=uu(p,f.node().type.name,f.node().attrs);if(l instanceof oe&&l.node.isBlock)return!f.parentOffset||!yi(u,f.pos)?!1:(r&&(i&&tb(t,o.extensionManager.splittableMarks),e.split(f.pos).scrollIntoView()),!0);if(!f.parent.isBlock)return!1;const y=d.parentOffset===d.parent.content.size,b=f.depth===0?void 0:uk(f.node(-1).contentMatchAt(f.indexAfter(-1)));let S=y&&b?[{type:b,attrs:g}]:void 0,x=yi(e.doc,e.mapping.map(f.pos),1,S);if(!S&&!x&&yi(e.doc,e.mapping.map(f.pos),1,b?[{type:b}]:void 0)&&(x=!0,S=b?[{type:b,attrs:g}]:void 0),r){if(x&&(l instanceof ce&&e.deleteSelection(),e.split(e.mapping.map(f.pos),1,S),b&&!y&&!f.parentOffset&&f.parent.type!==b)){const T=e.mapping.map(f.before()),E=e.doc.resolve(T);f.node(-1).canReplaceWith(E.index(),E.index()+1,b)&&e.setNodeMarkup(e.mapping.map(f.before()),b)}i&&tb(t,o.extensionManager.splittableMarks),e.scrollIntoView()}return x},Mk=(i,e={})=>({tr:t,state:r,dispatch:o,editor:l})=>{var u;const f=mt(i,r.schema),{$from:d,$to:p}=r.selection,g=r.selection.node;if(g&&g.isBlock||d.depth<2||!d.sameParent(p))return!1;const y=d.node(-1);if(y.type!==f)return!1;const b=l.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==f||d.index(-2)!==d.node(-2).childCount-1)return!1;if(o){let B=H.empty;const J=d.index(-1)?1:d.index(-2)?2:3;for(let ge=d.depth-J;ge>=d.depth-3;ge-=1)B=H.from(d.node(ge).copy(B));const K=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,ne={...uu(b,d.node().type.name,d.node().attrs),...e},Y=((u=f.contentMatch.defaultType)===null||u===void 0?void 0:u.createAndFill(ne))||void 0;B=B.append(H.from(f.createAndFill(null,Y)||void 0));const te=d.before(d.depth-(J-1));t.replace(te,d.after(-K),new F(B,4-J,0));let de=-1;t.doc.nodesBetween(te,t.doc.content.size,(ge,se)=>{if(de>-1)return!1;ge.isTextblock&&ge.content.size===0&&(de=se+1)}),de>-1&&t.setSelection(ce.near(t.doc.resolve(de))),t.scrollIntoView()}return!0}const S=p.pos===d.end()?y.contentMatchAt(0).defaultType:null,x={...uu(b,y.type.name,y.attrs),...e},T={...uu(b,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,p.pos);const E=S?[{type:f,attrs:x},{type:S,attrs:T}]:[{type:f,attrs:x}];if(!yi(t.doc,d.pos,2))return!1;if(o){const{selection:B,storedMarks:J}=r,{splittableMarks:K}=l.extensionManager,ne=J||B.$to.parentOffset&&B.$from.marks();if(t.split(d.pos,2,E).scrollIntoView(),!ne||!o)return!0;const Y=ne.filter(te=>K.includes(te.type.name));t.ensureMarks(Y)}return!0},Od=(i,e)=>{const t=zh(u=>u.type===e)(i.selection);if(!t)return!0;const r=i.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const o=i.doc.nodeAt(r);return t.node.type===o?.type&&or(i.doc,t.pos)&&i.join(t.pos),!0},Nd=(i,e)=>{const t=zh(u=>u.type===e)(i.selection);if(!t)return!0;const r=i.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const o=i.doc.nodeAt(r);return t.node.type===o?.type&&or(i.doc,r)&&i.join(r),!0},Ek=(i,e,t,r={})=>({editor:o,tr:l,state:u,dispatch:f,chain:d,commands:p,can:g})=>{const{extensions:y,splittableMarks:b}=o.extensionManager,S=mt(i,u.schema),x=mt(e,u.schema),{selection:T,storedMarks:E}=u,{$from:B,$to:J}=T,K=B.blockRange(J),ne=E||T.$to.parentOffset&&T.$from.marks();if(!K)return!1;const Y=zh(te=>eb(te.type.name,y))(T);if(K.depth>=1&&Y&&K.depth-Y.depth<=1){if(Y.node.type===S)return p.liftListItem(x);if(eb(Y.node.type.name,y)&&S.validContent(Y.node.content)&&f)return d().command(()=>(l.setNodeMarkup(Y.pos,S),!0)).command(()=>Od(l,S)).command(()=>Nd(l,S)).run()}return!t||!ne||!f?d().command(()=>g().wrapInList(S,r)?!0:p.clearNodes()).wrapInList(S,r).command(()=>Od(l,S)).command(()=>Nd(l,S)).run():d().command(()=>{const te=g().wrapInList(S,r),de=ne.filter(ge=>b.includes(ge.type.name));return l.ensureMarks(de),te?!0:p.clearNodes()}).wrapInList(S,r).command(()=>Od(l,S)).command(()=>Nd(l,S)).run()},Ck=(i,e={},t={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:l=!1}=t,u=ar(i,r.schema);return rh(r,u,e)?o.unsetMark(u,{extendEmptyMarkRange:l}):o.setMark(u,e)},Ak=(i,e,t={})=>({state:r,commands:o})=>{const l=mt(i,r.schema),u=mt(e,r.schema),f=El(r,l,t);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),f?o.setNode(u,d):o.setNode(l,{...d,...t})},kk=(i,e={})=>({state:t,commands:r})=>{const o=mt(i,t.schema);return El(t,o,e)?r.lift(o):r.wrapIn(o,e)},Ok=()=>({state:i,dispatch:e})=>{const t=i.plugins;for(let r=0;r<t.length;r+=1){const o=t[r];let l;if(o.spec.isInputRules&&(l=o.getState(i))){if(e){const u=i.tr,f=l.transform;for(let d=f.steps.length-1;d>=0;d-=1)u.step(f.steps[d].invert(f.docs[d]));if(l.text){const d=u.doc.resolve(l.from).marks();u.replaceWith(l.from,l.to,i.schema.text(l.text,d))}else u.delete(l.from,l.to)}return!0}}return!1},Nk=()=>({tr:i,dispatch:e})=>{const{selection:t}=i,{empty:r,ranges:o}=t;return r||e&&o.forEach(l=>{i.removeMark(l.$from.pos,l.$to.pos)}),!0},Rk=(i,e={})=>({tr:t,state:r,dispatch:o})=>{var l;const{extendEmptyMarkRange:u=!1}=e,{selection:f}=t,d=ar(i,r.schema),{$from:p,empty:g,ranges:y}=f;if(!o)return!0;if(g&&u){let{from:b,to:S}=f;const x=(l=p.marks().find(E=>E.type===d))===null||l===void 0?void 0:l.attrs,T=Dh(p,d,x);T&&(b=T.from,S=T.to),t.removeMark(b,S,d)}else y.forEach(b=>{t.removeMark(b.$from.pos,b.$to.pos,d)});return t.removeStoredMark(d),!0},Dk=(i,e={})=>({tr:t,state:r,dispatch:o})=>{let l=null,u=null;const f=Hu(typeof i=="string"?i:i.name,r.schema);return f?(f==="node"&&(l=mt(i,r.schema)),f==="mark"&&(u=ar(i,r.schema)),o&&t.selection.ranges.forEach(d=>{const p=d.$from.pos,g=d.$to.pos;let y,b,S,x;t.selection.empty?r.doc.nodesBetween(p,g,(T,E)=>{l&&l===T.type&&(S=Math.max(E,p),x=Math.min(E+T.nodeSize,g),y=E,b=T)}):r.doc.nodesBetween(p,g,(T,E)=>{E<p&&l&&l===T.type&&(S=Math.max(E,p),x=Math.min(E+T.nodeSize,g),y=E,b=T),E>=p&&E<=g&&(l&&l===T.type&&t.setNodeMarkup(E,void 0,{...T.attrs,...e}),u&&T.marks.length&&T.marks.forEach(B=>{if(u===B.type){const J=Math.max(E,p),K=Math.min(E+T.nodeSize,g);t.addMark(J,K,u.create({...B.attrs,...e}))}}))}),b&&(y!==void 0&&t.setNodeMarkup(y,void 0,{...b.attrs,...e}),u&&b.marks.length&&b.marks.forEach(T=>{u===T.type&&t.addMark(S,x,u.create({...T.attrs,...e}))}))}),!0):!1},_k=(i,e={})=>({state:t,dispatch:r})=>{const o=mt(i,t.schema);return KC(o,e)(t,r)},zk=(i,e={})=>({state:t,dispatch:r})=>{const o=mt(i,t.schema);return XC(o,e)(t,r)};var Bk=Object.freeze({__proto__:null,blur:vA,clearContent:SA,clearNodes:xA,command:wA,createParagraphNear:TA,cut:MA,deleteCurrentNode:EA,deleteNode:CA,deleteRange:AA,deleteSelection:kA,enter:OA,exitCode:NA,extendMarkRange:RA,first:DA,focus:zA,forEach:BA,insertContent:qA,insertContentAt:jA,joinBackward:IA,joinDown:HA,joinForward:$A,joinItemBackward:QA,joinItemForward:YA,joinTextblockBackward:PA,joinTextblockForward:GA,joinUp:UA,keyboardShortcut:KA,lift:XA,liftEmptyBlock:JA,liftListItem:ZA,newlineInCode:WA,resetAttributes:ek,scrollIntoView:tk,selectAll:nk,selectNodeBackward:ik,selectNodeForward:rk,selectParentNode:sk,selectTextblockEnd:ok,selectTextblockStart:lk,setContent:ak,setMark:yk,setMeta:bk,setNode:vk,setNodeSelection:Sk,setTextSelection:xk,sinkListItem:wk,splitBlock:Tk,splitListItem:Mk,toggleList:Ek,toggleMark:Ck,toggleNode:Ak,toggleWrap:kk,undoInputRule:Ok,unsetAllMarks:Nk,unsetMark:Rk,updateAttributes:Dk,wrapIn:_k,wrapInList:zk});const qk=Ut.create({name:"commands",addCommands(){return{...Bk}}}),Lk=Ut.create({name:"drop",addProseMirrorPlugins(){return[new Xt({key:new Fn("tiptapDrop"),props:{handleDrop:(i,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),Vk=Ut.create({name:"editable",addProseMirrorPlugins(){return[new Xt({key:new Fn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),jk=new Fn("focusEvents"),Uk=Ut.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:i}=this;return[new Xt({key:jk,props:{handleDOMEvents:{focus:(e,t)=>{i.isFocused=!0;const r=i.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{i.isFocused=!1;const r=i.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Hk=Ut.create({name:"keymap",addKeyboardShortcuts(){const i=()=>this.editor.commands.first(({commands:u})=>[()=>u.undoInputRule(),()=>u.command(({tr:f})=>{const{selection:d,doc:p}=f,{empty:g,$anchor:y}=d,{pos:b,parent:S}=y,x=y.parent.isTextblock&&b>0?f.doc.resolve(b-1):y,T=x.parent.type.spec.isolating,E=y.pos-y.parentOffset,B=T&&x.parent.childCount===1?E===y.pos:me.atStart(p).from===b;return!g||!S.type.isTextblock||S.textContent.length||!B||B&&y.parent.type.name==="paragraph"?!1:u.clearNodes()}),()=>u.deleteSelection(),()=>u.joinBackward(),()=>u.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:u})=>[()=>u.deleteSelection(),()=>u.deleteCurrentNode(),()=>u.joinForward(),()=>u.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:u})=>[()=>u.newlineInCode(),()=>u.createParagraphNear(),()=>u.liftEmptyBlock(),()=>u.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:i,"Mod-Backspace":i,"Shift-Backspace":i,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},l={...r,"Ctrl-h":i,"Alt-Backspace":i,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return _h()||o1()?l:o},addProseMirrorPlugins(){return[new Xt({key:new Fn("clearDocument"),appendTransaction:(i,e,t)=>{if(i.some(T=>T.getMeta("composition")))return;const r=i.some(T=>T.docChanged)&&!e.doc.eq(t.doc),o=i.some(T=>T.getMeta("preventClearDocument"));if(!r||o)return;const{empty:l,from:u,to:f}=e.selection,d=me.atStart(e.doc).from,p=me.atEnd(e.doc).to;if(l||!(u===d&&f===p)||!Bh(t.doc))return;const b=t.tr,S=qu({state:t,transaction:b}),{commands:x}=new Lu({editor:this.editor,state:S});if(x.clearNodes(),!!b.steps.length)return b}})]}}),Ik=Ut.create({name:"paste",addProseMirrorPlugins(){return[new Xt({key:new Fn("tiptapPaste"),props:{handlePaste:(i,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),$k=Ut.create({name:"tabindex",addProseMirrorPlugins(){return[new Xt({key:new Fn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class _r{get name(){return this.node.type.name}constructor(e,t,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new _r(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new _r(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new _r(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const o=t.isBlock&&!t.isTextblock,l=t.isAtom&&!t.isText,u=this.pos+r+(l?0:1),f=this.resolvedPos.doc.resolve(u);if(!o&&f.depth<=this.depth)return;const d=new _r(f,this.editor,o,o?t:null);o&&(d.actualDepth=this.depth+1),e.push(new _r(f,this.editor,o,o?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(t).length>0){const l=o.node.attrs,u=Object.keys(t);for(let f=0;f<u.length;f+=1){const d=u[f];if(l[d]!==t[d])break}}else r=o;o=o.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const l=Object.keys(t);return this.children.forEach(u=>{r&&o.length>0||(u.node.type.name===e&&l.every(d=>t[d]===u.node.attrs[d])&&o.push(u),!(r&&o.length>0)&&(o=o.concat(u.querySelectorAll(e,t,r))))}),o}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const Qk=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Yk(i,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=i,document.getElementsByTagName("head")[0].appendChild(o),o}class Pk extends iA{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:o})=>this.options.onDrop(t,r,o)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Yk(Qk,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=Wv(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(l=>{const u=typeof l=="string"?`${l}$`:l.key;r=r.filter(f=>!f.key.startsWith(u))}),t.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,t;const o=[...this.options.enableCoreExtensions?[Vk,bA.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),qk,Uk,Hk,$k,Lk,Ik].filter(l=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[l.name]!==!1:!0):[],...this.options.extensions].filter(l=>["extension","node","mark"].includes(l?.type));this.extensionManager=new Gs(o,this)}createCommandManager(){this.commandManager=new Lu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=ih(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(u){if(!(u instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(u.message))throw u;this.emit("contentError",{editor:this,error:u,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(f=>f.name!=="collaboration"),this.createExtensionManager()}}),t=ih(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=r1(t,this.options.autofocus);this.view=new AC(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Ps.create({doc:t,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(u=>{var f;return(f=this.capturedTransaction)===null||f===void 0?void 0:f.step(u)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),l=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),l&&this.emit("blur",{editor:this,event:l.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return hk(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,o=typeof e=="string"?t:e;return pk(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Nh(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return fk(this.state.doc,{blockSeparator:t,textSerializers:{...t1(this.schema),...r}})}get isEmpty(){return Bh(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new _r(t,this)}get $doc(){return this.$pos(0)}}function to(i){return new ju({find:i.find,handler:({state:e,range:t,match:r})=>{const o=Se(i.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:l}=e,u=r[r.length-1],f=r[0];if(u){const d=f.search(/\S/),p=t.from+f.indexOf(u),g=p+u.length;if(a1(t.from,t.to,e.doc).filter(S=>S.mark.type.excluded.find(T=>T===i.type&&T!==S.mark.type)).filter(S=>S.to>p).length)return null;g<t.to&&l.delete(g,t.to),p>t.from&&l.delete(t.from+d,p);const b=t.from+d+u.length;l.addMark(t.from+d,b,i.type.create(o||{})),l.removeStoredMark(i.type)}}})}function u1(i){return new ju({find:i.find,handler:({state:e,range:t,match:r})=>{const o=Se(i.getAttributes,void 0,r)||{},{tr:l}=e,u=t.from;let f=t.to;const d=i.type.create(o);if(r[1]){const p=r[0].lastIndexOf(r[1]);let g=u+p;g>f?g=f:f=g+r[1].length;const y=r[0][r[0].length-1];l.insertText(y,u+r[0].length-1),l.replaceWith(g,f,d)}else if(r[0]){const p=i.type.isInline?u:u-1;l.insert(p,i.type.create(o)).delete(l.mapping.map(u),l.mapping.map(f))}l.scrollIntoView()}})}function sh(i){return new ju({find:i.find,handler:({state:e,range:t,match:r})=>{const o=e.doc.resolve(t.from),l=Se(i.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),i.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,i.type,l)}})}function Cl(i){return new ju({find:i.find,handler:({state:e,range:t,match:r,chain:o})=>{const l=Se(i.getAttributes,void 0,r)||{},u=e.tr.delete(t.from,t.to),d=u.doc.resolve(t.from).blockRange(),p=d&&ph(d,i.type,l);if(!p)return null;if(u.wrap(d,p),i.keepMarks&&i.editor){const{selection:y,storedMarks:b}=e,{splittableMarks:S}=i.editor.extensionManager,x=b||y.$to.parentOffset&&y.$from.marks();if(x){const T=x.filter(E=>S.includes(E.type.name));u.ensureMarks(T)}}if(i.keepAttributes){const y=i.type.name==="bulletList"||i.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(y,l).run()}const g=u.doc.resolve(t.from-1).nodeBefore;g&&g.type===i.type&&or(u.doc,t.from-1)&&(!i.joinPredicate||i.joinPredicate(r,g))&&u.join(t.from-1)}})}class Ht{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Se(ee(this,"addOptions",{name:this.name}))),this.storage=Se(ee(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ht(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Uu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Ht(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Se(ee(t,"addOptions",{name:t.name})),t.storage=Se(ee(t,"addStorage",{name:t.name,options:t.options})),t}}function no(i){return new dA({find:i.find,handler:({state:e,range:t,match:r,pasteEvent:o})=>{const l=Se(i.getAttributes,void 0,r,o);if(l===!1||l===null)return null;const{tr:u}=e,f=r[r.length-1],d=r[0];let p=t.to;if(f){const g=d.search(/\S/),y=t.from+d.indexOf(f),b=y+f.length;if(a1(t.from,t.to,e.doc).filter(x=>x.mark.type.excluded.find(E=>E===i.type&&E!==x.mark.type)).filter(x=>x.to>y).length)return null;b<t.to&&u.delete(b,t.to),y>t.from&&u.delete(t.from+g,y),p=t.from+g+f.length,u.addMark(t.from+g,p,i.type.create(l||{})),u.removeStoredMark(i.type)}}})}function Gk(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var c1={exports:{}},Rd={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb;function Fk(){if(nb)return Rd;nb=1;var i=U;function e(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var t=typeof Object.is=="function"?Object.is:e,r=i.useState,o=i.useEffect,l=i.useLayoutEffect,u=i.useDebugValue;function f(y,b){var S=b(),x=r({inst:{value:S,getSnapshot:b}}),T=x[0].inst,E=x[1];return l(function(){T.value=S,T.getSnapshot=b,d(T)&&E({inst:T})},[y,S,b]),o(function(){return d(T)&&E({inst:T}),y(function(){d(T)&&E({inst:T})})},[y]),u(S),S}function d(y){var b=y.getSnapshot;y=y.value;try{var S=b();return!t(y,S)}catch{return!0}}function p(y,b){return b()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return Rd.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:g,Rd}c1.exports=Fk();var qh=c1.exports;const Kk=(...i)=>e=>{i.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},Xk=({contentComponent:i})=>{const e=qh.useSyncExternalStore(i.subscribe,i.getSnapshot,i.getServerSnapshot);return U.createElement(U.Fragment,null,Object.values(e))};function Jk(){const i=new Set;let e={};return{subscribe(t){return i.add(t),()=>{i.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:ku.createPortal(r.reactElement,r.element,t)},i.forEach(o=>o())},removeRenderer(t){const r={...e};delete r[t],e=r,i.forEach(o=>o())}}}class Zk extends U.Component{constructor(e){var t;super(e),this.editorContentRef=U.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=Jk(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return U.createElement(U.Fragment,null,U.createElement("div",{ref:Kk(t,this.editorContentRef),...r}),e?.contentComponent&&U.createElement(Xk,{contentComponent:e.contentComponent}))}}const Wk=G.forwardRef((i,e)=>{const t=U.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[i.editor]);return U.createElement(Zk,{key:t,innerRef:e,...i})}),eO=U.memo(Wk);var tO=function i(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,o,l;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(!i(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;for(o of e.entries())if(!i(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(l=Object.keys(e),r=l.length,r!==Object.keys(t).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,l[o]))return!1;for(o=r;o--!==0;){var u=l[o];if(!(u==="_owner"&&e.$$typeof)&&!i(e[u],t[u]))return!1}return!0}return e!==e&&t!==t},nO=Gk(tO),f1={exports:{}},Dd={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib;function iO(){if(ib)return Dd;ib=1;var i=U,e=qh;function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var r=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,l=i.useRef,u=i.useEffect,f=i.useMemo,d=i.useDebugValue;return Dd.useSyncExternalStoreWithSelector=function(p,g,y,b,S){var x=l(null);if(x.current===null){var T={hasValue:!1,value:null};x.current=T}else T=x.current;x=f(function(){function B(te){if(!J){if(J=!0,K=te,te=b(te),S!==void 0&&T.hasValue){var de=T.value;if(S(de,te))return ne=de}return ne=te}if(de=ne,r(K,te))return de;var ge=b(te);return S!==void 0&&S(de,ge)?de:(K=te,ne=ge)}var J=!1,K,ne,Y=y===void 0?null:y;return[function(){return B(g())},Y===null?void 0:function(){return B(Y())}]},[g,y,b,S]);var E=o(p,x[0],x[1]);return u(function(){T.hasValue=!0,T.value=E},[E]),d(E),E},Dd}f1.exports=iO();var rO=f1.exports;const sO=typeof window<"u"?G.useLayoutEffect:G.useEffect;class oO{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(o=>o())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function lO(i){var e;const[t]=G.useState(()=>new oO(i.editor)),r=rO.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,i.selector,(e=i.equalityFn)!==null&&e!==void 0?e:nO);return sO(()=>t.watch(i.editor),[i.editor,t]),G.useDebugValue(r),r}const aO=!1,oh=typeof window>"u",uO=oh||!!(typeof window<"u"&&window.next);class Lh{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?oh||uO?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var o,l;return(l=(o=this.options.current).onBeforeCreate)===null||l===void 0?void 0:l.call(o,...r)},onBlur:(...r)=>{var o,l;return(l=(o=this.options.current).onBlur)===null||l===void 0?void 0:l.call(o,...r)},onCreate:(...r)=>{var o,l;return(l=(o=this.options.current).onCreate)===null||l===void 0?void 0:l.call(o,...r)},onDestroy:(...r)=>{var o,l;return(l=(o=this.options.current).onDestroy)===null||l===void 0?void 0:l.call(o,...r)},onFocus:(...r)=>{var o,l;return(l=(o=this.options.current).onFocus)===null||l===void 0?void 0:l.call(o,...r)},onSelectionUpdate:(...r)=>{var o,l;return(l=(o=this.options.current).onSelectionUpdate)===null||l===void 0?void 0:l.call(o,...r)},onTransaction:(...r)=>{var o,l;return(l=(o=this.options.current).onTransaction)===null||l===void 0?void 0:l.call(o,...r)},onUpdate:(...r)=>{var o,l;return(l=(o=this.options.current).onUpdate)===null||l===void 0?void 0:l.call(o,...r)},onContentError:(...r)=>{var o,l;return(l=(o=this.options.current).onContentError)===null||l===void 0?void 0:l.call(o,...r)},onDrop:(...r)=>{var o,l;return(l=(o=this.options.current).onDrop)===null||l===void 0?void 0:l.call(o,...r)},onPaste:(...r)=>{var o,l;return(l=(o=this.options.current).onPaste)===null||l===void 0?void 0:l.call(o,...r)}};return new Pk(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((o,l)=>{var u;return o===((u=t.extensions)===null||u===void 0?void 0:u[l])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Lh.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,o)=>r===e[o]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function cO(i={},e=[]){const t=G.useRef(i);t.current=i;const[r]=G.useState(()=>new Lh(t)),o=qh.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return G.useDebugValue(o),G.useEffect(r.onRender(e)),lO({editor:o,selector:({transactionNumber:l})=>i.shouldRerenderOnTransaction===!1?null:i.immediatelyRender&&l===0?0:l+1}),o}const fO=G.createContext({editor:null});fO.Consumer;const dO=G.createContext({onDragStart:void 0}),hO=()=>G.useContext(dO);U.forwardRef((i,e)=>{const{onDragStart:t}=hO(),r=i.as||"div";return U.createElement(r,{...i,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...i.style}})});const pO=/^\s*>\s$/,mO=Ht.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:i}){return["blockquote",Rt(this.options.HTMLAttributes,i),0]},addCommands(){return{setBlockquote:()=>({commands:i})=>i.wrapIn(this.name),toggleBlockquote:()=>({commands:i})=>i.toggleWrap(this.name),unsetBlockquote:()=>({commands:i})=>i.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Cl({find:pO,type:this.type})]}}),gO=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,yO=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,bO=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,vO=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,SO=sr.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:i=>i.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:i=>i.type.name===this.name},{style:"font-weight",getAttrs:i=>/^(bold(er)?|[5-9]\d{2,})$/.test(i)&&null}]},renderHTML({HTMLAttributes:i}){return["strong",Rt(this.options.HTMLAttributes,i),0]},addCommands(){return{setBold:()=>({commands:i})=>i.setMark(this.name),toggleBold:()=>({commands:i})=>i.toggleMark(this.name),unsetBold:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[to({find:gO,type:this.type}),to({find:bO,type:this.type})]},addPasteRules(){return[no({find:yO,type:this.type}),no({find:vO,type:this.type})]}}),xO="listItem",rb="textStyle",sb=/^\s*([-+*])\s$/,wO=Ht.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:i}){return["ul",Rt(this.options.HTMLAttributes,i),0]},addCommands(){return{toggleBulletList:()=>({commands:i,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(xO,this.editor.getAttributes(rb)).run():i.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let i=Cl({find:sb,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(i=Cl({find:sb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(rb),editor:this.editor})),[i]}}),TO=/(^|[^`])`([^`]+)`(?!`)/,MO=/(^|[^`])`([^`]+)`(?!`)/g,EO=sr.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:i}){return["code",Rt(this.options.HTMLAttributes,i),0]},addCommands(){return{setCode:()=>({commands:i})=>i.setMark(this.name),toggleCode:()=>({commands:i})=>i.toggleMark(this.name),unsetCode:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[to({find:TO,type:this.type})]},addPasteRules(){return[no({find:MO,type:this.type})]}}),CO=/^```([a-z]+)?[\s\n]$/,AO=/^~~~([a-z]+)?[\s\n]$/,kO=Ht.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:i=>{var e;const{languageClassPrefix:t}=this.options,l=[...((e=i.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(u=>u.startsWith(t)).map(u=>u.replace(t,""))[0];return l||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:i,HTMLAttributes:e}){return["pre",Rt(this.options.HTMLAttributes,e),["code",{class:i.attrs.language?this.options.languageClassPrefix+i.attrs.language:null},0]]},addCommands(){return{setCodeBlock:i=>({commands:e})=>e.setNode(this.name,i),toggleCodeBlock:i=>({commands:e})=>e.toggleNode(this.name,"paragraph",i)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:i,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!i||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:i})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=i,{selection:t}=e,{$from:r,empty:o}=t;if(!o||r.parent.type!==this.type)return!1;const l=r.parentOffset===r.parent.nodeSize-2,u=r.parent.textContent.endsWith(`

`);return!l||!u?!1:i.chain().command(({tr:f})=>(f.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:i})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=i,{selection:t,doc:r}=e,{$from:o,empty:l}=t;if(!l||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const f=o.after();return f===void 0?!1:r.nodeAt(f)?i.commands.command(({tr:p})=>(p.setSelection(me.near(r.resolve(f))),!0)):i.commands.exitCode()}}},addInputRules(){return[sh({find:CO,type:this.type,getAttributes:i=>({language:i[1]})}),sh({find:AO,type:this.type,getAttributes:i=>({language:i[1]})})]},addProseMirrorPlugins(){return[new Xt({key:new Fn("codeBlockVSCodeHandler"),props:{handlePaste:(i,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,l=o?.mode;if(!t||!l)return!1;const{tr:u,schema:f}=i.state,d=f.text(t.replace(/\r\n?/g,`
`));return u.replaceSelectionWith(this.type.create({language:l},d)),u.selection.$from.parent.type!==this.type&&u.setSelection(ce.near(u.doc.resolve(Math.max(0,u.selection.from-2)))),u.setMeta("paste",!0),i.dispatch(u),!0}}})]}}),OO=Ht.create({name:"doc",topNode:!0,content:"block+"});function NO(i={}){return new Xt({view(e){return new RO(e,i)}})}class RO{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let l=u=>{this[o](u)};return e.dom.addEventListener(o,l),{name:o,handler:l}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,o=this.editorView.dom,l=o.getBoundingClientRect(),u=l.width/o.offsetWidth,f=l.height/o.offsetHeight;if(t){let y=e.nodeBefore,b=e.nodeAfter;if(y||b){let S=this.editorView.nodeDOM(this.cursorPos-(y?y.nodeSize:0));if(S){let x=S.getBoundingClientRect(),T=y?x.bottom:x.top;y&&b&&(T=(T+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let E=this.width/2*f;r={left:x.left,right:x.right,top:T-E,bottom:T+E}}}}if(!r){let y=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*u;r={left:y.left-b,right:y.left+b,top:y.top,bottom:y.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let p,g;if(!d||d==document.body&&getComputedStyle(d).position=="static")p=-pageXOffset,g=-pageYOffset;else{let y=d.getBoundingClientRect(),b=y.width/d.offsetWidth,S=y.height/d.offsetHeight;p=y.left-d.scrollLeft*b,g=y.top-d.scrollTop*S}this.element.style.left=(r.left-p)/u+"px",this.element.style.top=(r.top-g)/f+"px",this.element.style.width=(r.right-r.left)/u+"px",this.element.style.height=(r.bottom-r.top)/f+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),o=r&&r.type.spec.disableDropCursor,l=typeof o=="function"?o(this.editorView,t,e):o;if(t&&!l){let u=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let f=Wb(this.editorView.state.doc,u,this.editorView.dragging.slice);f!=null&&(u=f)}this.setCursor(u),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const DO=Ut.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[NO(this.options)]}});class Ye extends me{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Ye.valid(r)?new Ye(r):me.near(r)}content(){return F.empty}eq(e){return e instanceof Ye&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ye(e.resolve(t.pos))}getBookmark(){return new Vh(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!_O(e)||!zO(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Ye.valid(e))return e;let o=e.pos,l=null;for(let u=e.depth;;u--){let f=e.node(u);if(t>0?e.indexAfter(u)<f.childCount:e.index(u)>0){l=f.child(t>0?e.indexAfter(u):e.index(u)-1);break}else if(u==0)return null;o+=t;let d=e.doc.resolve(o);if(Ye.valid(d))return d}for(;;){let u=t>0?l.firstChild:l.lastChild;if(!u){if(l.isAtom&&!l.isText&&!oe.isSelectable(l)){e=e.doc.resolve(o+l.nodeSize*t),r=!1;continue e}break}l=u,o+=t;let f=e.doc.resolve(o);if(Ye.valid(f))return f}return null}}}Ye.prototype.visible=!1;Ye.findFrom=Ye.findGapCursorFrom;me.jsonID("gapcursor",Ye);class Vh{constructor(e){this.pos=e}map(e){return new Vh(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Ye.valid(t)?new Ye(t):me.near(t)}}function _O(i){for(let e=i.depth;e>=0;e--){let t=i.index(e),r=i.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function zO(i){for(let e=i.depth;e>=0;e--){let t=i.indexAfter(e),r=i.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function BO(){return new Xt({props:{decorations:jO,createSelectionBetween(i,e,t){return e.pos==t.pos&&Ye.valid(t)?new Ye(t):null},handleClick:LO,handleKeyDown:qO,handleDOMEvents:{beforeinput:VO}}})}const qO=jv({ArrowLeft:su("horiz",-1),ArrowRight:su("horiz",1),ArrowUp:su("vert",-1),ArrowDown:su("vert",1)});function su(i,e){const t=i=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,l){let u=r.selection,f=e>0?u.$to:u.$from,d=u.empty;if(u instanceof ce){if(!l.endOfTextblock(t)||f.depth==0)return!1;d=!1,f=r.doc.resolve(e>0?f.after():f.before())}let p=Ye.findGapCursorFrom(f,e,d);return p?(o&&o(r.tr.setSelection(new Ye(p))),!0):!1}}function LO(i,e,t){if(!i||!i.editable)return!1;let r=i.state.doc.resolve(e);if(!Ye.valid(r))return!1;let o=i.posAtCoords({left:t.clientX,top:t.clientY});return o&&o.inside>-1&&oe.isSelectable(i.state.doc.nodeAt(o.inside))?!1:(i.dispatch(i.state.tr.setSelection(new Ye(r))),!0)}function VO(i,e){if(e.inputType!="insertCompositionText"||!(i.state.selection instanceof Ye))return!1;let{$from:t}=i.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(i.state.schema.nodes.text);if(!r)return!1;let o=H.empty;for(let u=r.length-1;u>=0;u--)o=H.from(r[u].createAndFill(null,o));let l=i.state.tr.replace(t.pos,t.pos,new F(o,0,0));return l.setSelection(ce.near(l.doc.resolve(t.pos+1))),i.dispatch(l),!1}function jO(i){if(!(i.selection instanceof Ye))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ot.create(i.doc,[Tn.widget(i.selection.head,e,{key:"gapcursor"})])}const UO=Ut.create({name:"gapCursor",addProseMirrorPlugins(){return[BO()]},extendNodeSchema(i){var e;const t={name:i.name,options:i.options,storage:i.storage};return{allowGapCursor:(e=Se(ee(i,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),HO=Ht.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:i}){return["br",Rt(this.options.HTMLAttributes,i)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:i,chain:e,state:t,editor:r})=>i.first([()=>i.exitCode(),()=>i.command(()=>{const{selection:o,storedMarks:l}=t;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:u}=this.options,{splittableMarks:f}=r.extensionManager,d=l||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:p,dispatch:g})=>{if(g&&d&&u){const y=d.filter(b=>f.includes(b.type.name));p.ensureMarks(y)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),IO=Ht.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(i=>({tag:`h${i}`,attrs:{level:i}}))},renderHTML({node:i,HTMLAttributes:e}){return[`h${this.options.levels.includes(i.attrs.level)?i.attrs.level:this.options.levels[0]}`,Rt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:i=>({commands:e})=>this.options.levels.includes(i.level)?e.setNode(this.name,i):!1,toggleHeading:i=>({commands:e})=>this.options.levels.includes(i.level)?e.toggleNode(this.name,"paragraph",i):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((i,e)=>({...i,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(i=>sh({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${i}})\\s$`),type:this.type,getAttributes:{level:i}}))}});var Au=200,pt=function(){};pt.prototype.append=function(e){return e.length?(e=pt.from(e),!this.length&&e||e.length<Au&&this.leafAppend(e)||this.length<Au&&e.leafPrepend(this)||this.appendInner(e)):this};pt.prototype.prepend=function(e){return e.length?pt.from(e).append(this):this};pt.prototype.appendInner=function(e){return new $O(this,e)};pt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?pt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};pt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};pt.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};pt.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(l,u){return o.push(e(l,u))},t,r),o};pt.from=function(e){return e instanceof pt?e:e&&e.length?new d1(e):pt.empty};var d1=function(i){function e(r){i.call(this),this.values=r}i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,l){return o==0&&l==this.length?this:new e(this.values.slice(o,l))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,l,u,f){for(var d=l;d<u;d++)if(o(this.values[d],f+d)===!1)return!1},e.prototype.forEachInvertedInner=function(o,l,u,f){for(var d=l-1;d>=u;d--)if(o(this.values[d],f+d)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=Au)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=Au)return new e(o.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(pt);pt.empty=new d1([]);var $O=function(i){function e(t,r){i.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,l,u){var f=this.left.length;if(o<f&&this.left.forEachInner(r,o,Math.min(l,f),u)===!1||l>f&&this.right.forEachInner(r,Math.max(o-f,0),Math.min(this.length,l)-f,u+f)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,l,u){var f=this.left.length;if(o>f&&this.right.forEachInvertedInner(r,o-f,Math.max(l,f)-f,u+f)===!1||l<f&&this.left.forEachInvertedInner(r,Math.min(o,f),l,u)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var l=this.left.length;return o<=l?this.left.slice(r,o):r>=l?this.right.slice(r-l,o-l):this.left.slice(r,l).append(this.right.slice(0,o-l))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(pt);const QO=500;class Nn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,l;t&&(o=this.remapping(r,this.items.length),l=o.maps.length);let u=e.tr,f,d,p=[],g=[];return this.items.forEach((y,b)=>{if(!y.step){o||(o=this.remapping(r,b+1),l=o.maps.length),l--,g.push(y);return}if(o){g.push(new $n(y.map));let S=y.step.map(o.slice(l)),x;S&&u.maybeStep(S).doc&&(x=u.mapping.maps[u.mapping.maps.length-1],p.push(new $n(x,void 0,void 0,p.length+g.length))),l--,x&&o.appendMap(x,l)}else u.maybeStep(y.step);if(y.selection)return f=o?y.selection.map(o.slice(l)):y.selection,d=new Nn(this.items.slice(0,r).append(g.reverse().concat(p)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:u,selection:f}}addTransform(e,t,r,o){let l=[],u=this.eventCount,f=this.items,d=!o&&f.length?f.get(f.length-1):null;for(let g=0;g<e.steps.length;g++){let y=e.steps[g].invert(e.docs[g]),b=new $n(e.mapping.maps[g],y,t),S;(S=d&&d.merge(b))&&(b=S,g?l.pop():f=f.slice(0,f.length-1)),l.push(b),t&&(u++,t=void 0),o||(d=b)}let p=u-r.depth;return p>PO&&(f=YO(f,p),u-=p),new Nn(f.append(l),u)}remapping(e,t){let r=new Sl;return this.items.forEach((o,l)=>{let u=o.mirrorOffset!=null&&l-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,u)},e,t),r}addMaps(e){return this.eventCount==0?this:new Nn(this.items.append(e.map(t=>new $n(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-t),l=e.mapping,u=e.steps.length,f=this.eventCount;this.items.forEach(b=>{b.selection&&f--},o);let d=t;this.items.forEach(b=>{let S=l.getMirror(--d);if(S==null)return;u=Math.min(u,S);let x=l.maps[S];if(b.step){let T=e.steps[S].invert(e.docs[S]),E=b.selection&&b.selection.map(l.slice(d+1,S));E&&f++,r.push(new $n(x,T,E))}else r.push(new $n(x))},o);let p=[];for(let b=t;b<u;b++)p.push(new $n(l.maps[b]));let g=this.items.slice(0,o).append(p).append(r),y=new Nn(g,f);return y.emptyItemCount()>QO&&(y=y.compress(this.items.length-r.length)),y}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,o=[],l=0;return this.items.forEach((u,f)=>{if(f>=e)o.push(u),u.selection&&l++;else if(u.step){let d=u.step.map(t.slice(r)),p=d&&d.getMap();if(r--,p&&t.appendMap(p,r),d){let g=u.selection&&u.selection.map(t.slice(r));g&&l++;let y=new $n(p.invert(),d,g),b,S=o.length-1;(b=o.length&&o[S].merge(y))?o[S]=b:o.push(y)}}else u.map&&r--},this.items.length,0),new Nn(pt.from(o.reverse()),l)}}Nn.empty=new Nn(pt.empty,0);function YO(i,e){let t;return i.forEach((r,o)=>{if(r.selection&&e--==0)return t=o,!1}),i.slice(t)}class $n{constructor(e,t,r,o){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new $n(t.getMap().invert(),t,this.selection)}}}class Gi{constructor(e,t,r,o,l){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=o,this.prevComposition=l}}const PO=20;function GO(i,e,t,r){let o=t.getMeta($r),l;if(o)return o.historyState;t.getMeta(XO)&&(i=new Gi(i.done,i.undone,null,0,-1));let u=t.getMeta("appendedTransaction");if(t.steps.length==0)return i;if(u&&u.getMeta($r))return u.getMeta($r).redo?new Gi(i.done.addTransform(t,void 0,r,cu(e)),i.undone,ob(t.mapping.maps),i.prevTime,i.prevComposition):new Gi(i.done,i.undone.addTransform(t,void 0,r,cu(e)),null,i.prevTime,i.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(u&&u.getMeta("addToHistory")===!1)){let f=t.getMeta("composition"),d=i.prevTime==0||!u&&i.prevComposition!=f&&(i.prevTime<(t.time||0)-r.newGroupDelay||!FO(t,i.prevRanges)),p=u?_d(i.prevRanges,t.mapping):ob(t.mapping.maps);return new Gi(i.done.addTransform(t,d?e.selection.getBookmark():void 0,r,cu(e)),Nn.empty,p,t.time,f??i.prevComposition)}else return(l=t.getMeta("rebased"))?new Gi(i.done.rebased(t,l),i.undone.rebased(t,l),_d(i.prevRanges,t.mapping),i.prevTime,i.prevComposition):new Gi(i.done.addMaps(t.mapping.maps),i.undone.addMaps(t.mapping.maps),_d(i.prevRanges,t.mapping),i.prevTime,i.prevComposition)}function FO(i,e){if(!e)return!1;if(!i.docChanged)return!0;let t=!1;return i.mapping.maps[0].forEach((r,o)=>{for(let l=0;l<e.length;l+=2)r<=e[l+1]&&o>=e[l]&&(t=!0)}),t}function ob(i){let e=[];for(let t=i.length-1;t>=0&&e.length==0;t--)i[t].forEach((r,o,l,u)=>e.push(l,u));return e}function _d(i,e){if(!i)return null;let t=[];for(let r=0;r<i.length;r+=2){let o=e.map(i[r],1),l=e.map(i[r+1],-1);o<=l&&t.push(o,l)}return t}function KO(i,e,t){let r=cu(e),o=$r.get(e).spec.config,l=(t?i.undone:i.done).popEvent(e,r);if(!l)return null;let u=l.selection.resolve(l.transform.doc),f=(t?i.done:i.undone).addTransform(l.transform,e.selection.getBookmark(),o,r),d=new Gi(t?f:l.remaining,t?l.remaining:f,null,0,-1);return l.transform.setSelection(u).setMeta($r,{redo:t,historyState:d})}let zd=!1,lb=null;function cu(i){let e=i.plugins;if(lb!=e){zd=!1,lb=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){zd=!0;break}}return zd}const $r=new Fn("history"),XO=new Fn("closeHistory");function JO(i={}){return i={depth:i.depth||100,newGroupDelay:i.newGroupDelay||500},new Xt({key:$r,state:{init(){return new Gi(Nn.empty,Nn.empty,null,0,-1)},apply(e,t,r){return GO(t,r,e,i)}},config:i,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,o=r=="historyUndo"?p1:r=="historyRedo"?m1:null;return o?(t.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function h1(i,e){return(t,r)=>{let o=$r.getState(t);if(!o||(i?o.undone:o.done).eventCount==0)return!1;if(r){let l=KO(o,t,i);l&&r(e?l.scrollIntoView():l)}return!0}}const p1=h1(!1,!0),m1=h1(!0,!0),ZO=Ut.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:i,dispatch:e})=>p1(i,e),redo:()=>({state:i,dispatch:e})=>m1(i,e)}},addProseMirrorPlugins(){return[JO(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),WO=Ht.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:i}){return["hr",Rt(this.options.HTMLAttributes,i)]},addCommands(){return{setHorizontalRule:()=>({chain:i,state:e})=>{const{selection:t}=e,{$from:r,$to:o}=t,l=i();return r.parentOffset===0?l.insertContentAt({from:Math.max(r.pos-1,0),to:o.pos},{type:this.name}):mk(t)?l.insertContentAt(o.pos,{type:this.name}):l.insertContent({type:this.name}),l.command(({tr:u,dispatch:f})=>{var d;if(f){const{$to:p}=u.selection,g=p.end();if(p.nodeAfter)p.nodeAfter.isTextblock?u.setSelection(ce.create(u.doc,p.pos+1)):p.nodeAfter.isBlock?u.setSelection(oe.create(u.doc,p.pos)):u.setSelection(ce.create(u.doc,p.pos));else{const y=(d=p.parent.type.contentMatch.defaultType)===null||d===void 0?void 0:d.create();y&&(u.insert(g,y),u.setSelection(ce.create(u.doc,g+1)))}u.scrollIntoView()}return!0}).run()}}},addInputRules(){return[u1({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),eN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,tN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,nN=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,iN=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,rN=sr.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:i=>i.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:i=>i.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:i}){return["em",Rt(this.options.HTMLAttributes,i),0]},addCommands(){return{setItalic:()=>({commands:i})=>i.setMark(this.name),toggleItalic:()=>({commands:i})=>i.toggleMark(this.name),unsetItalic:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[to({find:eN,type:this.type}),to({find:nN,type:this.type})]},addPasteRules(){return[no({find:tN,type:this.type}),no({find:iN,type:this.type})]}}),sN=Ht.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:i}){return["li",Rt(this.options.HTMLAttributes,i),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),oN="listItem",ab="textStyle",ub=/^(\d+)\.\s$/,lN=Ht.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:i=>i.hasAttribute("start")?parseInt(i.getAttribute("start")||"",10):1},type:{default:null,parseHTML:i=>i.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:i}){const{start:e,...t}=i;return e===1?["ol",Rt(this.options.HTMLAttributes,t),0]:["ol",Rt(this.options.HTMLAttributes,i),0]},addCommands(){return{toggleOrderedList:()=>({commands:i,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(oN,this.editor.getAttributes(ab)).run():i.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let i=Cl({find:ub,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(i=Cl({find:ub,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(ab)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[i]}}),aN=Ht.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:i}){return["p",Rt(this.options.HTMLAttributes,i),0]},addCommands(){return{setParagraph:()=>({commands:i})=>i.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),uN=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,cN=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,fN=sr.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:i=>i.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:i}){return["s",Rt(this.options.HTMLAttributes,i),0]},addCommands(){return{setStrike:()=>({commands:i})=>i.setMark(this.name),toggleStrike:()=>({commands:i})=>i.toggleMark(this.name),unsetStrike:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[to({find:uN,type:this.type})]},addPasteRules(){return[no({find:cN,type:this.type})]}}),dN=Ht.create({name:"text",group:"inline"}),hN=Ut.create({name:"starterKit",addExtensions(){const i=[];return this.options.bold!==!1&&i.push(SO.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(mO.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(wO.configure(this.options.bulletList)),this.options.code!==!1&&i.push(EO.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(kO.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(OO.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(DO.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(UO.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(HO.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(IO.configure(this.options.heading)),this.options.history!==!1&&i.push(ZO.configure(this.options.history)),this.options.horizontalRule!==!1&&i.push(WO.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(rN.configure(this.options.italic)),this.options.listItem!==!1&&i.push(sN.configure(this.options.listItem)),this.options.orderedList!==!1&&i.push(lN.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(aN.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(fN.configure(this.options.strike)),this.options.text!==!1&&i.push(dN.configure(this.options.text)),i}}),pN=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,mN=Ht.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:i}){return["img",Rt(this.options.HTMLAttributes,i)]},addCommands(){return{setImage:i=>({commands:e})=>e.insertContent({type:this.name,attrs:i})}},addInputRules(){return[u1({find:pN,type:this.type,getAttributes:i=>{const[,,e,t,r]=i;return{src:t,alt:e,title:r}}})]}});function gN(){const i=Dn(et.posts.list),e=gi(et.posts.create),t=gi(et.media.generateUploadUrl),r=Dn(et.profiles.getCurrentProfile),[o,l]=G.useState(""),[u,f]=G.useState(!1),d=cO({extensions:[hN,mN],content:""}),p=G.useCallback(async y=>{if(d)try{f(!0);const b=await t(),S=await fetch(b,{method:"POST",headers:{"Content-Type":y.type},body:y}),{storageId:x}=await S.json(),T=await fetch(`/api/storage/${x}`).then(E=>E.text());d.chain().focus().setImage({src:T}).run()}finally{f(!1)}},[d,t]);async function g(y){if(y.preventDefault(),!o||!d?.getJSON())return;const b=d.getJSON();await e({title:o,content:{type:"doc",content:b.content||[]}}),l(""),d.commands.setContent("")}return r?z.jsxs("div",{className:"max-w-4xl mx-auto",children:[z.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-8",children:"Memories"}),z.jsxs("form",{onSubmit:g,className:"mb-12 space-y-4",children:[z.jsx("input",{type:"text",value:o,onChange:y=>l(y.target.value),placeholder:"Title",className:"w-full p-2 border rounded"}),z.jsxs("div",{className:"border rounded p-2",children:[z.jsxs("div",{className:"border-b pb-2 mb-2 flex gap-2",children:[z.jsx("button",{type:"button",onClick:()=>d?.chain().focus().toggleBold().run(),className:`p-2 rounded ${d?.isActive("bold")?"bg-gray-200":""}`,children:"Bold"}),z.jsx("button",{type:"button",onClick:()=>d?.chain().focus().toggleItalic().run(),className:`p-2 rounded ${d?.isActive("italic")?"bg-gray-200":""}`,children:"Italic"}),z.jsxs("label",{className:"p-2 rounded bg-emerald-600 text-white cursor-pointer",children:["Add Image",z.jsx("input",{type:"file",accept:"image/*",onChange:y=>{const b=y.target.files?.[0];b&&p(b)},className:"hidden",disabled:u})]})]}),z.jsx(eO,{editor:d,className:"min-h-[200px] prose max-w-none"})]}),z.jsx("button",{type:"submit",className:"bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700",disabled:!o||!d?.getHTML(),children:"Share Memory"})]}),z.jsx("div",{className:"space-y-8",children:i?.map(y=>z.jsx(yN,{post:y},y._id))})]}):z.jsxs("div",{className:"max-w-4xl mx-auto",children:[z.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-8",children:"Memories"}),z.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-amber-800",children:"Please complete your profile to view and share memories."})]})}function yN({post:i}){const e=Dn(et.profiles.get,{userId:i.authorId});return z.jsxs("article",{className:"border rounded-lg p-6",children:[z.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[z.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-100 flex-shrink-0",children:e?.pictureUrl?z.jsx("img",{src:e.pictureUrl,alt:"Author",className:"w-full h-full object-cover"}):z.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"?"})}),z.jsxs("div",{children:[z.jsx("div",{className:"text-sm font-medium",children:e?.name??"Anonymous"}),z.jsxs("div",{className:"text-sm text-gray-600",children:[e?.relationship??"Friend"," of Emily"]}),z.jsx("time",{className:"text-sm text-gray-500",children:new Date(i.createdAt).toLocaleDateString()})]})]}),z.jsx("h2",{className:"text-2xl font-bold mb-2",children:i.title}),z.jsx("div",{className:"prose text-gray-600",dangerouslySetInnerHTML:{__html:i.content.content.map(t=>t.type==="paragraph"?`<p>${t.content?.map(r=>r.type==="text"?r.text:r.type==="image"?`<img src="${r.attrs.src}" alt="${r.attrs.alt||""}" />`:"").join("")}</p>`:"").join("")}}),z.jsx(Cb,{targetType:"post",targetId:i._id})]})}function bN(){return z.jsxs("div",{className:"max-w-3xl mx-auto prose",children:[z.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-8",children:"About Emerald Palace"}),z.jsx("p",{className:"text-lg text-gray-700",children:"Welcome to Emerald Palace, your personal space for capturing and sharing life's precious moments. This platform allows you to create a beautiful collection of photographs, videos, and written memories that you can cherish forever."}),z.jsx("p",{className:"text-lg text-gray-700",children:`Whether it's through our "Photographs & Videos" gallery or the "Memories" blog, every piece of content you share becomes part of your unique digital palace. Share your stories, preserve your memories, and build your legacy in this elegant digital space.`})]})}const vN=["Friend","Partner","Family","Parent","Former Partner","Colleague","School"];function SN(){const i=Dn(et.auth.loggedInUser),e=Dn(et.profiles.getCurrentProfile),t=gi(et.profiles.update),r=gi(et.profiles.updatePicture),o=gi(et.profiles.generateUploadUrl),[l,u]=G.useState(!1),[f,d]=G.useState(""),[p,g]=G.useState("Friend");if(G.useEffect(()=>{e&&(d(e.name),g(e.relationship))},[e]),!i)return null;async function y(S){if(S.preventDefault(),!!f)try{await t({name:f,relationship:p}),sl.success("Profile updated successfully!")}catch(x){sl.error("Failed to update profile"),console.error(x)}}async function b(S){const x=S.target.files?.[0];if(x)try{u(!0);const T=await o(),E=await fetch(T,{method:"POST",headers:{"Content-Type":x.type},body:x});if(!E.ok)throw new Error("Failed to upload image");const{storageId:B}=await E.json();await r({storageId:B}),sl.success("Profile picture updated!")}catch(T){sl.error("Failed to update profile picture"),console.error(T)}finally{u(!1)}}return z.jsxs("div",{className:"max-w-2xl mx-auto",children:[z.jsxs("div",{className:"mb-12 text-center",children:[z.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-4",children:e?.name?`Welcome, ${e.name}!`:"Complete Your Profile"}),z.jsx("p",{className:"text-gray-600",children:e?.name?`You're connected as a ${e.relationship.toLowerCase()} of Emily.`:"Tell us about yourself and your connection to Emily."})]}),z.jsxs("form",{onSubmit:y,className:"space-y-8",children:[z.jsxs("div",{children:[z.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Profile Picture"}),z.jsxs("div",{className:"flex items-center gap-6",children:[z.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gray-100",children:e?.pictureUrl?z.jsx("img",{src:e.pictureUrl,alt:"Profile",className:"w-full h-full object-cover"}):z.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No Image"})}),z.jsxs("label",{className:"bg-emerald-600 text-white px-4 py-2 rounded cursor-pointer hover:bg-emerald-700",children:[l?"Uploading...":"Upload Picture",z.jsx("input",{type:"file",accept:"image/*",onChange:b,disabled:l,className:"hidden"})]})]})]}),z.jsxs("div",{children:[z.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Your Name"}),z.jsx("input",{type:"text",value:f,onChange:S=>d(S.target.value),placeholder:"Enter your name",className:"w-full p-2 border rounded",required:!0})]}),z.jsxs("div",{children:[z.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Relationship to Emily"}),z.jsx("select",{value:p,onChange:S=>g(S.target.value),className:"w-full p-2 border rounded",children:vN.map(S=>z.jsx("option",{value:S,children:S},S))})]}),z.jsx("button",{type:"submit",className:"bg-emerald-600 text-white px-6 py-2 rounded hover:bg-emerald-700",children:"Save Profile"})]})]})}function xN(){const[i,e]=G.useState("profile");return z.jsxs("div",{className:"min-h-screen flex flex-col",children:[z.jsxs("header",{className:"sticky top-0 z-10 bg-emerald-800/90 text-white backdrop-blur-sm p-4 flex justify-between items-center",children:[z.jsx("h2",{className:"text-2xl font-semibold",children:"Emerald Palace"}),z.jsxs("nav",{className:"flex gap-4 items-center",children:[z.jsx("button",{onClick:()=>e("profile"),className:`px-3 py-1 rounded ${i==="profile"?"bg-emerald-600":"hover:bg-emerald-700"}`,children:"Profile"}),z.jsx("button",{onClick:()=>e("gallery"),className:`px-3 py-1 rounded ${i==="gallery"?"bg-emerald-600":"hover:bg-emerald-700"}`,children:"Photographs & Videos"}),z.jsx("button",{onClick:()=>e("blog"),className:`px-3 py-1 rounded ${i==="blog"?"bg-emerald-600":"hover:bg-emerald-700"}`,children:"Memories"}),z.jsx("button",{onClick:()=>e("about"),className:`px-3 py-1 rounded ${i==="about"?"bg-emerald-600":"hover:bg-emerald-700"}`,children:"About"}),z.jsx(KT,{})]})]}),z.jsxs("main",{className:"flex-1 p-8",children:[z.jsx(dT,{children:z.jsxs("div",{className:"max-w-md mx-auto",children:[z.jsx("h1",{className:"text-4xl font-bold text-center mb-8 text-emerald-800",children:"Welcome to Emerald Palace"}),z.jsx("p",{className:"text-center text-gray-600 mb-8",children:"Please sign in with your username and password to access your personal digital palace."}),z.jsx(FT,{})]})}),z.jsxs(fT,{children:[i==="profile"&&z.jsx(SN,{}),i==="gallery"&&z.jsx(JT,{}),i==="blog"&&z.jsx(gN,{}),i==="about"&&z.jsx(bN,{})]})]}),z.jsx(GT,{})]})}const wN=new Zw("https://quirky-pika-22.convex.cloud");Dx.createRoot(document.getElementById("root")).render(z.jsx(G.StrictMode,{children:z.jsx(ST,{client:wN,children:z.jsx(xN,{})})}));
