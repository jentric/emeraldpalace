(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function V0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var gf={exports:{}},ba={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function bw(){if(Ky)return ba;Ky=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,a){var c=null;if(a!==void 0&&(c=""+a),o.key!==void 0&&(c=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:s,key:c,ref:o!==void 0?o:null,props:a}}return ba.Fragment=e,ba.jsx=t,ba.jsxs=t,ba}var Xy;function vw(){return Xy||(Xy=1,gf.exports=bw()),gf.exports}var v=vw(),yf={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy;function xw(){if(Jy)return Me;Jy=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(C){return C===null||typeof C!="object"?null:(C=y&&C[y]||C["@@iterator"],typeof C=="function"?C:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function T(C,P,ee){this.props=C,this.context=P,this.refs=E,this.updater=ee||x}T.prototype.isReactComponent={},T.prototype.setState=function(C,P){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,P,"setState")},T.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function _(){}_.prototype=T.prototype;function F(C,P,ee){this.props=C,this.context=P,this.refs=E,this.updater=ee||x}var Y=F.prototype=new _;Y.constructor=F,S(Y,T.prototype),Y.isPureReactComponent=!0;var H=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function Z(C,P,ee,D,X,ie){return ee=ie.ref,{$$typeof:n,type:C,key:P,ref:ee!==void 0?ee:null,props:ie}}function le(C,P){return Z(C.type,P,void 0,void 0,void 0,C.props)}function re(C){return typeof C=="object"&&C!==null&&C.$$typeof===n}function de(C){var P={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(ee){return P[ee]})}var ke=/\/+/g;function Ce(C,P){return typeof C=="object"&&C!==null&&C.key!=null?de(""+C.key):P.toString(36)}function ne(){}function se(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(ne,ne):(C.status="pending",C.then(function(P){C.status==="pending"&&(C.status="fulfilled",C.value=P)},function(P){C.status==="pending"&&(C.status="rejected",C.reason=P)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function te(C,P,ee,D,X){var ie=typeof C;(ie==="undefined"||ie==="boolean")&&(C=null);var z=!1;if(C===null)z=!0;else switch(ie){case"bigint":case"string":case"number":z=!0;break;case"object":switch(C.$$typeof){case n:case e:z=!0;break;case g:return z=C._init,te(z(C._payload),P,ee,D,X)}}if(z)return X=X(C),z=D===""?"."+Ce(C,0):D,H(X)?(ee="",z!=null&&(ee=z.replace(ke,"$&/")+"/"),te(X,P,ee,"",function(Ee){return Ee})):X!=null&&(re(X)&&(X=le(X,ee+(X.key==null||C&&C.key===X.key?"":(""+X.key).replace(ke,"$&/")+"/")+z)),P.push(X)),1;z=0;var ae=D===""?".":D+":";if(H(C))for(var oe=0;oe<C.length;oe++)D=C[oe],ie=ae+Ce(D,oe),z+=te(D,P,ee,ie,X);else if(oe=b(C),typeof oe=="function")for(C=oe.call(C),oe=0;!(D=C.next()).done;)D=D.value,ie=ae+Ce(D,oe++),z+=te(D,P,ee,ie,X);else if(ie==="object"){if(typeof C.then=="function")return te(se(C),P,ee,D,X);throw P=String(C),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return z}function N(C,P,ee){if(C==null)return C;var D=[],X=0;return te(C,D,"","",function(ie){return P.call(ee,ie,X++)}),D}function L(C){if(C._status===-1){var P=C._result;P=P(),P.then(function(ee){(C._status===0||C._status===-1)&&(C._status=1,C._result=ee)},function(ee){(C._status===0||C._status===-1)&&(C._status=2,C._result=ee)}),C._status===-1&&(C._status=0,C._result=P)}if(C._status===1)return C._result.default;throw C._result}var $=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function ce(){}return Me.Children={map:N,forEach:function(C,P,ee){N(C,function(){P.apply(this,arguments)},ee)},count:function(C){var P=0;return N(C,function(){P++}),P},toArray:function(C){return N(C,function(P){return P})||[]},only:function(C){if(!re(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Me.Component=T,Me.Fragment=t,Me.Profiler=o,Me.PureComponent=F,Me.StrictMode=s,Me.Suspense=f,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Me.__COMPILER_RUNTIME={__proto__:null,c:function(C){return U.H.useMemoCache(C)}},Me.cache=function(C){return function(){return C.apply(null,arguments)}},Me.cloneElement=function(C,P,ee){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var D=S({},C.props),X=C.key,ie=void 0;if(P!=null)for(z in P.ref!==void 0&&(ie=void 0),P.key!==void 0&&(X=""+P.key),P)!R.call(P,z)||z==="key"||z==="__self"||z==="__source"||z==="ref"&&P.ref===void 0||(D[z]=P[z]);var z=arguments.length-2;if(z===1)D.children=ee;else if(1<z){for(var ae=Array(z),oe=0;oe<z;oe++)ae[oe]=arguments[oe+2];D.children=ae}return Z(C.type,X,void 0,void 0,ie,D)},Me.createContext=function(C){return C={$$typeof:c,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:a,_context:C},C},Me.createElement=function(C,P,ee){var D,X={},ie=null;if(P!=null)for(D in P.key!==void 0&&(ie=""+P.key),P)R.call(P,D)&&D!=="key"&&D!=="__self"&&D!=="__source"&&(X[D]=P[D]);var z=arguments.length-2;if(z===1)X.children=ee;else if(1<z){for(var ae=Array(z),oe=0;oe<z;oe++)ae[oe]=arguments[oe+2];X.children=ae}if(C&&C.defaultProps)for(D in z=C.defaultProps,z)X[D]===void 0&&(X[D]=z[D]);return Z(C,ie,void 0,void 0,null,X)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(C){return{$$typeof:d,render:C}},Me.isValidElement=re,Me.lazy=function(C){return{$$typeof:g,_payload:{_status:-1,_result:C},_init:L}},Me.memo=function(C,P){return{$$typeof:p,type:C,compare:P===void 0?null:P}},Me.startTransition=function(C){var P=U.T,ee={};U.T=ee;try{var D=C(),X=U.S;X!==null&&X(ee,D),typeof D=="object"&&D!==null&&typeof D.then=="function"&&D.then(ce,$)}catch(ie){$(ie)}finally{U.T=P}},Me.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Me.use=function(C){return U.H.use(C)},Me.useActionState=function(C,P,ee){return U.H.useActionState(C,P,ee)},Me.useCallback=function(C,P){return U.H.useCallback(C,P)},Me.useContext=function(C){return U.H.useContext(C)},Me.useDebugValue=function(){},Me.useDeferredValue=function(C,P){return U.H.useDeferredValue(C,P)},Me.useEffect=function(C,P,ee){var D=U.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return D.useEffect(C,P)},Me.useId=function(){return U.H.useId()},Me.useImperativeHandle=function(C,P,ee){return U.H.useImperativeHandle(C,P,ee)},Me.useInsertionEffect=function(C,P){return U.H.useInsertionEffect(C,P)},Me.useLayoutEffect=function(C,P){return U.H.useLayoutEffect(C,P)},Me.useMemo=function(C,P){return U.H.useMemo(C,P)},Me.useOptimistic=function(C,P){return U.H.useOptimistic(C,P)},Me.useReducer=function(C,P,ee){return U.H.useReducer(C,P,ee)},Me.useRef=function(C){return U.H.useRef(C)},Me.useState=function(C){return U.H.useState(C)},Me.useSyncExternalStore=function(C,P,ee){return U.H.useSyncExternalStore(C,P,ee)},Me.useTransition=function(){return U.H.useTransition()},Me.version="19.1.0",Me}var Zy;function Rh(){return Zy||(Zy=1,yf.exports=xw()),yf.exports}var A=Rh();const J=V0(A);var bf={exports:{}},va={},vf={exports:{}},xf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function Sw(){return Wy||(Wy=1,function(n){function e(N,L){var $=N.length;N.push(L);e:for(;0<$;){var ce=$-1>>>1,C=N[ce];if(0<o(C,L))N[ce]=L,N[$]=C,$=ce;else break e}}function t(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var L=N[0],$=N.pop();if($!==L){N[0]=$;e:for(var ce=0,C=N.length,P=C>>>1;ce<P;){var ee=2*(ce+1)-1,D=N[ee],X=ee+1,ie=N[X];if(0>o(D,$))X<C&&0>o(ie,D)?(N[ce]=ie,N[X]=$,ce=X):(N[ce]=D,N[ee]=$,ce=ee);else if(X<C&&0>o(ie,$))N[ce]=ie,N[X]=$,ce=X;else break e}}return L}function o(N,L){var $=N.sortIndex-L.sortIndex;return $!==0?$:N.id-L.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var f=[],p=[],g=1,y=null,b=3,x=!1,S=!1,E=!1,T=!1,_=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function H(N){for(var L=t(p);L!==null;){if(L.callback===null)s(p);else if(L.startTime<=N)s(p),L.sortIndex=L.expirationTime,e(f,L);else break;L=t(p)}}function U(N){if(E=!1,H(N),!S)if(t(f)!==null)S=!0,R||(R=!0,Ce());else{var L=t(p);L!==null&&te(U,L.startTime-N)}}var R=!1,Z=-1,le=5,re=-1;function de(){return T?!0:!(n.unstable_now()-re<le)}function ke(){if(T=!1,R){var N=n.unstable_now();re=N;var L=!0;try{e:{S=!1,E&&(E=!1,F(Z),Z=-1),x=!0;var $=b;try{t:{for(H(N),y=t(f);y!==null&&!(y.expirationTime>N&&de());){var ce=y.callback;if(typeof ce=="function"){y.callback=null,b=y.priorityLevel;var C=ce(y.expirationTime<=N);if(N=n.unstable_now(),typeof C=="function"){y.callback=C,H(N),L=!0;break t}y===t(f)&&s(f),H(N)}else s(f);y=t(f)}if(y!==null)L=!0;else{var P=t(p);P!==null&&te(U,P.startTime-N),L=!1}}break e}finally{y=null,b=$,x=!1}L=void 0}}finally{L?Ce():R=!1}}}var Ce;if(typeof Y=="function")Ce=function(){Y(ke)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,se=ne.port2;ne.port1.onmessage=ke,Ce=function(){se.postMessage(null)}}else Ce=function(){_(ke,0)};function te(N,L){Z=_(function(){N(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(N){switch(b){case 1:case 2:case 3:var L=3;break;default:L=b}var $=b;b=L;try{return N()}finally{b=$}},n.unstable_requestPaint=function(){T=!0},n.unstable_runWithPriority=function(N,L){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var $=b;b=N;try{return L()}finally{b=$}},n.unstable_scheduleCallback=function(N,L,$){var ce=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ce+$:ce):$=ce,N){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=$+C,N={id:g++,callback:L,priorityLevel:N,startTime:$,expirationTime:C,sortIndex:-1},$>ce?(N.sortIndex=$,e(p,N),t(f)===null&&N===t(p)&&(E?(F(Z),Z=-1):E=!0,te(U,$-ce))):(N.sortIndex=C,e(f,N),S||x||(S=!0,R||(R=!0,Ce()))),N},n.unstable_shouldYield=de,n.unstable_wrapCallback=function(N){var L=b;return function(){var $=b;b=L;try{return N.apply(this,arguments)}finally{b=$}}}}(xf)),xf}var eb;function ww(){return eb||(eb=1,vf.exports=Sw()),vf.exports}var Sf={exports:{}},It={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tb;function kw(){if(tb)return It;tb=1;var n=Rh();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(f,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:f,containerInfo:p,implementation:g}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return It.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,It.createPortal=function(f,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(f,p,null,g)},It.flushSync=function(f){var p=c.T,g=s.p;try{if(c.T=null,s.p=2,f)return f()}finally{c.T=p,s.p=g,s.d.f()}},It.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(f,p))},It.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},It.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var g=p.as,y=d(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:x}):g==="script"&&s.d.X(f,{crossOrigin:y,integrity:b,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},It.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=d(p.as,p.crossOrigin);s.d.M(f,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(f)},It.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=d(g,p.crossOrigin);s.d.L(f,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},It.preloadModule=function(f,p){if(typeof f=="string")if(p){var g=d(p.as,p.crossOrigin);s.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(f)},It.requestFormReset=function(f){s.d.r(f)},It.unstable_batchedUpdates=function(f,p){return f(p)},It.useFormState=function(f,p,g){return c.H.useFormState(f,p,g)},It.useFormStatus=function(){return c.H.useHostTransitionStatus()},It.version="19.1.0",It}var nb;function I0(){if(nb)return Sf.exports;nb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sf.exports=kw(),Sf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb;function Ew(){if(rb)return va;rb=1;var n=ww(),e=Rh(),t=I0();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(s(188))}function f(r){var i=r.alternate;if(!i){if(i=a(r),i===null)throw Error(s(188));return i!==r?null:r}for(var l=r,u=i;;){var h=l.return;if(h===null)break;var m=h.alternate;if(m===null){if(u=h.return,u!==null){l=u;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===l)return d(h),r;if(m===u)return d(h),i;m=m.sibling}throw Error(s(188))}if(l.return!==u.return)l=h,u=m;else{for(var w=!1,k=h.child;k;){if(k===l){w=!0,l=h,u=m;break}if(k===u){w=!0,u=h,l=m;break}k=k.sibling}if(!w){for(k=m.child;k;){if(k===l){w=!0,l=m,u=h;break}if(k===u){w=!0,u=m,l=h;break}k=k.sibling}if(!w)throw Error(s(189))}}if(l.alternate!==u)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?r:i}function p(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=p(r),i!==null)return i;r=r.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),ke=Symbol.iterator;function Ce(r){return r===null||typeof r!="object"?null:(r=ke&&r[ke]||r["@@iterator"],typeof r=="function"?r:null)}var ne=Symbol.for("react.client.reference");function se(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ne?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case U:return"Suspense";case R:return"SuspenseList";case re:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case Y:return(r.displayName||"Context")+".Provider";case F:return(r._context.displayName||"Context")+".Consumer";case H:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Z:return i=r.displayName||null,i!==null?i:se(r.type)||"Memo";case le:i=r._payload,r=r._init;try{return se(r(i))}catch{}}return null}var te=Array.isArray,N=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},ce=[],C=-1;function P(r){return{current:r}}function ee(r){0>C||(r.current=ce[C],ce[C]=null,C--)}function D(r,i){C++,ce[C]=r.current,r.current=i}var X=P(null),ie=P(null),z=P(null),ae=P(null);function oe(r,i){switch(D(z,i),D(ie,r),D(X,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?ky(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=ky(i),r=Ey(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ee(X),D(X,r)}function Ee(){ee(X),ee(ie),ee(z)}function Be(r){r.memoizedState!==null&&D(ae,r);var i=X.current,l=Ey(i,r.type);i!==l&&(D(ie,r),D(X,l))}function be(r){ie.current===r&&(ee(X),ee(ie)),ae.current===r&&(ee(ae),ha._currentValue=$)}var Le=Object.prototype.hasOwnProperty,St=n.unstable_scheduleCallback,Ze=n.unstable_cancelCallback,qe=n.unstable_shouldYield,yt=n.unstable_requestPaint,ut=n.unstable_now,Ga=n.unstable_getCurrentPriorityLevel,wn=n.unstable_ImmediatePriority,Ya=n.unstable_UserBlockingPriority,di=n.unstable_NormalPriority,Yt=n.unstable_LowPriority,ur=n.unstable_IdlePriority,ou=n.log,au=n.unstable_setDisableYieldValue,Xn=null,Kt=null;function Un(r){if(typeof ou=="function"&&au(r),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Xn,r)}catch{}}var Dt=Math.clz32?Math.clz32:jr,Dr=Math.log,Ka=Math.LN2;function jr(r){return r>>>=0,r===0?32:31-(Dr(r)/Ka|0)|0}var fi=256,hi=4194304;function Jn(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Cs(r,i,l){var u=r.pendingLanes;if(u===0)return 0;var h=0,m=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var k=u&134217727;return k!==0?(u=k&~m,u!==0?h=Jn(u):(w&=k,w!==0?h=Jn(w):l||(l=k&~r,l!==0&&(h=Jn(l))))):(k=u&~m,k!==0?h=Jn(k):w!==0?h=Jn(w):l||(l=u&~r,l!==0&&(h=Jn(l)))),h===0?0:i!==0&&i!==h&&(i&m)===0&&(m=h&-h,l=i&-i,m>=l||m===32&&(l&4194048)!==0)?i:h}function Ms(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function wo(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vn(){var r=fi;return fi<<=1,(fi&4194048)===0&&(fi=256),r}function Xa(){var r=hi;return hi<<=1,(hi&62914560)===0&&(hi=4194304),r}function ko(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function zr(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ja(r,i,l,u,h,m){var w=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var k=r.entanglements,M=r.expirationTimes,q=r.hiddenUpdates;for(l=w&~l;0<l;){var Q=31-Dt(l),K=1<<Q;k[Q]=0,M[Q]=-1;var V=q[Q];if(V!==null)for(q[Q]=null,Q=0;Q<V.length;Q++){var I=V[Q];I!==null&&(I.lane&=-536870913)}l&=~K}u!==0&&Te(r,u,0),m!==0&&h===0&&r.tag!==0&&(r.suspendedLanes|=m&~(w&~i))}function Te(r,i,l){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Dt(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|l&4194090}function it(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var u=31-Dt(l),h=1<<u;h&i|r[u]&i&&(r[u]|=i),l&=~h}}function dt(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function jt(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ns(){var r=L.p;return r!==0?r:(r=window.event,r===void 0?32:Py(r.type))}function bt(r,i){var l=L.p;try{return L.p=r,i()}finally{L.p=l}}var ot=Math.random().toString(36).slice(2),at="__reactFiber$"+ot,Xe="__reactProps$"+ot,wt="__reactContainer$"+ot,pi="__reactEvents$"+ot,dr="__reactListeners$"+ot,up="__reactHandles$"+ot,dp="__reactResources$"+ot,Eo="__reactMarker$"+ot;function lu(r){delete r[at],delete r[Xe],delete r[pi],delete r[dr],delete r[up]}function mi(r){var i=r[at];if(i)return i;for(var l=r.parentNode;l;){if(i=l[wt]||l[at]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=Ny(r);r!==null;){if(l=r[at])return l;r=Ny(r)}return i}r=l,l=r.parentNode}return null}function gi(r){if(r=r[at]||r[wt]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function To(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function yi(r){var i=r[dp];return i||(i=r[dp]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function kt(r){r[Eo]=!0}var fp=new Set,hp={};function As(r,i){bi(r,i),bi(r+"Capture",i)}function bi(r,i){for(hp[r]=i,r=0;r<i.length;r++)fp.add(i[r])}var uS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pp={},mp={};function dS(r){return Le.call(mp,r)?!0:Le.call(pp,r)?!1:uS.test(r)?mp[r]=!0:(pp[r]=!0,!1)}function Za(r,i,l){if(dS(i))if(l===null)r.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+l)}}function Wa(r,i,l){if(l===null)r.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+l)}}function fr(r,i,l,u){if(u===null)r.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(i,l,""+u)}}var cu,gp;function vi(r){if(cu===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);cu=i&&i[1]||"",gp=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cu+r+gp}var uu=!1;function du(r,i){if(!r||uu)return"";uu=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(I){var V=I}Reflect.construct(r,[],K)}else{try{K.call()}catch(I){V=I}r.call(K.prototype)}}else{try{throw Error()}catch(I){V=I}(K=r())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(I){if(I&&V&&typeof I.stack=="string")return[I.stack,V.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),w=m[0],k=m[1];if(w&&k){var M=w.split(`
`),q=k.split(`
`);for(h=u=0;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(u===M.length||h===q.length)for(u=M.length-1,h=q.length-1;1<=u&&0<=h&&M[u]!==q[h];)h--;for(;1<=u&&0<=h;u--,h--)if(M[u]!==q[h]){if(u!==1||h!==1)do if(u--,h--,0>h||M[u]!==q[h]){var Q=`
`+M[u].replace(" at new "," at ");return r.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",r.displayName)),Q}while(1<=u&&0<=h);break}}}finally{uu=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?vi(l):""}function fS(r){switch(r.tag){case 26:case 27:case 5:return vi(r.type);case 16:return vi("Lazy");case 13:return vi("Suspense");case 19:return vi("SuspenseList");case 0:case 15:return du(r.type,!1);case 11:return du(r.type.render,!1);case 1:return du(r.type,!0);case 31:return vi("Activity");default:return""}}function yp(r){try{var i="";do i+=fS(r),r=r.return;while(r);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function kn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function bp(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function hS(r){var i=bp(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),u=""+r[i];if(!r.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return h.call(this)},set:function(w){u=""+w,m.call(this,w)}}),Object.defineProperty(r,i,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function el(r){r._valueTracker||(r._valueTracker=hS(r))}function vp(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),u="";return r&&(u=bp(r)?r.checked?"true":"false":r.value),r=u,r!==l?(i.setValue(r),!0):!1}function tl(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var pS=/[\n"\\]/g;function En(r){return r.replace(pS,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function fu(r,i,l,u,h,m,w,k){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),i!=null?w==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+kn(i)):r.value!==""+kn(i)&&(r.value=""+kn(i)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),i!=null?hu(r,w,kn(i)):l!=null?hu(r,w,kn(l)):u!=null&&r.removeAttribute("value"),h==null&&m!=null&&(r.defaultChecked=!!m),h!=null&&(r.checked=h&&typeof h!="function"&&typeof h!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?r.name=""+kn(k):r.removeAttribute("name")}function xp(r,i,l,u,h,m,w,k){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),i!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;l=l!=null?""+kn(l):"",i=i!=null?""+kn(i):l,k||i===r.value||(r.value=i),r.defaultValue=i}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=k?r.checked:!!u,r.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w)}function hu(r,i,l){i==="number"&&tl(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function xi(r,i,l,u){if(r=r.options,i){i={};for(var h=0;h<l.length;h++)i["$"+l[h]]=!0;for(l=0;l<r.length;l++)h=i.hasOwnProperty("$"+r[l].value),r[l].selected!==h&&(r[l].selected=h),h&&u&&(r[l].defaultSelected=!0)}else{for(l=""+kn(l),i=null,h=0;h<r.length;h++){if(r[h].value===l){r[h].selected=!0,u&&(r[h].defaultSelected=!0);return}i!==null||r[h].disabled||(i=r[h])}i!==null&&(i.selected=!0)}}function Sp(r,i,l){if(i!=null&&(i=""+kn(i),i!==r.value&&(r.value=i),l==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=l!=null?""+kn(l):""}function wp(r,i,l,u){if(i==null){if(u!=null){if(l!=null)throw Error(s(92));if(te(u)){if(1<u.length)throw Error(s(93));u=u[0]}l=u}l==null&&(l=""),i=l}l=kn(i),r.defaultValue=l,u=r.textContent,u===l&&u!==""&&u!==null&&(r.value=u)}function Si(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var mS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kp(r,i,l){var u=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,l):typeof l!="number"||l===0||mS.has(i)?i==="float"?r.cssFloat=l:r[i]=(""+l).trim():r[i]=l+"px"}function Ep(r,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var h in i)u=i[h],i.hasOwnProperty(h)&&l[h]!==u&&kp(r,h,u)}else for(var m in i)i.hasOwnProperty(m)&&kp(r,m,i[m])}function pu(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nl(r){return yS.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var mu=null;function gu(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var wi=null,ki=null;function Tp(r){var i=gi(r);if(i&&(r=i.stateNode)){var l=r[Xe]||null;e:switch(r=i.stateNode,i.type){case"input":if(fu(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+En(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var u=l[i];if(u!==r&&u.form===r.form){var h=u[Xe]||null;if(!h)throw Error(s(90));fu(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<l.length;i++)u=l[i],u.form===r.form&&vp(u)}break e;case"textarea":Sp(r,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&xi(r,!!l.multiple,i,!1)}}}var yu=!1;function Cp(r,i,l){if(yu)return r(i,l);yu=!0;try{var u=r(i);return u}finally{if(yu=!1,(wi!==null||ki!==null)&&(Il(),wi&&(i=wi,r=ki,ki=wi=null,Tp(i),r)))for(i=0;i<r.length;i++)Tp(r[i])}}function Co(r,i){var l=r.stateNode;if(l===null)return null;var u=l[Xe]||null;if(u===null)return null;l=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bu=!1;if(hr)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){bu=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{bu=!1}var _r=null,vu=null,rl=null;function Mp(){if(rl)return rl;var r,i=vu,l=i.length,u,h="value"in _r?_r.value:_r.textContent,m=h.length;for(r=0;r<l&&i[r]===h[r];r++);var w=l-r;for(u=1;u<=w&&i[l-u]===h[m-u];u++);return rl=h.slice(r,1<u?1-u:void 0)}function sl(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function il(){return!0}function Np(){return!1}function rn(r){function i(l,u,h,m,w){this._reactName=l,this._targetInst=h,this.type=u,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(l=r[k],this[k]=l?l(m):m[k]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?il:Np,this.isPropagationStopped=Np,this}return g(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=il)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=il)},persist:function(){},isPersistent:il}),i}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ol=rn(Os),No=g({},Os,{view:0,detail:0}),bS=rn(No),xu,Su,Ao,al=g({},No,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ku,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ao&&(Ao&&r.type==="mousemove"?(xu=r.screenX-Ao.screenX,Su=r.screenY-Ao.screenY):Su=xu=0,Ao=r),xu)},movementY:function(r){return"movementY"in r?r.movementY:Su}}),Ap=rn(al),vS=g({},al,{dataTransfer:0}),xS=rn(vS),SS=g({},No,{relatedTarget:0}),wu=rn(SS),wS=g({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),kS=rn(wS),ES=g({},Os,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),TS=rn(ES),CS=g({},Os,{data:0}),Op=rn(CS),MS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OS(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=AS[r])?!!i[r]:!1}function ku(){return OS}var RS=g({},No,{key:function(r){if(r.key){var i=MS[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=sl(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?NS[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ku,charCode:function(r){return r.type==="keypress"?sl(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?sl(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),DS=rn(RS),jS=g({},al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rp=rn(jS),zS=g({},No,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ku}),_S=rn(zS),BS=g({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),LS=rn(BS),qS=g({},al,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),US=rn(qS),VS=g({},Os,{newState:0,oldState:0}),IS=rn(VS),HS=[9,13,27,32],Eu=hr&&"CompositionEvent"in window,Oo=null;hr&&"documentMode"in document&&(Oo=document.documentMode);var PS=hr&&"TextEvent"in window&&!Oo,Dp=hr&&(!Eu||Oo&&8<Oo&&11>=Oo),jp=" ",zp=!1;function _p(r,i){switch(r){case"keyup":return HS.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ei=!1;function $S(r,i){switch(r){case"compositionend":return Bp(i);case"keypress":return i.which!==32?null:(zp=!0,jp);case"textInput":return r=i.data,r===jp&&zp?null:r;default:return null}}function FS(r,i){if(Ei)return r==="compositionend"||!Eu&&_p(r,i)?(r=Mp(),rl=vu=_r=null,Ei=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Dp&&i.locale!=="ko"?null:i.data;default:return null}}var QS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lp(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!QS[r.type]:i==="textarea"}function qp(r,i,l,u){wi?ki?ki.push(u):ki=[u]:wi=u,i=Gl(i,"onChange"),0<i.length&&(l=new ol("onChange","change",null,l,u),r.push({event:l,listeners:i}))}var Ro=null,Do=null;function GS(r){by(r,0)}function ll(r){var i=To(r);if(vp(i))return r}function Up(r,i){if(r==="change")return i}var Vp=!1;if(hr){var Tu;if(hr){var Cu="oninput"in document;if(!Cu){var Ip=document.createElement("div");Ip.setAttribute("oninput","return;"),Cu=typeof Ip.oninput=="function"}Tu=Cu}else Tu=!1;Vp=Tu&&(!document.documentMode||9<document.documentMode)}function Hp(){Ro&&(Ro.detachEvent("onpropertychange",Pp),Do=Ro=null)}function Pp(r){if(r.propertyName==="value"&&ll(Do)){var i=[];qp(i,Do,r,gu(r)),Cp(GS,i)}}function YS(r,i,l){r==="focusin"?(Hp(),Ro=i,Do=l,Ro.attachEvent("onpropertychange",Pp)):r==="focusout"&&Hp()}function KS(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ll(Do)}function XS(r,i){if(r==="click")return ll(i)}function JS(r,i){if(r==="input"||r==="change")return ll(i)}function ZS(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var dn=typeof Object.is=="function"?Object.is:ZS;function jo(r,i){if(dn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),u=Object.keys(i);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var h=l[u];if(!Le.call(i,h)||!dn(r[h],i[h]))return!1}return!0}function $p(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Fp(r,i){var l=$p(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=i&&u>=i)return{node:l,offset:i-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=$p(l)}}function Qp(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Qp(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Gp(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=tl(r.document);i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=tl(r.document)}return i}function Mu(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var WS=hr&&"documentMode"in document&&11>=document.documentMode,Ti=null,Nu=null,zo=null,Au=!1;function Yp(r,i,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Au||Ti==null||Ti!==tl(u)||(u=Ti,"selectionStart"in u&&Mu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),zo&&jo(zo,u)||(zo=u,u=Gl(Nu,"onSelect"),0<u.length&&(i=new ol("onSelect","select",null,i,l),r.push({event:i,listeners:u}),i.target=Ti)))}function Rs(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var Ci={animationend:Rs("Animation","AnimationEnd"),animationiteration:Rs("Animation","AnimationIteration"),animationstart:Rs("Animation","AnimationStart"),transitionrun:Rs("Transition","TransitionRun"),transitionstart:Rs("Transition","TransitionStart"),transitioncancel:Rs("Transition","TransitionCancel"),transitionend:Rs("Transition","TransitionEnd")},Ou={},Kp={};hr&&(Kp=document.createElement("div").style,"AnimationEvent"in window||(delete Ci.animationend.animation,delete Ci.animationiteration.animation,delete Ci.animationstart.animation),"TransitionEvent"in window||delete Ci.transitionend.transition);function Ds(r){if(Ou[r])return Ou[r];if(!Ci[r])return r;var i=Ci[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in Kp)return Ou[r]=i[l];return r}var Xp=Ds("animationend"),Jp=Ds("animationiteration"),Zp=Ds("animationstart"),e1=Ds("transitionrun"),t1=Ds("transitionstart"),n1=Ds("transitioncancel"),Wp=Ds("transitionend"),em=new Map,Ru="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ru.push("scrollEnd");function In(r,i){em.set(r,i),As(i,[r])}var tm=new WeakMap;function Tn(r,i){if(typeof r=="object"&&r!==null){var l=tm.get(r);return l!==void 0?l:(i={value:r,source:i,stack:yp(i)},tm.set(r,i),i)}return{value:r,source:i,stack:yp(i)}}var Cn=[],Mi=0,Du=0;function cl(){for(var r=Mi,i=Du=Mi=0;i<r;){var l=Cn[i];Cn[i++]=null;var u=Cn[i];Cn[i++]=null;var h=Cn[i];Cn[i++]=null;var m=Cn[i];if(Cn[i++]=null,u!==null&&h!==null){var w=u.pending;w===null?h.next=h:(h.next=w.next,w.next=h),u.pending=h}m!==0&&nm(l,h,m)}}function ul(r,i,l,u){Cn[Mi++]=r,Cn[Mi++]=i,Cn[Mi++]=l,Cn[Mi++]=u,Du|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function ju(r,i,l,u){return ul(r,i,l,u),dl(r)}function Ni(r,i){return ul(r,null,null,i),dl(r)}function nm(r,i,l){r.lanes|=l;var u=r.alternate;u!==null&&(u.lanes|=l);for(var h=!1,m=r.return;m!==null;)m.childLanes|=l,u=m.alternate,u!==null&&(u.childLanes|=l),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(h=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,h&&i!==null&&(h=31-Dt(l),r=m.hiddenUpdates,u=r[h],u===null?r[h]=[i]:u.push(i),i.lane=l|536870912),m):null}function dl(r){if(50<ia)throw ia=0,Ud=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Ai={};function r1(r,i,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(r,i,l,u){return new r1(r,i,l,u)}function zu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function pr(r,i){var l=r.alternate;return l===null?(l=fn(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function rm(r,i){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,i=l.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function fl(r,i,l,u,h,m){var w=0;if(u=r,typeof r=="function")zu(r)&&(w=1);else if(typeof r=="string")w=iw(r,l,X.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case re:return r=fn(31,l,i,h),r.elementType=re,r.lanes=m,r;case S:return js(l.children,h,m,i);case E:w=8,h|=24;break;case T:return r=fn(12,l,i,h|2),r.elementType=T,r.lanes=m,r;case U:return r=fn(13,l,i,h),r.elementType=U,r.lanes=m,r;case R:return r=fn(19,l,i,h),r.elementType=R,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case _:case Y:w=10;break e;case F:w=9;break e;case H:w=11;break e;case Z:w=14;break e;case le:w=16,u=null;break e}w=29,l=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=fn(w,l,i,h),i.elementType=r,i.type=u,i.lanes=m,i}function js(r,i,l,u){return r=fn(7,r,u,i),r.lanes=l,r}function _u(r,i,l){return r=fn(6,r,null,i),r.lanes=l,r}function Bu(r,i,l){return i=fn(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Oi=[],Ri=0,hl=null,pl=0,Mn=[],Nn=0,zs=null,mr=1,gr="";function _s(r,i){Oi[Ri++]=pl,Oi[Ri++]=hl,hl=r,pl=i}function sm(r,i,l){Mn[Nn++]=mr,Mn[Nn++]=gr,Mn[Nn++]=zs,zs=r;var u=mr;r=gr;var h=32-Dt(u)-1;u&=~(1<<h),l+=1;var m=32-Dt(i)+h;if(30<m){var w=h-h%5;m=(u&(1<<w)-1).toString(32),u>>=w,h-=w,mr=1<<32-Dt(i)+h|l<<h|u,gr=m+r}else mr=1<<m|l<<h|u,gr=r}function Lu(r){r.return!==null&&(_s(r,1),sm(r,1,0))}function qu(r){for(;r===hl;)hl=Oi[--Ri],Oi[Ri]=null,pl=Oi[--Ri],Oi[Ri]=null;for(;r===zs;)zs=Mn[--Nn],Mn[Nn]=null,gr=Mn[--Nn],Mn[Nn]=null,mr=Mn[--Nn],Mn[Nn]=null}var Xt=null,tt=null,He=!1,Bs=null,Zn=!1,Uu=Error(s(519));function Ls(r){var i=Error(s(418,""));throw Lo(Tn(i,r)),Uu}function im(r){var i=r.stateNode,l=r.type,u=r.memoizedProps;switch(i[at]=r,i[Xe]=u,l){case"dialog":je("cancel",i),je("close",i);break;case"iframe":case"object":case"embed":je("load",i);break;case"video":case"audio":for(l=0;l<aa.length;l++)je(aa[l],i);break;case"source":je("error",i);break;case"img":case"image":case"link":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"input":je("invalid",i),xp(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),el(i);break;case"select":je("invalid",i);break;case"textarea":je("invalid",i),wp(i,u.value,u.defaultValue,u.children),el(i)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||u.suppressHydrationWarning===!0||wy(i.textContent,l)?(u.popover!=null&&(je("beforetoggle",i),je("toggle",i)),u.onScroll!=null&&je("scroll",i),u.onScrollEnd!=null&&je("scrollend",i),u.onClick!=null&&(i.onclick=Yl),i=!0):i=!1,i||Ls(r)}function om(r){for(Xt=r.return;Xt;)switch(Xt.tag){case 5:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:Xt=Xt.return}}function _o(r){if(r!==Xt)return!1;if(!He)return om(r),He=!0,!1;var i=r.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||tf(r.type,r.memoizedProps)),l=!l),l&&tt&&Ls(r),om(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(i===0){tt=Pn(r.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++;r=r.nextSibling}tt=null}}else i===27?(i=tt,Jr(r.type)?(r=of,of=null,tt=r):tt=i):tt=Xt?Pn(r.stateNode.nextSibling):null;return!0}function Bo(){tt=Xt=null,He=!1}function am(){var r=Bs;return r!==null&&(an===null?an=r:an.push.apply(an,r),Bs=null),r}function Lo(r){Bs===null?Bs=[r]:Bs.push(r)}var Vu=P(null),qs=null,yr=null;function Br(r,i,l){D(Vu,i._currentValue),i._currentValue=l}function br(r){r._currentValue=Vu.current,ee(Vu)}function Iu(r,i,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===l)break;r=r.return}}function Hu(r,i,l,u){var h=r.child;for(h!==null&&(h.return=r);h!==null;){var m=h.dependencies;if(m!==null){var w=h.child;m=m.firstContext;e:for(;m!==null;){var k=m;m=h;for(var M=0;M<i.length;M++)if(k.context===i[M]){m.lanes|=l,k=m.alternate,k!==null&&(k.lanes|=l),Iu(m.return,l,r),u||(w=null);break e}m=k.next}}else if(h.tag===18){if(w=h.return,w===null)throw Error(s(341));w.lanes|=l,m=w.alternate,m!==null&&(m.lanes|=l),Iu(w,l,r),w=null}else w=h.child;if(w!==null)w.return=h;else for(w=h;w!==null;){if(w===r){w=null;break}if(h=w.sibling,h!==null){h.return=w.return,w=h;break}w=w.return}h=w}}function qo(r,i,l,u){r=null;for(var h=i,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var w=h.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var k=h.type;dn(h.pendingProps.value,w.value)||(r!==null?r.push(k):r=[k])}}else if(h===ae.current){if(w=h.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(r!==null?r.push(ha):r=[ha])}h=h.return}r!==null&&Hu(i,r,l,u),i.flags|=262144}function ml(r){for(r=r.firstContext;r!==null;){if(!dn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Us(r){qs=r,yr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Vt(r){return lm(qs,r)}function gl(r,i){return qs===null&&Us(r),lm(r,i)}function lm(r,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},yr===null){if(r===null)throw Error(s(308));yr=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else yr=yr.next=i;return l}var s1=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(l,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(l){return l()})}},i1=n.unstable_scheduleCallback,o1=n.unstable_NormalPriority,vt={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pu(){return{controller:new s1,data:new Map,refCount:0}}function Uo(r){r.refCount--,r.refCount===0&&i1(o1,function(){r.controller.abort()})}var Vo=null,$u=0,Di=0,ji=null;function a1(r,i){if(Vo===null){var l=Vo=[];$u=0,Di=Qd(),ji={status:"pending",value:void 0,then:function(u){l.push(u)}}}return $u++,i.then(cm,cm),i}function cm(){if(--$u===0&&Vo!==null){ji!==null&&(ji.status="fulfilled");var r=Vo;Vo=null,Di=0,ji=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function l1(r,i){var l=[],u={status:"pending",value:null,reason:null,then:function(h){l.push(h)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var h=0;h<l.length;h++)(0,l[h])(i)},function(h){for(u.status="rejected",u.reason=h,h=0;h<l.length;h++)(0,l[h])(void 0)}),u}var um=N.S;N.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&a1(r,i),um!==null&&um(r,i)};var Vs=P(null);function Fu(){var r=Vs.current;return r!==null?r:Je.pooledCache}function yl(r,i){i===null?D(Vs,Vs.current):D(Vs,i.pool)}function dm(){var r=Fu();return r===null?null:{parent:vt._currentValue,pool:r}}var Io=Error(s(460)),fm=Error(s(474)),bl=Error(s(542)),Qu={then:function(){}};function hm(r){return r=r.status,r==="fulfilled"||r==="rejected"}function vl(){}function pm(r,i,l){switch(l=r[l],l===void 0?r.push(i):l!==i&&(i.then(vl,vl),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,gm(r),r;default:if(typeof i.status=="string")i.then(vl,vl);else{if(r=Je,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=u}},function(u){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,gm(r),r}throw Ho=i,Io}}var Ho=null;function mm(){if(Ho===null)throw Error(s(459));var r=Ho;return Ho=null,r}function gm(r){if(r===Io||r===bl)throw Error(s(483))}var Lr=!1;function Gu(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yu(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function qr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ur(r,i,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Pe&2)!==0){var h=u.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),u.pending=i,i=dl(r),nm(r,null,l),i}return ul(r,u,i,l),dl(r)}function Po(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,l|=u,i.lanes=l,it(r,l)}}function Ku(r,i){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var h=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?h=m=w:m=m.next=w,l=l.next}while(l!==null);m===null?h=m=i:m=m.next=i}else h=m=i;l={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}var Xu=!1;function $o(){if(Xu){var r=ji;if(r!==null)throw r}}function Fo(r,i,l,u){Xu=!1;var h=r.updateQueue;Lr=!1;var m=h.firstBaseUpdate,w=h.lastBaseUpdate,k=h.shared.pending;if(k!==null){h.shared.pending=null;var M=k,q=M.next;M.next=null,w===null?m=q:w.next=q,w=M;var Q=r.alternate;Q!==null&&(Q=Q.updateQueue,k=Q.lastBaseUpdate,k!==w&&(k===null?Q.firstBaseUpdate=q:k.next=q,Q.lastBaseUpdate=M))}if(m!==null){var K=h.baseState;w=0,Q=q=M=null,k=m;do{var V=k.lane&-536870913,I=V!==k.lane;if(I?(Ue&V)===V:(u&V)===V){V!==0&&V===Di&&(Xu=!0),Q!==null&&(Q=Q.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Se=r,ve=k;V=i;var Ge=l;switch(ve.tag){case 1:if(Se=ve.payload,typeof Se=="function"){K=Se.call(Ge,K,V);break e}K=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=ve.payload,V=typeof Se=="function"?Se.call(Ge,K,V):Se,V==null)break e;K=g({},K,V);break e;case 2:Lr=!0}}V=k.callback,V!==null&&(r.flags|=64,I&&(r.flags|=8192),I=h.callbacks,I===null?h.callbacks=[V]:I.push(V))}else I={lane:V,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Q===null?(q=Q=I,M=K):Q=Q.next=I,w|=V;if(k=k.next,k===null){if(k=h.shared.pending,k===null)break;I=k,k=I.next,I.next=null,h.lastBaseUpdate=I,h.shared.pending=null}}while(!0);Q===null&&(M=K),h.baseState=M,h.firstBaseUpdate=q,h.lastBaseUpdate=Q,m===null&&(h.shared.lanes=0),Gr|=w,r.lanes=w,r.memoizedState=K}}function ym(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function bm(r,i){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)ym(l[r],i)}var zi=P(null),xl=P(0);function vm(r,i){r=Tr,D(xl,r),D(zi,i),Tr=r|i.baseLanes}function Ju(){D(xl,Tr),D(zi,zi.current)}function Zu(){Tr=xl.current,ee(zi),ee(xl)}var Vr=0,Ae=null,Fe=null,ft=null,Sl=!1,_i=!1,Is=!1,wl=0,Qo=0,Bi=null,c1=0;function lt(){throw Error(s(321))}function Wu(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!dn(r[l],i[l]))return!1;return!0}function ed(r,i,l,u,h,m){return Vr=m,Ae=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,N.H=r===null||r.memoizedState===null?ng:rg,Is=!1,m=l(u,h),Is=!1,_i&&(m=Sm(i,l,u,h)),xm(r),m}function xm(r){N.H=Nl;var i=Fe!==null&&Fe.next!==null;if(Vr=0,ft=Fe=Ae=null,Sl=!1,Qo=0,Bi=null,i)throw Error(s(300));r===null||Et||(r=r.dependencies,r!==null&&ml(r)&&(Et=!0))}function Sm(r,i,l,u){Ae=r;var h=0;do{if(_i&&(Bi=null),Qo=0,_i=!1,25<=h)throw Error(s(301));if(h+=1,ft=Fe=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}N.H=g1,m=i(l,u)}while(_i);return m}function u1(){var r=N.H,i=r.useState()[0];return i=typeof i.then=="function"?Go(i):i,r=r.useState()[0],(Fe!==null?Fe.memoizedState:null)!==r&&(Ae.flags|=1024),i}function td(){var r=wl!==0;return wl=0,r}function nd(r,i,l){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~l}function rd(r){if(Sl){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Sl=!1}Vr=0,ft=Fe=Ae=null,_i=!1,Qo=wl=0,Bi=null}function sn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Ae.memoizedState=ft=r:ft=ft.next=r,ft}function ht(){if(Fe===null){var r=Ae.alternate;r=r!==null?r.memoizedState:null}else r=Fe.next;var i=ft===null?Ae.memoizedState:ft.next;if(i!==null)ft=i,Fe=r;else{if(r===null)throw Ae.alternate===null?Error(s(467)):Error(s(310));Fe=r,r={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},ft===null?Ae.memoizedState=ft=r:ft=ft.next=r}return ft}function sd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Go(r){var i=Qo;return Qo+=1,Bi===null&&(Bi=[]),r=pm(Bi,r,i),i=Ae,(ft===null?i.memoizedState:ft.next)===null&&(i=i.alternate,N.H=i===null||i.memoizedState===null?ng:rg),r}function kl(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Go(r);if(r.$$typeof===Y)return Vt(r)}throw Error(s(438,String(r)))}function id(r){var i=null,l=Ae.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var u=Ae.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=sd(),Ae.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(r),u=0;u<r;u++)l[u]=de;return i.index++,l}function vr(r,i){return typeof i=="function"?i(r):i}function El(r){var i=ht();return od(i,Fe,r)}function od(r,i,l){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=l;var h=r.baseQueue,m=u.pending;if(m!==null){if(h!==null){var w=h.next;h.next=m.next,m.next=w}i.baseQueue=h=m,u.pending=null}if(m=r.baseState,h===null)r.memoizedState=m;else{i=h.next;var k=w=null,M=null,q=i,Q=!1;do{var K=q.lane&-536870913;if(K!==q.lane?(Ue&K)===K:(Vr&K)===K){var V=q.revertLane;if(V===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),K===Di&&(Q=!0);else if((Vr&V)===V){q=q.next,V===Di&&(Q=!0);continue}else K={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},M===null?(k=M=K,w=m):M=M.next=K,Ae.lanes|=V,Gr|=V;K=q.action,Is&&l(m,K),m=q.hasEagerState?q.eagerState:l(m,K)}else V={lane:K,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},M===null?(k=M=V,w=m):M=M.next=V,Ae.lanes|=K,Gr|=K;q=q.next}while(q!==null&&q!==i);if(M===null?w=m:M.next=k,!dn(m,r.memoizedState)&&(Et=!0,Q&&(l=ji,l!==null)))throw l;r.memoizedState=m,r.baseState=w,r.baseQueue=M,u.lastRenderedState=m}return h===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function ad(r){var i=ht(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var u=l.dispatch,h=l.pending,m=i.memoizedState;if(h!==null){l.pending=null;var w=h=h.next;do m=r(m,w.action),w=w.next;while(w!==h);dn(m,i.memoizedState)||(Et=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),l.lastRenderedState=m}return[m,u]}function wm(r,i,l){var u=Ae,h=ht(),m=He;if(m){if(l===void 0)throw Error(s(407));l=l()}else l=i();var w=!dn((Fe||h).memoizedState,l);w&&(h.memoizedState=l,Et=!0),h=h.queue;var k=Tm.bind(null,u,h,r);if(Yo(2048,8,k,[r]),h.getSnapshot!==i||w||ft!==null&&ft.memoizedState.tag&1){if(u.flags|=2048,Li(9,Tl(),Em.bind(null,u,h,l,i),null),Je===null)throw Error(s(349));m||(Vr&124)!==0||km(u,i,l)}return l}function km(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=Ae.updateQueue,i===null?(i=sd(),Ae.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function Em(r,i,l,u){i.value=l,i.getSnapshot=u,Cm(i)&&Mm(r)}function Tm(r,i,l){return l(function(){Cm(i)&&Mm(r)})}function Cm(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!dn(r,l)}catch{return!0}}function Mm(r){var i=Ni(r,2);i!==null&&yn(i,r,2)}function ld(r){var i=sn();if(typeof r=="function"){var l=r;if(r=l(),Is){Un(!0);try{l()}finally{Un(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:r},i}function Nm(r,i,l,u){return r.baseState=l,od(r,Fe,typeof u=="function"?u:vr)}function d1(r,i,l,u,h){if(Ml(r))throw Error(s(485));if(r=i.action,r!==null){var m={payload:h,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};N.T!==null?l(!0):m.isTransition=!1,u(m),l=i.pending,l===null?(m.next=i.pending=m,Am(i,m)):(m.next=l.next,i.pending=l.next=m)}}function Am(r,i){var l=i.action,u=i.payload,h=r.state;if(i.isTransition){var m=N.T,w={};N.T=w;try{var k=l(h,u),M=N.S;M!==null&&M(w,k),Om(r,i,k)}catch(q){cd(r,i,q)}finally{N.T=m}}else try{m=l(h,u),Om(r,i,m)}catch(q){cd(r,i,q)}}function Om(r,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){Rm(r,i,u)},function(u){return cd(r,i,u)}):Rm(r,i,l)}function Rm(r,i,l){i.status="fulfilled",i.value=l,Dm(i),r.state=l,i=r.pending,i!==null&&(l=i.next,l===i?r.pending=null:(l=l.next,i.next=l,Am(r,l)))}function cd(r,i,l){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=l,Dm(i),i=i.next;while(i!==u)}r.action=null}function Dm(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function jm(r,i){return i}function zm(r,i){if(He){var l=Je.formState;if(l!==null){e:{var u=Ae;if(He){if(tt){t:{for(var h=tt,m=Zn;h.nodeType!==8;){if(!m){h=null;break t}if(h=Pn(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){tt=Pn(h.nextSibling),u=h.data==="F!";break e}}Ls(u)}u=!1}u&&(i=l[0])}}return l=sn(),l.memoizedState=l.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jm,lastRenderedState:i},l.queue=u,l=Wm.bind(null,Ae,u),u.dispatch=l,u=ld(!1),m=pd.bind(null,Ae,!1,u.queue),u=sn(),h={state:i,dispatch:null,action:r,pending:null},u.queue=h,l=d1.bind(null,Ae,h,m,l),h.dispatch=l,u.memoizedState=r,[i,l,!1]}function _m(r){var i=ht();return Bm(i,Fe,r)}function Bm(r,i,l){if(i=od(r,i,jm)[0],r=El(vr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Go(i)}catch(w){throw w===Io?bl:w}else u=i;i=ht();var h=i.queue,m=h.dispatch;return l!==i.memoizedState&&(Ae.flags|=2048,Li(9,Tl(),f1.bind(null,h,l),null)),[u,m,r]}function f1(r,i){r.action=i}function Lm(r){var i=ht(),l=Fe;if(l!==null)return Bm(i,l,r);ht(),i=i.memoizedState,l=ht();var u=l.queue.dispatch;return l.memoizedState=r,[i,u,!1]}function Li(r,i,l,u){return r={tag:r,create:l,deps:u,inst:i,next:null},i=Ae.updateQueue,i===null&&(i=sd(),Ae.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,i.lastEffect=r),r}function Tl(){return{destroy:void 0,resource:void 0}}function qm(){return ht().memoizedState}function Cl(r,i,l,u){var h=sn();u=u===void 0?null:u,Ae.flags|=r,h.memoizedState=Li(1|i,Tl(),l,u)}function Yo(r,i,l,u){var h=ht();u=u===void 0?null:u;var m=h.memoizedState.inst;Fe!==null&&u!==null&&Wu(u,Fe.memoizedState.deps)?h.memoizedState=Li(i,m,l,u):(Ae.flags|=r,h.memoizedState=Li(1|i,m,l,u))}function Um(r,i){Cl(8390656,8,r,i)}function Vm(r,i){Yo(2048,8,r,i)}function Im(r,i){return Yo(4,2,r,i)}function Hm(r,i){return Yo(4,4,r,i)}function Pm(r,i){if(typeof i=="function"){r=r();var l=i(r);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function $m(r,i,l){l=l!=null?l.concat([r]):null,Yo(4,4,Pm.bind(null,i,r),l)}function ud(){}function Fm(r,i){var l=ht();i=i===void 0?null:i;var u=l.memoizedState;return i!==null&&Wu(i,u[1])?u[0]:(l.memoizedState=[r,i],r)}function Qm(r,i){var l=ht();i=i===void 0?null:i;var u=l.memoizedState;if(i!==null&&Wu(i,u[1]))return u[0];if(u=r(),Is){Un(!0);try{r()}finally{Un(!1)}}return l.memoizedState=[u,i],u}function dd(r,i,l){return l===void 0||(Vr&1073741824)!==0?r.memoizedState=i:(r.memoizedState=l,r=Kg(),Ae.lanes|=r,Gr|=r,l)}function Gm(r,i,l,u){return dn(l,i)?l:zi.current!==null?(r=dd(r,l,u),dn(r,i)||(Et=!0),r):(Vr&42)===0?(Et=!0,r.memoizedState=l):(r=Kg(),Ae.lanes|=r,Gr|=r,i)}function Ym(r,i,l,u,h){var m=L.p;L.p=m!==0&&8>m?m:8;var w=N.T,k={};N.T=k,pd(r,!1,i,l);try{var M=h(),q=N.S;if(q!==null&&q(k,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var Q=l1(M,u);Ko(r,i,Q,gn(r))}else Ko(r,i,u,gn(r))}catch(K){Ko(r,i,{then:function(){},status:"rejected",reason:K},gn())}finally{L.p=m,N.T=w}}function h1(){}function fd(r,i,l,u){if(r.tag!==5)throw Error(s(476));var h=Km(r).queue;Ym(r,h,i,$,l===null?h1:function(){return Xm(r),l(u)})}function Km(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:$},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:l},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Xm(r){var i=Km(r).next.queue;Ko(r,i,{},gn())}function hd(){return Vt(ha)}function Jm(){return ht().memoizedState}function Zm(){return ht().memoizedState}function p1(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var l=gn();r=qr(l);var u=Ur(i,r,l);u!==null&&(yn(u,i,l),Po(u,i,l)),i={cache:Pu()},r.payload=i;return}i=i.return}}function m1(r,i,l){var u=gn();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Ml(r)?eg(i,l):(l=ju(r,i,l,u),l!==null&&(yn(l,r,u),tg(l,i,u)))}function Wm(r,i,l){var u=gn();Ko(r,i,l,u)}function Ko(r,i,l,u){var h={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ml(r))eg(i,h);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var w=i.lastRenderedState,k=m(w,l);if(h.hasEagerState=!0,h.eagerState=k,dn(k,w))return ul(r,i,h,0),Je===null&&cl(),!1}catch{}finally{}if(l=ju(r,i,h,u),l!==null)return yn(l,r,u),tg(l,i,u),!0}return!1}function pd(r,i,l,u){if(u={lane:2,revertLane:Qd(),action:u,hasEagerState:!1,eagerState:null,next:null},Ml(r)){if(i)throw Error(s(479))}else i=ju(r,l,u,2),i!==null&&yn(i,r,2)}function Ml(r){var i=r.alternate;return r===Ae||i!==null&&i===Ae}function eg(r,i){_i=Sl=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function tg(r,i,l){if((l&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,l|=u,i.lanes=l,it(r,l)}}var Nl={readContext:Vt,use:kl,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useLayoutEffect:lt,useInsertionEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useSyncExternalStore:lt,useId:lt,useHostTransitionStatus:lt,useFormState:lt,useActionState:lt,useOptimistic:lt,useMemoCache:lt,useCacheRefresh:lt},ng={readContext:Vt,use:kl,useCallback:function(r,i){return sn().memoizedState=[r,i===void 0?null:i],r},useContext:Vt,useEffect:Um,useImperativeHandle:function(r,i,l){l=l!=null?l.concat([r]):null,Cl(4194308,4,Pm.bind(null,i,r),l)},useLayoutEffect:function(r,i){return Cl(4194308,4,r,i)},useInsertionEffect:function(r,i){Cl(4,2,r,i)},useMemo:function(r,i){var l=sn();i=i===void 0?null:i;var u=r();if(Is){Un(!0);try{r()}finally{Un(!1)}}return l.memoizedState=[u,i],u},useReducer:function(r,i,l){var u=sn();if(l!==void 0){var h=l(i);if(Is){Un(!0);try{l(i)}finally{Un(!1)}}}else h=i;return u.memoizedState=u.baseState=h,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:h},u.queue=r,r=r.dispatch=m1.bind(null,Ae,r),[u.memoizedState,r]},useRef:function(r){var i=sn();return r={current:r},i.memoizedState=r},useState:function(r){r=ld(r);var i=r.queue,l=Wm.bind(null,Ae,i);return i.dispatch=l,[r.memoizedState,l]},useDebugValue:ud,useDeferredValue:function(r,i){var l=sn();return dd(l,r,i)},useTransition:function(){var r=ld(!1);return r=Ym.bind(null,Ae,r.queue,!0,!1),sn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,l){var u=Ae,h=sn();if(He){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),Je===null)throw Error(s(349));(Ue&124)!==0||km(u,i,l)}h.memoizedState=l;var m={value:l,getSnapshot:i};return h.queue=m,Um(Tm.bind(null,u,m,r),[r]),u.flags|=2048,Li(9,Tl(),Em.bind(null,u,m,l,i),null),l},useId:function(){var r=sn(),i=Je.identifierPrefix;if(He){var l=gr,u=mr;l=(u&~(1<<32-Dt(u)-1)).toString(32)+l,i="«"+i+"R"+l,l=wl++,0<l&&(i+="H"+l.toString(32)),i+="»"}else l=c1++,i="«"+i+"r"+l.toString(32)+"»";return r.memoizedState=i},useHostTransitionStatus:hd,useFormState:zm,useActionState:zm,useOptimistic:function(r){var i=sn();i.memoizedState=i.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=pd.bind(null,Ae,!0,l),l.dispatch=i,[r,i]},useMemoCache:id,useCacheRefresh:function(){return sn().memoizedState=p1.bind(null,Ae)}},rg={readContext:Vt,use:kl,useCallback:Fm,useContext:Vt,useEffect:Vm,useImperativeHandle:$m,useInsertionEffect:Im,useLayoutEffect:Hm,useMemo:Qm,useReducer:El,useRef:qm,useState:function(){return El(vr)},useDebugValue:ud,useDeferredValue:function(r,i){var l=ht();return Gm(l,Fe.memoizedState,r,i)},useTransition:function(){var r=El(vr)[0],i=ht().memoizedState;return[typeof r=="boolean"?r:Go(r),i]},useSyncExternalStore:wm,useId:Jm,useHostTransitionStatus:hd,useFormState:_m,useActionState:_m,useOptimistic:function(r,i){var l=ht();return Nm(l,Fe,r,i)},useMemoCache:id,useCacheRefresh:Zm},g1={readContext:Vt,use:kl,useCallback:Fm,useContext:Vt,useEffect:Vm,useImperativeHandle:$m,useInsertionEffect:Im,useLayoutEffect:Hm,useMemo:Qm,useReducer:ad,useRef:qm,useState:function(){return ad(vr)},useDebugValue:ud,useDeferredValue:function(r,i){var l=ht();return Fe===null?dd(l,r,i):Gm(l,Fe.memoizedState,r,i)},useTransition:function(){var r=ad(vr)[0],i=ht().memoizedState;return[typeof r=="boolean"?r:Go(r),i]},useSyncExternalStore:wm,useId:Jm,useHostTransitionStatus:hd,useFormState:Lm,useActionState:Lm,useOptimistic:function(r,i){var l=ht();return Fe!==null?Nm(l,Fe,r,i):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:id,useCacheRefresh:Zm},qi=null,Xo=0;function Al(r){var i=Xo;return Xo+=1,qi===null&&(qi=[]),pm(qi,r,i)}function Jo(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Ol(r,i){throw i.$$typeof===y?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function sg(r){var i=r._init;return i(r._payload)}function ig(r){function i(j,O){if(r){var B=j.deletions;B===null?(j.deletions=[O],j.flags|=16):B.push(O)}}function l(j,O){if(!r)return null;for(;O!==null;)i(j,O),O=O.sibling;return null}function u(j){for(var O=new Map;j!==null;)j.key!==null?O.set(j.key,j):O.set(j.index,j),j=j.sibling;return O}function h(j,O){return j=pr(j,O),j.index=0,j.sibling=null,j}function m(j,O,B){return j.index=B,r?(B=j.alternate,B!==null?(B=B.index,B<O?(j.flags|=67108866,O):B):(j.flags|=67108866,O)):(j.flags|=1048576,O)}function w(j){return r&&j.alternate===null&&(j.flags|=67108866),j}function k(j,O,B,G){return O===null||O.tag!==6?(O=_u(B,j.mode,G),O.return=j,O):(O=h(O,B),O.return=j,O)}function M(j,O,B,G){var fe=B.type;return fe===S?Q(j,O,B.props.children,G,B.key):O!==null&&(O.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===le&&sg(fe)===O.type)?(O=h(O,B.props),Jo(O,B),O.return=j,O):(O=fl(B.type,B.key,B.props,null,j.mode,G),Jo(O,B),O.return=j,O)}function q(j,O,B,G){return O===null||O.tag!==4||O.stateNode.containerInfo!==B.containerInfo||O.stateNode.implementation!==B.implementation?(O=Bu(B,j.mode,G),O.return=j,O):(O=h(O,B.children||[]),O.return=j,O)}function Q(j,O,B,G,fe){return O===null||O.tag!==7?(O=js(B,j.mode,G,fe),O.return=j,O):(O=h(O,B),O.return=j,O)}function K(j,O,B){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=_u(""+O,j.mode,B),O.return=j,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case b:return B=fl(O.type,O.key,O.props,null,j.mode,B),Jo(B,O),B.return=j,B;case x:return O=Bu(O,j.mode,B),O.return=j,O;case le:var G=O._init;return O=G(O._payload),K(j,O,B)}if(te(O)||Ce(O))return O=js(O,j.mode,B,null),O.return=j,O;if(typeof O.then=="function")return K(j,Al(O),B);if(O.$$typeof===Y)return K(j,gl(j,O),B);Ol(j,O)}return null}function V(j,O,B,G){var fe=O!==null?O.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return fe!==null?null:k(j,O,""+B,G);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case b:return B.key===fe?M(j,O,B,G):null;case x:return B.key===fe?q(j,O,B,G):null;case le:return fe=B._init,B=fe(B._payload),V(j,O,B,G)}if(te(B)||Ce(B))return fe!==null?null:Q(j,O,B,G,null);if(typeof B.then=="function")return V(j,O,Al(B),G);if(B.$$typeof===Y)return V(j,O,gl(j,B),G);Ol(j,B)}return null}function I(j,O,B,G,fe){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return j=j.get(B)||null,k(O,j,""+G,fe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case b:return j=j.get(G.key===null?B:G.key)||null,M(O,j,G,fe);case x:return j=j.get(G.key===null?B:G.key)||null,q(O,j,G,fe);case le:var Re=G._init;return G=Re(G._payload),I(j,O,B,G,fe)}if(te(G)||Ce(G))return j=j.get(B)||null,Q(O,j,G,fe,null);if(typeof G.then=="function")return I(j,O,B,Al(G),fe);if(G.$$typeof===Y)return I(j,O,B,gl(O,G),fe);Ol(O,G)}return null}function Se(j,O,B,G){for(var fe=null,Re=null,ge=O,xe=O=0,Ct=null;ge!==null&&xe<B.length;xe++){ge.index>xe?(Ct=ge,ge=null):Ct=ge.sibling;var Ie=V(j,ge,B[xe],G);if(Ie===null){ge===null&&(ge=Ct);break}r&&ge&&Ie.alternate===null&&i(j,ge),O=m(Ie,O,xe),Re===null?fe=Ie:Re.sibling=Ie,Re=Ie,ge=Ct}if(xe===B.length)return l(j,ge),He&&_s(j,xe),fe;if(ge===null){for(;xe<B.length;xe++)ge=K(j,B[xe],G),ge!==null&&(O=m(ge,O,xe),Re===null?fe=ge:Re.sibling=ge,Re=ge);return He&&_s(j,xe),fe}for(ge=u(ge);xe<B.length;xe++)Ct=I(ge,j,xe,B[xe],G),Ct!==null&&(r&&Ct.alternate!==null&&ge.delete(Ct.key===null?xe:Ct.key),O=m(Ct,O,xe),Re===null?fe=Ct:Re.sibling=Ct,Re=Ct);return r&&ge.forEach(function(ns){return i(j,ns)}),He&&_s(j,xe),fe}function ve(j,O,B,G){if(B==null)throw Error(s(151));for(var fe=null,Re=null,ge=O,xe=O=0,Ct=null,Ie=B.next();ge!==null&&!Ie.done;xe++,Ie=B.next()){ge.index>xe?(Ct=ge,ge=null):Ct=ge.sibling;var ns=V(j,ge,Ie.value,G);if(ns===null){ge===null&&(ge=Ct);break}r&&ge&&ns.alternate===null&&i(j,ge),O=m(ns,O,xe),Re===null?fe=ns:Re.sibling=ns,Re=ns,ge=Ct}if(Ie.done)return l(j,ge),He&&_s(j,xe),fe;if(ge===null){for(;!Ie.done;xe++,Ie=B.next())Ie=K(j,Ie.value,G),Ie!==null&&(O=m(Ie,O,xe),Re===null?fe=Ie:Re.sibling=Ie,Re=Ie);return He&&_s(j,xe),fe}for(ge=u(ge);!Ie.done;xe++,Ie=B.next())Ie=I(ge,j,xe,Ie.value,G),Ie!==null&&(r&&Ie.alternate!==null&&ge.delete(Ie.key===null?xe:Ie.key),O=m(Ie,O,xe),Re===null?fe=Ie:Re.sibling=Ie,Re=Ie);return r&&ge.forEach(function(yw){return i(j,yw)}),He&&_s(j,xe),fe}function Ge(j,O,B,G){if(typeof B=="object"&&B!==null&&B.type===S&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case b:e:{for(var fe=B.key;O!==null;){if(O.key===fe){if(fe=B.type,fe===S){if(O.tag===7){l(j,O.sibling),G=h(O,B.props.children),G.return=j,j=G;break e}}else if(O.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===le&&sg(fe)===O.type){l(j,O.sibling),G=h(O,B.props),Jo(G,B),G.return=j,j=G;break e}l(j,O);break}else i(j,O);O=O.sibling}B.type===S?(G=js(B.props.children,j.mode,G,B.key),G.return=j,j=G):(G=fl(B.type,B.key,B.props,null,j.mode,G),Jo(G,B),G.return=j,j=G)}return w(j);case x:e:{for(fe=B.key;O!==null;){if(O.key===fe)if(O.tag===4&&O.stateNode.containerInfo===B.containerInfo&&O.stateNode.implementation===B.implementation){l(j,O.sibling),G=h(O,B.children||[]),G.return=j,j=G;break e}else{l(j,O);break}else i(j,O);O=O.sibling}G=Bu(B,j.mode,G),G.return=j,j=G}return w(j);case le:return fe=B._init,B=fe(B._payload),Ge(j,O,B,G)}if(te(B))return Se(j,O,B,G);if(Ce(B)){if(fe=Ce(B),typeof fe!="function")throw Error(s(150));return B=fe.call(B),ve(j,O,B,G)}if(typeof B.then=="function")return Ge(j,O,Al(B),G);if(B.$$typeof===Y)return Ge(j,O,gl(j,B),G);Ol(j,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,O!==null&&O.tag===6?(l(j,O.sibling),G=h(O,B),G.return=j,j=G):(l(j,O),G=_u(B,j.mode,G),G.return=j,j=G),w(j)):l(j,O)}return function(j,O,B,G){try{Xo=0;var fe=Ge(j,O,B,G);return qi=null,fe}catch(ge){if(ge===Io||ge===bl)throw ge;var Re=fn(29,ge,null,j.mode);return Re.lanes=G,Re.return=j,Re}finally{}}}var Ui=ig(!0),og=ig(!1),An=P(null),Wn=null;function Ir(r){var i=r.alternate;D(xt,xt.current&1),D(An,r),Wn===null&&(i===null||zi.current!==null||i.memoizedState!==null)&&(Wn=r)}function ag(r){if(r.tag===22){if(D(xt,xt.current),D(An,r),Wn===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(Wn=r)}}else Hr()}function Hr(){D(xt,xt.current),D(An,An.current)}function xr(r){ee(An),Wn===r&&(Wn=null),ee(xt)}var xt=P(0);function Rl(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||sf(l)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function md(r,i,l,u){i=r.memoizedState,l=l(u,i),l=l==null?i:g({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var gd={enqueueSetState:function(r,i,l){r=r._reactInternals;var u=gn(),h=qr(u);h.payload=i,l!=null&&(h.callback=l),i=Ur(r,h,u),i!==null&&(yn(i,r,u),Po(i,r,u))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var u=gn(),h=qr(u);h.tag=1,h.payload=i,l!=null&&(h.callback=l),i=Ur(r,h,u),i!==null&&(yn(i,r,u),Po(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=gn(),u=qr(l);u.tag=2,i!=null&&(u.callback=i),i=Ur(r,u,l),i!==null&&(yn(i,r,l),Po(i,r,l))}};function lg(r,i,l,u,h,m,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,w):i.prototype&&i.prototype.isPureReactComponent?!jo(l,u)||!jo(h,m):!0}function cg(r,i,l,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,u),i.state!==r&&gd.enqueueReplaceState(i,i.state,null)}function Hs(r,i){var l=i;if("ref"in i){l={};for(var u in i)u!=="ref"&&(l[u]=i[u])}if(r=r.defaultProps){l===i&&(l=g({},l));for(var h in r)l[h]===void 0&&(l[h]=r[h])}return l}var Dl=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function ug(r){Dl(r)}function dg(r){console.error(r)}function fg(r){Dl(r)}function jl(r,i){try{var l=r.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function hg(r,i,l){try{var u=r.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function yd(r,i,l){return l=qr(l),l.tag=3,l.payload={element:null},l.callback=function(){jl(r,i)},l}function pg(r){return r=qr(r),r.tag=3,r}function mg(r,i,l,u){var h=l.type.getDerivedStateFromError;if(typeof h=="function"){var m=u.value;r.payload=function(){return h(m)},r.callback=function(){hg(i,l,u)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){hg(i,l,u),typeof h!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var k=u.stack;this.componentDidCatch(u.value,{componentStack:k!==null?k:""})})}function y1(r,i,l,u,h){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=l.alternate,i!==null&&qo(i,l,h,!0),l=An.current,l!==null){switch(l.tag){case 13:return Wn===null?Id():l.alternate===null&&nt===0&&(nt=3),l.flags&=-257,l.flags|=65536,l.lanes=h,u===Qu?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([u]):i.add(u),Pd(r,u,h)),!1;case 22:return l.flags|=65536,u===Qu?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([u]):l.add(u)),Pd(r,u,h)),!1}throw Error(s(435,l.tag))}return Pd(r,u,h),Id(),!1}if(He)return i=An.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,u!==Uu&&(r=Error(s(422),{cause:u}),Lo(Tn(r,l)))):(u!==Uu&&(i=Error(s(423),{cause:u}),Lo(Tn(i,l))),r=r.current.alternate,r.flags|=65536,h&=-h,r.lanes|=h,u=Tn(u,l),h=yd(r.stateNode,u,h),Ku(r,h),nt!==4&&(nt=2)),!1;var m=Error(s(520),{cause:u});if(m=Tn(m,l),sa===null?sa=[m]:sa.push(m),nt!==4&&(nt=2),i===null)return!0;u=Tn(u,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,r=h&-h,l.lanes|=r,r=yd(l.stateNode,u,r),Ku(l,r),!1;case 1:if(i=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Yr===null||!Yr.has(m))))return l.flags|=65536,h&=-h,l.lanes|=h,h=pg(h),mg(h,r,l,u),Ku(l,h),!1}l=l.return}while(l!==null);return!1}var gg=Error(s(461)),Et=!1;function zt(r,i,l,u){i.child=r===null?og(i,null,l,u):Ui(i,r.child,l,u)}function yg(r,i,l,u,h){l=l.render;var m=i.ref;if("ref"in u){var w={};for(var k in u)k!=="ref"&&(w[k]=u[k])}else w=u;return Us(i),u=ed(r,i,l,w,m,h),k=td(),r!==null&&!Et?(nd(r,i,h),Sr(r,i,h)):(He&&k&&Lu(i),i.flags|=1,zt(r,i,u,h),i.child)}function bg(r,i,l,u,h){if(r===null){var m=l.type;return typeof m=="function"&&!zu(m)&&m.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=m,vg(r,i,m,u,h)):(r=fl(l.type,null,u,i,i.mode,h),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!Td(r,h)){var w=m.memoizedProps;if(l=l.compare,l=l!==null?l:jo,l(w,u)&&r.ref===i.ref)return Sr(r,i,h)}return i.flags|=1,r=pr(m,u),r.ref=i.ref,r.return=i,i.child=r}function vg(r,i,l,u,h){if(r!==null){var m=r.memoizedProps;if(jo(m,u)&&r.ref===i.ref)if(Et=!1,i.pendingProps=u=m,Td(r,h))(r.flags&131072)!==0&&(Et=!0);else return i.lanes=r.lanes,Sr(r,i,h)}return bd(r,i,l,u,h)}function xg(r,i,l){var u=i.pendingProps,h=u.children,m=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=m!==null?m.baseLanes|l:l,r!==null){for(h=i.child=r.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;i.childLanes=m&~u}else i.childLanes=0,i.child=null;return Sg(r,i,u,l)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&yl(i,m!==null?m.cachePool:null),m!==null?vm(i,m):Ju(),ag(i);else return i.lanes=i.childLanes=536870912,Sg(r,i,m!==null?m.baseLanes|l:l,l)}else m!==null?(yl(i,m.cachePool),vm(i,m),Hr(),i.memoizedState=null):(r!==null&&yl(i,null),Ju(),Hr());return zt(r,i,h,l),i.child}function Sg(r,i,l,u){var h=Fu();return h=h===null?null:{parent:vt._currentValue,pool:h},i.memoizedState={baseLanes:l,cachePool:h},r!==null&&yl(i,null),Ju(),ag(i),r!==null&&qo(r,i,u,!0),null}function zl(r,i){var l=i.ref;if(l===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(r===null||r.ref!==l)&&(i.flags|=4194816)}}function bd(r,i,l,u,h){return Us(i),l=ed(r,i,l,u,void 0,h),u=td(),r!==null&&!Et?(nd(r,i,h),Sr(r,i,h)):(He&&u&&Lu(i),i.flags|=1,zt(r,i,l,h),i.child)}function wg(r,i,l,u,h,m){return Us(i),i.updateQueue=null,l=Sm(i,u,l,h),xm(r),u=td(),r!==null&&!Et?(nd(r,i,m),Sr(r,i,m)):(He&&u&&Lu(i),i.flags|=1,zt(r,i,l,m),i.child)}function kg(r,i,l,u,h){if(Us(i),i.stateNode===null){var m=Ai,w=l.contextType;typeof w=="object"&&w!==null&&(m=Vt(w)),m=new l(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=gd,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},Gu(i),w=l.contextType,m.context=typeof w=="object"&&w!==null?Vt(w):Ai,m.state=i.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(md(i,l,w,u),m.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&gd.enqueueReplaceState(m,m.state,null),Fo(i,u,m,h),$o(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){m=i.stateNode;var k=i.memoizedProps,M=Hs(l,k);m.props=M;var q=m.context,Q=l.contextType;w=Ai,typeof Q=="object"&&Q!==null&&(w=Vt(Q));var K=l.getDerivedStateFromProps;Q=typeof K=="function"||typeof m.getSnapshotBeforeUpdate=="function",k=i.pendingProps!==k,Q||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(k||q!==w)&&cg(i,m,u,w),Lr=!1;var V=i.memoizedState;m.state=V,Fo(i,u,m,h),$o(),q=i.memoizedState,k||V!==q||Lr?(typeof K=="function"&&(md(i,l,K,u),q=i.memoizedState),(M=Lr||lg(i,l,M,u,V,q,w))?(Q||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=q),m.props=u,m.state=q,m.context=w,u=M):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,Yu(r,i),w=i.memoizedProps,Q=Hs(l,w),m.props=Q,K=i.pendingProps,V=m.context,q=l.contextType,M=Ai,typeof q=="object"&&q!==null&&(M=Vt(q)),k=l.getDerivedStateFromProps,(q=typeof k=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==K||V!==M)&&cg(i,m,u,M),Lr=!1,V=i.memoizedState,m.state=V,Fo(i,u,m,h),$o();var I=i.memoizedState;w!==K||V!==I||Lr||r!==null&&r.dependencies!==null&&ml(r.dependencies)?(typeof k=="function"&&(md(i,l,k,u),I=i.memoizedState),(Q=Lr||lg(i,l,Q,u,V,I,M)||r!==null&&r.dependencies!==null&&ml(r.dependencies))?(q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,I,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,I,M)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===r.memoizedProps&&V===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&V===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=I),m.props=u,m.state=I,m.context=M,u=Q):(typeof m.componentDidUpdate!="function"||w===r.memoizedProps&&V===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&V===r.memoizedState||(i.flags|=1024),u=!1)}return m=u,zl(r,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,r!==null&&u?(i.child=Ui(i,r.child,null,h),i.child=Ui(i,null,l,h)):zt(r,i,l,h),i.memoizedState=m.state,r=i.child):r=Sr(r,i,h),r}function Eg(r,i,l,u){return Bo(),i.flags|=256,zt(r,i,l,u),i.child}var vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xd(r){return{baseLanes:r,cachePool:dm()}}function Sd(r,i,l){return r=r!==null?r.childLanes&~l:0,i&&(r|=On),r}function Tg(r,i,l){var u=i.pendingProps,h=!1,m=(i.flags&128)!==0,w;if((w=m)||(w=r!==null&&r.memoizedState===null?!1:(xt.current&2)!==0),w&&(h=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,r===null){if(He){if(h?Ir(i):Hr(),He){var k=tt,M;if(M=k){e:{for(M=k,k=Zn;M.nodeType!==8;){if(!k){k=null;break e}if(M=Pn(M.nextSibling),M===null){k=null;break e}}k=M}k!==null?(i.memoizedState={dehydrated:k,treeContext:zs!==null?{id:mr,overflow:gr}:null,retryLane:536870912,hydrationErrors:null},M=fn(18,null,null,0),M.stateNode=k,M.return=i,i.child=M,Xt=i,tt=null,M=!0):M=!1}M||Ls(i)}if(k=i.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return sf(k)?i.lanes=32:i.lanes=536870912,null;xr(i)}return k=u.children,u=u.fallback,h?(Hr(),h=i.mode,k=_l({mode:"hidden",children:k},h),u=js(u,h,l,null),k.return=i,u.return=i,k.sibling=u,i.child=k,h=i.child,h.memoizedState=xd(l),h.childLanes=Sd(r,w,l),i.memoizedState=vd,u):(Ir(i),wd(i,k))}if(M=r.memoizedState,M!==null&&(k=M.dehydrated,k!==null)){if(m)i.flags&256?(Ir(i),i.flags&=-257,i=kd(r,i,l)):i.memoizedState!==null?(Hr(),i.child=r.child,i.flags|=128,i=null):(Hr(),h=u.fallback,k=i.mode,u=_l({mode:"visible",children:u.children},k),h=js(h,k,l,null),h.flags|=2,u.return=i,h.return=i,u.sibling=h,i.child=u,Ui(i,r.child,null,l),u=i.child,u.memoizedState=xd(l),u.childLanes=Sd(r,w,l),i.memoizedState=vd,i=h);else if(Ir(i),sf(k)){if(w=k.nextSibling&&k.nextSibling.dataset,w)var q=w.dgst;w=q,u=Error(s(419)),u.stack="",u.digest=w,Lo({value:u,source:null,stack:null}),i=kd(r,i,l)}else if(Et||qo(r,i,l,!1),w=(l&r.childLanes)!==0,Et||w){if(w=Je,w!==null&&(u=l&-l,u=(u&42)!==0?1:dt(u),u=(u&(w.suspendedLanes|l))!==0?0:u,u!==0&&u!==M.retryLane))throw M.retryLane=u,Ni(r,u),yn(w,r,u),gg;k.data==="$?"||Id(),i=kd(r,i,l)}else k.data==="$?"?(i.flags|=192,i.child=r.child,i=null):(r=M.treeContext,tt=Pn(k.nextSibling),Xt=i,He=!0,Bs=null,Zn=!1,r!==null&&(Mn[Nn++]=mr,Mn[Nn++]=gr,Mn[Nn++]=zs,mr=r.id,gr=r.overflow,zs=i),i=wd(i,u.children),i.flags|=4096);return i}return h?(Hr(),h=u.fallback,k=i.mode,M=r.child,q=M.sibling,u=pr(M,{mode:"hidden",children:u.children}),u.subtreeFlags=M.subtreeFlags&65011712,q!==null?h=pr(q,h):(h=js(h,k,l,null),h.flags|=2),h.return=i,u.return=i,u.sibling=h,i.child=u,u=h,h=i.child,k=r.child.memoizedState,k===null?k=xd(l):(M=k.cachePool,M!==null?(q=vt._currentValue,M=M.parent!==q?{parent:q,pool:q}:M):M=dm(),k={baseLanes:k.baseLanes|l,cachePool:M}),h.memoizedState=k,h.childLanes=Sd(r,w,l),i.memoizedState=vd,u):(Ir(i),l=r.child,r=l.sibling,l=pr(l,{mode:"visible",children:u.children}),l.return=i,l.sibling=null,r!==null&&(w=i.deletions,w===null?(i.deletions=[r],i.flags|=16):w.push(r)),i.child=l,i.memoizedState=null,l)}function wd(r,i){return i=_l({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function _l(r,i){return r=fn(22,r,null,i),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function kd(r,i,l){return Ui(i,r.child,null,l),r=wd(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Cg(r,i,l){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),Iu(r.return,i,l)}function Ed(r,i,l,u,h){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:h}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=l,m.tailMode=h)}function Mg(r,i,l){var u=i.pendingProps,h=u.revealOrder,m=u.tail;if(zt(r,i,u.children,l),u=xt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Cg(r,l,i);else if(r.tag===19)Cg(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(D(xt,u),h){case"forwards":for(l=i.child,h=null;l!==null;)r=l.alternate,r!==null&&Rl(r)===null&&(h=l),l=l.sibling;l=h,l===null?(h=i.child,i.child=null):(h=l.sibling,l.sibling=null),Ed(i,!1,h,l,m);break;case"backwards":for(l=null,h=i.child,i.child=null;h!==null;){if(r=h.alternate,r!==null&&Rl(r)===null){i.child=h;break}r=h.sibling,h.sibling=l,l=h,h=r}Ed(i,!0,l,null,m);break;case"together":Ed(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Sr(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),Gr|=i.lanes,(l&i.childLanes)===0)if(r!==null){if(qo(r,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,l=pr(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=pr(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function Td(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&ml(r)))}function b1(r,i,l){switch(i.tag){case 3:oe(i,i.stateNode.containerInfo),Br(i,vt,r.memoizedState.cache),Bo();break;case 27:case 5:Be(i);break;case 4:oe(i,i.stateNode.containerInfo);break;case 10:Br(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ir(i),i.flags|=128,null):(l&i.child.childLanes)!==0?Tg(r,i,l):(Ir(i),r=Sr(r,i,l),r!==null?r.sibling:null);Ir(i);break;case 19:var h=(r.flags&128)!==0;if(u=(l&i.childLanes)!==0,u||(qo(r,i,l,!1),u=(l&i.childLanes)!==0),h){if(u)return Mg(r,i,l);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),D(xt,xt.current),u)break;return null;case 22:case 23:return i.lanes=0,xg(r,i,l);case 24:Br(i,vt,r.memoizedState.cache)}return Sr(r,i,l)}function Ng(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps)Et=!0;else{if(!Td(r,l)&&(i.flags&128)===0)return Et=!1,b1(r,i,l);Et=(r.flags&131072)!==0}else Et=!1,He&&(i.flags&1048576)!==0&&sm(i,pl,i.index);switch(i.lanes=0,i.tag){case 16:e:{r=i.pendingProps;var u=i.elementType,h=u._init;if(u=h(u._payload),i.type=u,typeof u=="function")zu(u)?(r=Hs(u,r),i.tag=1,i=kg(null,i,u,r,l)):(i.tag=0,i=bd(null,i,u,r,l));else{if(u!=null){if(h=u.$$typeof,h===H){i.tag=11,i=yg(null,i,u,r,l);break e}else if(h===Z){i.tag=14,i=bg(null,i,u,r,l);break e}}throw i=se(u)||u,Error(s(306,i,""))}}return i;case 0:return bd(r,i,i.type,i.pendingProps,l);case 1:return u=i.type,h=Hs(u,i.pendingProps),kg(r,i,u,h,l);case 3:e:{if(oe(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var m=i.memoizedState;h=m.element,Yu(r,i),Fo(i,u,null,l);var w=i.memoizedState;if(u=w.cache,Br(i,vt,u),u!==m.cache&&Hu(i,[vt],l,!0),$o(),u=w.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Eg(r,i,u,l);break e}else if(u!==h){h=Tn(Error(s(424)),i),Lo(h),i=Eg(r,i,u,l);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(tt=Pn(r.firstChild),Xt=i,He=!0,Bs=null,Zn=!0,l=og(i,null,u,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Bo(),u===h){i=Sr(r,i,l);break e}zt(r,i,u,l)}i=i.child}return i;case 26:return zl(r,i),r===null?(l=Dy(i.type,null,i.pendingProps,null))?i.memoizedState=l:He||(l=i.type,r=i.pendingProps,u=Kl(z.current).createElement(l),u[at]=i,u[Xe]=r,Bt(u,l,r),kt(u),i.stateNode=u):i.memoizedState=Dy(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Be(i),r===null&&He&&(u=i.stateNode=Ay(i.type,i.pendingProps,z.current),Xt=i,Zn=!0,h=tt,Jr(i.type)?(of=h,tt=Pn(u.firstChild)):tt=h),zt(r,i,i.pendingProps.children,l),zl(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&He&&((h=u=tt)&&(u=Q1(u,i.type,i.pendingProps,Zn),u!==null?(i.stateNode=u,Xt=i,tt=Pn(u.firstChild),Zn=!1,h=!0):h=!1),h||Ls(i)),Be(i),h=i.type,m=i.pendingProps,w=r!==null?r.memoizedProps:null,u=m.children,tf(h,m)?u=null:w!==null&&tf(h,w)&&(i.flags|=32),i.memoizedState!==null&&(h=ed(r,i,u1,null,null,l),ha._currentValue=h),zl(r,i),zt(r,i,u,l),i.child;case 6:return r===null&&He&&((r=l=tt)&&(l=G1(l,i.pendingProps,Zn),l!==null?(i.stateNode=l,Xt=i,tt=null,r=!0):r=!1),r||Ls(i)),null;case 13:return Tg(r,i,l);case 4:return oe(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Ui(i,null,u,l):zt(r,i,u,l),i.child;case 11:return yg(r,i,i.type,i.pendingProps,l);case 7:return zt(r,i,i.pendingProps,l),i.child;case 8:return zt(r,i,i.pendingProps.children,l),i.child;case 12:return zt(r,i,i.pendingProps.children,l),i.child;case 10:return u=i.pendingProps,Br(i,i.type,u.value),zt(r,i,u.children,l),i.child;case 9:return h=i.type._context,u=i.pendingProps.children,Us(i),h=Vt(h),u=u(h),i.flags|=1,zt(r,i,u,l),i.child;case 14:return bg(r,i,i.type,i.pendingProps,l);case 15:return vg(r,i,i.type,i.pendingProps,l);case 19:return Mg(r,i,l);case 31:return u=i.pendingProps,l=i.mode,u={mode:u.mode,children:u.children},r===null?(l=_l(u,l),l.ref=i.ref,i.child=l,l.return=i,i=l):(l=pr(r.child,u),l.ref=i.ref,i.child=l,l.return=i,i=l),i;case 22:return xg(r,i,l);case 24:return Us(i),u=Vt(vt),r===null?(h=Fu(),h===null&&(h=Je,m=Pu(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=l),h=m),i.memoizedState={parent:u,cache:h},Gu(i),Br(i,vt,h)):((r.lanes&l)!==0&&(Yu(r,i),Fo(i,null,null,l),$o()),h=r.memoizedState,m=i.memoizedState,h.parent!==u?(h={parent:u,cache:u},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Br(i,vt,u)):(u=m.cache,Br(i,vt,u),u!==h.cache&&Hu(i,[vt],l,!0))),zt(r,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function wr(r){r.flags|=4}function Ag(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Ly(i)){if(i=An.current,i!==null&&((Ue&4194048)===Ue?Wn!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||i!==Wn))throw Ho=Qu,fm;r.flags|=8192}}function Bl(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Xa():536870912,r.lanes|=i,Pi|=i)}function Zo(r,i){if(!He)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function et(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(i)for(var h=r.child;h!==null;)l|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)l|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=u,r.childLanes=l,i}function v1(r,i,l){var u=i.pendingProps;switch(qu(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(i),null;case 1:return et(i),null;case 3:return l=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),br(vt),Ee(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(_o(i)?wr(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,am())),et(i),null;case 26:return l=i.memoizedState,r===null?(wr(i),l!==null?(et(i),Ag(i,l)):(et(i),i.flags&=-16777217)):l?l!==r.memoizedState?(wr(i),et(i),Ag(i,l)):(et(i),i.flags&=-16777217):(r.memoizedProps!==u&&wr(i),et(i),i.flags&=-16777217),null;case 27:be(i),l=z.current;var h=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==u&&wr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return et(i),null}r=X.current,_o(i)?im(i):(r=Ay(h,u,l),i.stateNode=r,wr(i))}return et(i),null;case 5:if(be(i),l=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&wr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return et(i),null}if(r=X.current,_o(i))im(i);else{switch(h=Kl(z.current),r){case 1:r=h.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=h.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=h.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=h.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=h.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?h.createElement("select",{is:u.is}):h.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?h.createElement(l,{is:u.is}):h.createElement(l)}}r[at]=i,r[Xe]=u;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)r.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=r;e:switch(Bt(r,l,u),l){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&wr(i)}}return et(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&wr(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=z.current,_o(i)){if(r=i.stateNode,l=i.memoizedProps,u=null,h=Xt,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}r[at]=i,r=!!(r.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||wy(r.nodeValue,l)),r||Ls(i)}else r=Kl(r).createTextNode(u),r[at]=i,i.stateNode=r}return et(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(h=_o(i),u!==null&&u.dehydrated!==null){if(r===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[at]=i}else Bo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;et(i),h=!1}else h=am(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(xr(i),i):(xr(i),null)}if(xr(i),(i.flags&128)!==0)return i.lanes=l,i;if(l=u!==null,r=r!==null&&r.memoizedState!==null,l){u=i.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048)}return l!==r&&l&&(i.child.flags|=8192),Bl(i,i.updateQueue),et(i),null;case 4:return Ee(),r===null&&Xd(i.stateNode.containerInfo),et(i),null;case 10:return br(i.type),et(i),null;case 19:if(ee(xt),h=i.memoizedState,h===null)return et(i),null;if(u=(i.flags&128)!==0,m=h.rendering,m===null)if(u)Zo(h,!1);else{if(nt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(m=Rl(r),m!==null){for(i.flags|=128,Zo(h,!1),r=m.updateQueue,i.updateQueue=r,Bl(i,r),i.subtreeFlags=0,r=l,l=i.child;l!==null;)rm(l,r),l=l.sibling;return D(xt,xt.current&1|2),i.child}r=r.sibling}h.tail!==null&&ut()>Ul&&(i.flags|=128,u=!0,Zo(h,!1),i.lanes=4194304)}else{if(!u)if(r=Rl(m),r!==null){if(i.flags|=128,u=!0,r=r.updateQueue,i.updateQueue=r,Bl(i,r),Zo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!He)return et(i),null}else 2*ut()-h.renderingStartTime>Ul&&l!==536870912&&(i.flags|=128,u=!0,Zo(h,!1),i.lanes=4194304);h.isBackwards?(m.sibling=i.child,i.child=m):(r=h.last,r!==null?r.sibling=m:i.child=m,h.last=m)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=ut(),i.sibling=null,r=xt.current,D(xt,u?r&1|2:r&1),i):(et(i),null);case 22:case 23:return xr(i),Zu(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(l&536870912)!==0&&(i.flags&128)===0&&(et(i),i.subtreeFlags&6&&(i.flags|=8192)):et(i),l=i.updateQueue,l!==null&&Bl(i,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==l&&(i.flags|=2048),r!==null&&ee(Vs),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),br(vt),et(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function x1(r,i){switch(qu(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return br(vt),Ee(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return be(i),null;case 13:if(xr(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Bo()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return ee(xt),null;case 4:return Ee(),null;case 10:return br(i.type),null;case 22:case 23:return xr(i),Zu(),r!==null&&ee(Vs),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return br(vt),null;case 25:return null;default:return null}}function Og(r,i){switch(qu(i),i.tag){case 3:br(vt),Ee();break;case 26:case 27:case 5:be(i);break;case 4:Ee();break;case 13:xr(i);break;case 19:ee(xt);break;case 10:br(i.type);break;case 22:case 23:xr(i),Zu(),r!==null&&ee(Vs);break;case 24:br(vt)}}function Wo(r,i){try{var l=i.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var h=u.next;l=h;do{if((l.tag&r)===r){u=void 0;var m=l.create,w=l.inst;u=m(),w.destroy=u}l=l.next}while(l!==h)}}catch(k){Ye(i,i.return,k)}}function Pr(r,i,l){try{var u=i.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var m=h.next;u=m;do{if((u.tag&r)===r){var w=u.inst,k=w.destroy;if(k!==void 0){w.destroy=void 0,h=i;var M=l,q=k;try{q()}catch(Q){Ye(h,M,Q)}}}u=u.next}while(u!==m)}}catch(Q){Ye(i,i.return,Q)}}function Rg(r){var i=r.updateQueue;if(i!==null){var l=r.stateNode;try{bm(i,l)}catch(u){Ye(r,r.return,u)}}}function Dg(r,i,l){l.props=Hs(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(u){Ye(r,i,u)}}function ea(r,i){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof l=="function"?r.refCleanup=l(u):l.current=u}}catch(h){Ye(r,i,h)}}function er(r,i){var l=r.ref,u=r.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(h){Ye(r,i,h)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(h){Ye(r,i,h)}else l.current=null}function jg(r){var i=r.type,l=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(h){Ye(r,r.return,h)}}function Cd(r,i,l){try{var u=r.stateNode;I1(u,r.type,l,i),u[Xe]=i}catch(h){Ye(r,r.return,h)}}function zg(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Jr(r.type)||r.tag===4}function Md(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||zg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Jr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Nd(r,i,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(r),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Yl));else if(u!==4&&(u===27&&Jr(r.type)&&(l=r.stateNode,i=null),r=r.child,r!==null))for(Nd(r,i,l),r=r.sibling;r!==null;)Nd(r,i,l),r=r.sibling}function Ll(r,i,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(u!==4&&(u===27&&Jr(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(Ll(r,i,l),r=r.sibling;r!==null;)Ll(r,i,l),r=r.sibling}function _g(r){var i=r.stateNode,l=r.memoizedProps;try{for(var u=r.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Bt(i,u,l),i[at]=r,i[Xe]=l}catch(m){Ye(r,r.return,m)}}var kr=!1,ct=!1,Ad=!1,Bg=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function S1(r,i){if(r=r.containerInfo,Wd=tc,r=Gp(r),Mu(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var h=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var w=0,k=-1,M=-1,q=0,Q=0,K=r,V=null;t:for(;;){for(var I;K!==l||h!==0&&K.nodeType!==3||(k=w+h),K!==m||u!==0&&K.nodeType!==3||(M=w+u),K.nodeType===3&&(w+=K.nodeValue.length),(I=K.firstChild)!==null;)V=K,K=I;for(;;){if(K===r)break t;if(V===l&&++q===h&&(k=w),V===m&&++Q===u&&(M=w),(I=K.nextSibling)!==null)break;K=V,V=K.parentNode}K=I}l=k===-1||M===-1?null:{start:k,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for(ef={focusedElem:r,selectionRange:l},tc=!1,Tt=i;Tt!==null;)if(i=Tt,r=i.child,(i.subtreeFlags&1024)!==0&&r!==null)r.return=i,Tt=r;else for(;Tt!==null;){switch(i=Tt,m=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,l=i,h=m.memoizedProps,m=m.memoizedState,u=l.stateNode;try{var Se=Hs(l.type,h,l.elementType===l.type);r=u.getSnapshotBeforeUpdate(Se,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(ve){Ye(l,l.return,ve)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,l=r.nodeType,l===9)rf(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":rf(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Tt=r;break}Tt=i.return}}function Lg(r,i,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:$r(r,l),u&4&&Wo(5,l);break;case 1:if($r(r,l),u&4)if(r=l.stateNode,i===null)try{r.componentDidMount()}catch(w){Ye(l,l.return,w)}else{var h=Hs(l.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(h,i,r.__reactInternalSnapshotBeforeUpdate)}catch(w){Ye(l,l.return,w)}}u&64&&Rg(l),u&512&&ea(l,l.return);break;case 3:if($r(r,l),u&64&&(r=l.updateQueue,r!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{bm(r,i)}catch(w){Ye(l,l.return,w)}}break;case 27:i===null&&u&4&&_g(l);case 26:case 5:$r(r,l),i===null&&u&4&&jg(l),u&512&&ea(l,l.return);break;case 12:$r(r,l);break;case 13:$r(r,l),u&4&&Vg(r,l),u&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=O1.bind(null,l),Y1(r,l))));break;case 22:if(u=l.memoizedState!==null||kr,!u){i=i!==null&&i.memoizedState!==null||ct,h=kr;var m=ct;kr=u,(ct=i)&&!m?Fr(r,l,(l.subtreeFlags&8772)!==0):$r(r,l),kr=h,ct=m}break;case 30:break;default:$r(r,l)}}function qg(r){var i=r.alternate;i!==null&&(r.alternate=null,qg(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&lu(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var We=null,on=!1;function Er(r,i,l){for(l=l.child;l!==null;)Ug(r,i,l),l=l.sibling}function Ug(r,i,l){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Xn,l)}catch{}switch(l.tag){case 26:ct||er(l,i),Er(r,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ct||er(l,i);var u=We,h=on;Jr(l.type)&&(We=l.stateNode,on=!1),Er(r,i,l),ca(l.stateNode),We=u,on=h;break;case 5:ct||er(l,i);case 6:if(u=We,h=on,We=null,Er(r,i,l),We=u,on=h,We!==null)if(on)try{(We.nodeType===9?We.body:We.nodeName==="HTML"?We.ownerDocument.body:We).removeChild(l.stateNode)}catch(m){Ye(l,i,m)}else try{We.removeChild(l.stateNode)}catch(m){Ye(l,i,m)}break;case 18:We!==null&&(on?(r=We,My(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),ya(r)):My(We,l.stateNode));break;case 4:u=We,h=on,We=l.stateNode.containerInfo,on=!0,Er(r,i,l),We=u,on=h;break;case 0:case 11:case 14:case 15:ct||Pr(2,l,i),ct||Pr(4,l,i),Er(r,i,l);break;case 1:ct||(er(l,i),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Dg(l,i,u)),Er(r,i,l);break;case 21:Er(r,i,l);break;case 22:ct=(u=ct)||l.memoizedState!==null,Er(r,i,l),ct=u;break;default:Er(r,i,l)}}function Vg(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ya(r)}catch(l){Ye(i,i.return,l)}}function w1(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Bg),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Bg),i;default:throw Error(s(435,r.tag))}}function Od(r,i){var l=w1(r);i.forEach(function(u){var h=R1.bind(null,r,u);l.has(u)||(l.add(u),u.then(h,h))})}function hn(r,i){var l=i.deletions;if(l!==null)for(var u=0;u<l.length;u++){var h=l[u],m=r,w=i,k=w;e:for(;k!==null;){switch(k.tag){case 27:if(Jr(k.type)){We=k.stateNode,on=!1;break e}break;case 5:We=k.stateNode,on=!1;break e;case 3:case 4:We=k.stateNode.containerInfo,on=!0;break e}k=k.return}if(We===null)throw Error(s(160));Ug(m,w,h),We=null,on=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Ig(i,r),i=i.sibling}var Hn=null;function Ig(r,i){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:hn(i,r),pn(r),u&4&&(Pr(3,r,r.return),Wo(3,r),Pr(5,r,r.return));break;case 1:hn(i,r),pn(r),u&512&&(ct||l===null||er(l,l.return)),u&64&&kr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var h=Hn;if(hn(i,r),pn(r),u&512&&(ct||l===null||er(l,l.return)),u&4){var m=l!==null?l.memoizedState:null;if(u=r.memoizedState,l===null)if(u===null)if(r.stateNode===null){e:{u=r.type,l=r.memoizedProps,h=h.ownerDocument||h;t:switch(u){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Eo]||m[at]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(u),h.head.insertBefore(m,h.querySelector("head > title"))),Bt(m,u,l),m[at]=r,kt(m),u=m;break e;case"link":var w=_y("link","href",h).get(u+(l.href||""));if(w){for(var k=0;k<w.length;k++)if(m=w[k],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(k,1);break t}}m=h.createElement(u),Bt(m,u,l),h.head.appendChild(m);break;case"meta":if(w=_y("meta","content",h).get(u+(l.content||""))){for(k=0;k<w.length;k++)if(m=w[k],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(k,1);break t}}m=h.createElement(u),Bt(m,u,l),h.head.appendChild(m);break;default:throw Error(s(468,u))}m[at]=r,kt(m),u=m}r.stateNode=u}else By(h,r.type,r.stateNode);else r.stateNode=zy(h,u,r.memoizedProps);else m!==u?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,u===null?By(h,r.type,r.stateNode):zy(h,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Cd(r,r.memoizedProps,l.memoizedProps)}break;case 27:hn(i,r),pn(r),u&512&&(ct||l===null||er(l,l.return)),l!==null&&u&4&&Cd(r,r.memoizedProps,l.memoizedProps);break;case 5:if(hn(i,r),pn(r),u&512&&(ct||l===null||er(l,l.return)),r.flags&32){h=r.stateNode;try{Si(h,"")}catch(I){Ye(r,r.return,I)}}u&4&&r.stateNode!=null&&(h=r.memoizedProps,Cd(r,h,l!==null?l.memoizedProps:h)),u&1024&&(Ad=!0);break;case 6:if(hn(i,r),pn(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,l=r.stateNode;try{l.nodeValue=u}catch(I){Ye(r,r.return,I)}}break;case 3:if(Zl=null,h=Hn,Hn=Xl(i.containerInfo),hn(i,r),Hn=h,pn(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{ya(i.containerInfo)}catch(I){Ye(r,r.return,I)}Ad&&(Ad=!1,Hg(r));break;case 4:u=Hn,Hn=Xl(r.stateNode.containerInfo),hn(i,r),pn(r),Hn=u;break;case 12:hn(i,r),pn(r);break;case 13:hn(i,r),pn(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Bd=ut()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Od(r,u)));break;case 22:h=r.memoizedState!==null;var M=l!==null&&l.memoizedState!==null,q=kr,Q=ct;if(kr=q||h,ct=Q||M,hn(i,r),ct=Q,kr=q,pn(r),u&8192)e:for(i=r.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(l===null||M||kr||ct||Ps(r)),l=null,i=r;;){if(i.tag===5||i.tag===26){if(l===null){M=l=i;try{if(m=M.stateNode,h)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{k=M.stateNode;var K=M.memoizedProps.style,V=K!=null&&K.hasOwnProperty("display")?K.display:null;k.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(I){Ye(M,M.return,I)}}}else if(i.tag===6){if(l===null){M=i;try{M.stateNode.nodeValue=h?"":M.memoizedProps}catch(I){Ye(M,M.return,I)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Od(r,l))));break;case 19:hn(i,r),pn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Od(r,u)));break;case 30:break;case 21:break;default:hn(i,r),pn(r)}}function pn(r){var i=r.flags;if(i&2){try{for(var l,u=r.return;u!==null;){if(zg(u)){l=u;break}u=u.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var h=l.stateNode,m=Md(r);Ll(r,m,h);break;case 5:var w=l.stateNode;l.flags&32&&(Si(w,""),l.flags&=-33);var k=Md(r);Ll(r,k,w);break;case 3:case 4:var M=l.stateNode.containerInfo,q=Md(r);Nd(r,q,M);break;default:throw Error(s(161))}}catch(Q){Ye(r,r.return,Q)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function Hg(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;Hg(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function $r(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Lg(r,i.alternate,i),i=i.sibling}function Ps(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Pr(4,i,i.return),Ps(i);break;case 1:er(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&Dg(i,i.return,l),Ps(i);break;case 27:ca(i.stateNode);case 26:case 5:er(i,i.return),Ps(i);break;case 22:i.memoizedState===null&&Ps(i);break;case 30:Ps(i);break;default:Ps(i)}r=r.sibling}}function Fr(r,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,h=r,m=i,w=m.flags;switch(m.tag){case 0:case 11:case 15:Fr(h,m,l),Wo(4,m);break;case 1:if(Fr(h,m,l),u=m,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){Ye(u,u.return,q)}if(u=m,h=u.updateQueue,h!==null){var k=u.stateNode;try{var M=h.shared.hiddenCallbacks;if(M!==null)for(h.shared.hiddenCallbacks=null,h=0;h<M.length;h++)ym(M[h],k)}catch(q){Ye(u,u.return,q)}}l&&w&64&&Rg(m),ea(m,m.return);break;case 27:_g(m);case 26:case 5:Fr(h,m,l),l&&u===null&&w&4&&jg(m),ea(m,m.return);break;case 12:Fr(h,m,l);break;case 13:Fr(h,m,l),l&&w&4&&Vg(h,m);break;case 22:m.memoizedState===null&&Fr(h,m,l),ea(m,m.return);break;case 30:break;default:Fr(h,m,l)}i=i.sibling}}function Rd(r,i){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Uo(l))}function Dd(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Uo(r))}function tr(r,i,l,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Pg(r,i,l,u),i=i.sibling}function Pg(r,i,l,u){var h=i.flags;switch(i.tag){case 0:case 11:case 15:tr(r,i,l,u),h&2048&&Wo(9,i);break;case 1:tr(r,i,l,u);break;case 3:tr(r,i,l,u),h&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Uo(r)));break;case 12:if(h&2048){tr(r,i,l,u),r=i.stateNode;try{var m=i.memoizedProps,w=m.id,k=m.onPostCommit;typeof k=="function"&&k(w,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(M){Ye(i,i.return,M)}}else tr(r,i,l,u);break;case 13:tr(r,i,l,u);break;case 23:break;case 22:m=i.stateNode,w=i.alternate,i.memoizedState!==null?m._visibility&2?tr(r,i,l,u):ta(r,i):m._visibility&2?tr(r,i,l,u):(m._visibility|=2,Vi(r,i,l,u,(i.subtreeFlags&10256)!==0)),h&2048&&Rd(w,i);break;case 24:tr(r,i,l,u),h&2048&&Dd(i.alternate,i);break;default:tr(r,i,l,u)}}function Vi(r,i,l,u,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=r,w=i,k=l,M=u,q=w.flags;switch(w.tag){case 0:case 11:case 15:Vi(m,w,k,M,h),Wo(8,w);break;case 23:break;case 22:var Q=w.stateNode;w.memoizedState!==null?Q._visibility&2?Vi(m,w,k,M,h):ta(m,w):(Q._visibility|=2,Vi(m,w,k,M,h)),h&&q&2048&&Rd(w.alternate,w);break;case 24:Vi(m,w,k,M,h),h&&q&2048&&Dd(w.alternate,w);break;default:Vi(m,w,k,M,h)}i=i.sibling}}function ta(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=r,u=i,h=u.flags;switch(u.tag){case 22:ta(l,u),h&2048&&Rd(u.alternate,u);break;case 24:ta(l,u),h&2048&&Dd(u.alternate,u);break;default:ta(l,u)}i=i.sibling}}var na=8192;function Ii(r){if(r.subtreeFlags&na)for(r=r.child;r!==null;)$g(r),r=r.sibling}function $g(r){switch(r.tag){case 26:Ii(r),r.flags&na&&r.memoizedState!==null&&aw(Hn,r.memoizedState,r.memoizedProps);break;case 5:Ii(r);break;case 3:case 4:var i=Hn;Hn=Xl(r.stateNode.containerInfo),Ii(r),Hn=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=na,na=16777216,Ii(r),na=i):Ii(r));break;default:Ii(r)}}function Fg(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function ra(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];Tt=u,Gg(u,r)}Fg(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Qg(r),r=r.sibling}function Qg(r){switch(r.tag){case 0:case 11:case 15:ra(r),r.flags&2048&&Pr(9,r,r.return);break;case 3:ra(r);break;case 12:ra(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,ql(r)):ra(r);break;default:ra(r)}}function ql(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];Tt=u,Gg(u,r)}Fg(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Pr(8,i,i.return),ql(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,ql(i));break;default:ql(i)}r=r.sibling}}function Gg(r,i){for(;Tt!==null;){var l=Tt;switch(l.tag){case 0:case 11:case 15:Pr(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Uo(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Tt=u;else e:for(l=r;Tt!==null;){u=Tt;var h=u.sibling,m=u.return;if(qg(u),u===l){Tt=null;break e}if(h!==null){h.return=m,Tt=h;break e}Tt=m}}}var k1={getCacheForType:function(r){var i=Vt(vt),l=i.data.get(r);return l===void 0&&(l=r(),i.data.set(r,l)),l}},E1=typeof WeakMap=="function"?WeakMap:Map,Pe=0,Je=null,De=null,Ue=0,$e=0,mn=null,Qr=!1,Hi=!1,jd=!1,Tr=0,nt=0,Gr=0,$s=0,zd=0,On=0,Pi=0,sa=null,an=null,_d=!1,Bd=0,Ul=1/0,Vl=null,Yr=null,_t=0,Kr=null,$i=null,Fi=0,Ld=0,qd=null,Yg=null,ia=0,Ud=null;function gn(){if((Pe&2)!==0&&Ue!==0)return Ue&-Ue;if(N.T!==null){var r=Di;return r!==0?r:Qd()}return Ns()}function Kg(){On===0&&(On=(Ue&536870912)===0||He?Vn():536870912);var r=An.current;return r!==null&&(r.flags|=32),On}function yn(r,i,l){(r===Je&&($e===2||$e===9)||r.cancelPendingCommit!==null)&&(Qi(r,0),Xr(r,Ue,On,!1)),zr(r,l),((Pe&2)===0||r!==Je)&&(r===Je&&((Pe&2)===0&&($s|=l),nt===4&&Xr(r,Ue,On,!1)),nr(r))}function Xg(r,i,l){if((Pe&6)!==0)throw Error(s(327));var u=!l&&(i&124)===0&&(i&r.expiredLanes)===0||Ms(r,i),h=u?M1(r,i):Hd(r,i,!0),m=u;do{if(h===0){Hi&&!u&&Xr(r,i,0,!1);break}else{if(l=r.current.alternate,m&&!T1(l)){h=Hd(r,i,!1),m=!1;continue}if(h===2){if(m=i,r.errorRecoveryDisabledLanes&m)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var k=r;h=sa;var M=k.current.memoizedState.isDehydrated;if(M&&(Qi(k,w).flags|=256),w=Hd(k,w,!1),w!==2){if(jd&&!M){k.errorRecoveryDisabledLanes|=m,$s|=m,h=4;break e}m=an,an=h,m!==null&&(an===null?an=m:an.push.apply(an,m))}h=w}if(m=!1,h!==2)continue}}if(h===1){Qi(r,0),Xr(r,i,0,!0);break}e:{switch(u=r,m=h,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Xr(u,i,On,!Qr);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Bd+300-ut(),10<h)){if(Xr(u,i,On,!Qr),Cs(u,0,!0)!==0)break e;u.timeoutHandle=Ty(Jg.bind(null,u,l,an,Vl,_d,i,On,$s,Pi,Qr,m,2,-0,0),h);break e}Jg(u,l,an,Vl,_d,i,On,$s,Pi,Qr,m,0,-0,0)}}break}while(!0);nr(r)}function Jg(r,i,l,u,h,m,w,k,M,q,Q,K,V,I){if(r.timeoutHandle=-1,K=i.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(fa={stylesheets:null,count:0,unsuspend:ow},$g(i),K=lw(),K!==null)){r.cancelPendingCommit=K(sy.bind(null,r,i,m,l,u,h,w,k,M,Q,1,V,I)),Xr(r,m,w,!q);return}sy(r,i,m,l,u,h,w,k,M)}function T1(r){for(var i=r;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var h=l[u],m=h.getSnapshot;h=h.value;try{if(!dn(m(),h))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Xr(r,i,l,u){i&=~zd,i&=~$s,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var h=i;0<h;){var m=31-Dt(h),w=1<<m;u[m]=-1,h&=~w}l!==0&&Te(r,l,i)}function Il(){return(Pe&6)===0?(oa(0),!1):!0}function Vd(){if(De!==null){if($e===0)var r=De.return;else r=De,yr=qs=null,rd(r),qi=null,Xo=0,r=De;for(;r!==null;)Og(r.alternate,r),r=r.return;De=null}}function Qi(r,i){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,P1(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Vd(),Je=r,De=l=pr(r.current,null),Ue=i,$e=0,mn=null,Qr=!1,Hi=Ms(r,i),jd=!1,Pi=On=zd=$s=Gr=nt=0,an=sa=null,_d=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var h=31-Dt(u),m=1<<h;i|=r[h],u&=~m}return Tr=i,cl(),l}function Zg(r,i){Ae=null,N.H=Nl,i===Io||i===bl?(i=mm(),$e=3):i===fm?(i=mm(),$e=4):$e=i===gg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,mn=i,De===null&&(nt=1,jl(r,Tn(i,r.current)))}function Wg(){var r=N.H;return N.H=Nl,r===null?Nl:r}function ey(){var r=N.A;return N.A=k1,r}function Id(){nt=4,Qr||(Ue&4194048)!==Ue&&An.current!==null||(Hi=!0),(Gr&134217727)===0&&($s&134217727)===0||Je===null||Xr(Je,Ue,On,!1)}function Hd(r,i,l){var u=Pe;Pe|=2;var h=Wg(),m=ey();(Je!==r||Ue!==i)&&(Vl=null,Qi(r,i)),i=!1;var w=nt;e:do try{if($e!==0&&De!==null){var k=De,M=mn;switch($e){case 8:Vd(),w=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(i=!0);var q=$e;if($e=0,mn=null,Gi(r,k,M,q),l&&Hi){w=0;break e}break;default:q=$e,$e=0,mn=null,Gi(r,k,M,q)}}C1(),w=nt;break}catch(Q){Zg(r,Q)}while(!0);return i&&r.shellSuspendCounter++,yr=qs=null,Pe=u,N.H=h,N.A=m,De===null&&(Je=null,Ue=0,cl()),w}function C1(){for(;De!==null;)ty(De)}function M1(r,i){var l=Pe;Pe|=2;var u=Wg(),h=ey();Je!==r||Ue!==i?(Vl=null,Ul=ut()+500,Qi(r,i)):Hi=Ms(r,i);e:do try{if($e!==0&&De!==null){i=De;var m=mn;t:switch($e){case 1:$e=0,mn=null,Gi(r,i,m,1);break;case 2:case 9:if(hm(m)){$e=0,mn=null,ny(i);break}i=function(){$e!==2&&$e!==9||Je!==r||($e=7),nr(r)},m.then(i,i);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:hm(m)?($e=0,mn=null,ny(i)):($e=0,mn=null,Gi(r,i,m,7));break;case 5:var w=null;switch(De.tag){case 26:w=De.memoizedState;case 5:case 27:var k=De;if(!w||Ly(w)){$e=0,mn=null;var M=k.sibling;if(M!==null)De=M;else{var q=k.return;q!==null?(De=q,Hl(q)):De=null}break t}}$e=0,mn=null,Gi(r,i,m,5);break;case 6:$e=0,mn=null,Gi(r,i,m,6);break;case 8:Vd(),nt=6;break e;default:throw Error(s(462))}}N1();break}catch(Q){Zg(r,Q)}while(!0);return yr=qs=null,N.H=u,N.A=h,Pe=l,De!==null?0:(Je=null,Ue=0,cl(),nt)}function N1(){for(;De!==null&&!qe();)ty(De)}function ty(r){var i=Ng(r.alternate,r,Tr);r.memoizedProps=r.pendingProps,i===null?Hl(r):De=i}function ny(r){var i=r,l=i.alternate;switch(i.tag){case 15:case 0:i=wg(l,i,i.pendingProps,i.type,void 0,Ue);break;case 11:i=wg(l,i,i.pendingProps,i.type.render,i.ref,Ue);break;case 5:rd(i);default:Og(l,i),i=De=rm(i,Tr),i=Ng(l,i,Tr)}r.memoizedProps=r.pendingProps,i===null?Hl(r):De=i}function Gi(r,i,l,u){yr=qs=null,rd(i),qi=null,Xo=0;var h=i.return;try{if(y1(r,h,i,l,Ue)){nt=1,jl(r,Tn(l,r.current)),De=null;return}}catch(m){if(h!==null)throw De=h,m;nt=1,jl(r,Tn(l,r.current)),De=null;return}i.flags&32768?(He||u===1?r=!0:Hi||(Ue&536870912)!==0?r=!1:(Qr=r=!0,(u===2||u===9||u===3||u===6)&&(u=An.current,u!==null&&u.tag===13&&(u.flags|=16384))),ry(i,r)):Hl(i)}function Hl(r){var i=r;do{if((i.flags&32768)!==0){ry(i,Qr);return}r=i.return;var l=v1(i.alternate,i,Tr);if(l!==null){De=l;return}if(i=i.sibling,i!==null){De=i;return}De=i=r}while(i!==null);nt===0&&(nt=5)}function ry(r,i){do{var l=x1(r.alternate,r);if(l!==null){l.flags&=32767,De=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(r=r.sibling,r!==null)){De=r;return}De=r=l}while(r!==null);nt=6,De=null}function sy(r,i,l,u,h,m,w,k,M){r.cancelPendingCommit=null;do Pl();while(_t!==0);if((Pe&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=Du,Ja(r,l,m,w,k,M),r===Je&&(De=Je=null,Ue=0),$i=i,Kr=r,Fi=l,Ld=m,qd=h,Yg=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,D1(di,function(){return cy(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=N.T,N.T=null,h=L.p,L.p=2,w=Pe,Pe|=4;try{S1(r,i,l)}finally{Pe=w,L.p=h,N.T=u}}_t=1,iy(),oy(),ay()}}function iy(){if(_t===1){_t=0;var r=Kr,i=$i,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=N.T,N.T=null;var u=L.p;L.p=2;var h=Pe;Pe|=4;try{Ig(i,r);var m=ef,w=Gp(r.containerInfo),k=m.focusedElem,M=m.selectionRange;if(w!==k&&k&&k.ownerDocument&&Qp(k.ownerDocument.documentElement,k)){if(M!==null&&Mu(k)){var q=M.start,Q=M.end;if(Q===void 0&&(Q=q),"selectionStart"in k)k.selectionStart=q,k.selectionEnd=Math.min(Q,k.value.length);else{var K=k.ownerDocument||document,V=K&&K.defaultView||window;if(V.getSelection){var I=V.getSelection(),Se=k.textContent.length,ve=Math.min(M.start,Se),Ge=M.end===void 0?ve:Math.min(M.end,Se);!I.extend&&ve>Ge&&(w=Ge,Ge=ve,ve=w);var j=Fp(k,ve),O=Fp(k,Ge);if(j&&O&&(I.rangeCount!==1||I.anchorNode!==j.node||I.anchorOffset!==j.offset||I.focusNode!==O.node||I.focusOffset!==O.offset)){var B=K.createRange();B.setStart(j.node,j.offset),I.removeAllRanges(),ve>Ge?(I.addRange(B),I.extend(O.node,O.offset)):(B.setEnd(O.node,O.offset),I.addRange(B))}}}}for(K=[],I=k;I=I.parentNode;)I.nodeType===1&&K.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<K.length;k++){var G=K[k];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}tc=!!Wd,ef=Wd=null}finally{Pe=h,L.p=u,N.T=l}}r.current=i,_t=2}}function oy(){if(_t===2){_t=0;var r=Kr,i=$i,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=N.T,N.T=null;var u=L.p;L.p=2;var h=Pe;Pe|=4;try{Lg(r,i.alternate,i)}finally{Pe=h,L.p=u,N.T=l}}_t=3}}function ay(){if(_t===4||_t===3){_t=0,yt();var r=Kr,i=$i,l=Fi,u=Yg;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?_t=5:(_t=0,$i=Kr=null,ly(r,r.pendingLanes));var h=r.pendingLanes;if(h===0&&(Yr=null),jt(l),i=i.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Xn,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=N.T,h=L.p,L.p=2,N.T=null;try{for(var m=r.onRecoverableError,w=0;w<u.length;w++){var k=u[w];m(k.value,{componentStack:k.stack})}}finally{N.T=i,L.p=h}}(Fi&3)!==0&&Pl(),nr(r),h=r.pendingLanes,(l&4194090)!==0&&(h&42)!==0?r===Ud?ia++:(ia=0,Ud=r):ia=0,oa(0)}}function ly(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Uo(i)))}function Pl(r){return iy(),oy(),ay(),cy()}function cy(){if(_t!==5)return!1;var r=Kr,i=Ld;Ld=0;var l=jt(Fi),u=N.T,h=L.p;try{L.p=32>l?32:l,N.T=null,l=qd,qd=null;var m=Kr,w=Fi;if(_t=0,$i=Kr=null,Fi=0,(Pe&6)!==0)throw Error(s(331));var k=Pe;if(Pe|=4,Qg(m.current),Pg(m,m.current,w,l),Pe=k,oa(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Xn,m)}catch{}return!0}finally{L.p=h,N.T=u,ly(r,i)}}function uy(r,i,l){i=Tn(l,i),i=yd(r.stateNode,i,2),r=Ur(r,i,2),r!==null&&(zr(r,2),nr(r))}function Ye(r,i,l){if(r.tag===3)uy(r,r,l);else for(;i!==null;){if(i.tag===3){uy(i,r,l);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Yr===null||!Yr.has(u))){r=Tn(l,r),l=pg(2),u=Ur(i,l,2),u!==null&&(mg(l,u,i,r),zr(u,2),nr(u));break}}i=i.return}}function Pd(r,i,l){var u=r.pingCache;if(u===null){u=r.pingCache=new E1;var h=new Set;u.set(i,h)}else h=u.get(i),h===void 0&&(h=new Set,u.set(i,h));h.has(l)||(jd=!0,h.add(l),r=A1.bind(null,r,i,l),i.then(r,r))}function A1(r,i,l){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,Je===r&&(Ue&l)===l&&(nt===4||nt===3&&(Ue&62914560)===Ue&&300>ut()-Bd?(Pe&2)===0&&Qi(r,0):zd|=l,Pi===Ue&&(Pi=0)),nr(r)}function dy(r,i){i===0&&(i=Xa()),r=Ni(r,i),r!==null&&(zr(r,i),nr(r))}function O1(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),dy(r,l)}function R1(r,i){var l=0;switch(r.tag){case 13:var u=r.stateNode,h=r.memoizedState;h!==null&&(l=h.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),dy(r,l)}function D1(r,i){return St(r,i)}var $l=null,Yi=null,$d=!1,Fl=!1,Fd=!1,Fs=0;function nr(r){r!==Yi&&r.next===null&&(Yi===null?$l=Yi=r:Yi=Yi.next=r),Fl=!0,$d||($d=!0,z1())}function oa(r,i){if(!Fd&&Fl){Fd=!0;do for(var l=!1,u=$l;u!==null;){if(r!==0){var h=u.pendingLanes;if(h===0)var m=0;else{var w=u.suspendedLanes,k=u.pingedLanes;m=(1<<31-Dt(42|r)+1)-1,m&=h&~(w&~k),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,my(u,m))}else m=Ue,m=Cs(u,u===Je?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Ms(u,m)||(l=!0,my(u,m));u=u.next}while(l);Fd=!1}}function j1(){fy()}function fy(){Fl=$d=!1;var r=0;Fs!==0&&(H1()&&(r=Fs),Fs=0);for(var i=ut(),l=null,u=$l;u!==null;){var h=u.next,m=hy(u,i);m===0?(u.next=null,l===null?$l=h:l.next=h,h===null&&(Yi=l)):(l=u,(r!==0||(m&3)!==0)&&(Fl=!0)),u=h}oa(r)}function hy(r,i){for(var l=r.suspendedLanes,u=r.pingedLanes,h=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var w=31-Dt(m),k=1<<w,M=h[w];M===-1?((k&l)===0||(k&u)!==0)&&(h[w]=wo(k,i)):M<=i&&(r.expiredLanes|=k),m&=~k}if(i=Je,l=Ue,l=Cs(r,r===i?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,l===0||r===i&&($e===2||$e===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Ze(u),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Ms(r,l)){if(i=l&-l,i===r.callbackPriority)return i;switch(u!==null&&Ze(u),jt(l)){case 2:case 8:l=Ya;break;case 32:l=di;break;case 268435456:l=ur;break;default:l=di}return u=py.bind(null,r),l=St(l,u),r.callbackPriority=i,r.callbackNode=l,i}return u!==null&&u!==null&&Ze(u),r.callbackPriority=2,r.callbackNode=null,2}function py(r,i){if(_t!==0&&_t!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(Pl()&&r.callbackNode!==l)return null;var u=Ue;return u=Cs(r,r===Je?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(Xg(r,u,i),hy(r,ut()),r.callbackNode!=null&&r.callbackNode===l?py.bind(null,r):null)}function my(r,i){if(Pl())return null;Xg(r,i,!0)}function z1(){$1(function(){(Pe&6)!==0?St(wn,j1):fy()})}function Qd(){return Fs===0&&(Fs=Vn()),Fs}function gy(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:nl(""+r)}function yy(r,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,r.id&&l.setAttribute("form",r.id),i.parentNode.insertBefore(l,i),r=new FormData(r),l.parentNode.removeChild(l),r}function _1(r,i,l,u,h){if(i==="submit"&&l&&l.stateNode===h){var m=gy((h[Xe]||null).action),w=u.submitter;w&&(i=(i=w[Xe]||null)?gy(i.formAction):w.getAttribute("formAction"),i!==null&&(m=i,w=null));var k=new ol("action","action",null,u,h);r.push({event:k,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Fs!==0){var M=w?yy(h,w):new FormData(h);fd(l,{pending:!0,data:M,method:h.method,action:m},null,M)}}else typeof m=="function"&&(k.preventDefault(),M=w?yy(h,w):new FormData(h),fd(l,{pending:!0,data:M,method:h.method,action:m},m,M))},currentTarget:h}]})}}for(var Gd=0;Gd<Ru.length;Gd++){var Yd=Ru[Gd],B1=Yd.toLowerCase(),L1=Yd[0].toUpperCase()+Yd.slice(1);In(B1,"on"+L1)}In(Xp,"onAnimationEnd"),In(Jp,"onAnimationIteration"),In(Zp,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(e1,"onTransitionRun"),In(t1,"onTransitionStart"),In(n1,"onTransitionCancel"),In(Wp,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),As("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),As("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),As("onBeforeInput",["compositionend","keypress","textInput","paste"]),As("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),As("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),As("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(aa));function by(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],h=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var w=u.length-1;0<=w;w--){var k=u[w],M=k.instance,q=k.currentTarget;if(k=k.listener,M!==m&&h.isPropagationStopped())break e;m=k,h.currentTarget=q;try{m(h)}catch(Q){Dl(Q)}h.currentTarget=null,m=M}else for(w=0;w<u.length;w++){if(k=u[w],M=k.instance,q=k.currentTarget,k=k.listener,M!==m&&h.isPropagationStopped())break e;m=k,h.currentTarget=q;try{m(h)}catch(Q){Dl(Q)}h.currentTarget=null,m=M}}}}function je(r,i){var l=i[pi];l===void 0&&(l=i[pi]=new Set);var u=r+"__bubble";l.has(u)||(vy(i,r,2,!1),l.add(u))}function Kd(r,i,l){var u=0;i&&(u|=4),vy(l,r,u,i)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function Xd(r){if(!r[Ql]){r[Ql]=!0,fp.forEach(function(l){l!=="selectionchange"&&(q1.has(l)||Kd(l,!1,r),Kd(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Ql]||(i[Ql]=!0,Kd("selectionchange",!1,i))}}function vy(r,i,l,u){switch(Py(i)){case 2:var h=dw;break;case 8:h=fw;break;default:h=df}l=h.bind(null,i,l,r),h=void 0,!bu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),u?h!==void 0?r.addEventListener(i,l,{capture:!0,passive:h}):r.addEventListener(i,l,!0):h!==void 0?r.addEventListener(i,l,{passive:h}):r.addEventListener(i,l,!1)}function Jd(r,i,l,u,h){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var k=u.stateNode.containerInfo;if(k===h)break;if(w===4)for(w=u.return;w!==null;){var M=w.tag;if((M===3||M===4)&&w.stateNode.containerInfo===h)return;w=w.return}for(;k!==null;){if(w=mi(k),w===null)return;if(M=w.tag,M===5||M===6||M===26||M===27){u=m=w;continue e}k=k.parentNode}}u=u.return}Cp(function(){var q=m,Q=gu(l),K=[];e:{var V=em.get(r);if(V!==void 0){var I=ol,Se=r;switch(r){case"keypress":if(sl(l)===0)break e;case"keydown":case"keyup":I=DS;break;case"focusin":Se="focus",I=wu;break;case"focusout":Se="blur",I=wu;break;case"beforeblur":case"afterblur":I=wu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Ap;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=xS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=_S;break;case Xp:case Jp:case Zp:I=kS;break;case Wp:I=LS;break;case"scroll":case"scrollend":I=bS;break;case"wheel":I=US;break;case"copy":case"cut":case"paste":I=TS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Rp;break;case"toggle":case"beforetoggle":I=IS}var ve=(i&4)!==0,Ge=!ve&&(r==="scroll"||r==="scrollend"),j=ve?V!==null?V+"Capture":null:V;ve=[];for(var O=q,B;O!==null;){var G=O;if(B=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||B===null||j===null||(G=Co(O,j),G!=null&&ve.push(la(O,G,B))),Ge)break;O=O.return}0<ve.length&&(V=new I(V,Se,null,l,Q),K.push({event:V,listeners:ve}))}}if((i&7)===0){e:{if(V=r==="mouseover"||r==="pointerover",I=r==="mouseout"||r==="pointerout",V&&l!==mu&&(Se=l.relatedTarget||l.fromElement)&&(mi(Se)||Se[wt]))break e;if((I||V)&&(V=Q.window===Q?Q:(V=Q.ownerDocument)?V.defaultView||V.parentWindow:window,I?(Se=l.relatedTarget||l.toElement,I=q,Se=Se?mi(Se):null,Se!==null&&(Ge=a(Se),ve=Se.tag,Se!==Ge||ve!==5&&ve!==27&&ve!==6)&&(Se=null)):(I=null,Se=q),I!==Se)){if(ve=Ap,G="onMouseLeave",j="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(ve=Rp,G="onPointerLeave",j="onPointerEnter",O="pointer"),Ge=I==null?V:To(I),B=Se==null?V:To(Se),V=new ve(G,O+"leave",I,l,Q),V.target=Ge,V.relatedTarget=B,G=null,mi(Q)===q&&(ve=new ve(j,O+"enter",Se,l,Q),ve.target=B,ve.relatedTarget=Ge,G=ve),Ge=G,I&&Se)t:{for(ve=I,j=Se,O=0,B=ve;B;B=Ki(B))O++;for(B=0,G=j;G;G=Ki(G))B++;for(;0<O-B;)ve=Ki(ve),O--;for(;0<B-O;)j=Ki(j),B--;for(;O--;){if(ve===j||j!==null&&ve===j.alternate)break t;ve=Ki(ve),j=Ki(j)}ve=null}else ve=null;I!==null&&xy(K,V,I,ve,!1),Se!==null&&Ge!==null&&xy(K,Ge,Se,ve,!0)}}e:{if(V=q?To(q):window,I=V.nodeName&&V.nodeName.toLowerCase(),I==="select"||I==="input"&&V.type==="file")var fe=Up;else if(Lp(V))if(Vp)fe=JS;else{fe=KS;var Re=YS}else I=V.nodeName,!I||I.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?q&&pu(q.elementType)&&(fe=Up):fe=XS;if(fe&&(fe=fe(r,q))){qp(K,fe,l,Q);break e}Re&&Re(r,V,q),r==="focusout"&&q&&V.type==="number"&&q.memoizedProps.value!=null&&hu(V,"number",V.value)}switch(Re=q?To(q):window,r){case"focusin":(Lp(Re)||Re.contentEditable==="true")&&(Ti=Re,Nu=q,zo=null);break;case"focusout":zo=Nu=Ti=null;break;case"mousedown":Au=!0;break;case"contextmenu":case"mouseup":case"dragend":Au=!1,Yp(K,l,Q);break;case"selectionchange":if(WS)break;case"keydown":case"keyup":Yp(K,l,Q)}var ge;if(Eu)e:{switch(r){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Ei?_p(r,l)&&(xe="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(xe="onCompositionStart");xe&&(Dp&&l.locale!=="ko"&&(Ei||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Ei&&(ge=Mp()):(_r=Q,vu="value"in _r?_r.value:_r.textContent,Ei=!0)),Re=Gl(q,xe),0<Re.length&&(xe=new Op(xe,r,null,l,Q),K.push({event:xe,listeners:Re}),ge?xe.data=ge:(ge=Bp(l),ge!==null&&(xe.data=ge)))),(ge=PS?$S(r,l):FS(r,l))&&(xe=Gl(q,"onBeforeInput"),0<xe.length&&(Re=new Op("onBeforeInput","beforeinput",null,l,Q),K.push({event:Re,listeners:xe}),Re.data=ge)),_1(K,r,q,l,Q)}by(K,i)})}function la(r,i,l){return{instance:r,listener:i,currentTarget:l}}function Gl(r,i){for(var l=i+"Capture",u=[];r!==null;){var h=r,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=Co(r,l),h!=null&&u.unshift(la(r,h,m)),h=Co(r,i),h!=null&&u.push(la(r,h,m))),r.tag===3)return u;r=r.return}return[]}function Ki(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function xy(r,i,l,u,h){for(var m=i._reactName,w=[];l!==null&&l!==u;){var k=l,M=k.alternate,q=k.stateNode;if(k=k.tag,M!==null&&M===u)break;k!==5&&k!==26&&k!==27||q===null||(M=q,h?(q=Co(l,m),q!=null&&w.unshift(la(l,q,M))):h||(q=Co(l,m),q!=null&&w.push(la(l,q,M)))),l=l.return}w.length!==0&&r.push({event:i,listeners:w})}var U1=/\r\n?/g,V1=/\u0000|\uFFFD/g;function Sy(r){return(typeof r=="string"?r:""+r).replace(U1,`
`).replace(V1,"")}function wy(r,i){return i=Sy(i),Sy(r)===i}function Yl(){}function Qe(r,i,l,u,h,m){switch(l){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Si(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Si(r,""+u);break;case"className":Wa(r,"class",u);break;case"tabIndex":Wa(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Wa(r,l,u);break;case"style":Ep(r,u,m);break;case"data":if(i!=="object"){Wa(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||l!=="href")){r.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=nl(""+u),r.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(i!=="input"&&Qe(r,i,"name",h.name,h,null),Qe(r,i,"formEncType",h.formEncType,h,null),Qe(r,i,"formMethod",h.formMethod,h,null),Qe(r,i,"formTarget",h.formTarget,h,null)):(Qe(r,i,"encType",h.encType,h,null),Qe(r,i,"method",h.method,h,null),Qe(r,i,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=nl(""+u),r.setAttribute(l,u);break;case"onClick":u!=null&&(r.onclick=Yl);break;case"onScroll":u!=null&&je("scroll",r);break;case"onScrollEnd":u!=null&&je("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(l=u.__html,l!=null){if(h.children!=null)throw Error(s(60));r.innerHTML=l}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}l=nl(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""+u):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":u===!0?r.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,u):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(l,u):r.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(l):r.setAttribute(l,u);break;case"popover":je("beforetoggle",r),je("toggle",r),Za(r,"popover",u);break;case"xlinkActuate":fr(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":fr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":fr(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":fr(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":fr(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":fr(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":fr(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":fr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":fr(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Za(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=gS.get(l)||l,Za(r,l,u))}}function Zd(r,i,l,u,h,m){switch(l){case"style":Ep(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(l=u.__html,l!=null){if(h.children!=null)throw Error(s(60));r.innerHTML=l}}break;case"children":typeof u=="string"?Si(r,u):(typeof u=="number"||typeof u=="bigint")&&Si(r,""+u);break;case"onScroll":u!=null&&je("scroll",r);break;case"onScrollEnd":u!=null&&je("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Yl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hp.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(h=l.endsWith("Capture"),i=l.slice(2,h?l.length-7:void 0),m=r[Xe]||null,m=m!=null?m[l]:null,typeof m=="function"&&r.removeEventListener(i,m,h),typeof u=="function")){typeof m!="function"&&m!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(i,u,h);break e}l in r?r[l]=u:u===!0?r.setAttribute(l,""):Za(r,l,u)}}}function Bt(r,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",r),je("load",r);var u=!1,h=!1,m;for(m in l)if(l.hasOwnProperty(m)){var w=l[m];if(w!=null)switch(m){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Qe(r,i,m,w,l,null)}}h&&Qe(r,i,"srcSet",l.srcSet,l,null),u&&Qe(r,i,"src",l.src,l,null);return;case"input":je("invalid",r);var k=m=w=h=null,M=null,q=null;for(u in l)if(l.hasOwnProperty(u)){var Q=l[u];if(Q!=null)switch(u){case"name":h=Q;break;case"type":w=Q;break;case"checked":M=Q;break;case"defaultChecked":q=Q;break;case"value":m=Q;break;case"defaultValue":k=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Qe(r,i,u,Q,l,null)}}xp(r,m,k,M,q,w,h,!1),el(r);return;case"select":je("invalid",r),u=w=m=null;for(h in l)if(l.hasOwnProperty(h)&&(k=l[h],k!=null))switch(h){case"value":m=k;break;case"defaultValue":w=k;break;case"multiple":u=k;default:Qe(r,i,h,k,l,null)}i=m,l=w,r.multiple=!!u,i!=null?xi(r,!!u,i,!1):l!=null&&xi(r,!!u,l,!0);return;case"textarea":je("invalid",r),m=h=u=null;for(w in l)if(l.hasOwnProperty(w)&&(k=l[w],k!=null))switch(w){case"value":u=k;break;case"defaultValue":h=k;break;case"children":m=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:Qe(r,i,w,k,l,null)}wp(r,u,h,m),el(r);return;case"option":for(M in l)if(l.hasOwnProperty(M)&&(u=l[M],u!=null))switch(M){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Qe(r,i,M,u,l,null)}return;case"dialog":je("beforetoggle",r),je("toggle",r),je("cancel",r),je("close",r);break;case"iframe":case"object":je("load",r);break;case"video":case"audio":for(u=0;u<aa.length;u++)je(aa[u],r);break;case"image":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"embed":case"source":case"link":je("error",r),je("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in l)if(l.hasOwnProperty(q)&&(u=l[q],u!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Qe(r,i,q,u,l,null)}return;default:if(pu(i)){for(Q in l)l.hasOwnProperty(Q)&&(u=l[Q],u!==void 0&&Zd(r,i,Q,u,l,void 0));return}}for(k in l)l.hasOwnProperty(k)&&(u=l[k],u!=null&&Qe(r,i,k,u,l,null))}function I1(r,i,l,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,w=null,k=null,M=null,q=null,Q=null;for(I in l){var K=l[I];if(l.hasOwnProperty(I)&&K!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":M=K;default:u.hasOwnProperty(I)||Qe(r,i,I,null,u,K)}}for(var V in u){var I=u[V];if(K=l[V],u.hasOwnProperty(V)&&(I!=null||K!=null))switch(V){case"type":m=I;break;case"name":h=I;break;case"checked":q=I;break;case"defaultChecked":Q=I;break;case"value":w=I;break;case"defaultValue":k=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(137,i));break;default:I!==K&&Qe(r,i,V,I,u,K)}}fu(r,w,k,M,q,Q,m,h);return;case"select":I=w=k=V=null;for(m in l)if(M=l[m],l.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":I=M;default:u.hasOwnProperty(m)||Qe(r,i,m,null,u,M)}for(h in u)if(m=u[h],M=l[h],u.hasOwnProperty(h)&&(m!=null||M!=null))switch(h){case"value":V=m;break;case"defaultValue":k=m;break;case"multiple":w=m;default:m!==M&&Qe(r,i,h,m,u,M)}i=k,l=w,u=I,V!=null?xi(r,!!l,V,!1):!!u!=!!l&&(i!=null?xi(r,!!l,i,!0):xi(r,!!l,l?[]:"",!1));return;case"textarea":I=V=null;for(k in l)if(h=l[k],l.hasOwnProperty(k)&&h!=null&&!u.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Qe(r,i,k,null,u,h)}for(w in u)if(h=u[w],m=l[w],u.hasOwnProperty(w)&&(h!=null||m!=null))switch(w){case"value":V=h;break;case"defaultValue":I=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==m&&Qe(r,i,w,h,u,m)}Sp(r,V,I);return;case"option":for(var Se in l)if(V=l[Se],l.hasOwnProperty(Se)&&V!=null&&!u.hasOwnProperty(Se))switch(Se){case"selected":r.selected=!1;break;default:Qe(r,i,Se,null,u,V)}for(M in u)if(V=u[M],I=l[M],u.hasOwnProperty(M)&&V!==I&&(V!=null||I!=null))switch(M){case"selected":r.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:Qe(r,i,M,V,u,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in l)V=l[ve],l.hasOwnProperty(ve)&&V!=null&&!u.hasOwnProperty(ve)&&Qe(r,i,ve,null,u,V);for(q in u)if(V=u[q],I=l[q],u.hasOwnProperty(q)&&V!==I&&(V!=null||I!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,i));break;default:Qe(r,i,q,V,u,I)}return;default:if(pu(i)){for(var Ge in l)V=l[Ge],l.hasOwnProperty(Ge)&&V!==void 0&&!u.hasOwnProperty(Ge)&&Zd(r,i,Ge,void 0,u,V);for(Q in u)V=u[Q],I=l[Q],!u.hasOwnProperty(Q)||V===I||V===void 0&&I===void 0||Zd(r,i,Q,V,u,I);return}}for(var j in l)V=l[j],l.hasOwnProperty(j)&&V!=null&&!u.hasOwnProperty(j)&&Qe(r,i,j,null,u,V);for(K in u)V=u[K],I=l[K],!u.hasOwnProperty(K)||V===I||V==null&&I==null||Qe(r,i,K,V,u,I)}var Wd=null,ef=null;function Kl(r){return r.nodeType===9?r:r.ownerDocument}function ky(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ey(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function tf(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var nf=null;function H1(){var r=window.event;return r&&r.type==="popstate"?r===nf?!1:(nf=r,!0):(nf=null,!1)}var Ty=typeof setTimeout=="function"?setTimeout:void 0,P1=typeof clearTimeout=="function"?clearTimeout:void 0,Cy=typeof Promise=="function"?Promise:void 0,$1=typeof queueMicrotask=="function"?queueMicrotask:typeof Cy<"u"?function(r){return Cy.resolve(null).then(r).catch(F1)}:Ty;function F1(r){setTimeout(function(){throw r})}function Jr(r){return r==="head"}function My(r,i){var l=i,u=0,h=0;do{var m=l.nextSibling;if(r.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(0<u&&8>u){l=u;var w=r.ownerDocument;if(l&1&&ca(w.documentElement),l&2&&ca(w.body),l&4)for(l=w.head,ca(l),w=l.firstChild;w;){var k=w.nextSibling,M=w.nodeName;w[Eo]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=k}}if(h===0){r.removeChild(m),ya(i);return}h--}else l==="$"||l==="$?"||l==="$!"?h++:u=l.charCodeAt(0)-48;else u=0;l=m}while(l);ya(i)}function rf(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":rf(l),lu(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function Q1(r,i,l,u){for(;r.nodeType===1;){var h=l;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Eo])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==h.rel||r.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||r.getAttribute("title")!==(h.title==null?null:h.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(h.src==null?null:h.src)||r.getAttribute("type")!==(h.type==null?null:h.type)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Pn(r.nextSibling),r===null)break}return null}function G1(r,i,l){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Pn(r.nextSibling),r===null))return null;return r}function sf(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function Y1(r,i){var l=r.ownerDocument;if(r.data!=="$?"||l.readyState==="complete")i();else{var u=function(){i(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Pn(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}var of=null;function Ny(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return r;i--}else l==="/$"&&i++}r=r.previousSibling}return null}function Ay(r,i,l){switch(i=Kl(l),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function ca(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);lu(r)}var Rn=new Map,Oy=new Set;function Xl(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Cr=L.d;L.d={f:K1,r:X1,D:J1,C:Z1,L:W1,m:ew,X:nw,S:tw,M:rw};function K1(){var r=Cr.f(),i=Il();return r||i}function X1(r){var i=gi(r);i!==null&&i.tag===5&&i.type==="form"?Xm(i):Cr.r(r)}var Xi=typeof document>"u"?null:document;function Ry(r,i,l){var u=Xi;if(u&&typeof i=="string"&&i){var h=En(i);h='link[rel="'+r+'"][href="'+h+'"]',typeof l=="string"&&(h+='[crossorigin="'+l+'"]'),Oy.has(h)||(Oy.add(h),r={rel:r,crossOrigin:l,href:i},u.querySelector(h)===null&&(i=u.createElement("link"),Bt(i,"link",r),kt(i),u.head.appendChild(i)))}}function J1(r){Cr.D(r),Ry("dns-prefetch",r,null)}function Z1(r,i){Cr.C(r,i),Ry("preconnect",r,i)}function W1(r,i,l){Cr.L(r,i,l);var u=Xi;if(u&&r&&i){var h='link[rel="preload"][as="'+En(i)+'"]';i==="image"&&l&&l.imageSrcSet?(h+='[imagesrcset="'+En(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(h+='[imagesizes="'+En(l.imageSizes)+'"]')):h+='[href="'+En(r)+'"]';var m=h;switch(i){case"style":m=Ji(r);break;case"script":m=Zi(r)}Rn.has(m)||(r=g({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:r,as:i},l),Rn.set(m,r),u.querySelector(h)!==null||i==="style"&&u.querySelector(ua(m))||i==="script"&&u.querySelector(da(m))||(i=u.createElement("link"),Bt(i,"link",r),kt(i),u.head.appendChild(i)))}}function ew(r,i){Cr.m(r,i);var l=Xi;if(l&&r){var u=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+En(u)+'"][href="'+En(r)+'"]',m=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Zi(r)}if(!Rn.has(m)&&(r=g({rel:"modulepreload",href:r},i),Rn.set(m,r),l.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(da(m)))return}u=l.createElement("link"),Bt(u,"link",r),kt(u),l.head.appendChild(u)}}}function tw(r,i,l){Cr.S(r,i,l);var u=Xi;if(u&&r){var h=yi(u).hoistableStyles,m=Ji(r);i=i||"default";var w=h.get(m);if(!w){var k={loading:0,preload:null};if(w=u.querySelector(ua(m)))k.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":i},l),(l=Rn.get(m))&&af(r,l);var M=w=u.createElement("link");kt(M),Bt(M,"link",r),M._p=new Promise(function(q,Q){M.onload=q,M.onerror=Q}),M.addEventListener("load",function(){k.loading|=1}),M.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Jl(w,i,u)}w={type:"stylesheet",instance:w,count:1,state:k},h.set(m,w)}}}function nw(r,i){Cr.X(r,i);var l=Xi;if(l&&r){var u=yi(l).hoistableScripts,h=Zi(r),m=u.get(h);m||(m=l.querySelector(da(h)),m||(r=g({src:r,async:!0},i),(i=Rn.get(h))&&lf(r,i),m=l.createElement("script"),kt(m),Bt(m,"link",r),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function rw(r,i){Cr.M(r,i);var l=Xi;if(l&&r){var u=yi(l).hoistableScripts,h=Zi(r),m=u.get(h);m||(m=l.querySelector(da(h)),m||(r=g({src:r,async:!0,type:"module"},i),(i=Rn.get(h))&&lf(r,i),m=l.createElement("script"),kt(m),Bt(m,"link",r),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function Dy(r,i,l,u){var h=(h=z.current)?Xl(h):null;if(!h)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=Ji(l.href),l=yi(h).hoistableStyles,u=l.get(i),u||(u={type:"style",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Ji(l.href);var m=yi(h).hoistableStyles,w=m.get(r);if(w||(h=h.ownerDocument||h,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,w),(m=h.querySelector(ua(r)))&&!m._p&&(w.instance=m,w.state.loading=5),Rn.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Rn.set(r,l),m||sw(h,r,l,w.state))),i&&u===null)throw Error(s(528,""));return w}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Zi(l),l=yi(h).hoistableScripts,u=l.get(i),u||(u={type:"script",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Ji(r){return'href="'+En(r)+'"'}function ua(r){return'link[rel="stylesheet"]['+r+"]"}function jy(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function sw(r,i,l,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Bt(i,"link",l),kt(i),r.head.appendChild(i))}function Zi(r){return'[src="'+En(r)+'"]'}function da(r){return"script[async]"+r}function zy(r,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+En(l.href)+'"]');if(u)return i.instance=u,kt(u),u;var h=g({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),kt(u),Bt(u,"style",h),Jl(u,l.precedence,r),i.instance=u;case"stylesheet":h=Ji(l.href);var m=r.querySelector(ua(h));if(m)return i.state.loading|=4,i.instance=m,kt(m),m;u=jy(l),(h=Rn.get(h))&&af(u,h),m=(r.ownerDocument||r).createElement("link"),kt(m);var w=m;return w._p=new Promise(function(k,M){w.onload=k,w.onerror=M}),Bt(m,"link",u),i.state.loading|=4,Jl(m,l.precedence,r),i.instance=m;case"script":return m=Zi(l.src),(h=r.querySelector(da(m)))?(i.instance=h,kt(h),h):(u=l,(h=Rn.get(m))&&(u=g({},l),lf(u,h)),r=r.ownerDocument||r,h=r.createElement("script"),kt(h),Bt(h,"link",u),r.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Jl(u,l.precedence,r));return i.instance}function Jl(r,i,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,m=h,w=0;w<u.length;w++){var k=u[w];if(k.dataset.precedence===i)m=k;else if(m!==h)break}m?m.parentNode.insertBefore(r,m.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(r,i.firstChild))}function af(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function lf(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Zl=null;function _y(r,i,l){if(Zl===null){var u=new Map,h=Zl=new Map;h.set(l,u)}else h=Zl,u=h.get(l),u||(u=new Map,h.set(l,u));if(u.has(r))return u;for(u.set(r,null),l=l.getElementsByTagName(r),h=0;h<l.length;h++){var m=l[h];if(!(m[Eo]||m[at]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(i)||"";w=r+w;var k=u.get(w);k?k.push(m):u.set(w,[m])}}return u}function By(r,i,l){r=r.ownerDocument||r,r.head.insertBefore(l,i==="title"?r.querySelector("head > title"):null)}function iw(r,i,l){if(l===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Ly(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var fa=null;function ow(){}function aw(r,i,l){if(fa===null)throw Error(s(475));var u=fa;if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ji(l.href),m=r.querySelector(ua(h));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=Wl.bind(u),r.then(u,u)),i.state.loading|=4,i.instance=m,kt(m);return}m=r.ownerDocument||r,l=jy(l),(h=Rn.get(h))&&af(l,h),m=m.createElement("link"),kt(m);var w=m;w._p=new Promise(function(k,M){w.onload=k,w.onerror=M}),Bt(m,"link",l),i.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Wl.bind(u),r.addEventListener("load",i),r.addEventListener("error",i))}}function lw(){if(fa===null)throw Error(s(475));var r=fa;return r.stylesheets&&r.count===0&&cf(r,r.stylesheets),0<r.count?function(i){var l=setTimeout(function(){if(r.stylesheets&&cf(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(l)}}:null}function Wl(){if(this.count--,this.count===0){if(this.stylesheets)cf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var ec=null;function cf(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,ec=new Map,i.forEach(cw,r),ec=null,Wl.call(r))}function cw(r,i){if(!(i.state.loading&4)){var l=ec.get(r);if(l)var u=l.get(null);else{l=new Map,ec.set(r,l);for(var h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var w=h[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),u=w)}u&&l.set(null,u)}h=i.instance,w=h.getAttribute("data-precedence"),m=l.get(w)||u,m===u&&l.set(null,h),l.set(w,h),this.count++,u=Wl.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),m?m.parentNode.insertBefore(h,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(h,r.firstChild)),i.state.loading|=4}}var ha={$$typeof:Y,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function uw(r,i,l,u,h,m,w,k){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ko(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ko(0),this.hiddenUpdates=ko(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function qy(r,i,l,u,h,m,w,k,M,q,Q,K){return r=new uw(r,i,l,w,k,M,q,K),i=1,m===!0&&(i|=24),m=fn(3,null,null,i),r.current=m,m.stateNode=r,i=Pu(),i.refCount++,r.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:l,cache:i},Gu(m),r}function Uy(r){return r?(r=Ai,r):Ai}function Vy(r,i,l,u,h,m){h=Uy(h),u.context===null?u.context=h:u.pendingContext=h,u=qr(i),u.payload={element:l},m=m===void 0?null:m,m!==null&&(u.callback=m),l=Ur(r,u,i),l!==null&&(yn(l,r,i),Po(l,r,i))}function Iy(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function uf(r,i){Iy(r,i),(r=r.alternate)&&Iy(r,i)}function Hy(r){if(r.tag===13){var i=Ni(r,67108864);i!==null&&yn(i,r,67108864),uf(r,67108864)}}var tc=!0;function dw(r,i,l,u){var h=N.T;N.T=null;var m=L.p;try{L.p=2,df(r,i,l,u)}finally{L.p=m,N.T=h}}function fw(r,i,l,u){var h=N.T;N.T=null;var m=L.p;try{L.p=8,df(r,i,l,u)}finally{L.p=m,N.T=h}}function df(r,i,l,u){if(tc){var h=ff(u);if(h===null)Jd(r,i,u,nc,l),$y(r,u);else if(pw(h,r,i,l,u))u.stopPropagation();else if($y(r,u),i&4&&-1<hw.indexOf(r)){for(;h!==null;){var m=gi(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=Jn(m.pendingLanes);if(w!==0){var k=m;for(k.pendingLanes|=2,k.entangledLanes|=2;w;){var M=1<<31-Dt(w);k.entanglements[1]|=M,w&=~M}nr(m),(Pe&6)===0&&(Ul=ut()+500,oa(0))}}break;case 13:k=Ni(m,2),k!==null&&yn(k,m,2),Il(),uf(m,2)}if(m=ff(u),m===null&&Jd(r,i,u,nc,l),m===h)break;h=m}h!==null&&u.stopPropagation()}else Jd(r,i,u,null,l)}}function ff(r){return r=gu(r),hf(r)}var nc=null;function hf(r){if(nc=null,r=mi(r),r!==null){var i=a(r);if(i===null)r=null;else{var l=i.tag;if(l===13){if(r=c(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return nc=r,null}function Py(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ga()){case wn:return 2;case Ya:return 8;case di:case Yt:return 32;case ur:return 268435456;default:return 32}default:return 32}}var pf=!1,Zr=null,Wr=null,es=null,pa=new Map,ma=new Map,ts=[],hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $y(r,i){switch(r){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":pa.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(i.pointerId)}}function ga(r,i,l,u,h,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:l,eventSystemFlags:u,nativeEvent:m,targetContainers:[h]},i!==null&&(i=gi(i),i!==null&&Hy(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),r)}function pw(r,i,l,u,h){switch(i){case"focusin":return Zr=ga(Zr,r,i,l,u,h),!0;case"dragenter":return Wr=ga(Wr,r,i,l,u,h),!0;case"mouseover":return es=ga(es,r,i,l,u,h),!0;case"pointerover":var m=h.pointerId;return pa.set(m,ga(pa.get(m)||null,r,i,l,u,h)),!0;case"gotpointercapture":return m=h.pointerId,ma.set(m,ga(ma.get(m)||null,r,i,l,u,h)),!0}return!1}function Fy(r){var i=mi(r.target);if(i!==null){var l=a(i);if(l!==null){if(i=l.tag,i===13){if(i=c(l),i!==null){r.blockedOn=i,bt(r.priority,function(){if(l.tag===13){var u=gn();u=dt(u);var h=Ni(l,u);h!==null&&yn(h,l,u),uf(l,u)}});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function rc(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=ff(r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);mu=u,l.target.dispatchEvent(u),mu=null}else return i=gi(l),i!==null&&Hy(i),r.blockedOn=l,!1;i.shift()}return!0}function Qy(r,i,l){rc(r)&&l.delete(i)}function mw(){pf=!1,Zr!==null&&rc(Zr)&&(Zr=null),Wr!==null&&rc(Wr)&&(Wr=null),es!==null&&rc(es)&&(es=null),pa.forEach(Qy),ma.forEach(Qy)}function sc(r,i){r.blockedOn===i&&(r.blockedOn=null,pf||(pf=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,mw)))}var ic=null;function Gy(r){ic!==r&&(ic=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ic===r&&(ic=null);for(var i=0;i<r.length;i+=3){var l=r[i],u=r[i+1],h=r[i+2];if(typeof u!="function"){if(hf(u||l)===null)continue;break}var m=gi(l);m!==null&&(r.splice(i,3),i-=3,fd(m,{pending:!0,data:h,method:l.method,action:u},u,h))}}))}function ya(r){function i(M){return sc(M,r)}Zr!==null&&sc(Zr,r),Wr!==null&&sc(Wr,r),es!==null&&sc(es,r),pa.forEach(i),ma.forEach(i);for(var l=0;l<ts.length;l++){var u=ts[l];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ts.length&&(l=ts[0],l.blockedOn===null);)Fy(l),l.blockedOn===null&&ts.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var h=l[u],m=l[u+1],w=h[Xe]||null;if(typeof m=="function")w||Gy(l);else if(w){var k=null;if(m&&m.hasAttribute("formAction")){if(h=m,w=m[Xe]||null)k=w.formAction;else if(hf(h)!==null)continue}else k=w.action;typeof k=="function"?l[u+1]=k:(l.splice(u,3),u-=3),Gy(l)}}}function mf(r){this._internalRoot=r}oc.prototype.render=mf.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,u=gn();Vy(l,u,r,i,null,null)},oc.prototype.unmount=mf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Vy(r.current,2,null,r,null,null),Il(),i[wt]=null}};function oc(r){this._internalRoot=r}oc.prototype.unstable_scheduleHydration=function(r){if(r){var i=Ns();r={blockedOn:null,target:r,priority:i};for(var l=0;l<ts.length&&i!==0&&i<ts[l].priority;l++);ts.splice(l,0,r),l===0&&Fy(r)}};var Yy=e.version;if(Yy!=="19.1.0")throw Error(s(527,Yy,"19.1.0"));L.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=f(i),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var gw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{Xn=ac.inject(gw),Kt=ac}catch{}}return va.createRoot=function(r,i){if(!o(r))throw Error(s(299));var l=!1,u="",h=ug,m=dg,w=fg,k=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(k=i.unstable_transitionCallbacks)),i=qy(r,1,!1,null,null,l,u,h,m,w,k,null),r[wt]=i.current,Xd(r),new mf(i)},va.hydrateRoot=function(r,i,l){if(!o(r))throw Error(s(299));var u=!1,h="",m=ug,w=dg,k=fg,M=null,q=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(k=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(M=l.unstable_transitionCallbacks),l.formState!==void 0&&(q=l.formState)),i=qy(r,1,!0,i,l??null,u,h,m,w,k,M,q),i.context=Uy(null),l=i.current,u=gn(),u=dt(u),h=qr(u),h.callback=null,Ur(l,h,u),l=u,i.current.lanes=l,zr(i,l),nr(i),r[wt]=i.current,Xd(r),new oc(i)},va.version="19.1.0",va}var sb;function Tw(){if(sb)return bf.exports;sb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),bf.exports=Ew(),bf.exports}var Cw=Tw();const Ys="1.21.1-alpha.1";var or=[],jn=[],Mw=Uint8Array,wf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Wi=0,Nw=wf.length;Wi<Nw;++Wi)or[Wi]=wf[Wi],jn[wf.charCodeAt(Wi)]=Wi;jn[45]=62;jn[95]=63;function Aw(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var s=t===e?0:4-t%4;return[t,s]}function Ow(n,e,t){return(e+t)*3/4-t}function Ra(n){var e,t=Aw(n),s=t[0],o=t[1],a=new Mw(Ow(n,s,o)),c=0,d=o>0?s-4:s,f;for(f=0;f<d;f+=4)e=jn[n.charCodeAt(f)]<<18|jn[n.charCodeAt(f+1)]<<12|jn[n.charCodeAt(f+2)]<<6|jn[n.charCodeAt(f+3)],a[c++]=e>>16&255,a[c++]=e>>8&255,a[c++]=e&255;return o===2&&(e=jn[n.charCodeAt(f)]<<2|jn[n.charCodeAt(f+1)]>>4,a[c++]=e&255),o===1&&(e=jn[n.charCodeAt(f)]<<10|jn[n.charCodeAt(f+1)]<<4|jn[n.charCodeAt(f+2)]>>2,a[c++]=e>>8&255,a[c++]=e&255),a}function Rw(n){return or[n>>18&63]+or[n>>12&63]+or[n>>6&63]+or[n&63]}function Dw(n,e,t){for(var s,o=[],a=e;a<t;a+=3)s=(n[a]<<16&16711680)+(n[a+1]<<8&65280)+(n[a+2]&255),o.push(Rw(s));return o.join("")}function Da(n){for(var e,t=n.length,s=t%3,o=[],a=16383,c=0,d=t-s;c<d;c+=a)o.push(Dw(n,c,c+a>d?d:c+a));return s===1?(e=n[t-1],o.push(or[e>>2]+or[e<<4&63]+"==")):s===2&&(e=(n[t-2]<<8)+n[t-1],o.push(or[e>>10]+or[e>>4&63]+or[e<<2&63]+"=")),o.join("")}function cn(n){if(n===void 0)return{};if(!P0(n))throw new Error(`The arguments to a Convex function must be an object. Received: ${n}`);return n}function H0(n){if(typeof n>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof n!="string")throw new Error(`Invalid deployment address: found ${n}".`);if(!(n.startsWith("http:")||n.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${n}".`);try{new URL(n)}catch{throw new Error(`Invalid deployment address: "${n}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(n.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${n}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function P0(n){const e=typeof n=="object",t=Object.getPrototypeOf(n),s=t===null||t===Object.prototype||t?.constructor?.name==="Object";return e&&s}const $0=!0,uo=BigInt("-9223372036854775808"),Dh=BigInt("9223372036854775807"),eh=BigInt("0"),jw=BigInt("8"),zw=BigInt("256");function F0(n){return Number.isNaN(n)||!Number.isFinite(n)||Object.is(n,-0)}function _w(n){n<eh&&(n-=uo+uo);let e=n.toString(16);e.length%2===1&&(e="0"+e);const t=new Uint8Array(new ArrayBuffer(8));let s=0;for(const o of e.match(/.{2}/g).reverse())t.set([parseInt(o,16)],s++),n>>=jw;return Da(t)}function Bw(n){const e=Ra(n);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let t=eh,s=eh;for(const o of e)t+=BigInt(o)*zw**s,s++;return t>Dh&&(t+=uo+uo),t}function Lw(n){if(n<uo||Dh<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,n,!0),Da(new Uint8Array(e))}function qw(n){const e=Ra(n);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const Uw=DataView.prototype.setBigInt64?Lw:_w,Vw=DataView.prototype.getBigInt64?qw:Bw,ib=1024;function Q0(n){if(n.length>ib)throw new Error(`Field name ${n} exceeds maximum field name length ${ib}.`);if(n.startsWith("$"))throw new Error(`Field name ${n} starts with a '$', which is reserved.`);for(let e=0;e<n.length;e+=1){const t=n.charCodeAt(e);if(t<32||t>=127)throw new Error(`Field name ${n} has invalid character '${n[e]}': Field names can only contain non-control ASCII characters`)}}function Gn(n){if(n===null||typeof n=="boolean"||typeof n=="number"||typeof n=="string")return n;if(Array.isArray(n))return n.map(s=>Gn(s));if(typeof n!="object")throw new Error(`Unexpected type of ${n}`);const e=Object.entries(n);if(e.length===1){const s=e[0][0];if(s==="$bytes"){if(typeof n.$bytes!="string")throw new Error(`Malformed $bytes field on ${n}`);return Ra(n.$bytes).buffer}if(s==="$integer"){if(typeof n.$integer!="string")throw new Error(`Malformed $integer field on ${n}`);return Vw(n.$integer)}if(s==="$float"){if(typeof n.$float!="string")throw new Error(`Malformed $float field on ${n}`);const o=Ra(n.$float);if(o.byteLength!==8)throw new Error(`Received ${o.byteLength} bytes, expected 8 for $float`);const c=new DataView(o.buffer).getFloat64(0,$0);if(!F0(c))throw new Error(`Float ${c} should be encoded as a number`);return c}if(s==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(s==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const t={};for(const[s,o]of Object.entries(n))Q0(s),t[s]=Gn(o);return t}function Ca(n){return JSON.stringify(n,(e,t)=>t===void 0?"undefined":typeof t=="bigint"?`${t.toString()}n`:t)}function th(n,e,t,s){if(n===void 0){const c=t&&` (present at path ${t} in original object ${Ca(e)})`;throw new Error(`undefined is not a valid Convex value${c}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(n===null)return n;if(typeof n=="bigint"){if(n<uo||Dh<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);return{$integer:Uw(n)}}if(typeof n=="number")if(F0(n)){const c=new ArrayBuffer(8);return new DataView(c).setFloat64(0,n,$0),{$float:Da(new Uint8Array(c))}}else return n;if(typeof n=="boolean"||typeof n=="string")return n;if(n instanceof ArrayBuffer)return{$bytes:Da(new Uint8Array(n))};if(Array.isArray(n))return n.map((c,d)=>th(c,e,t+`[${d}]`));if(n instanceof Set)throw new Error(kf(t,"Set",[...n],e));if(n instanceof Map)throw new Error(kf(t,"Map",[...n],e));if(!P0(n)){const c=n?.constructor?.name,d=c?`${c} `:"";throw new Error(kf(t,d,n,e))}const o={},a=Object.entries(n);a.sort(([c,d],[f,p])=>c===f?0:c<f?-1:1);for(const[c,d]of a)d!==void 0&&(Q0(c),o[c]=th(d,e,t+`.${c}`));return o}function kf(n,e,t,s){return n?`${e}${Ca(t)} is not a supported Convex type (present at path ${n} in original object ${Ca(s)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${Ca(t)} is not a supported Convex type.`}function Zt(n){return th(n,n,"")}var Iw=Object.defineProperty,Hw=(n,e,t)=>e in n?Iw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ef=(n,e,t)=>Hw(n,typeof e!="symbol"?e+"":e,t),ob,ab;const Pw=Symbol.for("ConvexError");class ds extends(ab=Error,ob=Pw,ab){constructor(e){super(typeof e=="string"?e:Ca(e)),Ef(this,"name","ConvexError"),Ef(this,"data"),Ef(this,ob,!0),this.data=e}}var $w=Object.defineProperty,Fw=(n,e,t)=>e in n?$w(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lb=(n,e,t)=>Fw(n,typeof e!="symbol"?e+"":e,t);const Qw="color:rgb(0, 145, 255)";function G0(n){switch(n){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class Gw{constructor(e){lb(this,"_onLogLineFuncs"),lb(this,"_verbose"),this._onLogLineFuncs={},this._verbose=e.verbose}addLogLineListener(e){let t=Math.random().toString(36).substring(2,15);for(let s=0;s<10&&this._onLogLineFuncs[t]!==void 0;s++)t=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[t]=e,()=>{delete this._onLogLineFuncs[t]}}logVerbose(...e){if(this._verbose)for(const t of Object.values(this._onLogLineFuncs))t("debug",`${new Date().toISOString()}`,...e)}log(...e){for(const t of Object.values(this._onLogLineFuncs))t("info",...e)}warn(...e){for(const t of Object.values(this._onLogLineFuncs))t("warn",...e)}error(...e){for(const t of Object.values(this._onLogLineFuncs))t("error",...e)}}function jh(n){const e=new Gw(n);return e.addLogLineListener((t,...s)=>{switch(t){case"debug":console.debug(...s);break;case"info":console.log(...s);break;case"warn":console.warn(...s);break;case"error":console.error(...s);break;default:console.log(...s)}}),e}function fs(n,e,t,s,o){const a=G0(t);if(typeof o=="object"&&(o=`ConvexError ${JSON.stringify(o.errorData,null,2)}`),e==="info"){const c=o.match(/^\[.*?\] /);if(c===null){n.error(`[CONVEX ${a}(${s})] Could not parse console.log`);return}const d=o.slice(1,c[0].length-2),f=o.slice(c[0].length);n.log(`%c[CONVEX ${a}(${s})] [${d}]`,Qw,f)}else n.error(`[CONVEX ${a}(${s})] ${o}`)}function Yw(n,e){const t=`[CONVEX FATAL ERROR] ${e}`;return n.error(t),new Error(t)}function io(n,e,t){return`[CONVEX ${G0(n)}(${e})] ${t.errorMessage}
  Called by client`}function nh(n,e){return e.data=n.errorData,e}function Nc(n){const e=n.split(":");let t,s;return e.length===1?(t=e[0],s="default"):(t=e.slice(0,e.length-1).join(":"),s=e[e.length-1]),t.endsWith(".js")&&(t=t.slice(0,-3)),`${t}:${s}`}function ei(n,e){return JSON.stringify({udfPath:Nc(n),args:Zt(e)})}var Kw=Object.defineProperty,Xw=(n,e,t)=>e in n?Kw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,rr=(n,e,t)=>Xw(n,typeof e!="symbol"?e+"":e,t);class Jw{constructor(){rr(this,"nextQueryId"),rr(this,"querySetVersion"),rr(this,"querySet"),rr(this,"queryIdToToken"),rr(this,"identityVersion"),rr(this,"auth"),rr(this,"outstandingQueriesOlderThanRestart"),rr(this,"outstandingAuthOlderThanRestart"),rr(this,"paused"),rr(this,"pendingQuerySetModifications"),this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1,this.paused=!1,this.pendingQuerySetModifications=new Map}hasSyncedPastLastReconnect(){return this.outstandingQueriesOlderThanRestart.size===0&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(e,t,s,o){const a=Nc(e),c=ei(a,t),d=this.querySet.get(c);if(d!==void 0)return d.numSubscribers+=1,{queryToken:c,modification:null,unsubscribe:()=>this.removeSubscriber(c)};{const f=this.nextQueryId++,p={id:f,canonicalizedUdfPath:a,args:t,numSubscribers:1,journal:s,componentPath:o};this.querySet.set(c,p),this.queryIdToToken.set(f,c);const g=this.querySetVersion,y=this.querySetVersion+1,b={type:"Add",queryId:f,udfPath:a,args:[Zt(t)],journal:s,componentPath:o};return this.paused?this.pendingQuerySetModifications.set(f,b):this.querySetVersion=y,{queryToken:c,modification:{type:"ModifyQuerySet",baseVersion:g,newVersion:y,modifications:[b]},unsubscribe:()=>this.removeSubscriber(c)}}}transition(e){for(const t of e.modifications)switch(t.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);const s=t.journal;if(s!==void 0){const o=this.queryIdToToken.get(t.queryId);o!==void 0&&(this.querySet.get(o).journal=s)}break}case"QueryRemoved":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);break}default:throw new Error(`Invalid modification ${t.type}`)}}queryId(e,t){const s=Nc(e),o=ei(s,t),a=this.querySet.get(o);return a!==void 0?a.id:null}isCurrentOrNewerAuthVersion(e){return e>=this.identityVersion}setAuth(e){this.auth={tokenType:"User",value:e};const t=this.identityVersion;return this.paused||(this.identityVersion=t+1),{type:"Authenticate",baseVersion:t,...this.auth}}setAdminAuth(e,t){const s={tokenType:"Admin",value:e,impersonating:t};this.auth=s;const o=this.identityVersion;return this.paused||(this.identityVersion=o+1),{type:"Authenticate",baseVersion:o,...s}}clearAuth(){this.auth=void 0,this.markAuthCompletion();const e=this.identityVersion;return this.paused||(this.identityVersion=e+1),{type:"Authenticate",tokenType:"None",baseVersion:e}}hasAuth(){return!!this.auth}isNewAuth(e){return this.auth?.value!==e}queryPath(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).canonicalizedUdfPath:null}queryArgs(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).args:null}queryToken(e){return this.queryIdToToken.get(e)??null}queryJournal(e){return this.querySet.get(e)?.journal}restart(e){this.unpause(),this.outstandingQueriesOlderThanRestart.clear();const t=[];for(const a of this.querySet.values()){const c={type:"Add",queryId:a.id,udfPath:a.canonicalizedUdfPath,args:[Zt(a.args)],journal:a.journal,componentPath:a.componentPath};t.push(c),e.has(a.id)||this.outstandingQueriesOlderThanRestart.add(a.id)}this.querySetVersion=1;const s={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:t};if(!this.auth)return this.identityVersion=0,[s,void 0];this.outstandingAuthOlderThanRestart=!0;const o={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[s,o]}pause(){this.paused=!0}resume(){const e=this.pendingQuerySetModifications.size>0?{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:Array.from(this.pendingQuerySetModifications.values())}:void 0,t=this.auth!==void 0?{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}:void 0;return this.unpause(),[e,t]}unpause(){this.paused=!1,this.pendingQuerySetModifications.clear()}removeSubscriber(e){const t=this.querySet.get(e);if(t.numSubscribers>1)return t.numSubscribers-=1,null;{this.querySet.delete(e),this.queryIdToToken.delete(t.id),this.outstandingQueriesOlderThanRestart.delete(t.id);const s=this.querySetVersion,o=this.querySetVersion+1,a={type:"Remove",queryId:t.id};return this.paused?this.pendingQuerySetModifications.has(t.id)?this.pendingQuerySetModifications.delete(t.id):this.pendingQuerySetModifications.set(t.id,a):this.querySetVersion=o,{type:"ModifyQuerySet",baseVersion:s,newVersion:o,modifications:[a]}}}}var Zw=Object.defineProperty,Ww=(n,e,t)=>e in n?Zw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,cb=(n,e,t)=>Ww(n,typeof e!="symbol"?e+"":e,t);class ek{constructor(e){this.logger=e,cb(this,"inflightRequests"),cb(this,"requestsOlderThanRestart"),this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(e,t){return new Promise(o=>{const a=t?"Requested":"NotSent";this.inflightRequests.set(e.requestId,{message:e,status:{status:a,requestedAt:new Date,onResult:o}})})}onResponse(e){const t=this.inflightRequests.get(e.requestId);if(t===void 0||t.status.status==="Completed")return null;const s=t.message.type==="Mutation"?"mutation":"action",o=t.message.udfPath;for(const f of e.logLines)fs(this.logger,"info",s,o,f);const a=t.status;let c,d;if(e.success)c={success:!0,logLines:e.logLines,value:Gn(e.result)},d=()=>a.onResult(c);else{const f=e.result,{errorData:p}=e;fs(this.logger,"error",s,o,f),c={success:!1,errorMessage:f,errorData:p!==void 0?Gn(p):void 0,logLines:e.logLines},d=()=>a.onResult(c)}return e.type==="ActionResponse"||!e.success?(d(),this.inflightRequests.delete(e.requestId),this.requestsOlderThanRestart.delete(e.requestId),{requestId:e.requestId,result:c}):(t.status={status:"Completed",result:c,ts:e.ts,onResolve:d},null)}removeCompleted(e){const t=new Map;for(const[s,o]of this.inflightRequests.entries()){const a=o.status;a.status==="Completed"&&a.ts.lessThanOrEqual(e)&&(a.onResolve(),t.set(s,a.result),this.inflightRequests.delete(s),this.requestsOlderThanRestart.delete(s))}return t}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());const e=[];for(const[t,s]of this.inflightRequests){if(s.status.status==="NotSent"){s.status.status="Requested",e.push(s.message);continue}if(s.message.type==="Mutation")e.push(s.message);else{if(this.inflightRequests.delete(t),this.requestsOlderThanRestart.delete(t),s.status.status==="Completed")throw new Error("Action should never be in 'Completed' state");s.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return e}resume(){const e=[];for(const[,t]of this.inflightRequests)if(t.status.status==="NotSent"){t.status.status="Requested",e.push(t.message);continue}return e}hasIncompleteRequests(){for(const e of this.inflightRequests.values())if(e.status.status==="Requested")return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return this.requestsOlderThanRestart.size===0}timeOfOldestInflightRequest(){if(this.inflightRequests.size===0)return null;let e=Date.now();for(const t of this.inflightRequests.values())t.status.status!=="Completed"&&t.status.requestedAt.getTime()<e&&(e=t.status.requestedAt.getTime());return new Date(e)}}const ja=Symbol.for("functionName"),tk=Symbol.for("toReferencePath");function nk(n){return n[tk]??null}function rk(n){return n.startsWith("function://")}function sk(n){let e;if(typeof n=="string")rk(n)?e={functionHandle:n}:e={name:n};else if(n[ja])e={name:n[ja]};else{const t=nk(n);if(!t)throw new Error(`${n} is not a functionReference`);e={reference:t}}return e}function mt(n){const e=sk(n);if(e.name===void 0)throw e.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${e.functionHandle}`):e.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${e.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(e)}`);if(typeof n=="string")return n;const t=n[ja];if(!t)throw new Error(`${n} is not a functionReference`);return t}function Y0(n){return{[ja]:n}}function K0(n=[]){const e={get(t,s){if(typeof s=="string"){const o=[...n,s];return K0(o)}else if(s===ja){if(n.length<2){const c=["api",...n].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${c}\``)}const o=n.slice(0,-1).join("/"),a=n[n.length-1];return a==="default"?o:o+":"+a}else return s===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}const ik=K0();var ok=Object.defineProperty,ak=(n,e,t)=>e in n?ok(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ac=(n,e,t)=>ak(n,typeof e!="symbol"?e+"":e,t);class za{constructor(e){Ac(this,"queryResults"),Ac(this,"modifiedQueries"),this.queryResults=e,this.modifiedQueries=[]}getQuery(e,...t){const s=cn(t[0]),o=mt(e),a=this.queryResults.get(ei(o,s));if(a!==void 0)return za.queryValue(a.result)}getAllQueries(e){const t=[],s=mt(e);for(const o of this.queryResults.values())o.udfPath===Nc(s)&&t.push({args:o.args,value:za.queryValue(o.result)});return t}setQuery(e,t,s){const o=cn(t),a=mt(e),c=ei(a,o);let d;s===void 0?d=void 0:d={success:!0,value:s,logLines:[]};const f={udfPath:a,args:o,result:d};this.queryResults.set(c,f),this.modifiedQueries.push(c)}static queryValue(e){if(e!==void 0)return e.success?e.value:void 0}}class lk{constructor(){Ac(this,"queryResults"),Ac(this,"optimisticUpdates"),this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(e,t){this.optimisticUpdates=this.optimisticUpdates.filter(c=>!t.has(c.mutationId));const s=this.queryResults;this.queryResults=new Map(e);const o=new za(this.queryResults);for(const c of this.optimisticUpdates)c.update(o);const a=[];for(const[c,d]of this.queryResults){const f=s.get(c);(f===void 0||f.result!==d.result)&&a.push(c)}return a}applyOptimisticUpdate(e,t){this.optimisticUpdates.push({update:e,mutationId:t});const s=new za(this.queryResults);return e(s),s.modifiedQueries}queryResult(e){const t=this.queryResults.get(e);if(t===void 0)return;const s=t.result;if(s!==void 0){if(s.success)return s.value;throw s.errorData!==void 0?nh(s,new ds(io("query",t.udfPath,s))):new Error(io("query",t.udfPath,s))}}hasQueryResult(e){return this.queryResults.get(e)!==void 0}queryLogs(e){return this.queryResults.get(e)?.result?.logLines}}var ck=Object.defineProperty,uk=(n,e,t)=>e in n?ck(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Tf=(n,e,t)=>uk(n,typeof e!="symbol"?e+"":e,t);class bn{constructor(e,t){Tf(this,"low"),Tf(this,"high"),Tf(this,"__isUnsignedLong__"),this.low=e|0,this.high=t|0,this.__isUnsignedLong__=!0}static isLong(e){return(e&&e.__isUnsignedLong__)===!0}static fromBytesLE(e){return new bn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24)}toBytesLE(){const e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}static fromNumber(e){return isNaN(e)||e<0?ub:e>=dk?fk:new bn(e%Ma|0,e/Ma|0)}toString(){return(BigInt(this.high)*BigInt(Ma)+BigInt(this.low)).toString()}equals(e){return bn.isLong(e)||(e=bn.fromValue(e)),this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}notEquals(e){return!this.equals(e)}comp(e){return bn.isLong(e)||(e=bn.fromValue(e)),this.equals(e)?0:e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(e){return this.comp(e)<=0}static fromValue(e){return typeof e=="number"?bn.fromNumber(e):new bn(e.low,e.high)}}const ub=new bn(0,0),db=65536,Ma=db*db,dk=Ma*Ma,fk=new bn(-1,-1);var hk=Object.defineProperty,pk=(n,e,t)=>e in n?hk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lc=(n,e,t)=>pk(n,typeof e!="symbol"?e+"":e,t);class fb{constructor(e,t){lc(this,"version"),lc(this,"remoteQuerySet"),lc(this,"queryPath"),lc(this,"logger"),this.version={querySet:0,ts:bn.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=e,this.logger=t}transition(e){const t=e.startVersion;if(this.version.querySet!==t.querySet||this.version.ts.notEquals(t.ts)||this.version.identity!==t.identity)throw new Error(`Invalid start version: ${t.ts.toString()}:${t.querySet}`);for(const s of e.modifications)switch(s.type){case"QueryUpdated":{const o=this.queryPath(s.queryId);if(o)for(const c of s.logLines)fs(this.logger,"info","query",o,c);const a=Gn(s.value??null);this.remoteQuerySet.set(s.queryId,{success:!0,value:a,logLines:s.logLines});break}case"QueryFailed":{const o=this.queryPath(s.queryId);if(o)for(const c of s.logLines)fs(this.logger,"info","query",o,c);const{errorData:a}=s;this.remoteQuerySet.set(s.queryId,{success:!1,errorMessage:s.errorMessage,errorData:a!==void 0?Gn(a):void 0,logLines:s.logLines});break}case"QueryRemoved":{this.remoteQuerySet.delete(s.queryId);break}default:throw new Error(`Invalid modification ${s.type}`)}this.version=e.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function Cf(n){const e=Ra(n);return bn.fromBytesLE(Array.from(e))}function mk(n){const e=new Uint8Array(n.toBytesLE());return Da(e)}function gk(n){switch(n.type){case"FatalError":case"AuthError":case"ActionResponse":case"Ping":return{...n};case"MutationResponse":return n.success?{...n,ts:Cf(n.ts)}:{...n};case"Transition":return{...n,startVersion:{...n.startVersion,ts:Cf(n.startVersion.ts)},endVersion:{...n.endVersion,ts:Cf(n.endVersion.ts)}}}}function yk(n){switch(n.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...n};case"Connect":return n.maxObservedTimestamp!==void 0?{...n,maxObservedTimestamp:mk(n.maxObservedTimestamp)}:{...n,maxObservedTimestamp:void 0}}}var bk=Object.defineProperty,vk=(n,e,t)=>e in n?bk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Jt=(n,e,t)=>vk(n,typeof e!="symbol"?e+"":e,t);const xk=1e3,Sk=1001,wk=1005,kk=4040;class Ek{constructor(e,t,s,o){Jt(this,"socket"),Jt(this,"connectionCount"),Jt(this,"_hasEverConnected",!1),Jt(this,"lastCloseReason"),Jt(this,"initialBackoff"),Jt(this,"maxBackoff"),Jt(this,"retries"),Jt(this,"serverInactivityThreshold"),Jt(this,"reconnectDueToServerInactivityTimeout"),Jt(this,"uri"),Jt(this,"onOpen"),Jt(this,"onResume"),Jt(this,"onMessage"),Jt(this,"webSocketConstructor"),Jt(this,"logger"),this.webSocketConstructor=s,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.initialBackoff=100,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=3e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=e,this.onOpen=t.onOpen,this.onResume=t.onResume,this.onMessage=t.onMessage,this.logger=o,this.connect()}setSocketState(e){this.socket=e,this._logVerbose(`socket state changed: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}`)}connect(){if(this.socket.state==="terminated")return;if(this.socket.state!=="disconnected"&&this.socket.state!=="stopped")throw new Error("Didn't start connection from disconnected state: "+this.socket.state);const e=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.setSocketState({state:"connecting",ws:e,paused:"no"}),this.resetServerInactivityTimeout(),e.onopen=()=>{if(this.logger.logVerbose("begin ws.onopen"),this.socket.state!=="connecting")throw new Error("onopen called with socket not in connecting state");this.setSocketState({state:"ready",ws:e,paused:this.socket.paused==="yes"?"uninitialized":"no"}),this.resetServerInactivityTimeout(),this.socket.paused==="no"&&(this._hasEverConnected=!0,this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason})),this.lastCloseReason!=="InitialConnect"&&this.logger.log("WebSocket reconnected"),this.connectionCount+=1,this.lastCloseReason=null},e.onerror=t=>{const s=t.message;this.logger.log(`WebSocket error: ${s}`)},e.onmessage=t=>{this.resetServerInactivityTimeout();const s=gk(JSON.parse(t.data));this._logVerbose(`received ws message with type ${s.type}`),this.onMessage(s).hasSyncedPastLastReconnect&&(this.retries=0)},e.onclose=t=>{if(this._logVerbose("begin ws.onclose"),this.lastCloseReason===null&&(this.lastCloseReason=t.reason??"OnCloseInvoked"),t.code!==xk&&t.code!==Sk&&t.code!==wk&&t.code!==kk){let s=`WebSocket closed with code ${t.code}`;t.reason&&(s+=`: ${t.reason}`),this.logger.log(s)}this.scheduleReconnect()}}socketState(){return this.socket.state}sendMessage(e){const t={type:e.type,...e.type==="Authenticate"&&e.tokenType==="User"?{value:`...${e.value.slice(-7)}`}:{}};if(this.socket.state==="ready"&&this.socket.paused==="no"){const s=yk(e),o=JSON.stringify(s);try{this.socket.ws.send(o)}catch(a){this.logger.log(`Failed to send message on WebSocket, reconnecting: ${a}`),this.closeAndReconnect("FailedToSendMessage")}return this._logVerbose(`sent message with type ${e.type}: ${JSON.stringify(t)}`),!0}return this._logVerbose(`message not sent (socket state: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}): ${JSON.stringify(t)}`),!1}resetServerInactivityTimeout(){this.socket.state!=="terminated"&&(this.reconnectDueToServerInactivityTimeout!==null&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(){this.socket={state:"disconnected"};const e=this.nextBackoff();this.logger.log(`Attempting reconnect in ${e}ms`),setTimeout(()=>this.connect(),e)}closeAndReconnect(e){switch(this._logVerbose(`begin closeAndReconnect with reason ${e}`),this.socket.state){case"disconnected":case"terminated":case"stopped":return;case"connecting":case"ready":{this.lastCloseReason=e,this.close(),this.scheduleReconnect();return}default:this.socket}}close(){switch(this.socket.state){case"disconnected":case"terminated":case"stopped":return Promise.resolve();case"connecting":{const e=this.socket.ws;return new Promise(t=>{e.onclose=()=>{this._logVerbose("Closed after connecting"),t()},e.onopen=()=>{this._logVerbose("Opened after connecting"),e.close()}})}case"ready":{this._logVerbose("ws.close called");const e=this.socket.ws,t=new Promise(s=>{e.onclose=()=>{s()}});return e.close(),t}default:return this.socket,Promise.resolve()}}terminate(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"terminated":case"stopped":case"disconnected":case"connecting":case"ready":{const e=this.close();return this.setSocketState({state:"terminated"}),e}default:throw this.socket,new Error(`Invalid websocket state: ${this.socket.state}`)}}stop(){switch(this.socket.state){case"terminated":return Promise.resolve();case"connecting":case"stopped":case"disconnected":case"ready":{const e=this.close();return this.socket={state:"stopped"},e}default:return this.socket,Promise.resolve()}}tryRestart(){switch(this.socket.state){case"stopped":break;case"terminated":case"connecting":case"ready":case"disconnected":this.logger.logVerbose("Restart called without stopping first");return;default:this.socket}this.connect()}pause(){switch(this.socket.state){case"disconnected":case"stopped":case"terminated":return;case"connecting":case"ready":{this.socket={...this.socket,paused:"yes"};return}default:{this.socket;return}}}resume(){switch(this.socket.state){case"connecting":this.socket={...this.socket,paused:"no"};return;case"ready":this.socket.paused==="uninitialized"?(this.socket={...this.socket,paused:"no"},this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason})):this.socket.paused==="yes"&&(this.socket={...this.socket,paused:"no"},this.onResume());return;case"terminated":case"stopped":case"disconnected":return;default:this.socket}this.connect()}connectionState(){return{isConnected:this.socket.state==="ready",hasEverConnected:this._hasEverConnected,connectionCount:this.connectionCount,connectionRetries:this.retries}}_logVerbose(e){this.logger.logVerbose(e)}nextBackoff(){const e=this.initialBackoff*Math.pow(2,this.retries);this.retries+=1;const t=Math.min(e,this.maxBackoff),s=t*(Math.random()-.5);return t+s}}function Tk(){return Ck()}function Ck(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}function rh(n){this.message=n}rh.prototype=new Error,rh.prototype.name="InvalidCharacterError";var hb=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(n){var e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new rh("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,s,o=0,a=0,c="";s=e.charAt(a++);~s&&(t=o%4?64*t+s:s,o++%4)?c+=String.fromCharCode(255&t>>(-2*o&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return c};function Mk(n){var e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(hb(t).replace(/(.)/g,function(s,o){var a=o.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}(e)}catch{return hb(e)}}function Oc(n){this.message=n}function Nk(n,e){if(typeof n!="string")throw new Oc("Invalid token specified");var t=(e=e||{}).header===!0?0:1;try{return JSON.parse(Mk(n.split(".")[t]))}catch(s){throw new Oc("Invalid token specified: "+s.message)}}Oc.prototype=new Error,Oc.prototype.name="InvalidTokenError";var Ak=Object.defineProperty,Ok=(n,e,t)=>e in n?Ak(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Dn=(n,e,t)=>Ok(n,typeof e!="symbol"?e+"":e,t);const Rk=20*24*60*60*1e3,pb=2;class Dk{constructor(e,t,s){Dn(this,"authState",{state:"noAuth"}),Dn(this,"configVersion",0),Dn(this,"syncState"),Dn(this,"authenticate"),Dn(this,"stopSocket"),Dn(this,"tryRestartSocket"),Dn(this,"pauseSocket"),Dn(this,"resumeSocket"),Dn(this,"clearAuth"),Dn(this,"logger"),Dn(this,"refreshTokenLeewaySeconds"),Dn(this,"tokenConfirmationAttempts",0),this.syncState=e,this.authenticate=t.authenticate,this.stopSocket=t.stopSocket,this.tryRestartSocket=t.tryRestartSocket,this.pauseSocket=t.pauseSocket,this.resumeSocket=t.resumeSocket,this.clearAuth=t.clearAuth,this.logger=s.logger,this.refreshTokenLeewaySeconds=s.refreshTokenLeewaySeconds}async setConfig(e,t){this.resetAuthState(),this._logVerbose("pausing WS for auth token fetch"),this.pauseSocket();const s=await this.fetchTokenAndGuardAgainstRace(e,{forceRefreshToken:!1});s.isFromOutdatedConfig||(s.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:e,onAuthChange:t},hasRetried:!1}),this.authenticate(s.value)):(this.setAuthState({state:"initialRefetch",config:{fetchToken:e,onAuthChange:t}}),await this.refetchToken()),this._logVerbose("resuming WS after auth token fetch"),this.resumeSocket())}onTransition(e){if(this.syncState.isCurrentOrNewerAuthVersion(e.endVersion.identity)&&!(e.endVersion.identity<=e.startVersion.identity)){if(this.authState.state==="waitingForServerConfirmationOfCachedToken"){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.tokenConfirmationAttempts=0,this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(e){if(e.authUpdateAttempted===!1&&(this.authState.state==="waitingForServerConfirmationOfFreshToken"||this.authState.state==="waitingForServerConfirmationOfCachedToken")){this._logVerbose("ignoring non-auth token expired error");return}const{baseVersion:t}=e;if(!this.syncState.isCurrentOrNewerAuthVersion(t+1)){this._logVerbose("ignoring auth error for previous auth attempt");return}this.tryToReauthenticate(e)}async tryToReauthenticate(e){if(this._logVerbose(`attempting to reauthenticate: ${e.error}`),this.authState.state==="noAuth"||this.authState.state==="waitingForServerConfirmationOfFreshToken"&&this.tokenConfirmationAttempts>=pb){this.logger.error(`Failed to authenticate: "${e.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.authState.state!=="noAuth"&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this.tokenConfirmationAttempts++,this._logVerbose(`retrying reauthentication, ${pb-this.tokenConfirmationAttempts} attempts remaining`)),await this.stopSocket();const t=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});t.isFromOutdatedConfig||(t.value&&this.syncState.isNewAuth(t.value)?(this.authenticate(t.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:t.value,hadAuth:this.authState.state==="notRefetching"||this.authState.state==="waitingForScheduledRefetch"})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this.tryRestartSocket())}async refetchToken(){if(this.authState.state==="noAuth")return;this._logVerbose("refetching auth token");const e=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});e.isFromOutdatedConfig||(e.value?this.syncState.isNewAuth(e.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:e.value,config:this.authState.config}),this.authenticate(e.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this._logVerbose("restarting WS after auth token fetch (if currently stopped)"),this.tryRestartSocket())}scheduleTokenRefetch(e){if(this.authState.state==="noAuth")return;const t=this.decodeToken(e);if(!t){this.logger.error("Auth token is not a valid JWT, cannot refetch the token");return}const{iat:s,exp:o}=t;if(!s||!o){this.logger.error("Auth token does not have required fields, cannot refetch the token");return}const a=o-s;if(a<=2){this.logger.error("Auth token does not live long enough, cannot refetch the token");return}let c=Math.min(Rk,(a-this.refreshTokenLeewaySeconds)*1e3);c<=0&&(this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${a}s`),c=0);const d=setTimeout(()=>{this._logVerbose("running scheduled token refetch"),this.refetchToken()},c);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:d,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${c}ms`)}async fetchTokenAndGuardAgainstRace(e,t){const s=++this.configVersion;this._logVerbose(`fetching token with config version ${s}`);const o=await e(t);return this.configVersion!==s?(this._logVerbose(`stale config version, expected ${s}, got ${this.configVersion}`),{isFromOutdatedConfig:!0}):{isFromOutdatedConfig:!1,value:o}}stop(){this.resetAuthState(),this.configVersion++,this._logVerbose(`config version bumped to ${this.configVersion}`)}setAndReportAuthFailed(e){e(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(e){const t=e.state==="waitingForServerConfirmationOfFreshToken"?{hadAuth:e.hadAuth,state:e.state,token:`...${e.token.slice(-7)}`}:{state:e.state};switch(this._logVerbose(`setting auth state to ${JSON.stringify(t)}`),e.state){case"waitingForScheduledRefetch":case"notRefetching":case"noAuth":this.tokenConfirmationAttempts=0;break}this.authState.state==="waitingForScheduledRefetch"&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=e}decodeToken(e){try{return Nk(e)}catch(t){return this._logVerbose(`Error decoding token: ${t instanceof Error?t.message:"Unknown error"}`),null}}_logVerbose(e){this.logger.logVerbose(`${e} [v${this.configVersion}]`)}}const jk=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function zk(n,e){const t={sessionId:e};typeof performance>"u"||!performance.mark||performance.mark(n,{detail:t})}function _k(n){let e=n.name.slice(6);return e=e.charAt(0).toLowerCase()+e.slice(1),{name:e,startTime:n.startTime}}function Bk(n){if(typeof performance>"u"||!performance.getEntriesByName)return[];const e=[];for(const t of jk){const s=performance.getEntriesByName(t).filter(o=>o.entryType==="mark").filter(o=>o.detail.sessionId===n);e.push(...s)}return e.map(_k)}var Lk=Object.defineProperty,qk=(n,e,t)=>e in n?Lk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ht=(n,e,t)=>qk(n,typeof e!="symbol"?e+"":e,t);class Uk{constructor(e,t,s){if(Ht(this,"address"),Ht(this,"state"),Ht(this,"requestManager"),Ht(this,"webSocketManager"),Ht(this,"authenticationManager"),Ht(this,"remoteQuerySet"),Ht(this,"optimisticQueryResults"),Ht(this,"_transitionHandlerCounter",0),Ht(this,"_nextRequestId"),Ht(this,"_onTransitionFns",new Map),Ht(this,"_sessionId"),Ht(this,"firstMessageReceived",!1),Ht(this,"debug"),Ht(this,"logger"),Ht(this,"maxObservedTimestamp"),Ht(this,"mark",b=>{this.debug&&zk(b,this.sessionId)}),typeof e=="object")throw new Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");s?.skipConvexDeploymentUrlCheck!==!0&&H0(e),s={...s};const o=s.authRefreshTokenLeewaySeconds??2;let a=s.webSocketConstructor;if(!a&&typeof WebSocket>"u")throw new Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");a=a||WebSocket,this.debug=s.reportDebugInfoToConvex??!1,this.address=e,this.logger=s.logger??jh({verbose:s.verbose??!1});const c=e.search("://");if(c===-1)throw new Error("Provided address was not an absolute URL.");const d=e.substring(c+3),f=e.substring(0,c);let p;if(f==="http")p="ws";else if(f==="https")p="wss";else throw new Error(`Unknown parent protocol ${f}`);const g=`${p}://${d}/api/${Ys}/sync`;this.state=new Jw,this.remoteQuerySet=new fb(b=>this.state.queryPath(b),this.logger),this.requestManager=new ek(this.logger),this.authenticationManager=new Dk(this.state,{authenticate:b=>{const x=this.state.setAuth(b);return this.webSocketManager.sendMessage(x),x.baseVersion},stopSocket:()=>this.webSocketManager.stop(),tryRestartSocket:()=>this.webSocketManager.tryRestart(),pauseSocket:()=>{this.webSocketManager.pause(),this.state.pause()},resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()}},{logger:this.logger,refreshTokenLeewaySeconds:o}),this.optimisticQueryResults=new lk,this.addOnTransitionHandler(b=>{t(b.queries.map(x=>x.token))}),this._nextRequestId=0,this._sessionId=Tk();const{unsavedChangesWarning:y}=s;if(typeof window>"u"||typeof window.addEventListener>"u"){if(y===!0)throw new Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.")}else y!==!1&&window.addEventListener("beforeunload",b=>{if(this.requestManager.hasIncompleteRequests()){b.preventDefault();const x="Are you sure you want to leave? Your changes may not be saved.";return(b||window.event).returnValue=x,x}});this.webSocketManager=new Ek(g,{onOpen:b=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...b,type:"Connect",sessionId:this._sessionId,maxObservedTimestamp:this.maxObservedTimestamp});const x=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new fb(T=>this.state.queryPath(T),this.logger);const[S,E]=this.state.restart(x);E&&this.webSocketManager.sendMessage(E),this.webSocketManager.sendMessage(S);for(const T of this.requestManager.restart())this.webSocketManager.sendMessage(T)},onResume:()=>{const[b,x]=this.state.resume();x&&this.webSocketManager.sendMessage(x),b&&this.webSocketManager.sendMessage(b);for(const S of this.requestManager.resume())this.webSocketManager.sendMessage(S)},onMessage:b=>{switch(this.firstMessageReceived||(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),b.type){case"Transition":{this.observedTimestamp(b.endVersion.ts),this.authenticationManager.onTransition(b),this.remoteQuerySet.transition(b),this.state.transition(b);const x=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(x);break}case"MutationResponse":{b.success&&this.observedTimestamp(b.ts);const x=this.requestManager.onResponse(b);x!==null&&this.notifyOnQueryResultChanges(new Map([[x.requestId,x.result]]));break}case"ActionResponse":{this.requestManager.onResponse(b);break}case"AuthError":{this.authenticationManager.onAuthError(b);break}case"FatalError":{const x=Yw(this.logger,b.error);throw this.webSocketManager.terminate(),x}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}}},a,this.logger),this.mark("convexClientConstructed")}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(e){(this.maxObservedTimestamp===void 0||this.maxObservedTimestamp.lessThanOrEqual(e))&&(this.maxObservedTimestamp=e)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(e){const t=this.remoteQuerySet.remoteQueryResults(),s=new Map;for(const[a,c]of t){const d=this.state.queryToken(a);if(d!==null){const f={result:c,udfPath:this.state.queryPath(a),args:this.state.queryArgs(a)};s.set(d,f)}}const o=this.optimisticQueryResults.ingestQueryResultsFromServer(s,new Set(e.keys()));this.handleTransition({queries:o.map(a=>({token:a,modification:{kind:"Updated",result:s.get(a).result}})),reflectedMutations:Array.from(e).map(([a,c])=>({requestId:a,result:c})),timestamp:this.remoteQuerySet.timestamp()})}handleTransition(e){for(const t of this._onTransitionFns.values())t(e)}addOnTransitionHandler(e){const t=this._transitionHandlerCounter++;return this._onTransitionFns.set(t,e),()=>this._onTransitionFns.delete(t)}setAuth(e,t){this.authenticationManager.setConfig(e,t)}hasAuth(){return this.state.hasAuth()}setAdminAuth(e,t){const s=this.state.setAdminAuth(e,t);this.webSocketManager.sendMessage(s)}clearAuth(){const e=this.state.clearAuth();this.webSocketManager.sendMessage(e)}subscribe(e,t,s){const o=cn(t),{modification:a,queryToken:c,unsubscribe:d}=this.state.subscribe(e,o,s?.journal,s?.componentPath);return a!==null&&this.webSocketManager.sendMessage(a),{queryToken:c,unsubscribe:()=>{const f=d();f&&this.webSocketManager.sendMessage(f)}}}localQueryResult(e,t){const s=cn(t),o=ei(e,s);return this.optimisticQueryResults.queryResult(o)}localQueryResultByToken(e){return this.optimisticQueryResults.queryResult(e)}hasLocalQueryResultByToken(e){return this.optimisticQueryResults.hasQueryResult(e)}localQueryLogs(e,t){const s=cn(t),o=ei(e,s);return this.optimisticQueryResults.queryLogs(o)}queryJournal(e,t){const s=cn(t),o=ei(e,s);return this.state.queryJournal(o)}connectionState(){const e=this.webSocketManager.connectionState();return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:e.isConnected,hasEverConnected:e.hasEverConnected,connectionCount:e.connectionCount,connectionRetries:e.connectionRetries,timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest()}}async mutation(e,t,s){const o=await this.mutationInternal(e,t,s);if(!o.success)throw o.errorData!==void 0?nh(o,new ds(io("mutation",e,o))):new Error(io("mutation",e,o));return o.value}async mutationInternal(e,t,s,o){const{mutationPromise:a}=this.enqueueMutation(e,t,s,o);return a}enqueueMutation(e,t,s,o){const a=cn(t);this.tryReportLongDisconnect();const c=this.nextRequestId;if(this._nextRequestId++,s!==void 0){const g=s.optimisticUpdate;if(g!==void 0){const y=S=>{g(S,a)},x=this.optimisticQueryResults.applyOptimisticUpdate(y,c).map(S=>{const E=this.localQueryResultByToken(S);return{token:S,modification:{kind:"Updated",result:E===void 0?void 0:{success:!0,value:E,logLines:[]}}}});this.handleTransition({queries:x,reflectedMutations:[],timestamp:this.remoteQuerySet.timestamp()})}}const d={type:"Mutation",requestId:c,udfPath:e,componentPath:o,args:[Zt(a)]},f=this.webSocketManager.sendMessage(d),p=this.requestManager.request(d,f);return{requestId:c,mutationPromise:p}}async action(e,t){const s=await this.actionInternal(e,t);if(!s.success)throw s.errorData!==void 0?nh(s,new ds(io("action",e,s))):new Error(io("action",e,s));return s.value}async actionInternal(e,t,s){const o=cn(t),a=this.nextRequestId;this._nextRequestId++,this.tryReportLongDisconnect();const c={type:"Action",requestId:a,udfPath:e,componentPath:s,args:[Zt(o)]},d=this.webSocketManager.sendMessage(c);return this.requestManager.request(c,d)}async close(){return this.authenticationManager.stop(),this.webSocketManager.terminate()}get url(){return this.address}get nextRequestId(){return this._nextRequestId}get sessionId(){return this._sessionId}reportMarks(){if(this.debug){const e=Bk(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:e})}}tryReportLongDisconnect(){if(!this.debug)return;const e=this.connectionState().timeOfOldestInflightRequest;if(e===null||Date.now()-e.getTime()<=60*1e3)return;const t=`${this.address}/api/debug_event`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${Ys}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(s=>{s.ok||this.logger.warn("Analytics request failed with response:",s.body)}).catch(s=>{this.logger.warn("Analytics response failed with error:",s)})}}var Vk=Object.defineProperty,Ik=(n,e,t)=>e in n?Vk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Qs=(n,e,t)=>Ik(n,typeof e!="symbol"?e+"":e,t);const cc=560;class Hk{constructor(e,t){if(Qs(this,"address"),Qs(this,"auth"),Qs(this,"adminAuth"),Qs(this,"encodedTsPromise"),Qs(this,"debug"),Qs(this,"fetchOptions"),Qs(this,"logger"),typeof t=="boolean")throw new Error("skipConvexDeploymentUrlCheck as the second argument is no longer supported. Please pass an options object, `{ skipConvexDeploymentUrlCheck: true }`.");const s=t??{};s.skipConvexDeploymentUrlCheck!==!0&&H0(e),this.logger=s.logger??jh({verbose:!1}),this.address=e,this.debug=!0}backendUrl(){return`${this.address}/api`}get url(){return this.address}setAuth(e){this.clearAuth(),this.auth=e}setAdminAuth(e,t){if(this.clearAuth(),t!==void 0){const s=new TextEncoder().encode(JSON.stringify(t)),o=btoa(String.fromCodePoint(...s));this.adminAuth=`${e}:${o}`}else this.adminAuth=e}clearAuth(){this.auth=void 0,this.adminAuth=void 0}setDebug(e){this.debug=e}setFetchOptions(e){this.fetchOptions=e}async consistentQuery(e,...t){const s=cn(t[0]),o=this.getTimestamp();return await this.queryInner(e,s,{timestampPromise:o})}async getTimestamp(){return this.encodedTsPromise?this.encodedTsPromise:this.encodedTsPromise=this.getTimestampInner()}async getTimestampInner(){const e=fetch,t={"Content-Type":"application/json","Convex-Client":`npm-${Ys}`},s=await e(`${this.address}/api/query_ts`,{...this.fetchOptions,method:"POST",headers:t});if(!s.ok)throw new Error(await s.text());const{ts:o}=await s.json();return o}async query(e,...t){const s=cn(t[0]);return await this.queryInner(e,s,{})}async queryInner(e,t,s){const o=mt(e),a=[Zt(t)],c={"Content-Type":"application/json","Convex-Client":`npm-${Ys}`};this.adminAuth?c.Authorization=`Convex ${this.adminAuth}`:this.auth&&(c.Authorization=`Bearer ${this.auth}`);const d=fetch,f=s.timestampPromise?await s.timestampPromise:void 0,p=JSON.stringify({path:o,format:"convex_encoded_json",args:a,...f?{ts:f}:{}}),g=f?`${this.address}/api/query_at_ts`:`${this.address}/api/query`,y=await d(g,{...this.fetchOptions,body:p,method:"POST",headers:c});if(!y.ok&&y.status!==cc)throw new Error(await y.text());const b=await y.json();if(this.debug)for(const x of b.logLines??[])fs(this.logger,"info","query",o,x);switch(b.status){case"success":return Gn(b.value);case"error":throw b.errorData!==void 0?uc(b.errorData,new ds(b.errorMessage)):new Error(b.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(b)}`)}}async mutation(e,...t){const s=cn(t[0]),o=mt(e),a=JSON.stringify({path:o,format:"convex_encoded_json",args:[Zt(s)]}),c={"Content-Type":"application/json","Convex-Client":`npm-${Ys}`};this.adminAuth?c.Authorization=`Convex ${this.adminAuth}`:this.auth&&(c.Authorization=`Bearer ${this.auth}`);const f=await fetch(`${this.address}/api/mutation`,{...this.fetchOptions,body:a,method:"POST",headers:c});if(!f.ok&&f.status!==cc)throw new Error(await f.text());const p=await f.json();if(this.debug)for(const g of p.logLines??[])fs(this.logger,"info","mutation",o,g);switch(p.status){case"success":return Gn(p.value);case"error":throw p.errorData!==void 0?uc(p.errorData,new ds(p.errorMessage)):new Error(p.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(p)}`)}}async action(e,...t){const s=cn(t[0]),o=mt(e),a=JSON.stringify({path:o,format:"convex_encoded_json",args:[Zt(s)]}),c={"Content-Type":"application/json","Convex-Client":`npm-${Ys}`};this.adminAuth?c.Authorization=`Convex ${this.adminAuth}`:this.auth&&(c.Authorization=`Bearer ${this.auth}`);const f=await fetch(`${this.address}/api/action`,{...this.fetchOptions,body:a,method:"POST",headers:c});if(!f.ok&&f.status!==cc)throw new Error(await f.text());const p=await f.json();if(this.debug)for(const g of p.logLines??[])fs(this.logger,"info","action",o,g);switch(p.status){case"success":return Gn(p.value);case"error":throw p.errorData!==void 0?uc(p.errorData,new ds(p.errorMessage)):new Error(p.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(p)}`)}}async function(e,t,...s){const o=cn(s[0]),a=typeof e=="string"?e:mt(e),c=JSON.stringify({componentPath:t,path:a,format:"convex_encoded_json",args:Zt(o)}),d={"Content-Type":"application/json","Convex-Client":`npm-${Ys}`};this.adminAuth?d.Authorization=`Convex ${this.adminAuth}`:this.auth&&(d.Authorization=`Bearer ${this.auth}`);const p=await fetch(`${this.address}/api/function`,{...this.fetchOptions,body:c,method:"POST",headers:d});if(!p.ok&&p.status!==cc)throw new Error(await p.text());const g=await p.json();if(this.debug)for(const y of g.logLines??[])fs(this.logger,"info","any",a,y);switch(g.status){case"success":return Gn(g.value);case"error":throw g.errorData!==void 0?uc(g.errorData,new ds(g.errorMessage)):new Error(g.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(g)}`)}}}function uc(n,e){return e.data=Gn(n),e}var Pk=I0();const Fc=V0(Pk);var $k=Object.defineProperty,Fk=(n,e,t)=>e in n?$k(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,rs=(n,e,t)=>Fk(n,typeof e!="symbol"?e+"":e,t);if(typeof J>"u")throw new Error("Required dependency 'react' not found");if(typeof Fc>"u")throw new Error("Required dependency 'react-dom' not found");function X0(n,e,t){function s(o){return Yk(o),e.mutation(n,o,{optimisticUpdate:t})}return s.withOptimisticUpdate=function(a){if(t!==void 0)throw new Error(`Already specified optimistic update for mutation ${mt(n)}`);return X0(n,e,a)},s}class Qk{constructor(e,t){if(rs(this,"address"),rs(this,"cachedSync"),rs(this,"listeners"),rs(this,"options"),rs(this,"closed",!1),rs(this,"_logger"),rs(this,"adminAuth"),rs(this,"fakeUserIdentity"),e===void 0)throw new Error("No address provided to ConvexReactClient.\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.");if(typeof e!="string")throw new Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof e} instead.`);if(!e.includes("://"))throw new Error("Provided address was not an absolute URL.");this.address=e,this.listeners=new Map,this._logger=t?.logger??jh({verbose:t?.verbose??!1}),this.options={...t,logger:this._logger}}get sync(){if(this.closed)throw new Error("ConvexReactClient has already been closed.");return this.cachedSync?this.cachedSync:(this.cachedSync=new Uk(this.address,e=>this.transition(e),this.options),this.adminAuth&&this.cachedSync.setAdminAuth(this.adminAuth,this.fakeUserIdentity),this.cachedSync)}setAuth(e,t){if(typeof e=="string")throw new Error("Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.");this.sync.setAuth(e,t??(()=>{}))}clearAuth(){this.sync.clearAuth()}setAdminAuth(e,t){if(this.adminAuth=e,this.fakeUserIdentity=t,this.closed)throw new Error("ConvexReactClient has already been closed.");this.cachedSync&&this.sync.setAdminAuth(e,t)}watchQuery(e,...t){const[s,o]=t,a=mt(e);return{onUpdate:c=>{const{queryToken:d,unsubscribe:f}=this.sync.subscribe(a,s,o),p=this.listeners.get(d);return p!==void 0?p.add(c):this.listeners.set(d,new Set([c])),()=>{if(this.closed)return;const g=this.listeners.get(d);g.delete(c),g.size===0&&this.listeners.delete(d),f()}},localQueryResult:()=>{if(this.cachedSync)return this.cachedSync.localQueryResult(a,s)},localQueryLogs:()=>{if(this.cachedSync)return this.cachedSync.localQueryLogs(a,s)},journal:()=>{if(this.cachedSync)return this.cachedSync.queryJournal(a,s)}}}mutation(e,...t){const[s,o]=t,a=mt(e);return this.sync.mutation(a,s,o)}action(e,...t){const s=mt(e);return this.sync.action(s,...t)}query(e,...t){const s=this.watchQuery(e,...t),o=s.localQueryResult();return o!==void 0?Promise.resolve(o):new Promise((a,c)=>{const d=s.onUpdate(()=>{d();try{a(s.localQueryResult())}catch(f){c(f)}})})}connectionState(){return this.sync.connectionState()}get logger(){return this._logger}async close(){if(this.closed=!0,this.listeners=new Map,this.cachedSync){const e=this.cachedSync;this.cachedSync=void 0,await e.close()}}transition(e){Fc.unstable_batchedUpdates(()=>{for(const t of e){const s=this.listeners.get(t);if(s)for(const o of s)o()}})}}const zh=J.createContext(void 0);function J0(){return A.useContext(zh)}const Gk=({client:n,children:e})=>J.createElement(zh.Provider,{value:n},e);function Ln(n,...e){const t=e[0]==="skip",s=e[0]==="skip"?{}:cn(e[0]),o=typeof n=="string"?Y0(n):n,a=mt(o),c=A.useMemo(()=>t?{}:{query:{query:o,args:s}},[JSON.stringify(Zt(s)),a,t]),f=Z0(c).query;if(f instanceof Error)throw f;return f}function st(n){const e=typeof n=="string"?Y0(n):n,t=A.useContext(zh);if(t===void 0)throw new Error("Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return A.useMemo(()=>X0(e,t),[t,mt(e)])}function Yk(n){if(typeof n=="object"&&n!==null&&"bubbles"in n&&"persist"in n&&"isDefaultPrevented"in n)throw new Error("Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like `const handler = () => myMutation();` and using `handler` in the event handler.")}var Kk=Object.defineProperty,Xk=(n,e,t)=>e in n?Kk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Mf=(n,e,t)=>Xk(n,typeof e!="symbol"?e+"":e,t);class Jk{constructor(e){Mf(this,"createWatch"),Mf(this,"queries"),Mf(this,"listeners"),this.createWatch=e,this.queries={},this.listeners=new Set}setQueries(e){for(const t of Object.keys(e)){const{query:s,args:o}=e[t];if(mt(s),this.queries[t]===void 0)this.addQuery(t,s,o);else{const a=this.queries[t];(mt(s)!==mt(a.query)||JSON.stringify(Zt(o))!==JSON.stringify(Zt(a.args)))&&(this.removeQuery(t),this.addQuery(t,s,o))}}for(const t of Object.keys(this.queries))e[t]===void 0&&this.removeQuery(t)}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}getLocalResults(e){const t={};for(const s of Object.keys(e)){const{query:o,args:a}=e[s];mt(o);const c=this.createWatch(o,a);let d;try{d=c.localQueryResult()}catch(f){if(f instanceof Error)d=f;else throw f}t[s]=d}return t}setCreateWatch(e){this.createWatch=e;for(const t of Object.keys(this.queries)){const{query:s,args:o,watch:a}=this.queries[t],c=a.journal();this.removeQuery(t),this.addQuery(t,s,o,c)}}destroy(){for(const e of Object.keys(this.queries))this.removeQuery(e);this.listeners=new Set}addQuery(e,t,s,o){if(this.queries[e]!==void 0)throw new Error(`Tried to add a new query with identifier ${e} when it already exists.`);const a=this.createWatch(t,s,o),c=a.onUpdate(()=>this.notifyListeners());this.queries[e]={query:t,args:s,watch:a,unsubscribe:c}}removeQuery(e){const t=this.queries[e];if(t===void 0)throw new Error(`No query found with identifier ${e}.`);t.unsubscribe(),delete this.queries[e]}notifyListeners(){for(const e of this.listeners)e()}}function Zk({getCurrentValue:n,subscribe:e}){const[t,s]=A.useState(()=>({getCurrentValue:n,subscribe:e,value:n()}));let o=t.value;return(t.getCurrentValue!==n||t.subscribe!==e)&&(o=n(),s({getCurrentValue:n,subscribe:e,value:o})),A.useEffect(()=>{let a=!1;const c=()=>{a||s(f=>{if(f.getCurrentValue!==n||f.subscribe!==e)return f;const p=n();return f.value===p?f:{...f,value:p}})},d=e(c);return c(),()=>{a=!0,d()}},[n,e]),o}function Z0(n){const e=J0();if(e===void 0)throw new Error("Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");const t=A.useMemo(()=>(s,o,a)=>e.watchQuery(s,o,{journal:a}),[e]);return Wk(n,t)}function Wk(n,e){const[t]=A.useState(()=>new Jk(e));t.createWatch!==e&&t.setCreateWatch(e),A.useEffect(()=>()=>t.destroy(),[t]);const s=A.useMemo(()=>({getCurrentValue:()=>t.getLocalResults(n),subscribe:o=>(t.setQueries(n),t.subscribe(o))}),[t,n]);return Zk(s)}const eE=(n,e,t)=>s=>{const o={...s.queries},a=s.nextPageKey,c=s.nextPageKey+1,d=s.nextPageKey+2;o[a]={query:s.query,args:{...s.args,paginationOpts:{...s.queries[n].args.paginationOpts,endCursor:e}}},o[c]={query:s.query,args:{...s.args,paginationOpts:{...s.queries[n].args.paginationOpts,cursor:e,endCursor:t}}};const f={...s.ongoingSplits};return f[n]=[a,c],{...s,nextPageKey:d,queries:o,ongoingSplits:f}},tE=n=>e=>{const t=e.ongoingSplits[n];if(t===void 0)return e;const s={...e.queries};delete s[n];const o={...e.ongoingSplits};delete o[n];let a=e.pageKeys.slice();const c=e.pageKeys.findIndex(d=>d===n);return c>=0&&(a=[...e.pageKeys.slice(0,c),...t,...e.pageKeys.slice(c+1)]),{...e,queries:s,pageKeys:a,ongoingSplits:o}};function W0(n,e,t){if(typeof t?.initialNumItems!="number"||t.initialNumItems<0)throw new Error(`\`options.initialNumItems\` must be a positive number. Received \`${t?.initialNumItems}\`.`);const s=e==="skip",o=s?{}:e,a=mt(n),c=A.useMemo(()=>()=>{const T=nE();return{query:n,args:o,id:T,nextPageKey:1,pageKeys:s?[]:[0],queries:s?{}:{0:{query:n,args:{...o,paginationOpts:{numItems:t.initialNumItems,cursor:null,id:T}}}},ongoingSplits:{},skip:s}},[JSON.stringify(Zt(o)),a,t.initialNumItems,s]),[d,f]=A.useState(c);let p=d;(mt(n)!==mt(d.query)||JSON.stringify(Zt(o))!==JSON.stringify(Zt(d.args))||s!==d.skip)&&(p=c(),f(p));const y=J0().logger,b=Z0(p.queries),[x,S]=A.useMemo(()=>{let T;const _=[];for(const F of p.pageKeys){if(T=b[F],T===void 0)break;if(T instanceof Error){if(T.message.includes("InvalidCursor")||T instanceof ds&&typeof T.data=="object"&&T.data?.isConvexSystemError===!0&&T.data?.paginationError==="InvalidCursor")return y.warn("usePaginatedQuery hit error, resetting pagination state: "+T.message),f(c),[[],void 0];throw T}const Y=p.ongoingSplits[F];if(Y!==void 0?b[Y[0]]!==void 0&&b[Y[1]]!==void 0&&f(tE(F)):T.splitCursor&&(T.pageStatus==="SplitRecommended"||T.pageStatus==="SplitRequired"||T.page.length>t.initialNumItems*2)&&f(eE(F,T.splitCursor,T.continueCursor)),T.pageStatus==="SplitRequired")return[_,void 0];_.push(...T.page)}return[_,T]},[b,p.pageKeys,p.ongoingSplits,t.initialNumItems,c,y]),E=A.useMemo(()=>{if(S===void 0)return p.nextPageKey===1?{status:"LoadingFirstPage",isLoading:!0,loadMore:F=>{}}:{status:"LoadingMore",isLoading:!0,loadMore:F=>{}};if(S.isDone)return{status:"Exhausted",isLoading:!1,loadMore:F=>{}};const T=S.continueCursor;let _=!1;return{status:"CanLoadMore",isLoading:!1,loadMore:F=>{_||(_=!0,f(Y=>{const H=[...Y.pageKeys,Y.nextPageKey],U={...Y.queries};return U[Y.nextPageKey]={query:Y.query,args:{...Y.args,paginationOpts:{numItems:F,cursor:T,id:Y.id}}},{...Y,nextPageKey:Y.nextPageKey+1,pageKeys:H,queries:U}}))}}},[S,p.nextPageKey]);return{results:x,...E}}let mb=0;function nE(){return mb++,mb}const ev=A.createContext(void 0);function bo(){const n=A.useContext(ev);if(n===void 0)throw new Error("Could not find `ConvexProviderWithAuth` (or `ConvexProviderWithClerk` or `ConvexProviderWithAuth0`) as an ancestor component. This component may be missing, or you might have two instances of the `convex/react` module loaded in your project.");return n}function rE({children:n,client:e,useAuth:t}){const{isLoading:s,isAuthenticated:o,fetchAccessToken:a}=t(),[c,d]=A.useState(null);return s&&c!==null&&d(null),!s&&!o&&c!==!1&&d(!1),J.createElement(ev.Provider,{value:{isLoading:c===null,isAuthenticated:o&&(c??!1)}},J.createElement(sE,{authProviderAuthenticated:o,fetchAccessToken:a,authProviderLoading:s,client:e,setIsConvexAuthenticated:d}),J.createElement(Gk,{client:e},n),J.createElement(iE,{authProviderAuthenticated:o,fetchAccessToken:a,authProviderLoading:s,client:e,setIsConvexAuthenticated:d}))}function sE({authProviderAuthenticated:n,fetchAccessToken:e,authProviderLoading:t,client:s,setIsConvexAuthenticated:o}){return A.useEffect(()=>{let a=!0;if(n)return s.setAuth(e,c=>{a&&o(()=>c)}),()=>{a=!1,o(c=>c?!1:null)}},[n,e,t,s,o]),null}function iE({authProviderAuthenticated:n,fetchAccessToken:e,authProviderLoading:t,client:s,setIsConvexAuthenticated:o}){return A.useEffect(()=>{if(n)return()=>{s.clearAuth(),o(()=>null)}},[n,e,t,s,o]),null}function oE({children:n}){const{isLoading:e,isAuthenticated:t}=bo();return e||!t?null:J.createElement(J.Fragment,null,n)}function aE({children:n}){const{isLoading:e,isAuthenticated:t}=bo();return e||t?null:J.createElement(J.Fragment,null,n)}const tv=A.createContext(void 0),nv=A.createContext(void 0);function lE(){return A.useContext(nv)}const cE=A.createContext(null),Nf="__convexAuthOAuthVerifier",dc="__convexAuthJWT",fc="__convexAuthRefreshToken",gb="__convexAuthServerStateFetchTime";function uE({client:n,serverState:e,onChange:t,storage:s,storageNamespace:o,replaceURL:a,children:c}){const d=A.useRef(e?._state.token??null),[f,p]=A.useState(d.current===null),[g,y]=A.useState(d.current),b=n.verbose??!1,x=A.useCallback(ne=>{b&&console.debug(`${new Date().toISOString()} ${ne}`)},[b]),{storageSet:S,storageGet:E,storageRemove:T,storageKey:_}=dE(s,o),[F,Y]=A.useState(!1),H=A.useCallback(async ne=>{const se=d.current!==null;let te;if(ne.tokens===null)d.current=null,ne.shouldStore&&(await T(dc),await T(fc)),te=null;else{const{token:N}=ne.tokens;if(d.current=N,ne.shouldStore){const{refreshToken:L}=ne.tokens;await S(dc,N),await S(fc,L)}te=N}se!==(te!==null)&&await t?.(),y(te),p(!1)},[S,T]);A.useEffect(()=>{const ne=async se=>{if(F){se.preventDefault();const te="Are you sure you want to leave? Your changes may not be saved.";return se.returnValue=!0,te}};return yb("beforeunload",ne),()=>{bb("beforeunload",ne)}}),A.useEffect(()=>{const ne=se=>{(async()=>{if(se.storageArea===s&&se.key===_(dc)){const te=se.newValue;x(`synced access token, is null: ${te===null}`),await H({shouldStore:!1,tokens:te===null?null:{token:te}})}})()};return yb("storage",ne),()=>bb("storage",ne)},[H]);const U=A.useCallback(async ne=>{const{tokens:se}=await n.unauthenticatedCall("auth:signIn","code"in ne?{params:{code:ne.code},verifier:ne.verifier}:ne);return x(`retrieved tokens, is null: ${se===null}`),await H({shouldStore:!0,tokens:se??null}),se!==null},[n,H]),R=A.useCallback(async(ne,se)=>{const te=se instanceof FormData?Array.from(se.entries()).reduce(($,[ce,C])=>($[ce]=C,$),{}):se??{},N=await E(Nf)??void 0;await T(Nf);const L=await n.authenticatedCall("auth:signIn",{provider:ne,params:te,verifier:N});if(L.redirect!==void 0){const $=new URL(L.redirect);return await S(Nf,L.verifier),window.location!==void 0&&(window.location.href=$.toString()),{signingIn:!1,redirect:$}}else if(L.tokens!==void 0){const{tokens:$}=L;return x(`signed in and got tokens, is null: ${$===null}`),await H({shouldStore:!0,tokens:$}),{signingIn:L.tokens!==null}}return{signingIn:!1}},[n,H,E]),Z=A.useCallback(async()=>{try{await n.authenticatedCall("auth:signOut")}catch{}x("signed out, erasing tokens"),await H({shouldStore:!0,tokens:null})},[H,n]),le=A.useCallback(async({forceRefreshToken:ne})=>{if(ne){const se=d.current;return await hE(fc,async()=>{const te=d.current;if(te!==se)return x(`returning synced token, is null: ${te===null}`),te;const N=await E(fc)??null;return N!==null?(Y(!0),await U({refreshToken:N}).finally(()=>{Y(!1)}),x(`returning retrieved token, is null: ${te===null}`),d.current):(Y(!1),x("returning null, there is no refresh token"),null)})}return d.current},[U,Z,E]),re=A.useRef(!1);A.useEffect(()=>{if(s===void 0)throw new Error("`localStorage` is not available in this environment, set the `storage` prop on `ConvexAuthProvider`!");const ne=async()=>{const te=await E(dc)??null;x(`retrieved token from storage, is null: ${te===null}`),await H({shouldStore:!1,tokens:te===null?null:{token:te}})};if(e!==void 0){const te=E(gb),N=L=>{if(!L||e._timeFetched>+L){const{token:$,refreshToken:ce}=e._state,C=$===null||ce===null?null:{token:$,refreshToken:ce};S(gb,e._timeFetched.toString()),H({tokens:C,shouldStore:!0})}else ne()};te instanceof Promise?te.then(N):N(te);return}const se=typeof window?.location<"u"?new URLSearchParams(window.location.search).get("code"):null;if(re.current||se){if(se&&!re.current){re.current=!0;const te=new URL(window.location.href);te.searchParams.delete("code"),(async()=>(await a(te.pathname+te.search+te.hash),await R(void 0,{code:se}),re.current=!1))()}}else ne()},[n,E]);const de=A.useMemo(()=>({signIn:R,signOut:Z}),[R,Z]),ke=g!==null,Ce=A.useMemo(()=>({isLoading:f,isAuthenticated:ke,fetchAccessToken:le}),[le,f,ke]);return v.jsx(nv.Provider,{value:Ce,children:v.jsx(tv.Provider,{value:de,children:v.jsx(cE.Provider,{value:g,children:c})})})}function dE(n,e){const t=fE(),s=A.useMemo(()=>n??t(),[n]),o=e.replace(/[^a-zA-Z0-9]/g,""),a=A.useCallback(p=>`${p}_${o}`,[e]),c=A.useCallback((p,g)=>s.setItem(a(p),g),[s,a]),d=A.useCallback(p=>s.getItem(a(p)),[s,a]),f=A.useCallback(p=>s.removeItem(a(p)),[s,a]);return{storageSet:c,storageGet:d,storageRemove:f,storageKey:a}}function fE(){const[n,e]=A.useState({});return()=>({getItem:t=>n[t],setItem:(t,s)=>{e(o=>({...o,[t]:s}))},removeItem:t=>{e(s=>{const{[t]:o,...a}=s;return a})}})}async function hE(n,e){const t=window?.navigator?.locks;return t!==void 0?await t.request(n,e):await pE(n,e)}function hc(n){globalThis.__convexAuthMutexes===void 0&&(globalThis.__convexAuthMutexes={});let e=globalThis.__convexAuthMutexes[n];return e===void 0&&(globalThis.__convexAuthMutexes[n]={currentlyRunning:null,waiting:[]}),e=globalThis.__convexAuthMutexes[n],e}function Af(n,e){globalThis.__convexAuthMutexes[n]=e}async function rv(n,e){const t=hc(n);t.currentlyRunning===null?Af(n,{currentlyRunning:e().finally(()=>{const s=hc(n).waiting.shift();hc(n).currentlyRunning=null,Af(n,{...hc(n),currentlyRunning:s===void 0?null:rv(n,s)})}),waiting:[]}):Af(n,{...t,waiting:[...t.waiting,e]})}async function pE(n,e){return new Promise((s,o)=>{rv(n,()=>e().then(c=>s(c)).catch(c=>o(c)))})}function yb(n,e,t){window.addEventListener?.(n,e,t)}function bb(n,e,t){window.removeEventListener?.(n,e,t)}function sv(){return A.useContext(tv)}function mE(n){const{client:e,storage:t,storageNamespace:s,replaceURL:o,children:a}=n,c=A.useMemo(()=>({authenticatedCall(d,f){return e.action(d,f)},unauthenticatedCall(d,f){return new Hk(e.address).action(d,f)},verbose:e.options?.verbose}),[e]);return v.jsx(uE,{client:c,storage:t??(typeof window>"u"?void 0:window?.localStorage),storageNamespace:s??e.address,replaceURL:o??(d=>{window.history.replaceState({},"",d)}),children:v.jsx(rE,{client:e,useAuth:lE,children:a})})}function gE(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const yE=n=>{switch(n){case"success":return xE;case"info":return wE;case"warning":return SE;case"error":return kE;default:return null}},bE=Array(12).fill(0),vE=({visible:n,className:e})=>J.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},J.createElement("div",{className:"sonner-spinner"},bE.map((t,s)=>J.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),xE=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),SE=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),wE=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),kE=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),EE=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},J.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),J.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),TE=()=>{const[n,e]=J.useState(document.hidden);return J.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let sh=1;class CE{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s,...o}=e,a=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:sh++,c=this.toasts.find(f=>f.id===a),d=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),c?this.toasts=this.toasts.map(f=>f.id===a?(this.publish({...f,...e,id:a,title:s}),{...f,...e,id:a,dismissible:d,title:s}):f):this.addToast({title:s,...o,dismissible:d,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const o=Promise.resolve(e instanceof Function?e():e);let a=s!==void 0,c;const d=o.then(async p=>{if(c=["resolve",p],J.isValidElement(p))a=!1,this.create({id:s,type:"default",message:p});else if(NE(p)&&!p.ok){a=!1;const y=typeof t.error=="function"?await t.error(`HTTP error! status: ${p.status}`):t.error,b=typeof t.description=="function"?await t.description(`HTTP error! status: ${p.status}`):t.description,S=typeof y=="object"&&!J.isValidElement(y)?y:{message:y};this.create({id:s,type:"error",description:b,...S})}else if(p instanceof Error){a=!1;const y=typeof t.error=="function"?await t.error(p):t.error,b=typeof t.description=="function"?await t.description(p):t.description,S=typeof y=="object"&&!J.isValidElement(y)?y:{message:y};this.create({id:s,type:"error",description:b,...S})}else if(t.success!==void 0){a=!1;const y=typeof t.success=="function"?await t.success(p):t.success,b=typeof t.description=="function"?await t.description(p):t.description,S=typeof y=="object"&&!J.isValidElement(y)?y:{message:y};this.create({id:s,type:"success",description:b,...S})}}).catch(async p=>{if(c=["reject",p],t.error!==void 0){a=!1;const g=typeof t.error=="function"?await t.error(p):t.error,y=typeof t.description=="function"?await t.description(p):t.description,x=typeof g=="object"&&!J.isValidElement(g)?g:{message:g};this.create({id:s,type:"error",description:y,...x})}}).finally(()=>{a&&(this.dismiss(s),s=void 0),t.finally==null||t.finally.call(t)}),f=()=>new Promise((p,g)=>d.then(()=>c[0]==="reject"?g(c[1]):p(c[1])).catch(g));return typeof s!="string"&&typeof s!="number"?{unwrap:f}:Object.assign(s,{unwrap:f})},this.custom=(e,t)=>{const s=t?.id||sh++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ln=new CE,ME=(n,e)=>{const t=e?.id||sh++;return ln.addToast({title:n,...e,id:t}),t},NE=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",AE=ME,OE=()=>ln.toasts,RE=()=>ln.getActiveToasts(),Ve=Object.assign(AE,{success:ln.success,info:ln.info,warning:ln.warning,error:ln.error,custom:ln.custom,message:ln.message,promise:ln.promise,dismiss:ln.dismiss,loading:ln.loading},{getHistory:OE,getToasts:RE});gE("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function pc(n){return n.label!==void 0}const DE=3,jE="24px",zE="16px",vb=4e3,_E=356,BE=14,LE=45,qE=200;function sr(...n){return n.filter(Boolean).join(" ")}function UE(n){const[e,t]=n.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}const VE=n=>{var e,t,s,o,a,c,d,f,p;const{invert:g,toast:y,unstyled:b,interacting:x,setHeights:S,visibleToasts:E,heights:T,index:_,toasts:F,expanded:Y,removeToast:H,defaultRichColors:U,closeButton:R,style:Z,cancelButtonStyle:le,actionButtonStyle:re,className:de="",descriptionClassName:ke="",duration:Ce,position:ne,gap:se,expandByDefault:te,classNames:N,icons:L,closeButtonAriaLabel:$="Close toast"}=n,[ce,C]=J.useState(null),[P,ee]=J.useState(null),[D,X]=J.useState(!1),[ie,z]=J.useState(!1),[ae,oe]=J.useState(!1),[Ee,Be]=J.useState(!1),[be,Le]=J.useState(!1),[St,Ze]=J.useState(0),[qe,yt]=J.useState(0),ut=J.useRef(y.duration||Ce||vb),Ga=J.useRef(null),wn=J.useRef(null),Ya=_===0,di=_+1<=E,Yt=y.type,ur=y.dismissible!==!1,ou=y.className||"",au=y.descriptionClassName||"",Xn=J.useMemo(()=>T.findIndex(Te=>Te.toastId===y.id)||0,[T,y.id]),Kt=J.useMemo(()=>{var Te;return(Te=y.closeButton)!=null?Te:R},[y.closeButton,R]),Un=J.useMemo(()=>y.duration||Ce||vb,[y.duration,Ce]),Dt=J.useRef(0),Dr=J.useRef(0),Ka=J.useRef(0),jr=J.useRef(null),[fi,hi]=ne.split("-"),Jn=J.useMemo(()=>T.reduce((Te,it,dt)=>dt>=Xn?Te:Te+it.height,0),[T,Xn]),Cs=TE(),Ms=y.invert||g,wo=Yt==="loading";Dr.current=J.useMemo(()=>Xn*se+Jn,[Xn,Jn]),J.useEffect(()=>{ut.current=Un},[Un]),J.useEffect(()=>{X(!0)},[]),J.useEffect(()=>{const Te=wn.current;if(Te){const it=Te.getBoundingClientRect().height;return yt(it),S(dt=>[{toastId:y.id,height:it,position:y.position},...dt]),()=>S(dt=>dt.filter(jt=>jt.toastId!==y.id))}},[S,y.id]),J.useLayoutEffect(()=>{if(!D)return;const Te=wn.current,it=Te.style.height;Te.style.height="auto";const dt=Te.getBoundingClientRect().height;Te.style.height=it,yt(dt),S(jt=>jt.find(bt=>bt.toastId===y.id)?jt.map(bt=>bt.toastId===y.id?{...bt,height:dt}:bt):[{toastId:y.id,height:dt,position:y.position},...jt])},[D,y.title,y.description,S,y.id]);const Vn=J.useCallback(()=>{z(!0),Ze(Dr.current),S(Te=>Te.filter(it=>it.toastId!==y.id)),setTimeout(()=>{H(y)},qE)},[y,H,S,Dr]);J.useEffect(()=>{if(y.promise&&Yt==="loading"||y.duration===1/0||y.type==="loading")return;let Te;return Y||x||Cs?(()=>{if(Ka.current<Dt.current){const jt=new Date().getTime()-Dt.current;ut.current=ut.current-jt}Ka.current=new Date().getTime()})():(()=>{ut.current!==1/0&&(Dt.current=new Date().getTime(),Te=setTimeout(()=>{y.onAutoClose==null||y.onAutoClose.call(y,y),Vn()},ut.current))})(),()=>clearTimeout(Te)},[Y,x,y,Yt,Cs,Vn]),J.useEffect(()=>{y.delete&&Vn()},[Vn,y.delete]);function Xa(){var Te;if(L?.loading){var it;return J.createElement("div",{className:sr(N?.loader,y==null||(it=y.classNames)==null?void 0:it.loader,"sonner-loader"),"data-visible":Yt==="loading"},L.loading)}return J.createElement(vE,{className:sr(N?.loader,y==null||(Te=y.classNames)==null?void 0:Te.loader),visible:Yt==="loading"})}const ko=y.icon||L?.[Yt]||yE(Yt);var zr,Ja;return J.createElement("li",{tabIndex:0,ref:wn,className:sr(de,ou,N?.toast,y==null||(e=y.classNames)==null?void 0:e.toast,N?.default,N?.[Yt],y==null||(t=y.classNames)==null?void 0:t[Yt]),"data-sonner-toast":"","data-rich-colors":(zr=y.richColors)!=null?zr:U,"data-styled":!(y.jsx||y.unstyled||b),"data-mounted":D,"data-promise":!!y.promise,"data-swiped":be,"data-removed":ie,"data-visible":di,"data-y-position":fi,"data-x-position":hi,"data-index":_,"data-front":Ya,"data-swiping":ae,"data-dismissible":ur,"data-type":Yt,"data-invert":Ms,"data-swipe-out":Ee,"data-swipe-direction":P,"data-expanded":!!(Y||te&&D),style:{"--index":_,"--toasts-before":_,"--z-index":F.length-_,"--offset":`${ie?St:Dr.current}px`,"--initial-height":te?"auto":`${qe}px`,...Z,...y.style},onDragEnd:()=>{oe(!1),C(null),jr.current=null},onPointerDown:Te=>{wo||!ur||(Ga.current=new Date,Ze(Dr.current),Te.target.setPointerCapture(Te.pointerId),Te.target.tagName!=="BUTTON"&&(oe(!0),jr.current={x:Te.clientX,y:Te.clientY}))},onPointerUp:()=>{var Te,it,dt;if(Ee||!ur)return;jr.current=null;const jt=Number(((Te=wn.current)==null?void 0:Te.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ns=Number(((it=wn.current)==null?void 0:it.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),bt=new Date().getTime()-((dt=Ga.current)==null?void 0:dt.getTime()),ot=ce==="x"?jt:Ns,at=Math.abs(ot)/bt;if(Math.abs(ot)>=LE||at>.11){Ze(Dr.current),y.onDismiss==null||y.onDismiss.call(y,y),ee(ce==="x"?jt>0?"right":"left":Ns>0?"down":"up"),Vn(),Be(!0);return}else{var Xe,wt;(Xe=wn.current)==null||Xe.style.setProperty("--swipe-amount-x","0px"),(wt=wn.current)==null||wt.style.setProperty("--swipe-amount-y","0px")}Le(!1),oe(!1),C(null)},onPointerMove:Te=>{var it,dt,jt;if(!jr.current||!ur||((it=window.getSelection())==null?void 0:it.toString().length)>0)return;const bt=Te.clientY-jr.current.y,ot=Te.clientX-jr.current.x;var at;const Xe=(at=n.swipeDirections)!=null?at:UE(ne);!ce&&(Math.abs(ot)>1||Math.abs(bt)>1)&&C(Math.abs(ot)>Math.abs(bt)?"x":"y");let wt={x:0,y:0};const pi=dr=>1/(1.5+Math.abs(dr)/20);if(ce==="y"){if(Xe.includes("top")||Xe.includes("bottom"))if(Xe.includes("top")&&bt<0||Xe.includes("bottom")&&bt>0)wt.y=bt;else{const dr=bt*pi(bt);wt.y=Math.abs(dr)<Math.abs(bt)?dr:bt}}else if(ce==="x"&&(Xe.includes("left")||Xe.includes("right")))if(Xe.includes("left")&&ot<0||Xe.includes("right")&&ot>0)wt.x=ot;else{const dr=ot*pi(ot);wt.x=Math.abs(dr)<Math.abs(ot)?dr:ot}(Math.abs(wt.x)>0||Math.abs(wt.y)>0)&&Le(!0),(dt=wn.current)==null||dt.style.setProperty("--swipe-amount-x",`${wt.x}px`),(jt=wn.current)==null||jt.style.setProperty("--swipe-amount-y",`${wt.y}px`)}},Kt&&!y.jsx&&Yt!=="loading"?J.createElement("button",{"aria-label":$,"data-disabled":wo,"data-close-button":!0,onClick:wo||!ur?()=>{}:()=>{Vn(),y.onDismiss==null||y.onDismiss.call(y,y)},className:sr(N?.closeButton,y==null||(s=y.classNames)==null?void 0:s.closeButton)},(Ja=L?.close)!=null?Ja:EE):null,(Yt||y.icon||y.promise)&&y.icon!==null&&(L?.[Yt]!==null||y.icon)?J.createElement("div",{"data-icon":"",className:sr(N?.icon,y==null||(o=y.classNames)==null?void 0:o.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||Xa():null,y.type!=="loading"?ko:null):null,J.createElement("div",{"data-content":"",className:sr(N?.content,y==null||(a=y.classNames)==null?void 0:a.content)},J.createElement("div",{"data-title":"",className:sr(N?.title,y==null||(c=y.classNames)==null?void 0:c.title)},y.jsx?y.jsx:typeof y.title=="function"?y.title():y.title),y.description?J.createElement("div",{"data-description":"",className:sr(ke,au,N?.description,y==null||(d=y.classNames)==null?void 0:d.description)},typeof y.description=="function"?y.description():y.description):null),J.isValidElement(y.cancel)?y.cancel:y.cancel&&pc(y.cancel)?J.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||le,onClick:Te=>{pc(y.cancel)&&ur&&(y.cancel.onClick==null||y.cancel.onClick.call(y.cancel,Te),Vn())},className:sr(N?.cancelButton,y==null||(f=y.classNames)==null?void 0:f.cancelButton)},y.cancel.label):null,J.isValidElement(y.action)?y.action:y.action&&pc(y.action)?J.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||re,onClick:Te=>{pc(y.action)&&(y.action.onClick==null||y.action.onClick.call(y.action,Te),!Te.defaultPrevented&&Vn())},className:sr(N?.actionButton,y==null||(p=y.classNames)==null?void 0:p.actionButton)},y.action.label):null)};function xb(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function IE(n,e){const t={};return[n,e].forEach((s,o)=>{const a=o===1,c=a?"--mobile-offset":"--offset",d=a?zE:jE;function f(p){["top","right","bottom","left"].forEach(g=>{t[`${c}-${g}`]=typeof p=="number"?`${p}px`:p})}typeof s=="number"||typeof s=="string"?f(s):typeof s=="object"?["top","right","bottom","left"].forEach(p=>{s[p]===void 0?t[`${c}-${p}`]=d:t[`${c}-${p}`]=typeof s[p]=="number"?`${s[p]}px`:s[p]}):f(d)}),t}const HE=J.forwardRef(function(e,t){const{invert:s,position:o="bottom-right",hotkey:a=["altKey","KeyT"],expand:c,closeButton:d,className:f,offset:p,mobileOffset:g,theme:y="light",richColors:b,duration:x,style:S,visibleToasts:E=DE,toastOptions:T,dir:_=xb(),gap:F=BE,icons:Y,containerAriaLabel:H="Notifications"}=e,[U,R]=J.useState([]),Z=J.useMemo(()=>Array.from(new Set([o].concat(U.filter(P=>P.position).map(P=>P.position)))),[U,o]),[le,re]=J.useState([]),[de,ke]=J.useState(!1),[Ce,ne]=J.useState(!1),[se,te]=J.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),N=J.useRef(null),L=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=J.useRef(null),ce=J.useRef(!1),C=J.useCallback(P=>{R(ee=>{var D;return(D=ee.find(X=>X.id===P.id))!=null&&D.delete||ln.dismiss(P.id),ee.filter(({id:X})=>X!==P.id)})},[]);return J.useEffect(()=>ln.subscribe(P=>{if(P.dismiss){requestAnimationFrame(()=>{R(ee=>ee.map(D=>D.id===P.id?{...D,delete:!0}:D))});return}setTimeout(()=>{Fc.flushSync(()=>{R(ee=>{const D=ee.findIndex(X=>X.id===P.id);return D!==-1?[...ee.slice(0,D),{...ee[D],...P},...ee.slice(D+1)]:[P,...ee]})})})}),[U]),J.useEffect(()=>{if(y!=="system"){te(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?te("dark"):te("light")),typeof window>"u")return;const P=window.matchMedia("(prefers-color-scheme: dark)");try{P.addEventListener("change",({matches:ee})=>{te(ee?"dark":"light")})}catch{P.addListener(({matches:D})=>{try{te(D?"dark":"light")}catch(X){console.error(X)}})}},[y]),J.useEffect(()=>{U.length<=1&&ke(!1)},[U]),J.useEffect(()=>{const P=ee=>{var D;if(a.every(z=>ee[z]||ee.code===z)){var ie;ke(!0),(ie=N.current)==null||ie.focus()}ee.code==="Escape"&&(document.activeElement===N.current||(D=N.current)!=null&&D.contains(document.activeElement))&&ke(!1)};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[a]),J.useEffect(()=>{if(N.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,ce.current=!1)}},[N.current]),J.createElement("section",{ref:t,"aria-label":`${H} ${L}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},Z.map((P,ee)=>{var D;const[X,ie]=P.split("-");return U.length?J.createElement("ol",{key:P,dir:_==="auto"?xb():_,tabIndex:-1,ref:N,className:f,"data-sonner-toaster":!0,"data-sonner-theme":se,"data-y-position":X,"data-lifted":de&&U.length>1&&!c,"data-x-position":ie,style:{"--front-toast-height":`${((D=le[0])==null?void 0:D.height)||0}px`,"--width":`${_E}px`,"--gap":`${F}px`,...S,...IE(p,g)},onBlur:z=>{ce.current&&!z.currentTarget.contains(z.relatedTarget)&&(ce.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:z=>{z.target instanceof HTMLElement&&z.target.dataset.dismissible==="false"||ce.current||(ce.current=!0,$.current=z.relatedTarget)},onMouseEnter:()=>ke(!0),onMouseMove:()=>ke(!0),onMouseLeave:()=>{Ce||ke(!1)},onDragEnd:()=>ke(!1),onPointerDown:z=>{z.target instanceof HTMLElement&&z.target.dataset.dismissible==="false"||ne(!0)},onPointerUp:()=>ne(!1)},U.filter(z=>!z.position&&ee===0||z.position===P).map((z,ae)=>{var oe,Ee;return J.createElement(VE,{key:z.id,icons:Y,index:ae,toast:z,defaultRichColors:b,duration:(oe=T?.duration)!=null?oe:x,className:T?.className,descriptionClassName:T?.descriptionClassName,invert:s,visibleToasts:E,closeButton:(Ee=T?.closeButton)!=null?Ee:d,interacting:Ce,position:P,style:T?.style,unstyled:T?.unstyled,classNames:T?.classNames,cancelButtonStyle:T?.cancelButtonStyle,actionButtonStyle:T?.actionButtonStyle,closeButtonAriaLabel:T?.closeButtonAriaLabel,removeToast:C,toasts:U.filter(Be=>Be.position==z.position),heights:le.filter(Be=>Be.position==z.position),setHeights:re,expandByDefault:c,gap:F,expanded:de,swipeDirections:e.swipeDirections})})):null}))});function PE(){const{signIn:n}=sv(),[e,t]=A.useState("signin"),[s,o]=A.useState(!1),[a,c]=A.useState(!1),[d,f]=A.useState({}),p=g=>{const y={},b=g.get("email"),x=g.get("password");return b?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b)||(y.email="Please enter a valid email address"):y.email="Email is required",x?x.length<6&&(y.password="Password must be at least 6 characters"):y.password="Password is required",f(y),Object.keys(y).length===0};return v.jsxs("div",{className:"w-full max-w-md mx-auto space-y-8",children:[v.jsxs("div",{className:"space-y-2 text-center",children:[v.jsx("h2",{className:"text-3xl font-semibold tracking-tight bg-gradient-to-r from-emerald-600 to-teal-500 bg-clip-text text-transparent",children:e==="signin"?"Welcome back":"Create your account"}),v.jsx("p",{className:"text-sm text-slate-500",children:e==="signin"?"Sign in to continue your journey.":"Join to start saving your memories."})]}),v.jsxs("form",{className:"space-y-5",onSubmit:g=>{if(g.preventDefault(),s)return;const y=g.target,b=new FormData(y);if(f({}),!p(b)){const x=y.querySelector('[aria-invalid="true"]');x&&x.focus();return}o(!0),b.set("flow",e==="signin"?"signIn":"signUp"),n("password",b).then(()=>{o(!1),Ve.success(e==="signin"?"Welcome back!":"Account created successfully!")}).catch(x=>{o(!1);const S=x?.message||(e==="signin"?"Sign in failed":"Sign up failed");f({general:S}),Ve.error(S)})},noValidate:!0,"aria-labelledby":"auth-heading",children:[d.general&&v.jsx("div",{className:"text-center p-3 rounded-lg bg-red-50 border border-red-200",role:"alert","aria-live":"assertive",children:v.jsx("span",{className:"text-sm text-red-600",children:d.general})}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"group relative",children:[v.jsx("input",{id:"auth-email",className:`modern-input peer ${d.email?"border-red-300 focus:border-red-500 focus:ring-red-200":""}`,type:"email",name:"email",placeholder:" ",required:!0,autoComplete:"email","aria-invalid":d.email?"true":"false","aria-describedby":d.email?"email-error":void 0,"aria-label":"Email address"}),v.jsx("label",{htmlFor:"auth-email",className:"floating-label",children:"Email"}),d.email&&v.jsx("div",{id:"email-error",className:"mt-1 text-sm text-red-600",role:"alert",children:d.email})]}),v.jsxs("div",{className:"group relative",children:[v.jsx("input",{id:"auth-password",className:`modern-input peer pr-12 ${d.password?"border-red-300 focus:border-red-500 focus:ring-red-200":""}`,type:a?"text":"password",name:"password",placeholder:" ",required:!0,autoComplete:e==="signin"?"current-password":"new-password",minLength:6,"aria-invalid":d.password?"true":"false","aria-describedby":d.password?"password-error":"password-hint","aria-label":"Password"}),v.jsx("label",{htmlFor:"auth-password",className:"floating-label",children:"Password"}),v.jsx("button",{type:"button",onClick:()=>c(g=>!g),className:"absolute top-1/2 -translate-y-1/2 right-2 text-xs opacity-70 hover:opacity-100 transition-opacity p-1",tabIndex:-1,"aria-label":a?"Hide password":"Show password",title:a?"Hide password text":"Show password text",children:a?"👁️‍🗨️":"👁️"}),d.password&&v.jsx("div",{id:"password-error",className:"mt-1 text-sm text-red-600",role:"alert",children:d.password}),!d.password&&v.jsx("div",{id:"password-hint",className:"mt-1 text-xs opacity-60",children:"Minimum 6 characters"})]})]}),v.jsx("button",{className:"modern-primary-btn w-full",type:"submit",disabled:s,"aria-describedby":s?"submitting-status":void 0,children:s?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"sr-only",id:"submitting-status",children:e==="signin"?"Signing you in, please wait":"Creating your account, please wait"}),v.jsx("span",{"aria-hidden":"true",children:e==="signin"?"Signing in…":"Creating…"})]}):e==="signin"?"Sign in":"Sign up"}),v.jsxs("div",{className:"flex items-center gap-2 text-xs opacity-60",role:"separator","aria-label":"Alternative option divider",children:[v.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-current to-transparent","aria-hidden":"true"}),v.jsx("span",{children:"Or"}),v.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-current to-transparent","aria-hidden":"true"})]}),v.jsxs("div",{className:"text-center text-sm opacity-80",children:[v.jsx("span",{className:"sr-only",children:e==="signin"?"Don't have an account?":"Already have an account?"}),v.jsx("button",{type:"button",onClick:()=>{t(g=>g==="signin"?"signup":"signin"),f({})},className:"font-medium underline hover:no-underline transition-all focus:outline-none focus:ring-2 focus:ring-white/30 rounded px-1","aria-label":e==="signin"?"Switch to sign up form":"Switch to sign in form",children:e==="signin"?"Create an account":"Sign in instead"})]})]})]})}const _e=ik;function $E(n){const[e,t]=A.useState({}),s=Ln(_e.interactions.countsMany,n.length?{mediaIds:n}:"skip"),o=st(_e.interactions.toggleLike),a=st(_e.interactions.toggleSave);A.useEffect(()=>{s&&t(f=>{let p=!1;const g={...f};return s.forEach(y=>{const b=f[y.mediaId];(!b||b.likeCount!==y.likeCount||b.saveCount!==y.saveCount||b.liked!==y.liked||b.saved!==y.saved)&&(g[y.mediaId]={likeCount:y.likeCount,saveCount:y.saveCount,liked:y.liked,saved:y.saved},p=!0)}),p?g:f})},[s]);function c(f){const p=e[f];if(!p)return;const g={...p,liked:!p.liked,likeCount:p.likeCount+(p.liked?-1:1)};t(y=>({...y,[f]:g})),o({mediaId:f}).catch(()=>t(y=>({...y,[f]:p})))}function d(f){const p=e[f];if(!p)return;const g={...p,saved:!p.saved,saveCount:p.saveCount+(p.saved?-1:1)};t(y=>({...y,[f]:g})),a({mediaId:f}).catch(()=>t(y=>({...y,[f]:p})))}return{interactionMap:e,optimisticLike:c,optimisticSave:d,countsLoading:!s&&n.length>0}}function FE({userId:n}){const e=Ln(_e.profiles.get,{userId:n});return e?v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"w-6 h-6 rounded-full overflow-hidden bg-gray-100",children:e.pictureUrl?v.jsx("img",{src:e.pictureUrl,alt:e.name,className:"w-full h-full object-cover"}):v.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:"?"})}),v.jsx("div",{className:"font-medium text-sm",children:e.name})]}):null}function iv({targetType:n,targetId:e}){const t=Ln(_e.comments.list,{targetType:n,targetId:e}),s=st(_e.comments.create),o=st(_e.comments.remove),a=Ln(_e.auth.loggedInUser),[c,d]=A.useState("");async function f(g){if(g.preventDefault(),!!c.trim())try{await s({content:c,targetType:n,targetId:e}),d("")}catch(y){Ve.error("Failed to post comment"),console.error(y)}}async function p(g){try{await o({id:g}),Ve.success("Comment deleted")}catch(y){Ve.error("Failed to delete comment"),console.error(y)}}return t?v.jsxs("div",{className:"p-4 space-y-4",children:[v.jsx("h3",{className:"font-medium",children:"Comments"}),v.jsx("div",{className:"space-y-4",children:t.map(g=>v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx(FE,{userId:g.authorId}),v.jsxs("div",{className:"flex-1 bg-gray-50 rounded-lg p-2 text-sm relative group",children:[g.content,g.authorId===a?._id&&v.jsx("button",{onClick:()=>p(g._id),className:"absolute top-2 right-2 text-red-600 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete comment",children:"×"})]})]},g._id))}),v.jsxs("form",{onSubmit:f,className:"flex gap-2",children:[v.jsx("input",{type:"text",value:c,onChange:g=>d(g.target.value),placeholder:"Write a comment...",className:"flex-1 p-2 border rounded"}),v.jsx("button",{type:"submit",disabled:!c.trim(),className:"bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700 disabled:opacity-50",children:"Post"})]})]}):null}const Fn=["Friend","Partner","Family","Parent","Former Partner","Colleague","School"];function QE({item:n,onSave:e,onCancel:t}){const[s,o]=A.useState(n.title||""),[a,c]=A.useState(n.caption||""),[d,f]=A.useState(n.visibleTo?Array.from(n.visibleTo):[...Fn]),[p,g]=A.useState(n.category),[y,b]=A.useState(!1);return v.jsxs("form",{onSubmit:x=>{x.preventDefault(),(async()=>{if(!s.trim()){Ve.error("Title is required");return}b(!0);try{await e(s.trim(),a.trim()||void 0,d,p)}finally{b(!1)}})()},className:"space-y-2",children:[v.jsx("input",{value:s,onChange:x=>o(x.target.value),className:"w-full p-2 border rounded",placeholder:"Title"}),v.jsx("textarea",{value:a,onChange:x=>c(x.target.value),className:"w-full p-2 border rounded",placeholder:"Caption (optional)"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:Fn.map(x=>v.jsxs("label",{className:`text-xs px-2 py-1 rounded-full border ${d.includes(x)?"bg-emerald-600 text-white border-emerald-600":"bg-white text-emerald-700"}`,children:[v.jsx("input",{className:"mr-1",type:"checkbox",checked:d.includes(x),onChange:S=>f(E=>S.target.checked?[...E,x]:E.filter(T=>T!==x))}),x]},x))}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Category"}),v.jsxs("select",{"aria-label":"Category",value:p||"",onChange:x=>g(x.target.value||void 0),className:"w-full p-2 border rounded text-sm",children:[v.jsx("option",{value:"",children:"None"}),["Special Moments","Adventures","Everyday Elegance","Passions","The Simple Life"].map(x=>v.jsx("option",{value:x,children:x},x))]})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{type:"submit",disabled:y,className:"px-3 py-1 bg-emerald-600 text-white rounded",children:y?"Saving...":"Save"}),v.jsx("button",{type:"button",onClick:()=>t&&t(),className:"px-3 py-1 bg-gray-100 rounded",children:"Cancel"})]})]})}function GE(){const n=Ln(_e.profiles.getCurrentProfile),e=["Special Moments","Adventures","Everyday Elegance","Passions","The Simple Life"],[t,s]=A.useState(null),{results:o,status:a,loadMore:c}=W0(_e.media.list,n?{}:"skip",{initialNumItems:15}),d=st(_e.media.generateUploadUrl),f=st(_e.media.create),p=st(_e.media.remove),g=st(_e.media.update),y=Ln(_e.auth.loggedInUser),[b,x]=A.useState(!1),[S,E]=A.useState(null),[T,_]=A.useState(()=>{try{const z=localStorage.getItem("ep:selectedRelationships");return z?JSON.parse(z):[...Fn]}catch{return[...Fn]}}),[F,Y]=A.useState(()=>{try{return localStorage.getItem("ep:layoutMasonry")!=="false"}catch{return!0}}),[H,U]=A.useState(null),R=A.useRef(null),[Z,le]=A.useState(null),re=(Z??o??[]).map(z=>z._id),{interactionMap:de,optimisticLike:ke,optimisticSave:Ce,countsLoading:ne}=$E(re),se=A.useRef(null),[te,N]=A.useState({}),L=A.useRef({}),[$,ce]=A.useState({}),C=A.useRef($);A.useEffect(()=>{C.current=$},[$]),A.useEffect(()=>(se.current=new IntersectionObserver(z=>{z.forEach(ae=>{const oe=ae.target;if(!oe)return;const Ee=oe.dataset.mediaId;ae.isIntersecting?(oe.muted=!(Ee&&C.current[Ee]),oe.play().catch(()=>{})):oe.pause()})},{threshold:.5}),()=>se.current?.disconnect()),[]),A.useEffect(()=>{if(!R.current||a!=="CanLoadMore")return;const z=R.current,ae=new IntersectionObserver(oe=>{oe.forEach(Ee=>{Ee.isIntersecting&&c(15)})},{rootMargin:"400px 0px 0px 0px"});return ae.observe(z),()=>ae.disconnect()},[a,c]),A.useEffect(()=>{o&&le(o.slice())},[o]),A.useEffect(()=>()=>{try{Object.values(L.current).forEach(z=>z())}catch{}L.current={}},[]),A.useEffect(()=>{try{localStorage.setItem("ep:selectedRelationships",JSON.stringify(T))}catch{}},[T]),A.useEffect(()=>{try{localStorage.setItem("ep:layoutMasonry",F?"true":"false")}catch{}},[F]);async function P(z){const ae=z.target.files?.[0];ae&&U({file:ae,title:ae.name,visibleTo:[...Fn]})}async function ee(z){if(z.preventDefault(),!!H)try{x(!0);const ae=await d(),oe=await fetch(ae,{method:"POST",headers:{"Content-Type":H.file.type},body:H.file});if(!oe.ok)throw new Error("upload failed");const{storageId:Ee}=await oe.json();await f({title:H.title,caption:H.caption||"",type:H.file.type.startsWith("image/")?"image":"video",storageId:Ee,visibleTo:H.visibleTo,category:H.category}),Ve.success("Uploaded"),U(null)}catch(ae){console.error(ae),Ve.error("Upload failed")}finally{x(!1)}}async function D(z){if(confirm("Delete this item?"))try{await p({id:z}),le(ae=>ae&&ae.filter(oe=>oe._id!==z)),Ve.success("Deleted")}catch(ae){console.error(ae),Ve.error("Delete failed")}}if(!n)return v.jsxs("div",{className:"max-w-6xl mx-auto",children:[v.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-6",children:"Photographs & Videos"}),v.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-amber-800",children:"Please complete your profile to view and share media."})]});const X=Z??o??[],ie=t?X.filter(z=>z.category===t):X;return v.jsxs("div",{className:"max-w-6xl mx-auto",children:[v.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-2",children:"Photographs & Videos"}),v.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[e.map(z=>v.jsx("button",{onClick:()=>s(ae=>ae===z?null:z),className:`px-3 py-1.5 rounded-full text-xs font-medium border transition ${t===z?"bg-emerald-600 text-white border-emerald-600":"bg-white text-emerald-700 hover:bg-emerald-50 border-emerald-200"}`,children:z},z)),t&&v.jsx("button",{onClick:()=>s(null),className:"px-2 py-1 rounded-full text-xs bg-gray-100 hover:bg-gray-200",children:"Clear"})]}),v.jsxs("div",{className:"mb-4 flex flex-wrap gap-2 items-center",children:[Fn.map(z=>v.jsx("button",{onClick:()=>_(ae=>ae.includes(z)?ae.filter(oe=>oe!==z):[...ae,z]),className:`text-xs px-2 py-1 rounded-full border transition ${T.includes(z)?"bg-emerald-600 text-white border-emerald-600":"bg-white text-emerald-700 hover:bg-emerald-50 border-emerald-200"}`,children:z},z)),v.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[v.jsx("label",{className:"text-xs text-gray-500",children:"Layout"}),v.jsx("button",{onClick:()=>Y(z=>{const ae=!z;try{localStorage.setItem("ep:layoutMasonry",ae?"true":"false")}catch{}return ae}),className:"text-xs px-2 py-1 rounded-full bg-white border",title:"Toggle layout",children:F?"Masonry":"Grid"})]}),T.length!==Fn.length&&v.jsx("button",{onClick:()=>_([...Fn]),className:"text-xs px-2 py-1 rounded-full bg-emerald-50 text-emerald-700 hover:bg-emerald-100 border border-emerald-200",children:"Reset"})]}),v.jsxs("div",{className:F?"[column-fill:_balance] columns-1 sm:columns-2 lg:columns-3 gap-4":"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4","aria-live":"polite",children:[H?v.jsxs("form",{onSubmit:z=>{z.preventDefault(),ee(z)},className:"mb-4 break-inside-avoid p-4 bg-white/70 backdrop-blur rounded-lg border border-emerald-100 shadow-sm flex flex-col gap-3",children:[v.jsxs("div",{className:"flex items-center justify-between gap-2",children:[v.jsx("input",{type:"text",value:H.title,onChange:z=>U({...H,title:z.target.value}),className:"flex-1 text-sm p-2 border rounded",required:!0,placeholder:"Title"}),v.jsx("button",{type:"button",onClick:()=>U(null),className:"text-xs px-2 py-1 rounded bg-gray-100 hover:bg-gray-200",children:"Cancel"})]}),v.jsx("input",{type:"text",value:H.caption||"",onChange:z=>U({...H,caption:z.target.value}),className:"text-sm p-2 border rounded",placeholder:"Caption (optional)"}),v.jsx("div",{className:"flex flex-wrap gap-1",children:Fn.map(z=>v.jsxs("label",{className:"text-[10px] px-2 py-1 rounded-full bg-emerald-50 text-emerald-700 border border-emerald-100 cursor-pointer flex items-center gap-1",children:[v.jsx("input",{type:"checkbox",checked:H.visibleTo.includes(z),onChange:ae=>{const oe=ae.target.checked?[...H.visibleTo,z]:H.visibleTo.filter(Ee=>Ee!==z);U({...H,visibleTo:oe})},className:"scale-75"}),z]},z))}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-[10px] font-medium text-gray-600 mb-1",children:"Category"}),v.jsxs("select",{"aria-label":"Category",value:H.category||"",onChange:z=>U({...H,category:z.target.value||void 0}),className:"w-full p-2 border rounded text-sm",children:[v.jsx("option",{value:"",children:"None"}),e.map(z=>v.jsx("option",{value:z,children:z},z))]})]}),v.jsx("button",{type:"submit",disabled:b,className:"w-full text-sm py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-50",children:b?"Uploading...":"Upload"})]}):v.jsxs("label",{className:"mb-4 break-inside-avoid block p-8 rounded-lg border-2 border-dashed border-emerald-200 hover:border-emerald-400 text-center cursor-pointer bg-white/60 backdrop-blur-sm text-sm text-emerald-700 shadow-sm hover:shadow transition group",children:[v.jsxs("div",{className:"flex flex-col items-center gap-3",children:[v.jsx("div",{className:"w-16 h-16 rounded-full bg-emerald-100 flex items-center justify-center group-hover:bg-emerald-200 transition-colors",children:v.jsx("span",{className:"text-2xl",children:"📷"})}),v.jsxs("div",{children:[v.jsx("div",{className:"font-medium text-lg",children:"Share a photo or video"}),v.jsx("div",{className:"text-xs text-emerald-600 mt-1",children:"Click to upload or drag and drop"})]})]}),v.jsx("input",{type:"file",accept:"image/*,video/*",onChange:z=>{P(z)},className:"hidden"})]}),ie.map((z,ae)=>{if(!(Array.isArray(z.visibleTo)?z.visibleTo:Fn).some(be=>T.includes(be)))return null;const Be=de[z._id];return v.jsxs("div",{className:"relative group mb-4 break-inside-avoid rounded-lg overflow-hidden bg-gray-100 shadow-sm hover:shadow-md transition cursor-pointer",onClick:()=>E(ae),children:[z.type==="image"?v.jsx("img",{src:z.url||void 0,alt:z.title,loading:"lazy",className:"w-full h-auto object-cover block transition-transform duration-300 group-hover:scale-[1.02]"}):v.jsxs("div",{className:"relative",children:[v.jsx("video",{"data-media-id":z._id,ref:be=>{const Le=String(z._id);if(!be){try{L.current[Le]?.()}catch{}delete L.current[Le];return}be.dataset.mediaId=z._id,be.muted=!$[z._id],se.current?.observe(be);try{L.current[Le]?.()}catch{}const St=()=>N(qe=>({...qe||{},[Le]:!0})),Ze=()=>N(qe=>({...qe||{},[Le]:!1}));be.addEventListener("waiting",St),be.addEventListener("playing",Ze),be.addEventListener("canplay",Ze),be.addEventListener("canplaythrough",Ze),L.current[Le]=()=>{try{be.removeEventListener("waiting",St),be.removeEventListener("playing",Ze),be.removeEventListener("canplay",Ze),be.removeEventListener("canplaythrough",Ze)}catch{}delete L.current[Le]}},src:z.url||void 0,preload:"metadata",className:"w-full h-auto object-cover block",playsInline:!0}),te[String(z._id)]&&v.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:v.jsx("div",{className:"w-8 h-8 border-3 border-white/80 border-t-transparent rounded-full animate-spin"})}),v.jsx("button",{onClick:be=>{be.stopPropagation();const Le=String(z._id);ce(St=>{const Ze={...St||{},[Le]:!St?.[Le]};return document.querySelectorAll(`video[data-media-id="${Le}"]`).forEach(yt=>{yt.muted=!Ze[Le]}),Ze})},className:"absolute top-2 left-2 w-8 h-8 rounded-full bg-white/80 flex items-center justify-center text-sm",title:$[String(z._id)]?"Mute":"Unmute",children:$[String(z._id)]?"🔊":"🔇"})]}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/0 to-black/0 opacity-0 group-hover:opacity-100 transition-opacity"}),(z.caption||z.title)&&v.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 text-xs text-white opacity-0 group-hover:opacity-100 transition-opacity",children:[v.jsx("div",{className:"font-medium truncate",children:z.title}),z.caption&&v.jsx("div",{className:"text-[10px] max-h-8 overflow-hidden",children:z.caption})]}),(Be||ne)&&v.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[Be?v.jsxs("button",{onClick:be=>{be.stopPropagation(),ke(z._id)},className:`px-2 py-1 rounded-full text-[10px] font-medium backdrop-blur bg-black/50 hover:brightness-110 ${Be.liked?"text-emerald-200":"text-white/80"}`,children:["❤️ ",Be.likeCount]}):v.jsx("div",{className:"px-2 py-1 rounded-full text-[10px] font-medium backdrop-blur bg-black/40 text-white/60 skeleton w-14 h-6"}),Be?v.jsxs("button",{onClick:be=>{be.stopPropagation(),Ce(z._id)},className:`px-2 py-1 rounded-full text-[10px] font-medium backdrop-blur bg-black/50 hover:brightness-110 ${Be.saved?"text-red-200":"text-white/80"}`,children:["💾 ",Be.saveCount]}):v.jsx("div",{className:"px-2 py-1 rounded-full text-[10px] font-medium backdrop-blur bg-black/40 text-white/60 skeleton w-14 h-6"})]}),v.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[z.authorId===y?._id&&v.jsx("button",{onClick:be=>{be.stopPropagation(),D(z._id),le(Le=>Le&&Le.filter(St=>St._id!==z._id))},className:"w-8 h-8 rounded-full bg-red-600/80 text-white flex items-center justify-center text-lg leading-none hover:bg-red-600",title:"Delete",children:"×"}),z.authorId===y?._id&&v.jsx("button",{onClick:be=>{be.stopPropagation(),U(null),E(ae)},className:"w-8 h-8 rounded-full bg-white/90 text-emerald-700 flex items-center justify-center text-lg leading-none hover:bg-emerald-100",title:"Edit",children:"✎"})]})]},z._id)}),a==="LoadingMore"&&v.jsx("div",{className:"mb-4 break-inside-avoid p-4 text-center text-sm text-emerald-700 bg-emerald-50 rounded",children:"Loading…"})]}),v.jsx("div",{ref:R,className:"h-2 w-full"}),ie.length===0&&v.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:"No media yet. Be the first to add something special."}),S!==null&&ie[S]&&v.jsx(YE,{item:ie[S],onClose:()=>E(null),canEdit:ie[S].authorId===y?._id,onDelete:async()=>{S!==null&&(await D(ie[S]._id),E(null))},onSaveInline:async(z,ae,oe,Ee)=>{const Be=ie.map(be=>({...be}));if(S!==null){le(be=>(be||ie).map(Le=>Le._id===ie[S]._id?{...Le,title:z,caption:ae,visibleTo:oe||Le.visibleTo,category:Ee??Le.category}:Le));try{const be=oe??(Array.isArray(ie[S].visibleTo)?Array.from(ie[S].visibleTo):[...Fn]);await g({id:ie[S]._id,title:z,caption:ae||"",visibleTo:be,category:Ee}),Ve.success("Saved")}catch(be){console.error(be),Ve.error("Save failed"),le(Be)}}},unmuted:!!$[ie[S]._id],toggleMute:()=>{if(S===null)return;const z=ie[S]._id;ce(ae=>{const oe={...ae||{},[z]:!ae?.[z]};return document.querySelectorAll(`video[data-media-id="${z}"]`).forEach(Be=>{Be.muted=!oe[z]}),oe})},currentIndex:S,totalItems:ie.length,onNavigate:z=>{if(S===null)return;const ae=z==="next"?(S+1)%ie.length:(S-1+ie.length)%ie.length;E(ae)}})]})}function YE({item:n,onClose:e,canEdit:t,onDelete:s,onSaveInline:o,unmuted:a,toggleMute:c,currentIndex:d,totalItems:f,onNavigate:p}){const g=Ln(_e.interactions.counts,n?{mediaId:n._id}:"skip"),y=st(_e.interactions.toggleLike),b=st(_e.interactions.toggleSave),[x,S]=A.useState(!1),[E,T]=A.useState({likeCountDelta:0,saveCountDelta:0}),[_,F]=A.useState(null),[Y,H]=A.useState(null),U=50,R=L=>{H(null),F(L.targetTouches[0].clientX)},Z=L=>{H(L.targetTouches[0].clientX)},le=()=>{if(!_||!Y)return;const L=_-Y,$=L>U,ce=L<-50;$?p("next"):ce&&p("prev")};A.useEffect(()=>{const L=$=>{switch($.key){case"ArrowLeft":case"ArrowUp":$.preventDefault(),p("prev");break;case"ArrowRight":case"ArrowDown":$.preventDefault(),p("next");break;case"Escape":$.preventDefault(),e();break}};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[p,e]);async function re(){if(!n)return;const L=g?.liked||!1;T($=>({...$,liked:!L,likeCountDelta:$.likeCountDelta+(L?-1:1)}));try{await y({mediaId:n._id})}catch{T($=>({...$,liked:L,likeCountDelta:$.likeCountDelta+(L?1:-1)}))}}async function de(){if(!n)return;const L=g?.saved||!1;T($=>({...$,saved:!L,saveCountDelta:$.saveCountDelta+(L?-1:1)}));try{await b({mediaId:n._id})}catch{T($=>({...$,saved:L,saveCountDelta:$.saveCountDelta+(L?1:-1)}))}}const ke=E.liked??g?.liked,Ce=E.saved??g?.saved,ne=(g?.likeCount??0)+E.likeCountDelta,se=(g?.saveCount??0)+E.saveCountDelta,[te,N]=A.useState(!1);return v.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-black touch-none",onTouchStart:R,onTouchMove:Z,onTouchEnd:le,children:[f>1&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>p("prev"),className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-black/60 text-white flex items-center justify-center text-2xl hover:bg-black/80 transition-colors z-20","aria-label":"Previous media",title:"Previous (←)",children:"‹"}),v.jsx("button",{onClick:()=>p("next"),className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-black/60 text-white flex items-center justify-center text-2xl hover:bg-black/80 transition-colors z-20","aria-label":"Next media",title:"Next (→)",children:"›"})]}),v.jsx("div",{className:"absolute top-3 left-3 z-10 flex gap-2",children:v.jsx("button",{onClick:e,className:"w-9 h-9 rounded-full bg-black text-white flex items-center justify-center text-lg hover:bg-black","aria-label":"Close",children:"×"})}),f>1&&v.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 z-10",children:v.jsxs("div",{className:"bg-black/60 text-white px-3 py-1 rounded-full text-sm",children:[d+1," of ",f]})}),v.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:v.jsx("div",{className:"relative max-w-[min(100%,900px)] w-full",children:v.jsx("div",{className:"w-full aspect-[3/4] md:aspect-[4/3] bg-gray-100 rounded-2xl overflow-hidden flex items-center justify-center",children:n.type==="image"?v.jsx("img",{onDoubleClick:()=>N(L=>!L),src:n.url||void 0,alt:n.title,className:"max-w-full max-h-full transition-all duration-300 select-none "+(te?"object-cover w-full h-full":"object-contain")}):v.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[v.jsx("video",{onDoubleClick:()=>N(L=>!L),"data-media-id":n._id,src:n.url||void 0,controls:!0,className:"max-w-full max-h-full transition-all duration-300 "+(te?"object-cover w-full h-full":"object-contain"),ref:L=>{L&&(L.muted=!a)}}),v.jsx("button",{onClick:c,className:"absolute top-3 left-3 w-9 h-9 rounded-full bg-white/80 flex items-center justify-center text-sm z-20 shadow",title:a?"Mute":"Unmute",children:a?"🔊":"🔇"})]})})})}),v.jsxs("div",{className:"relative bg-white rounded-t-2xl px-4 pt-3 pb-[calc(env(safe-area-inset-bottom)+12px)] shadow-lg translate-y-full animate-[slideUp_0.4s_ease_forwards] max-h-[calc(100vh-200px)] overflow-y-auto",children:[v.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto scrollbar-none pb-2",children:[v.jsxs("button",{onClick:L=>{L.preventDefault(),re()},className:`flex items-center gap-1 px-3 py-2 rounded-full text-sm font-medium transition ${ke?"bg-emerald-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:["❤️ ",ne]}),v.jsxs("button",{onClick:L=>{L.preventDefault(),de()},className:`flex items-center gap-1 px-3 py-2 rounded-full text-sm font-medium transition ${Ce?"bg-red-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:["💾 ",se]}),v.jsx("a",{href:"#comments",className:"flex items-center gap-1 px-3 py-2 rounded-full text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-700",children:"💬 Comments"}),t&&v.jsx("button",{onClick:()=>S(L=>!L),className:`flex items-center gap-1 px-3 py-2 rounded-full text-sm font-medium transition ${x?"bg-emerald-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"✎ Edit"}),t&&v.jsx("button",{onClick:()=>{s()},className:"flex items-center gap-1 px-3 py-2 rounded-full text-sm font-medium bg-red-600 text-white",children:"Delete"}),v.jsxs("div",{className:"ml-auto text-xs text-gray-500 truncate max-w-[40%]",children:[v.jsx("strong",{className:"font-medium text-gray-800 mr-1",children:n.title}),n.caption]})]}),x&&v.jsx("div",{className:"border-t pt-3 mt-2",children:v.jsx(QE,{item:n,onSave:async(L,$,ce,C)=>{await o(L,$,ce,C),S(!1)},onCancel:()=>S(!1)})}),v.jsx("div",{id:"comments",className:"border-t mt-3 pt-3 -mx-4",children:v.jsx(iv,{targetType:"media",targetId:n._id})})]})]})}function Lt(n){this.content=n}Lt.prototype={constructor:Lt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var s=t&&t!=n?this.remove(t):this,o=s.find(n),a=s.content.slice();return o==-1?a.push(t||n,e):(a[o+1]=e,t&&(a[o]=t)),new Lt(a)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Lt(t)},addToStart:function(n,e){return new Lt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Lt(t)},addBefore:function(n,e,t){var s=this.remove(e),o=s.content.slice(),a=s.find(n);return o.splice(a==-1?o.length:a,0,e,t),new Lt(o)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Lt.from(n),n.size?new Lt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Lt.from(n),n.size?new Lt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Lt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Lt.from=function(n){if(n instanceof Lt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Lt(e)};function ov(n,e,t){for(let s=0;;s++){if(s==n.childCount||s==e.childCount)return n.childCount==e.childCount?null:t;let o=n.child(s),a=e.child(s);if(o==a){t+=o.nodeSize;continue}if(!o.sameMarkup(a))return t;if(o.isText&&o.text!=a.text){for(let c=0;o.text[c]==a.text[c];c++)t++;return t}if(o.content.size||a.content.size){let c=ov(o.content,a.content,t+1);if(c!=null)return c}t+=o.nodeSize}}function av(n,e,t,s){for(let o=n.childCount,a=e.childCount;;){if(o==0||a==0)return o==a?null:{a:t,b:s};let c=n.child(--o),d=e.child(--a),f=c.nodeSize;if(c==d){t-=f,s-=f;continue}if(!c.sameMarkup(d))return{a:t,b:s};if(c.isText&&c.text!=d.text){let p=0,g=Math.min(c.text.length,d.text.length);for(;p<g&&c.text[c.text.length-p-1]==d.text[d.text.length-p-1];)p++,t--,s--;return{a:t,b:s}}if(c.content.size||d.content.size){let p=av(c.content,d.content,t-1,s-1);if(p)return p}t-=f,s-=f}}class W{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let s=0;s<e.length;s++)this.size+=e[s].nodeSize}nodesBetween(e,t,s,o=0,a){for(let c=0,d=0;d<t;c++){let f=this.content[c],p=d+f.nodeSize;if(p>e&&s(f,o+d,a||null,c)!==!1&&f.content.size){let g=d+1;f.nodesBetween(Math.max(0,e-g),Math.min(f.content.size,t-g),s,o+g)}d=p}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,s,o){let a="",c=!0;return this.nodesBetween(e,t,(d,f)=>{let p=d.isText?d.text.slice(Math.max(e,f)-f,t-f):d.isLeaf?o?typeof o=="function"?o(d):o:d.type.spec.leafText?d.type.spec.leafText(d):"":"";d.isBlock&&(d.isLeaf&&p||d.isTextblock)&&s&&(c?c=!1:a+=s),a+=p},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,s=e.firstChild,o=this.content.slice(),a=0;for(t.isText&&t.sameMarkup(s)&&(o[o.length-1]=t.withText(t.text+s.text),a=1);a<e.content.length;a++)o.push(e.content[a]);return new W(o,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let s=[],o=0;if(t>e)for(let a=0,c=0;c<t;a++){let d=this.content[a],f=c+d.nodeSize;f>e&&((c<e||f>t)&&(d.isText?d=d.cut(Math.max(0,e-c),Math.min(d.text.length,t-c)):d=d.cut(Math.max(0,e-c-1),Math.min(d.content.size,t-c-1))),s.push(d),o+=d.nodeSize),c=f}return new W(s,o)}cutByIndex(e,t){return e==t?W.empty:e==0&&t==this.content.length?this:new W(this.content.slice(e,t))}replaceChild(e,t){let s=this.content[e];if(s==t)return this;let o=this.content.slice(),a=this.size+t.nodeSize-s.nodeSize;return o[e]=t,new W(o,a)}addToStart(e){return new W([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new W(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,s=0;t<this.content.length;t++){let o=this.content[t];e(o,s,t),s+=o.nodeSize}}findDiffStart(e,t=0){return ov(this,e,t)}findDiffEnd(e,t=this.size,s=e.size){return av(this,e,t,s)}findIndex(e,t=-1){if(e==0)return mc(0,e);if(e==this.size)return mc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let s=0,o=0;;s++){let a=this.child(s),c=o+a.nodeSize;if(c>=e)return c==e||t>0?mc(s+1,c):mc(s,o);o=c}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return W.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new W(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return W.empty;let t,s=0;for(let o=0;o<e.length;o++){let a=e[o];s+=a.nodeSize,o&&a.isText&&e[o-1].sameMarkup(a)?(t||(t=e.slice(0,o)),t[t.length-1]=a.withText(t[t.length-1].text+a.text)):t&&t.push(a)}return new W(t||e,s)}static from(e){if(!e)return W.empty;if(e instanceof W)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new W([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}W.empty=new W([],0);const Of={index:0,offset:0};function mc(n,e){return Of.index=n,Of.offset=e,Of}function Rc(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let s=0;s<n.length;s++)if(!Rc(n[s],e[s]))return!1}else{for(let s in n)if(!(s in e)||!Rc(n[s],e[s]))return!1;for(let s in e)if(!(s in n))return!1}return!0}let Ke=class ih{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,s=!1;for(let o=0;o<e.length;o++){let a=e[o];if(this.eq(a))return e;if(this.type.excludes(a.type))t||(t=e.slice(0,o));else{if(a.type.excludes(this.type))return e;!s&&a.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),s=!0),t&&t.push(a)}}return t||(t=e.slice()),s||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Rc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let s=e.marks[t.type];if(!s)throw new RangeError(`There is no mark type ${t.type} in this schema`);let o=s.create(t.attrs);return s.checkAttrs(o.attrs),o}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++)if(!e[s].eq(t[s]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ih.none;if(e instanceof ih)return[e];let t=e.slice();return t.sort((s,o)=>s.type.rank-o.type.rank),t}};Ke.none=[];class Dc extends Error{}class ue{constructor(e,t,s){this.content=e,this.openStart=t,this.openEnd=s}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let s=cv(this.content,e+this.openStart,t);return s&&new ue(s,this.openStart,this.openEnd)}removeBetween(e,t){return new ue(lv(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return ue.empty;let s=t.openStart||0,o=t.openEnd||0;if(typeof s!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ue(W.fromJSON(e,t.content),s,o)}static maxOpen(e,t=!0){let s=0,o=0;for(let a=e.firstChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.firstChild)s++;for(let a=e.lastChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.lastChild)o++;return new ue(e,s,o)}}ue.empty=new ue(W.empty,0,0);function lv(n,e,t){let{index:s,offset:o}=n.findIndex(e),a=n.maybeChild(s),{index:c,offset:d}=n.findIndex(t);if(o==e||a.isText){if(d!=t&&!n.child(c).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(s!=c)throw new RangeError("Removing non-flat range");return n.replaceChild(s,a.copy(lv(a.content,e-o-1,t-o-1)))}function cv(n,e,t,s){let{index:o,offset:a}=n.findIndex(e),c=n.maybeChild(o);if(a==e||c.isText)return n.cut(0,e).append(t).append(n.cut(e));let d=cv(c.content,e-a-1,t);return d&&n.replaceChild(o,c.copy(d))}function KE(n,e,t){if(t.openStart>n.depth)throw new Dc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Dc("Inconsistent open depths");return uv(n,e,t,0)}function uv(n,e,t,s){let o=n.index(s),a=n.node(s);if(o==e.index(s)&&s<n.depth-t.openStart){let c=uv(n,e,t,s+1);return a.copy(a.content.replaceChild(o,c))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==s&&e.depth==s){let c=n.parent,d=c.content;return ni(c,d.cut(0,n.parentOffset).append(t.content).append(d.cut(e.parentOffset)))}else{let{start:c,end:d}=XE(t,n);return ni(a,fv(n,c,d,e,s))}else return ni(a,jc(n,e,s))}function dv(n,e){if(!e.type.compatibleContent(n.type))throw new Dc("Cannot join "+e.type.name+" onto "+n.type.name)}function oh(n,e,t){let s=n.node(t);return dv(s,e.node(t)),s}function ti(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Na(n,e,t,s){let o=(e||n).node(t),a=0,c=e?e.index(t):o.childCount;n&&(a=n.index(t),n.depth>t?a++:n.textOffset&&(ti(n.nodeAfter,s),a++));for(let d=a;d<c;d++)ti(o.child(d),s);e&&e.depth==t&&e.textOffset&&ti(e.nodeBefore,s)}function ni(n,e){return n.type.checkContent(e),n.copy(e)}function fv(n,e,t,s,o){let a=n.depth>o&&oh(n,e,o+1),c=s.depth>o&&oh(t,s,o+1),d=[];return Na(null,n,o,d),a&&c&&e.index(o)==t.index(o)?(dv(a,c),ti(ni(a,fv(n,e,t,s,o+1)),d)):(a&&ti(ni(a,jc(n,e,o+1)),d),Na(e,t,o,d),c&&ti(ni(c,jc(t,s,o+1)),d)),Na(s,null,o,d),new W(d)}function jc(n,e,t){let s=[];if(Na(null,n,t,s),n.depth>t){let o=oh(n,e,t+1);ti(ni(o,jc(n,e,t+1)),s)}return Na(e,null,t,s),new W(s)}function XE(n,e){let t=e.depth-n.openStart,o=e.node(t).copy(n.content);for(let a=t-1;a>=0;a--)o=e.node(a).copy(W.from(o));return{start:o.resolveNoCache(n.openStart+t),end:o.resolveNoCache(o.content.size-n.openEnd-t)}}class _a{constructor(e,t,s){this.pos=e,this.path=t,this.parentOffset=s,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let s=this.pos-this.path[this.path.length-1],o=e.child(t);return s?e.child(t).cut(s):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let s=this.path[t*3],o=t==0?0:this.path[t*3-1]+1;for(let a=0;a<e;a++)o+=s.child(a).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Ke.none;if(this.textOffset)return e.child(t).marks;let s=e.maybeChild(t-1),o=e.maybeChild(t);if(!s){let d=s;s=o,o=d}let a=s.marks;for(var c=0;c<a.length;c++)a[c].type.spec.inclusive===!1&&(!o||!a[c].isInSet(o.marks))&&(a=a[c--].removeFromSet(a));return a}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let s=t.marks,o=e.parent.maybeChild(e.index());for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!o||!s[a].isInSet(o.marks))&&(s=s[a--].removeFromSet(s));return s}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let s=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);s>=0;s--)if(e.pos<=this.end(s)&&(!t||t(this.node(s))))return new zc(this,e,s);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let s=[],o=0,a=t;for(let c=e;;){let{index:d,offset:f}=c.content.findIndex(a),p=a-f;if(s.push(c,d,o+f),!p||(c=c.child(d),c.isText))break;a=p-1,o+=f+1}return new _a(t,s,a)}static resolveCached(e,t){let s=Sb.get(e);if(s)for(let a=0;a<s.elts.length;a++){let c=s.elts[a];if(c.pos==t)return c}else Sb.set(e,s=new JE);let o=s.elts[s.i]=_a.resolve(e,t);return s.i=(s.i+1)%ZE,o}}class JE{constructor(){this.elts=[],this.i=0}}const ZE=12,Sb=new WeakMap;class zc{constructor(e,t,s){this.$from=e,this.$to=t,this.depth=s}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const WE=Object.create(null);let gs=class ah{constructor(e,t,s,o=Ke.none){this.type=e,this.attrs=t,this.marks=o,this.content=s||W.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,s,o=0){this.content.nodesBetween(e,t,s,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,s,o){return this.content.textBetween(e,t,s,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,s){return this.type==e&&Rc(this.attrs,t||e.defaultAttrs||WE)&&Ke.sameSet(this.marks,s||Ke.none)}copy(e=null){return e==this.content?this:new ah(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new ah(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,s=!1){if(e==t)return ue.empty;let o=this.resolve(e),a=this.resolve(t),c=s?0:o.sharedDepth(t),d=o.start(c),p=o.node(c).content.cut(o.pos-d,a.pos-d);return new ue(p,o.depth-c,a.depth-c)}replace(e,t,s){return KE(this.resolve(e),this.resolve(t),s)}nodeAt(e){for(let t=this;;){let{index:s,offset:o}=t.content.findIndex(e);if(t=t.maybeChild(s),!t)return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:s}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:s}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:s}=this.content.findIndex(e);if(s<e)return{node:this.content.child(t),index:t,offset:s};let o=this.content.child(t-1);return{node:o,index:t-1,offset:s-o.nodeSize}}resolve(e){return _a.resolveCached(this,e)}resolveNoCache(e){return _a.resolve(this,e)}rangeHasMark(e,t,s){let o=!1;return t>e&&this.nodesBetween(e,t,a=>(s.isInSet(a.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),hv(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,s=W.empty,o=0,a=s.childCount){let c=this.contentMatchAt(e).matchFragment(s,o,a),d=c&&c.matchFragment(this.content,t);if(!d||!d.validEnd)return!1;for(let f=o;f<a;f++)if(!this.type.allowsMarks(s.child(f).marks))return!1;return!0}canReplaceWith(e,t,s,o){if(o&&!this.type.allowsMarks(o))return!1;let a=this.contentMatchAt(e).matchType(s),c=a&&a.matchFragment(this.content,t);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ke.none;for(let t=0;t<this.marks.length;t++){let s=this.marks[t];s.type.checkAttrs(s.attrs),e=s.addToSet(e)}if(!Ke.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let s;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");s=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,s)}let o=W.fromJSON(e,t.content),a=e.nodeType(t.type).create(t.attrs,o,s);return a.type.checkAttrs(a.attrs),a}};gs.prototype.text=void 0;class _c extends gs{constructor(e,t,s,o){if(super(e,t,null,o),!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):hv(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new _c(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new _c(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function hv(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class oi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let s=new eT(e,t);if(s.next==null)return oi.empty;let o=pv(s);s.next&&s.err("Unexpected trailing text");let a=aT(oT(o));return lT(a,s),a}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,s=e.childCount){let o=this;for(let a=t;o&&a<s;a++)o=o.matchType(e.child(a).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let s=0;s<e.next.length;s++)if(this.next[t].type==e.next[s].type)return!0;return!1}fillBefore(e,t=!1,s=0){let o=[this];function a(c,d){let f=c.matchFragment(e,s);if(f&&(!t||f.validEnd))return W.from(d.map(p=>p.createAndFill()));for(let p=0;p<c.next.length;p++){let{type:g,next:y}=c.next[p];if(!(g.isText||g.hasRequiredAttrs())&&o.indexOf(y)==-1){o.push(y);let b=a(y,d.concat(g));if(b)return b}}return null}return a(this,[])}findWrapping(e){for(let s=0;s<this.wrapCache.length;s+=2)if(this.wrapCache[s]==e)return this.wrapCache[s+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),s=[{match:this,type:null,via:null}];for(;s.length;){let o=s.shift(),a=o.match;if(a.matchType(e)){let c=[];for(let d=o;d.type;d=d.via)c.push(d.type);return c.reverse()}for(let c=0;c<a.next.length;c++){let{type:d,next:f}=a.next[c];!d.isLeaf&&!d.hasRequiredAttrs()&&!(d.name in t)&&(!o.type||f.validEnd)&&(s.push({match:d.contentMatch,type:d,via:o}),t[d.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(s){e.push(s);for(let o=0;o<s.next.length;o++)e.indexOf(s.next[o].next)==-1&&t(s.next[o].next)}return t(this),e.map((s,o)=>{let a=o+(s.validEnd?"*":" ")+" ";for(let c=0;c<s.next.length;c++)a+=(c?", ":"")+s.next[c].type.name+"->"+e.indexOf(s.next[c].next);return a}).join(`
`)}}oi.empty=new oi(!0);class eT{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function pv(n){let e=[];do e.push(tT(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function tT(n){let e=[];do e.push(nT(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function nT(n){let e=iT(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=rT(n,e);else break;return e}function wb(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function rT(n,e){let t=wb(n),s=t;return n.eat(",")&&(n.next!="}"?s=wb(n):s=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:s,expr:e}}function sT(n,e){let t=n.nodeTypes,s=t[e];if(s)return[s];let o=[];for(let a in t){let c=t[a];c.isInGroup(e)&&o.push(c)}return o.length==0&&n.err("No node type or group '"+e+"' found"),o}function iT(n){if(n.eat("(")){let e=pv(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=sT(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function oT(n){let e=[[]];return o(a(n,0),t()),e;function t(){return e.push([])-1}function s(c,d,f){let p={term:f,to:d};return e[c].push(p),p}function o(c,d){c.forEach(f=>f.to=d)}function a(c,d){if(c.type=="choice")return c.exprs.reduce((f,p)=>f.concat(a(p,d)),[]);if(c.type=="seq")for(let f=0;;f++){let p=a(c.exprs[f],d);if(f==c.exprs.length-1)return p;o(p,d=t())}else if(c.type=="star"){let f=t();return s(d,f),o(a(c.expr,f),f),[s(f)]}else if(c.type=="plus"){let f=t();return o(a(c.expr,d),f),o(a(c.expr,f),f),[s(f)]}else{if(c.type=="opt")return[s(d)].concat(a(c.expr,d));if(c.type=="range"){let f=d;for(let p=0;p<c.min;p++){let g=t();o(a(c.expr,f),g),f=g}if(c.max==-1)o(a(c.expr,f),f);else for(let p=c.min;p<c.max;p++){let g=t();s(f,g),o(a(c.expr,f),g),f=g}return[s(f)]}else{if(c.type=="name")return[s(d,void 0,c.value)];throw new Error("Unknown expr type")}}}}function mv(n,e){return e-n}function kb(n,e){let t=[];return s(e),t.sort(mv);function s(o){let a=n[o];if(a.length==1&&!a[0].term)return s(a[0].to);t.push(o);for(let c=0;c<a.length;c++){let{term:d,to:f}=a[c];!d&&t.indexOf(f)==-1&&s(f)}}}function aT(n){let e=Object.create(null);return t(kb(n,0));function t(s){let o=[];s.forEach(c=>{n[c].forEach(({term:d,to:f})=>{if(!d)return;let p;for(let g=0;g<o.length;g++)o[g][0]==d&&(p=o[g][1]);kb(n,f).forEach(g=>{p||o.push([d,p=[]]),p.indexOf(g)==-1&&p.push(g)})})});let a=e[s.join(",")]=new oi(s.indexOf(n.length-1)>-1);for(let c=0;c<o.length;c++){let d=o[c][1].sort(mv);a.next.push({type:o[c][0],next:e[d.join(",")]||t(d)})}return a}}function lT(n,e){for(let t=0,s=[n];t<s.length;t++){let o=s[t],a=!o.validEnd,c=[];for(let d=0;d<o.next.length;d++){let{type:f,next:p}=o.next[d];c.push(f.name),a&&!(f.isText||f.hasRequiredAttrs())&&(a=!1),s.indexOf(p)==-1&&s.push(p)}a&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function gv(n){let e=Object.create(null);for(let t in n){let s=n[t];if(!s.hasDefault)return null;e[t]=s.default}return e}function yv(n,e){let t=Object.create(null);for(let s in n){let o=e&&e[s];if(o===void 0){let a=n[s];if(a.hasDefault)o=a.default;else throw new RangeError("No value supplied for attribute "+s)}t[s]=o}return t}function bv(n,e,t,s){for(let o in e)if(!(o in n))throw new RangeError(`Unsupported attribute ${o} for ${t} of type ${o}`);for(let o in n){let a=n[o];a.validate&&a.validate(e[o])}}function vv(n,e){let t=Object.create(null);if(e)for(let s in e)t[s]=new uT(n,s,e[s]);return t}let Eb=class xv{constructor(e,t,s){this.name=e,this.schema=t,this.spec=s,this.markSet=null,this.groups=s.group?s.group.split(" "):[],this.attrs=vv(e,s.attrs),this.defaultAttrs=gv(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(s.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==oi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:yv(this.attrs,e)}create(e=null,t,s){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new gs(this,this.computeAttrs(e),W.from(t),Ke.setFrom(s))}createChecked(e=null,t,s){return t=W.from(t),this.checkContent(t),new gs(this,this.computeAttrs(e),t,Ke.setFrom(s))}createAndFill(e=null,t,s){if(e=this.computeAttrs(e),t=W.from(t),t.size){let c=this.contentMatch.fillBefore(t);if(!c)return null;t=c.append(t)}let o=this.contentMatch.matchFragment(t),a=o&&o.fillBefore(W.empty,!0);return a?new gs(this,e,t.append(a),Ke.setFrom(s)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let s=0;s<e.childCount;s++)if(!this.allowsMarks(e.child(s).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){bv(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let s=0;s<e.length;s++)this.allowsMarkType(e[s].type)?t&&t.push(e[s]):t||(t=e.slice(0,s));return t?t.length?t:Ke.none:e}static compile(e,t){let s=Object.create(null);e.forEach((a,c)=>s[a]=new xv(a,t,c));let o=t.spec.topNode||"doc";if(!s[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!s.text)throw new RangeError("Every schema needs a 'text' type");for(let a in s.text.attrs)throw new RangeError("The text node type should not have attributes");return s}};function cT(n,e,t){let s=t.split("|");return o=>{let a=o===null?"null":typeof o;if(s.indexOf(a)<0)throw new RangeError(`Expected value of type ${s} for attribute ${e} on type ${n}, got ${a}`)}}class uT{constructor(e,t,s){this.hasDefault=Object.prototype.hasOwnProperty.call(s,"default"),this.default=s.default,this.validate=typeof s.validate=="string"?cT(e,t,s.validate):s.validate}get isRequired(){return!this.hasDefault}}class Qc{constructor(e,t,s,o){this.name=e,this.rank=t,this.schema=s,this.spec=o,this.attrs=vv(e,o.attrs),this.excluded=null;let a=gv(this.attrs);this.instance=a?new Ke(this,a):null}create(e=null){return!e&&this.instance?this.instance:new Ke(this,yv(this.attrs,e))}static compile(e,t){let s=Object.create(null),o=0;return e.forEach((a,c)=>s[a]=new Qc(a,o++,t,c)),s}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){bv(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Sv{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let o in e)t[o]=e[o];t.nodes=Lt.from(e.nodes),t.marks=Lt.from(e.marks||{}),this.nodes=Eb.compile(this.spec.nodes,this),this.marks=Qc.compile(this.spec.marks,this);let s=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let a=this.nodes[o],c=a.spec.content||"",d=a.spec.marks;if(a.contentMatch=s[c]||(s[c]=oi.parse(c,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=d=="_"?null:d?Tb(this,d.split(" ")):d==""||!a.inlineContent?[]:null}for(let o in this.marks){let a=this.marks[o],c=a.spec.excludes;a.excluded=c==null?[a]:c==""?[]:Tb(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,s,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Eb){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,s,o)}text(e,t){let s=this.nodes.text;return new _c(s,s.defaultAttrs,e,Ke.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return gs.fromJSON(this,e)}markFromJSON(e){return Ke.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Tb(n,e){let t=[];for(let s=0;s<e.length;s++){let o=e[s],a=n.marks[o],c=a;if(a)t.push(a);else for(let d in n.marks){let f=n.marks[d];(o=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(o)>-1)&&t.push(c=f)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[s]+"'")}return t}function dT(n){return n.tag!=null}function fT(n){return n.style!=null}class ys{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let s=this.matchedStyles=[];t.forEach(o=>{if(dT(o))this.tags.push(o);else if(fT(o)){let a=/[^=]*/.exec(o.style)[0];s.indexOf(a)<0&&s.push(a),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let a=e.nodes[o.node];return a.contentMatch.matchType(a)})}parse(e,t={}){let s=new Mb(this,t,!1);return s.addAll(e,Ke.none,t.from,t.to),s.finish()}parseSlice(e,t={}){let s=new Mb(this,t,!0);return s.addAll(e,Ke.none,t.from,t.to),ue.maxOpen(s.finish())}matchTag(e,t,s){for(let o=s?this.tags.indexOf(s)+1:0;o<this.tags.length;o++){let a=this.tags[o];if(mT(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||t.matchesContext(a.context))){if(a.getAttrs){let c=a.getAttrs(e);if(c===!1)continue;a.attrs=c||void 0}return a}}}matchStyle(e,t,s,o){for(let a=o?this.styles.indexOf(o)+1:0;a<this.styles.length;a++){let c=this.styles[a],d=c.style;if(!(d.indexOf(e)!=0||c.context&&!s.matchesContext(c.context)||d.length>e.length&&(d.charCodeAt(e.length)!=61||d.slice(e.length+1)!=t))){if(c.getAttrs){let f=c.getAttrs(t);if(f===!1)continue;c.attrs=f||void 0}return c}}}static schemaRules(e){let t=[];function s(o){let a=o.priority==null?50:o.priority,c=0;for(;c<t.length;c++){let d=t[c];if((d.priority==null?50:d.priority)<a)break}t.splice(c,0,o)}for(let o in e.marks){let a=e.marks[o].spec.parseDOM;a&&a.forEach(c=>{s(c=Nb(c)),c.mark||c.ignore||c.clearMark||(c.mark=o)})}for(let o in e.nodes){let a=e.nodes[o].spec.parseDOM;a&&a.forEach(c=>{s(c=Nb(c)),c.node||c.ignore||c.mark||(c.node=o)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ys(e,ys.schemaRules(e)))}}const wv={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},hT={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},kv={ol:!0,ul:!0},Ba=1,lh=2,kc=4;function Cb(n,e,t){return e!=null?(e?Ba:0)|(e==="full"?lh:0):n&&n.whitespace=="pre"?Ba|lh:t&-5}class gc{constructor(e,t,s,o,a,c){this.type=e,this.attrs=t,this.marks=s,this.solid=o,this.options=c,this.content=[],this.activeMarks=Ke.none,this.match=a||(c&kc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(W.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let s=this.type.contentMatch,o;return(o=s.findWrapping(e.type))?(this.match=s,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ba)){let s=this.content[this.content.length-1],o;if(s&&s.isText&&(o=/[ \t\r\n\u000c]+$/.exec(s.text))){let a=s;s.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-o[0].length))}}let t=W.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(W.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!wv.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Mb{constructor(e,t,s){this.parser=e,this.options=t,this.isOpen=s,this.open=0,this.localPreserveWS=!1;let o=t.topNode,a,c=Cb(null,t.preserveWhitespace,0)|(s?kc:0);o?a=new gc(o.type,o.attrs,Ke.none,!0,t.topMatch||o.type.contentMatch,c):s?a=new gc(null,null,Ke.none,!0,null,c):a=new gc(e.schema.topNodeType,null,Ke.none,!0,null,c),this.nodes=[a],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let s=e.nodeValue,o=this.top,a=o.options&lh?"full":this.localPreserveWS||(o.options&Ba)>0;if(a==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(s)){if(a)a!=="full"?s=s.replace(/\r?\n|\r/g," "):s=s.replace(/\r\n?/g,`
`);else if(s=s.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(s)&&this.open==this.nodes.length-1){let c=o.content[o.content.length-1],d=e.previousSibling;(!c||d&&d.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(s=s.slice(1))}s&&this.insertNode(this.parser.schema.text(s),t,!/\S/.test(s)),this.findInText(e)}else this.findInside(e)}addElement(e,t,s){let o=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),d;kv.hasOwnProperty(c)&&this.parser.normalizeLists&&pT(e);let f=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(d=this.parser.matchTag(e,this,s));e:if(f?f.ignore:hT.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,t);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(e=f.skip);let p,g=this.needsBlock;if(wv.hasOwnProperty(c))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),p=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let y=f&&f.skip?t:this.readStyles(e,t);y&&this.addAll(e,y),p&&this.sync(a),this.needsBlock=g}else{let p=this.readStyles(e,t);p&&this.addElementByRule(e,f,p,f.consuming===!1?d:void 0)}this.localPreserveWS=o}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let s=e.style;if(s&&s.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let a=this.parser.matchedStyles[o],c=s.getPropertyValue(a);if(c)for(let d=void 0;;){let f=this.parser.matchStyle(a,c,this,d);if(!f)break;if(f.ignore)return null;if(f.clearMark?t=t.filter(p=>!f.clearMark(p)):t=t.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)d=f;else break}}return t}addElementByRule(e,t,s,o){let a,c;if(t.node)if(c=this.parser.schema.nodes[t.node],c.isLeaf)this.insertNode(c.create(t.attrs),s,e.nodeName=="BR")||this.leafFallback(e,s);else{let f=this.enter(c,t.attrs||null,s,t.preserveWhitespace);f&&(a=!0,s=f)}else{let f=this.parser.schema.marks[t.mark];s=s.concat(f.create(t.attrs))}let d=this.top;if(c&&c.isLeaf)this.findInside(e);else if(o)this.addElement(e,s,o);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(f=>this.insertNode(f,s,!1));else{let f=e;typeof t.contentElement=="string"?f=e.querySelector(t.contentElement):typeof t.contentElement=="function"?f=t.contentElement(e):t.contentElement&&(f=t.contentElement),this.findAround(e,f,!0),this.addAll(f,s),this.findAround(e,f,!1)}a&&this.sync(d)&&this.open--}addAll(e,t,s,o){let a=s||0;for(let c=s?e.childNodes[s]:e.firstChild,d=o==null?null:e.childNodes[o];c!=d;c=c.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(c,t);this.findAtPoint(e,a)}findPlace(e,t,s){let o,a;for(let c=this.open,d=0;c>=0;c--){let f=this.nodes[c],p=f.findWrapping(e);if(p&&(!o||o.length>p.length+d)&&(o=p,a=f,!p.length))break;if(f.solid){if(s)break;d+=2}}if(!o)return null;this.sync(a);for(let c=0;c<o.length;c++)t=this.enterInner(o[c],null,t,!1);return t}insertNode(e,t,s){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(t=this.enterInner(a,null,t))}let o=this.findPlace(e,t,s);if(o){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let c=Ke.none;for(let d of o.concat(e.marks))(a.type?a.type.allowsMarkType(d.type):Ab(d.type,e.type))&&(c=d.addToSet(c));return a.content.push(e.mark(c)),!0}return!1}enter(e,t,s,o){let a=this.findPlace(e.create(t),s,!1);return a&&(a=this.enterInner(e,t,s,!0,o)),a}enterInner(e,t,s,o=!1,a){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let d=Cb(e,a,c.options);c.options&kc&&c.content.length==0&&(d|=kc);let f=Ke.none;return s=s.filter(p=>(c.type?c.type.allowsMarkType(p.type):Ab(p.type,e))?(f=p.addToSet(f),!1):!0),this.nodes.push(new gc(e,t,f,o,null,d)),this.open++,s}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Ba)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let s=this.nodes[t].content;for(let o=s.length-1;o>=0;o--)e+=s[o].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==e&&this.find[s].offset==t&&(this.find[s].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,s){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&t.compareDocumentPosition(this.find[o].node)&(s?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),s=this.options.context,o=!this.isOpen&&(!s||s.parent.type==this.nodes[0].type),a=-(s?s.depth+1:0)+(o?0:1),c=(d,f)=>{for(;d>=0;d--){let p=t[d];if(p==""){if(d==t.length-1||d==0)continue;for(;f>=a;f--)if(c(d-1,f))return!0;return!1}else{let g=f>0||f==0&&o?this.nodes[f].type:s&&f>=a?s.node(f-a).type:null;if(!g||g.name!=p&&!g.isInGroup(p))return!1;f--}}return!0};return c(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(s&&s.isTextblock&&s.defaultAttrs)return s}for(let t in this.parser.schema.nodes){let s=this.parser.schema.nodes[t];if(s.isTextblock&&s.defaultAttrs)return s}}}function pT(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let s=e.nodeType==1?e.nodeName.toLowerCase():null;s&&kv.hasOwnProperty(s)&&t?(t.appendChild(e),e=t):s=="li"?t=e:s&&(t=null)}}function mT(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Nb(n){let e={};for(let t in n)e[t]=n[t];return e}function Ab(n,e){let t=e.schema.nodes;for(let s in t){let o=t[s];if(!o.allowsMarkType(n))continue;let a=[],c=d=>{a.push(d);for(let f=0;f<d.edgeCount;f++){let{type:p,next:g}=d.edge(f);if(p==e||a.indexOf(g)<0&&c(g))return!0}};if(c(o.contentMatch))return!0}}class ui{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},s){s||(s=Rf(t).createDocumentFragment());let o=s,a=[];return e.forEach(c=>{if(a.length||c.marks.length){let d=0,f=0;for(;d<a.length&&f<c.marks.length;){let p=c.marks[f];if(!this.marks[p.type.name]){f++;continue}if(!p.eq(a[d][0])||p.type.spec.spanning===!1)break;d++,f++}for(;d<a.length;)o=a.pop()[1];for(;f<c.marks.length;){let p=c.marks[f++],g=this.serializeMark(p,c.isInline,t);g&&(a.push([p,o]),o.appendChild(g.dom),o=g.contentDOM||g.dom)}}o.appendChild(this.serializeNodeInner(c,t))}),s}serializeNodeInner(e,t){let{dom:s,contentDOM:o}=Ec(Rf(t),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return s}serializeNode(e,t={}){let s=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let a=this.serializeMark(e.marks[o],e.isInline,t);a&&((a.contentDOM||a.dom).appendChild(s),s=a.dom)}return s}serializeMark(e,t,s={}){let o=this.marks[e.type.name];return o&&Ec(Rf(s),o(e,t),null,e.attrs)}static renderSpec(e,t,s=null,o){return Ec(e,t,s,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ui(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Ob(e.nodes);return t.text||(t.text=s=>s.text),t}static marksFromSchema(e){return Ob(e.marks)}}function Ob(n){let e={};for(let t in n){let s=n[t].spec.toDOM;s&&(e[t]=s)}return e}function Rf(n){return n.document||window.document}const Rb=new WeakMap;function gT(n){let e=Rb.get(n);return e===void 0&&Rb.set(n,e=yT(n)),e}function yT(n){let e=null;function t(s){if(s&&typeof s=="object")if(Array.isArray(s))if(typeof s[0]=="string")e||(e=[]),e.push(s);else for(let o=0;o<s.length;o++)t(s[o]);else for(let o in s)t(s[o])}return t(n),e}function Ec(n,e,t,s){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],a;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(s&&(a=gT(s))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=o.indexOf(" ");c>0&&(t=o.slice(0,c),o=o.slice(c+1));let d,f=t?n.createElementNS(t,o):n.createElement(o),p=e[1],g=1;if(p&&typeof p=="object"&&p.nodeType==null&&!Array.isArray(p)){g=2;for(let y in p)if(p[y]!=null){let b=y.indexOf(" ");b>0?f.setAttributeNS(y.slice(0,b),y.slice(b+1),p[y]):f.setAttribute(y,p[y])}}for(let y=g;y<e.length;y++){let b=e[y];if(b===0){if(y<e.length-1||y>g)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}else{let{dom:x,contentDOM:S}=Ec(n,b,t,s);if(f.appendChild(x),S){if(d)throw new RangeError("Multiple content holes");d=S}}}return{dom:f,contentDOM:d}}const Ev=65535,Tv=Math.pow(2,16);function bT(n,e){return n+e*Tv}function Db(n){return n&Ev}function vT(n){return(n-(n&Ev))/Tv}const Cv=1,Mv=2,Tc=4,Nv=8;class ch{constructor(e,t,s){this.pos=e,this.delInfo=t,this.recover=s}get deleted(){return(this.delInfo&Nv)>0}get deletedBefore(){return(this.delInfo&(Cv|Tc))>0}get deletedAfter(){return(this.delInfo&(Mv|Tc))>0}get deletedAcross(){return(this.delInfo&Tc)>0}}class vn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&vn.empty)return vn.empty}recover(e){let t=0,s=Db(e);if(!this.inverted)for(let o=0;o<s;o++)t+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[s*3]+t+vT(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,s){let o=0,a=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let f=this.ranges[d]-(this.inverted?o:0);if(f>e)break;let p=this.ranges[d+a],g=this.ranges[d+c],y=f+p;if(e<=y){let b=p?e==f?-1:e==y?1:t:t,x=f+o+(b<0?0:g);if(s)return x;let S=e==(t<0?f:y)?null:bT(d/3,e-f),E=e==f?Mv:e==y?Cv:Tc;return(t<0?e!=f:e!=y)&&(E|=Nv),new ch(x,E,S)}o+=g-p}return s?e+o:new ch(e+o,0,null)}touches(e,t){let s=0,o=Db(t),a=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let f=this.ranges[d]-(this.inverted?s:0);if(f>e)break;let p=this.ranges[d+a],g=f+p;if(e<=g&&d==o*3)return!0;s+=this.ranges[d+c]-p}return!1}forEach(e){let t=this.inverted?2:1,s=this.inverted?1:2;for(let o=0,a=0;o<this.ranges.length;o+=3){let c=this.ranges[o],d=c-(this.inverted?a:0),f=c+(this.inverted?0:a),p=this.ranges[o+t],g=this.ranges[o+s];e(d,d+p,f,f+g),a+=g-p}}invert(){return new vn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?vn.empty:new vn(e<0?[0,-e,0]:[0,0,e])}}vn.empty=new vn([]);class La{constructor(e,t,s=0,o=e?e.length:0){this.mirror=t,this.from=s,this.to=o,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new La(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,s=this._maps.length;t<e._maps.length;t++){let o=e.getMirror(t);this.appendMap(e._maps[t],o!=null&&o<t?s+o:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,s=this._maps.length+e._maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e._maps[t].invert(),o!=null&&o>t?s-o-1:void 0)}}invert(){let e=new La;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let s=this.from;s<this.to;s++)e=this._maps[s].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,s){let o=0;for(let a=this.from;a<this.to;a++){let c=this._maps[a],d=c.mapResult(e,t);if(d.recover!=null){let f=this.getMirror(a);if(f!=null&&f>a&&f<this.to){a=f,e=this._maps[f].recover(d.recover);continue}}o|=d.delInfo,e=d.pos}return s?e:new ch(e,o,null)}}const Df=Object.create(null);class Gt{getMap(){return vn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let s=Df[t.stepType];if(!s)throw new RangeError(`No step type ${t.stepType} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in Df)throw new RangeError("Duplicate use of step JSON ID "+e);return Df[e]=t,t.prototype.jsonID=e,t}}class gt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new gt(e,null)}static fail(e){return new gt(null,e)}static fromReplace(e,t,s,o){try{return gt.ok(e.replace(t,s,o))}catch(a){if(a instanceof Dc)return gt.fail(a.message);throw a}}}function _h(n,e,t){let s=[];for(let o=0;o<n.childCount;o++){let a=n.child(o);a.content.size&&(a=a.copy(_h(a.content,e,a))),a.isInline&&(a=e(a,t,o)),s.push(a)}return W.fromArray(s)}class hs extends Gt{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=e.resolve(this.from),o=s.node(s.sharedDepth(this.to)),a=new ue(_h(t.content,(c,d)=>!c.isAtom||!d.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),o),t.openStart,t.openEnd);return gt.fromReplace(e,this.from,this.to,a)}invert(){return new ar(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new hs(t.pos,s.pos,this.mark)}merge(e){return e instanceof hs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new hs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new hs(t.from,t.to,e.markFromJSON(t.mark))}}Gt.jsonID("addMark",hs);class ar extends Gt{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=new ue(_h(t.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),t.openStart,t.openEnd);return gt.fromReplace(e,this.from,this.to,s)}invert(){return new hs(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new ar(t.pos,s.pos,this.mark)}merge(e){return e instanceof ar&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ar(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ar(t.from,t.to,e.markFromJSON(t.mark))}}Gt.jsonID("removeMark",ar);class ps extends Gt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return gt.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return gt.fromReplace(e,this.pos,this.pos+1,new ue(W.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let s=this.mark.addToSet(t.marks);if(s.length==t.marks.length){for(let o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(s))return new ps(this.pos,t.marks[o]);return new ps(this.pos,this.mark)}}return new ai(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ps(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ps(t.pos,e.markFromJSON(t.mark))}}Gt.jsonID("addNodeMark",ps);class ai extends Gt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return gt.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return gt.fromReplace(e,this.pos,this.pos+1,new ue(W.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new ps(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ai(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ai(t.pos,e.markFromJSON(t.mark))}}Gt.jsonID("removeNodeMark",ai);class Nt extends Gt{constructor(e,t,s,o=!1){super(),this.from=e,this.to=t,this.slice=s,this.structure=o}apply(e){return this.structure&&uh(e,this.from,this.to)?gt.fail("Structure replace would overwrite content"):gt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new vn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Nt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deletedAcross&&s.deletedAcross?null:new Nt(t.pos,Math.max(t.pos,s.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Nt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?ue.empty:new ue(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Nt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?ue.empty:new ue(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Nt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Nt(t.from,t.to,ue.fromJSON(e,t.slice),!!t.structure)}}Gt.jsonID("replace",Nt);class At extends Gt{constructor(e,t,s,o,a,c,d=!1){super(),this.from=e,this.to=t,this.gapFrom=s,this.gapTo=o,this.slice=a,this.insert=c,this.structure=d}apply(e){if(this.structure&&(uh(e,this.from,this.gapFrom)||uh(e,this.gapTo,this.to)))return gt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return gt.fail("Gap is not a flat range");let s=this.slice.insertAt(this.insert,t.content);return s?gt.fromReplace(e,this.from,this.to,s):gt.fail("Content does not fit in gap")}getMap(){return new vn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new At(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1),o=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?s.pos:e.map(this.gapTo,1);return t.deletedAcross&&s.deletedAcross||o<t.pos||a>s.pos?null:new At(t.pos,s.pos,o,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new At(t.from,t.to,t.gapFrom,t.gapTo,ue.fromJSON(e,t.slice),t.insert,!!t.structure)}}Gt.jsonID("replaceAround",At);function uh(n,e,t){let s=n.resolve(e),o=t-e,a=s.depth;for(;o>0&&a>0&&s.indexAfter(a)==s.node(a).childCount;)a--,o--;if(o>0){let c=s.node(a).maybeChild(s.indexAfter(a));for(;o>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,o--}}return!1}function xT(n,e,t,s){let o=[],a=[],c,d;n.doc.nodesBetween(e,t,(f,p,g)=>{if(!f.isInline)return;let y=f.marks;if(!s.isInSet(y)&&g.type.allowsMarkType(s.type)){let b=Math.max(p,e),x=Math.min(p+f.nodeSize,t),S=s.addToSet(y);for(let E=0;E<y.length;E++)y[E].isInSet(S)||(c&&c.to==b&&c.mark.eq(y[E])?c.to=x:o.push(c=new ar(b,x,y[E])));d&&d.to==b?d.to=x:a.push(d=new hs(b,x,s))}}),o.forEach(f=>n.step(f)),a.forEach(f=>n.step(f))}function ST(n,e,t,s){let o=[],a=0;n.doc.nodesBetween(e,t,(c,d)=>{if(!c.isInline)return;a++;let f=null;if(s instanceof Qc){let p=c.marks,g;for(;g=s.isInSet(p);)(f||(f=[])).push(g),p=g.removeFromSet(p)}else s?s.isInSet(c.marks)&&(f=[s]):f=c.marks;if(f&&f.length){let p=Math.min(d+c.nodeSize,t);for(let g=0;g<f.length;g++){let y=f[g],b;for(let x=0;x<o.length;x++){let S=o[x];S.step==a-1&&y.eq(o[x].style)&&(b=S)}b?(b.to=p,b.step=a):o.push({style:y,from:Math.max(d,e),to:p,step:a})}}}),o.forEach(c=>n.step(new ar(c.from,c.to,c.style)))}function Bh(n,e,t,s=t.contentMatch,o=!0){let a=n.doc.nodeAt(e),c=[],d=e+1;for(let f=0;f<a.childCount;f++){let p=a.child(f),g=d+p.nodeSize,y=s.matchType(p.type);if(!y)c.push(new Nt(d,g,ue.empty));else{s=y;for(let b=0;b<p.marks.length;b++)t.allowsMarkType(p.marks[b].type)||n.step(new ar(d,g,p.marks[b]));if(o&&p.isText&&t.whitespace!="pre"){let b,x=/\r?\n|\r/g,S;for(;b=x.exec(p.text);)S||(S=new ue(W.from(t.schema.text(" ",t.allowedMarks(p.marks))),0,0)),c.push(new Nt(d+b.index,d+b.index+b[0].length,S))}}d=g}if(!s.validEnd){let f=s.fillBefore(W.empty,!0);n.replace(d,d,new ue(f,0,0))}for(let f=c.length-1;f>=0;f--)n.step(c[f])}function wT(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function vo(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let s=n.depth;;--s){let o=n.$from.node(s),a=n.$from.index(s),c=n.$to.indexAfter(s);if(s<n.depth&&o.canReplace(a,c,t))return s;if(s==0||o.type.spec.isolating||!wT(o,a,c))break}return null}function kT(n,e,t){let{$from:s,$to:o,depth:a}=e,c=s.before(a+1),d=o.after(a+1),f=c,p=d,g=W.empty,y=0;for(let S=a,E=!1;S>t;S--)E||s.index(S)>0?(E=!0,g=W.from(s.node(S).copy(g)),y++):f--;let b=W.empty,x=0;for(let S=a,E=!1;S>t;S--)E||o.after(S+1)<o.end(S)?(E=!0,b=W.from(o.node(S).copy(b)),x++):p++;n.step(new At(f,p,c,d,new ue(g.append(b),y,x),g.size-y,!0))}function Lh(n,e,t=null,s=n){let o=ET(n,e),a=o&&TT(s,e);return a?o.map(jb).concat({type:e,attrs:t}).concat(a.map(jb)):null}function jb(n){return{type:n,attrs:null}}function ET(n,e){let{parent:t,startIndex:s,endIndex:o}=n,a=t.contentMatchAt(s).findWrapping(e);if(!a)return null;let c=a.length?a[0]:e;return t.canReplaceWith(s,o,c)?a:null}function TT(n,e){let{parent:t,startIndex:s,endIndex:o}=n,a=t.child(s),c=e.contentMatch.findWrapping(a.type);if(!c)return null;let f=(c.length?c[c.length-1]:e).contentMatch;for(let p=s;f&&p<o;p++)f=f.matchType(t.child(p).type);return!f||!f.validEnd?null:c}function CT(n,e,t){let s=W.empty;for(let c=t.length-1;c>=0;c--){if(s.size){let d=t[c].type.contentMatch.matchFragment(s);if(!d||!d.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}s=W.from(t[c].type.create(t[c].attrs,s))}let o=e.start,a=e.end;n.step(new At(o,a,o,a,new ue(s,0,0),t.length,!0))}function MT(n,e,t,s,o){if(!s.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=n.steps.length;n.doc.nodesBetween(e,t,(c,d)=>{let f=typeof o=="function"?o(c):o;if(c.isTextblock&&!c.hasMarkup(s,f)&&NT(n.doc,n.mapping.slice(a).map(d),s)){let p=null;if(s.schema.linebreakReplacement){let x=s.whitespace=="pre",S=!!s.contentMatch.matchType(s.schema.linebreakReplacement);x&&!S?p=!1:!x&&S&&(p=!0)}p===!1&&Ov(n,c,d,a),Bh(n,n.mapping.slice(a).map(d,1),s,void 0,p===null);let g=n.mapping.slice(a),y=g.map(d,1),b=g.map(d+c.nodeSize,1);return n.step(new At(y,b,y+1,b-1,new ue(W.from(s.create(f,null,c.marks)),0,0),1,!0)),p===!0&&Av(n,c,d,a),!1}})}function Av(n,e,t,s){e.forEach((o,a)=>{if(o.isText){let c,d=/\r?\n|\r/g;for(;c=d.exec(o.text);){let f=n.mapping.slice(s).map(t+1+a+c.index);n.replaceWith(f,f+1,e.type.schema.linebreakReplacement.create())}}})}function Ov(n,e,t,s){e.forEach((o,a)=>{if(o.type==o.type.schema.linebreakReplacement){let c=n.mapping.slice(s).map(t+1+a);n.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function NT(n,e,t){let s=n.resolve(e),o=s.index();return s.parent.canReplaceWith(o,o+1,t)}function AT(n,e,t,s,o){let a=n.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");t||(t=a.type);let c=t.create(s,null,o||a.marks);if(a.isLeaf)return n.replaceWith(e,e+a.nodeSize,c);if(!t.validContent(a.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new At(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new ue(W.from(c),0,0),1,!0))}function Or(n,e,t=1,s){let o=n.resolve(e),a=o.depth-t,c=s&&s[s.length-1]||o.parent;if(a<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!c.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let p=o.depth-1,g=t-2;p>a;p--,g--){let y=o.node(p),b=o.index(p);if(y.type.spec.isolating)return!1;let x=y.content.cutByIndex(b,y.childCount),S=s&&s[g+1];S&&(x=x.replaceChild(0,S.type.create(S.attrs)));let E=s&&s[g]||y;if(!y.canReplace(b+1,y.childCount)||!E.type.validContent(x))return!1}let d=o.indexAfter(a),f=s&&s[0];return o.node(a).canReplaceWith(d,d,f?f.type:o.node(a+1).type)}function OT(n,e,t=1,s){let o=n.doc.resolve(e),a=W.empty,c=W.empty;for(let d=o.depth,f=o.depth-t,p=t-1;d>f;d--,p--){a=W.from(o.node(d).copy(a));let g=s&&s[p];c=W.from(g?g.type.create(g.attrs,c):o.node(d).copy(c))}n.step(new Nt(e,e,new ue(a.append(c),t,t),!0))}function ks(n,e){let t=n.resolve(e),s=t.index();return Rv(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(s,s+1)}function RT(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:s}=n.type.schema;for(let o=0;o<e.childCount;o++){let a=e.child(o),c=a.type==s?n.type.schema.nodes.text:a.type;if(t=t.matchType(c),!t||!n.type.allowsMarks(a.marks))return!1}return t.validEnd}function Rv(n,e){return!!(n&&e&&!n.isLeaf&&RT(n,e))}function Gc(n,e,t=-1){let s=n.resolve(e);for(let o=s.depth;;o--){let a,c,d=s.index(o);if(o==s.depth?(a=s.nodeBefore,c=s.nodeAfter):t>0?(a=s.node(o+1),d++,c=s.node(o).maybeChild(d)):(a=s.node(o).maybeChild(d-1),c=s.node(o+1)),a&&!a.isTextblock&&Rv(a,c)&&s.node(o).canReplace(d,d+1))return e;if(o==0)break;e=t<0?s.before(o):s.after(o)}}function DT(n,e,t){let s=null,{linebreakReplacement:o}=n.doc.type.schema,a=n.doc.resolve(e-t),c=a.node().type;if(o&&c.inlineContent){let g=c.whitespace=="pre",y=!!c.contentMatch.matchType(o);g&&!y?s=!1:!g&&y&&(s=!0)}let d=n.steps.length;if(s===!1){let g=n.doc.resolve(e+t);Ov(n,g.node(),g.before(),d)}c.inlineContent&&Bh(n,e+t-1,c,a.node().contentMatchAt(a.index()),s==null);let f=n.mapping.slice(d),p=f.map(e-t);if(n.step(new Nt(p,f.map(e+t,-1),ue.empty,!0)),s===!0){let g=n.doc.resolve(p);Av(n,g.node(),g.before(),n.steps.length)}return n}function jT(n,e,t){let s=n.resolve(e);if(s.parent.canReplaceWith(s.index(),s.index(),t))return e;if(s.parentOffset==0)for(let o=s.depth-1;o>=0;o--){let a=s.index(o);if(s.node(o).canReplaceWith(a,a,t))return s.before(o+1);if(a>0)return null}if(s.parentOffset==s.parent.content.size)for(let o=s.depth-1;o>=0;o--){let a=s.indexAfter(o);if(s.node(o).canReplaceWith(a,a,t))return s.after(o+1);if(a<s.node(o).childCount)return null}return null}function Dv(n,e,t){let s=n.resolve(e);if(!t.content.size)return e;let o=t.content;for(let a=0;a<t.openStart;a++)o=o.firstChild.content;for(let a=1;a<=(t.openStart==0&&t.size?2:1);a++)for(let c=s.depth;c>=0;c--){let d=c==s.depth?0:s.pos<=(s.start(c+1)+s.end(c+1))/2?-1:1,f=s.index(c)+(d>0?1:0),p=s.node(c),g=!1;if(a==1)g=p.canReplace(f,f,o);else{let y=p.contentMatchAt(f).findWrapping(o.firstChild.type);g=y&&p.canReplaceWith(f,f,y[0])}if(g)return d==0?s.pos:d<0?s.before(c+1):s.after(c+1)}return null}function Yc(n,e,t=e,s=ue.empty){if(e==t&&!s.size)return null;let o=n.resolve(e),a=n.resolve(t);return jv(o,a,s)?new Nt(e,t,s):new zT(o,a,s).fit()}function jv(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class zT{constructor(e,t,s){this.$from=e,this.$to=t,this.unplaced=s,this.frontier=[],this.placed=W.empty;for(let o=0;o<=e.depth;o++){let a=e.node(o);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=W.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let p=this.findFittable();p?this.placeNodes(p):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,s=this.$from,o=this.close(e<0?this.$to:s.doc.resolve(e));if(!o)return null;let a=this.placed,c=s.depth,d=o.depth;for(;c&&d&&a.childCount==1;)a=a.firstChild.content,c--,d--;let f=new ue(a,c,d);return e>-1?new At(s.pos,e,this.$to.pos,this.$to.end(),f,t):f.size||s.pos!=this.$to.pos?new Nt(s.pos,o.pos,f):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,s=0,o=this.unplaced.openEnd;s<e;s++){let a=t.firstChild;if(t.childCount>1&&(o=0),a.type.spec.isolating&&o<=s){e=s;break}t=a.content}for(let t=1;t<=2;t++)for(let s=t==1?e:this.unplaced.openStart;s>=0;s--){let o,a=null;s?(a=jf(this.unplaced.content,s-1).firstChild,o=a.content):o=this.unplaced.content;let c=o.firstChild;for(let d=this.depth;d>=0;d--){let{type:f,match:p}=this.frontier[d],g,y=null;if(t==1&&(c?p.matchType(c.type)||(y=p.fillBefore(W.from(c),!1)):a&&f.compatibleContent(a.type)))return{sliceDepth:s,frontierDepth:d,parent:a,inject:y};if(t==2&&c&&(g=p.findWrapping(c.type)))return{sliceDepth:s,frontierDepth:d,parent:a,wrap:g};if(a&&p.matchType(a.type))break}}}openMore(){let{content:e,openStart:t,openEnd:s}=this.unplaced,o=jf(e,t);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new ue(e,t+1,Math.max(s,o.size+t>=e.size-s?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:s}=this.unplaced,o=jf(e,t);if(o.childCount<=1&&t>0){let a=e.size-t<=t+o.size;this.unplaced=new ue(ka(e,t-1,1),t-1,a?t-1:s)}else this.unplaced=new ue(ka(e,t,1),t,s)}placeNodes({sliceDepth:e,frontierDepth:t,parent:s,inject:o,wrap:a}){for(;this.depth>t;)this.closeFrontierNode();if(a)for(let E=0;E<a.length;E++)this.openFrontierNode(a[E]);let c=this.unplaced,d=s?s.content:c.content,f=c.openStart-e,p=0,g=[],{match:y,type:b}=this.frontier[t];if(o){for(let E=0;E<o.childCount;E++)g.push(o.child(E));y=y.matchFragment(o)}let x=d.size+e-(c.content.size-c.openEnd);for(;p<d.childCount;){let E=d.child(p),T=y.matchType(E.type);if(!T)break;p++,(p>1||f==0||E.content.size)&&(y=T,g.push(zv(E.mark(b.allowedMarks(E.marks)),p==1?f:0,p==d.childCount?x:-1)))}let S=p==d.childCount;S||(x=-1),this.placed=Ea(this.placed,t,W.from(g)),this.frontier[t].match=y,S&&x<0&&s&&s.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,T=d;E<x;E++){let _=T.lastChild;this.frontier.push({type:_.type,match:_.contentMatchAt(_.childCount)}),T=_.content}this.unplaced=S?e==0?ue.empty:new ue(ka(c.content,e-1,1),e-1,x<0?c.openEnd:e-1):new ue(ka(c.content,e,p),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!zf(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:s}=this.$to,o=this.$to.after(s);for(;s>1&&o==this.$to.end(--s);)++o;return o}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:s,type:o}=this.frontier[t],a=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),c=zf(e,t,o,s,a);if(c){for(let d=t-1;d>=0;d--){let{match:f,type:p}=this.frontier[d],g=zf(e,d,p,f,!0);if(!g||g.childCount)continue e}return{depth:t,fit:c,move:a?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Ea(this.placed,t.depth,t.fit)),e=t.move;for(let s=t.depth+1;s<=e.depth;s++){let o=e.node(s),a=o.type.contentMatch.fillBefore(o.content,!0,e.index(s));this.openFrontierNode(o.type,o.attrs,a)}return e}openFrontierNode(e,t=null,s){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Ea(this.placed,this.depth,W.from(e.create(t,s))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(W.empty,!0);t.childCount&&(this.placed=Ea(this.placed,this.frontier.length,t))}}function ka(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(ka(n.firstChild.content,e-1,t)))}function Ea(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Ea(n.lastChild.content,e-1,t)))}function jf(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function zv(n,e,t){if(e<=0)return n;let s=n.content;return e>1&&(s=s.replaceChild(0,zv(s.firstChild,e-1,s.childCount==1?t-1:0))),e>0&&(s=n.type.contentMatch.fillBefore(s).append(s),t<=0&&(s=s.append(n.type.contentMatch.matchFragment(s).fillBefore(W.empty,!0)))),n.copy(s)}function zf(n,e,t,s,o){let a=n.node(e),c=o?n.indexAfter(e):n.index(e);if(c==a.childCount&&!t.compatibleContent(a.type))return null;let d=s.fillBefore(a.content,!0,c);return d&&!_T(t,a.content,c)?d:null}function _T(n,e,t){for(let s=t;s<e.childCount;s++)if(!n.allowsMarks(e.child(s).marks))return!0;return!1}function BT(n){return n.spec.defining||n.spec.definingForContent}function LT(n,e,t,s){if(!s.size)return n.deleteRange(e,t);let o=n.doc.resolve(e),a=n.doc.resolve(t);if(jv(o,a,s))return n.step(new Nt(e,t,s));let c=Bv(o,n.doc.resolve(t));c[c.length-1]==0&&c.pop();let d=-(o.depth+1);c.unshift(d);for(let b=o.depth,x=o.pos-1;b>0;b--,x--){let S=o.node(b).type.spec;if(S.defining||S.definingAsContext||S.isolating)break;c.indexOf(b)>-1?d=b:o.before(b)==x&&c.splice(1,0,-b)}let f=c.indexOf(d),p=[],g=s.openStart;for(let b=s.content,x=0;;x++){let S=b.firstChild;if(p.push(S),x==s.openStart)break;b=S.content}for(let b=g-1;b>=0;b--){let x=p[b],S=BT(x.type);if(S&&!x.sameMarkup(o.node(Math.abs(d)-1)))g=b;else if(S||!x.type.isTextblock)break}for(let b=s.openStart;b>=0;b--){let x=(b+g+1)%(s.openStart+1),S=p[x];if(S)for(let E=0;E<c.length;E++){let T=c[(E+f)%c.length],_=!0;T<0&&(_=!1,T=-T);let F=o.node(T-1),Y=o.index(T-1);if(F.canReplaceWith(Y,Y,S.type,S.marks))return n.replace(o.before(T),_?a.after(T):t,new ue(_v(s.content,0,s.openStart,x),x,s.openEnd))}}let y=n.steps.length;for(let b=c.length-1;b>=0&&(n.replace(e,t,s),!(n.steps.length>y));b--){let x=c[b];x<0||(e=o.before(x),t=a.after(x))}}function _v(n,e,t,s,o){if(e<t){let a=n.firstChild;n=n.replaceChild(0,a.copy(_v(a.content,e+1,t,s,a)))}if(e>s){let a=o.contentMatchAt(0),c=a.fillBefore(n).append(n);n=c.append(a.matchFragment(c).fillBefore(W.empty,!0))}return n}function qT(n,e,t,s){if(!s.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let o=jT(n.doc,e,s.type);o!=null&&(e=t=o)}n.replaceRange(e,t,new ue(W.from(s),0,0))}function UT(n,e,t){let s=n.doc.resolve(e),o=n.doc.resolve(t),a=Bv(s,o);for(let c=0;c<a.length;c++){let d=a[c],f=c==a.length-1;if(f&&d==0||s.node(d).type.contentMatch.validEnd)return n.delete(s.start(d),o.end(d));if(d>0&&(f||s.node(d-1).canReplace(s.index(d-1),o.indexAfter(d-1))))return n.delete(s.before(d),o.after(d))}for(let c=1;c<=s.depth&&c<=o.depth;c++)if(e-s.start(c)==s.depth-c&&t>s.end(c)&&o.end(c)-t!=o.depth-c&&s.start(c-1)==o.start(c-1)&&s.node(c-1).canReplace(s.index(c-1),o.index(c-1)))return n.delete(s.before(c),t);n.delete(e,t)}function Bv(n,e){let t=[],s=Math.min(n.depth,e.depth);for(let o=s;o>=0;o--){let a=n.start(o);if(a<n.pos-(n.depth-o)||e.end(o)>e.pos+(e.depth-o)||n.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(a==e.start(o)||o==n.depth&&o==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==a-1)&&t.push(o)}return t}class lo extends Gt{constructor(e,t,s){super(),this.pos=e,this.attr=t,this.value=s}apply(e){let t=e.nodeAt(this.pos);if(!t)return gt.fail("No node at attribute step's position");let s=Object.create(null);for(let a in t.attrs)s[a]=t.attrs[a];s[this.attr]=this.value;let o=t.type.create(s,null,t.marks);return gt.fromReplace(e,this.pos,this.pos+1,new ue(W.from(o),0,t.isLeaf?0:1))}getMap(){return vn.empty}invert(e){return new lo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new lo(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new lo(t.pos,t.attr,t.value)}}Gt.jsonID("attr",lo);class qa extends Gt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let o in e.attrs)t[o]=e.attrs[o];t[this.attr]=this.value;let s=e.type.create(t,e.content,e.marks);return gt.ok(s)}getMap(){return vn.empty}invert(e){return new qa(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new qa(t.attr,t.value)}}Gt.jsonID("docAttr",qa);let fo=class extends Error{};fo=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};fo.prototype=Object.create(Error.prototype);fo.prototype.constructor=fo;fo.prototype.name="TransformError";class VT{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new La}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new fo(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,s=ue.empty){let o=Yc(this.doc,e,t,s);return o&&this.step(o),this}replaceWith(e,t,s){return this.replace(e,t,new ue(W.from(s),0,0))}delete(e,t){return this.replace(e,t,ue.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,s){return LT(this,e,t,s),this}replaceRangeWith(e,t,s){return qT(this,e,t,s),this}deleteRange(e,t){return UT(this,e,t),this}lift(e,t){return kT(this,e,t),this}join(e,t=1){return DT(this,e,t),this}wrap(e,t){return CT(this,e,t),this}setBlockType(e,t=e,s,o=null){return MT(this,e,t,s,o),this}setNodeMarkup(e,t,s=null,o){return AT(this,e,t,s,o),this}setNodeAttribute(e,t,s){return this.step(new lo(e,t,s)),this}setDocAttribute(e,t){return this.step(new qa(e,t)),this}addNodeMark(e,t){return this.step(new ps(e,t)),this}removeNodeMark(e,t){let s=this.doc.nodeAt(e);if(!s)throw new RangeError("No node at position "+e);if(t instanceof Ke)t.isInSet(s.marks)&&this.step(new ai(e,t));else{let o=s.marks,a,c=[];for(;a=t.isInSet(o);)c.push(new ai(e,a)),o=a.removeFromSet(o);for(let d=c.length-1;d>=0;d--)this.step(c[d])}return this}split(e,t=1,s){return OT(this,e,t,s),this}addMark(e,t,s){return xT(this,e,t,s),this}removeMark(e,t,s){return ST(this,e,t,s),this}clearIncompatible(e,t,s){return Bh(this,e,t,s),this}}const _f=Object.create(null);class Ne{constructor(e,t,s){this.$anchor=e,this.$head=t,this.ranges=s||[new IT(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=ue.empty){let s=t.content.lastChild,o=null;for(let d=0;d<t.openEnd;d++)o=s,s=s.lastChild;let a=e.steps.length,c=this.ranges;for(let d=0;d<c.length;d++){let{$from:f,$to:p}=c[d],g=e.mapping.slice(a);e.replaceRange(g.map(f.pos),g.map(p.pos),d?ue.empty:t),d==0&&Bb(e,a,(s?s.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:c,$to:d}=o[a],f=e.mapping.slice(s),p=f.map(c.pos),g=f.map(d.pos);a?e.deleteRange(p,g):(e.replaceRangeWith(p,g,t),Bb(e,s,t.isInline?-1:1))}}static findFrom(e,t,s=!1){let o=e.parent.inlineContent?new we(e):ro(e.node(0),e.parent,e.pos,e.index(),t,s);if(o)return o;for(let a=e.depth-1;a>=0;a--){let c=t<0?ro(e.node(0),e.node(a),e.before(a+1),e.index(a),t,s):ro(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,t,s);if(c)return c}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Sn(e.node(0))}static atStart(e){return ro(e,e,0,0,1)||new Sn(e)}static atEnd(e){return ro(e,e,e.content.size,e.childCount,-1)||new Sn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let s=_f[t.type];if(!s)throw new RangeError(`No selection type ${t.type} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in _f)throw new RangeError("Duplicate use of selection JSON ID "+e);return _f[e]=t,t.prototype.jsonID=e,t}getBookmark(){return we.between(this.$anchor,this.$head).getBookmark()}}Ne.prototype.visible=!0;class IT{constructor(e,t){this.$from=e,this.$to=t}}let zb=!1;function _b(n){!zb&&!n.parent.inlineContent&&(zb=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class we extends Ne{constructor(e,t=e){_b(e),_b(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let s=e.resolve(t.map(this.head));if(!s.parent.inlineContent)return Ne.near(s);let o=e.resolve(t.map(this.anchor));return new we(o.parent.inlineContent?o:s,s)}replace(e,t=ue.empty){if(super.replace(e,t),t==ue.empty){let s=this.$from.marksAcross(this.$to);s&&e.ensureMarks(s)}}eq(e){return e instanceof we&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Kc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new we(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,s=t){let o=e.resolve(t);return new this(o,s==t?o:e.resolve(s))}static between(e,t,s){let o=e.pos-t.pos;if((!s||o)&&(s=o>=0?1:-1),!t.parent.inlineContent){let a=Ne.findFrom(t,s,!0)||Ne.findFrom(t,-s,!0);if(a)t=a.$head;else return Ne.near(t,s)}return e.parent.inlineContent||(o==0?e=t:(e=(Ne.findFrom(e,-s,!0)||Ne.findFrom(e,s,!0)).$anchor,e.pos<t.pos!=o<0&&(e=t))),new we(e,t)}}Ne.jsonID("text",we);class Kc{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Kc(e.map(this.anchor),e.map(this.head))}resolve(e){return we.between(e.resolve(this.anchor),e.resolve(this.head))}}class ye extends Ne{constructor(e){let t=e.nodeAfter,s=e.node(0).resolve(e.pos+t.nodeSize);super(e,s),this.node=t}map(e,t){let{deleted:s,pos:o}=t.mapResult(this.anchor),a=e.resolve(o);return s?Ne.near(a):new ye(a)}content(){return new ue(W.from(this.node),0,0)}eq(e){return e instanceof ye&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new qh(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ye(e.resolve(t.anchor))}static create(e,t){return new ye(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ye.prototype.visible=!1;Ne.jsonID("node",ye);class qh{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:s}=e.mapResult(this.anchor);return t?new Kc(s,s):new qh(s)}resolve(e){let t=e.resolve(this.anchor),s=t.nodeAfter;return s&&ye.isSelectable(s)?new ye(t):Ne.near(t)}}class Sn extends Ne{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=ue.empty){if(t==ue.empty){e.delete(0,e.doc.content.size);let s=Ne.atStart(e.doc);s.eq(e.selection)||e.setSelection(s)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Sn(e)}map(e){return new Sn(e)}eq(e){return e instanceof Sn}getBookmark(){return HT}}Ne.jsonID("all",Sn);const HT={map(){return this},resolve(n){return new Sn(n)}};function ro(n,e,t,s,o,a=!1){if(e.inlineContent)return we.create(n,t);for(let c=s-(o>0?0:1);o>0?c<e.childCount:c>=0;c+=o){let d=e.child(c);if(d.isAtom){if(!a&&ye.isSelectable(d))return ye.create(n,t-(o<0?d.nodeSize:0))}else{let f=ro(n,d,t+o,o<0?d.childCount:0,o,a);if(f)return f}t+=d.nodeSize*o}return null}function Bb(n,e,t){let s=n.steps.length-1;if(s<e)return;let o=n.steps[s];if(!(o instanceof Nt||o instanceof At))return;let a=n.mapping.maps[s],c;a.forEach((d,f,p,g)=>{c==null&&(c=g)}),n.setSelection(Ne.near(n.doc.resolve(c),t))}const Lb=1,qb=2,Ub=4;class PT extends VT{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Lb)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Lb)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=qb,this}ensureMarks(e){return Ke.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&qb)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let s=this.selection;return t&&(e=e.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||Ke.none))),s.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,s){let o=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(s==null&&(s=t),s=s??t,!e)return this.deleteRange(t,s);let a=this.storedMarks;if(!a){let c=this.doc.resolve(t);a=s==t?c.marks():c.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(t,s,o.text(e,a)),this.selection.empty||this.setSelection(Ne.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Ub,this}get scrolledIntoView(){return(this.updated&Ub)>0}}function Vb(n,e){return!e||!n?n:n.bind(e)}class Ta{constructor(e,t,s){this.name=e,this.init=Vb(t.init,s),this.apply=Vb(t.apply,s)}}const $T=[new Ta("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Ta("selection",{init(n,e){return n.selection||Ne.atStart(e.doc)},apply(n){return n.selection}}),new Ta("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,s){return s.selection.$cursor?n.storedMarks:null}}),new Ta("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Bf{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=$T.slice(),t&&t.forEach(s=>{if(this.pluginsByKey[s.key])throw new RangeError("Adding different instances of a keyed plugin ("+s.key+")");this.plugins.push(s),this.pluginsByKey[s.key]=s,s.spec.state&&this.fields.push(new Ta(s.key,s.spec.state,s))})}}class oo{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let s=0;s<this.config.plugins.length;s++)if(s!=t){let o=this.config.plugins[s];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],s=this.applyInner(e),o=null;for(;;){let a=!1;for(let c=0;c<this.config.plugins.length;c++){let d=this.config.plugins[c];if(d.spec.appendTransaction){let f=o?o[c].n:0,p=o?o[c].state:this,g=f<t.length&&d.spec.appendTransaction.call(d,f?t.slice(f):t,p,s);if(g&&s.filterTransaction(g,c)){if(g.setMeta("appendedTransaction",e),!o){o=[];for(let y=0;y<this.config.plugins.length;y++)o.push(y<c?{state:s,n:t.length}:{state:this,n:0})}t.push(g),s=s.applyInner(g),a=!0}o&&(o[c]={state:s,n:t.length})}}if(!a)return{state:s,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new oo(this.config),s=this.config.fields;for(let o=0;o<s.length;o++){let a=s[o];t[a.name]=a.apply(e,this[a.name],this,t)}return t}get tr(){return new PT(this)}static create(e){let t=new Bf(e.doc?e.doc.type.schema:e.schema,e.plugins),s=new oo(t);for(let o=0;o<t.fields.length;o++)s[t.fields[o].name]=t.fields[o].init(e,s);return s}reconfigure(e){let t=new Bf(this.schema,e.plugins),s=t.fields,o=new oo(t);for(let a=0;a<s.length;a++){let c=s[a].name;o[c]=this.hasOwnProperty(c)?this[c]:s[a].init(e,o)}return o}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(s=>s.toJSON())),e&&typeof e=="object")for(let s in e){if(s=="doc"||s=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[s],a=o.spec.state;a&&a.toJSON&&(t[s]=a.toJSON.call(o,this[o.key]))}return t}static fromJSON(e,t,s){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Bf(e.schema,e.plugins),a=new oo(o);return o.fields.forEach(c=>{if(c.name=="doc")a.doc=gs.fromJSON(e.schema,t.doc);else if(c.name=="selection")a.selection=Ne.fromJSON(a.doc,t.selection);else if(c.name=="storedMarks")t.storedMarks&&(a.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(s)for(let d in s){let f=s[d],p=f.spec.state;if(f.key==c.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(t,d)){a[c.name]=p.fromJSON.call(f,e,t[d],a);return}}a[c.name]=c.init(e,a)}}),a}}function Lv(n,e,t){for(let s in n){let o=n[s];o instanceof Function?o=o.bind(e):s=="handleDOMEvents"&&(o=Lv(o,e,{})),t[s]=o}return t}class nn{constructor(e){this.spec=e,this.props={},e.props&&Lv(e.props,this,this.props),this.key=e.key?e.key.key:qv("plugin")}getState(e){return e[this.key]}}const Lf=Object.create(null);function qv(n){return n in Lf?n+"$"+ ++Lf[n]:(Lf[n]=0,n+"$")}class Kn{constructor(e="key"){this.key=qv(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const qt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},ho=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let dh=null;const Nr=function(n,e,t){let s=dh||(dh=document.createRange());return s.setEnd(n,t??n.nodeValue.length),s.setStart(n,e||0),s},FT=function(){dh=null},li=function(n,e,t,s){return t&&(Ib(n,e,t,s,-1)||Ib(n,e,t,s,1))},QT=/^(img|br|input|textarea|hr)$/i;function Ib(n,e,t,s,o){for(;;){if(n==t&&e==s)return!0;if(e==(o<0?0:_n(n))){let a=n.parentNode;if(!a||a.nodeType!=1||$a(n)||QT.test(n.nodeName)||n.contentEditable=="false")return!1;e=qt(n)+(o<0?0:1),n=a}else if(n.nodeType==1){if(n=n.childNodes[e+(o<0?-1:0)],n.contentEditable=="false")return!1;e=o<0?_n(n):0}else return!1}}function _n(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function GT(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=_n(n)}else if(n.parentNode&&!$a(n))e=qt(n),n=n.parentNode;else return null}}function YT(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!$a(n))e=qt(n)+1,n=n.parentNode;else return null}}function KT(n,e,t){for(let s=e==0,o=e==_n(n);s||o;){if(n==t)return!0;let a=qt(n);if(n=n.parentNode,!n)return!1;s=s&&a==0,o=o&&a==_n(n)}}function $a(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Xc=function(n){return n.focusNode&&li(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Ks(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function XT(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function JT(n,e,t){if(n.caretPositionFromPoint)try{let s=n.caretPositionFromPoint(e,t);if(s)return{node:s.offsetNode,offset:Math.min(_n(s.offsetNode),s.offset)}}catch{}if(n.caretRangeFromPoint){let s=n.caretRangeFromPoint(e,t);if(s)return{node:s.startContainer,offset:Math.min(_n(s.startContainer),s.startOffset)}}}const lr=typeof navigator<"u"?navigator:null,Hb=typeof document<"u"?document:null,Es=lr&&lr.userAgent||"",fh=/Edge\/(\d+)/.exec(Es),Uv=/MSIE \d/.exec(Es),hh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Es),un=!!(Uv||hh||fh),bs=Uv?document.documentMode:hh?+hh[1]:fh?+fh[1]:0,Yn=!un&&/gecko\/(\d+)/i.test(Es);Yn&&+(/Firefox\/(\d+)/.exec(Es)||[0,0])[1];const ph=!un&&/Chrome\/(\d+)/.exec(Es),$t=!!ph,Vv=ph?+ph[1]:0,Wt=!un&&!!lr&&/Apple Computer/.test(lr.vendor),po=Wt&&(/Mobile\/\w+/.test(Es)||!!lr&&lr.maxTouchPoints>2),zn=po||(lr?/Mac/.test(lr.platform):!1),ZT=lr?/Win/.test(lr.platform):!1,Ar=/Android \d/.test(Es),Fa=!!Hb&&"webkitFontSmoothing"in Hb.documentElement.style,WT=Fa?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function eC(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Mr(n,e){return typeof n=="number"?n:n[e]}function tC(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,s=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*s}}function Pb(n,e,t){let s=n.someProp("scrollThreshold")||0,o=n.someProp("scrollMargin")||5,a=n.dom.ownerDocument;for(let c=t||n.dom;c;){if(c.nodeType!=1){c=ho(c);continue}let d=c,f=d==a.body,p=f?eC(a):tC(d),g=0,y=0;if(e.top<p.top+Mr(s,"top")?y=-(p.top-e.top+Mr(o,"top")):e.bottom>p.bottom-Mr(s,"bottom")&&(y=e.bottom-e.top>p.bottom-p.top?e.top+Mr(o,"top")-p.top:e.bottom-p.bottom+Mr(o,"bottom")),e.left<p.left+Mr(s,"left")?g=-(p.left-e.left+Mr(o,"left")):e.right>p.right-Mr(s,"right")&&(g=e.right-p.right+Mr(o,"right")),g||y)if(f)a.defaultView.scrollBy(g,y);else{let x=d.scrollLeft,S=d.scrollTop;y&&(d.scrollTop+=y),g&&(d.scrollLeft+=g);let E=d.scrollLeft-x,T=d.scrollTop-S;e={left:e.left-E,top:e.top-T,right:e.right-E,bottom:e.bottom-T}}let b=f?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(b))break;c=b=="absolute"?c.offsetParent:ho(c)}}function nC(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),s,o;for(let a=(e.left+e.right)/2,c=t+1;c<Math.min(innerHeight,e.bottom);c+=5){let d=n.root.elementFromPoint(a,c);if(!d||d==n.dom||!n.dom.contains(d))continue;let f=d.getBoundingClientRect();if(f.top>=t-20){s=d,o=f.top;break}}return{refDOM:s,refTop:o,stack:Iv(n.dom)}}function Iv(n){let e=[],t=n.ownerDocument;for(let s=n;s&&(e.push({dom:s,top:s.scrollTop,left:s.scrollLeft}),n!=t);s=ho(s));return e}function rC({refDOM:n,refTop:e,stack:t}){let s=n?n.getBoundingClientRect().top:0;Hv(t,s==0?0:s-e)}function Hv(n,e){for(let t=0;t<n.length;t++){let{dom:s,top:o,left:a}=n[t];s.scrollTop!=o+e&&(s.scrollTop=o+e),s.scrollLeft!=a&&(s.scrollLeft=a)}}let eo=null;function sC(n){if(n.setActive)return n.setActive();if(eo)return n.focus(eo);let e=Iv(n);n.focus(eo==null?{get preventScroll(){return eo={preventScroll:!0},!0}}:void 0),eo||(eo=!1,Hv(e,0))}function Pv(n,e){let t,s=2e8,o,a=0,c=e.top,d=e.top,f,p;for(let g=n.firstChild,y=0;g;g=g.nextSibling,y++){let b;if(g.nodeType==1)b=g.getClientRects();else if(g.nodeType==3)b=Nr(g).getClientRects();else continue;for(let x=0;x<b.length;x++){let S=b[x];if(S.top<=c&&S.bottom>=d){c=Math.max(S.bottom,c),d=Math.min(S.top,d);let E=S.left>e.left?S.left-e.left:S.right<e.left?e.left-S.right:0;if(E<s){t=g,s=E,o=E&&t.nodeType==3?{left:S.right<e.left?S.right:S.left,top:e.top}:e,g.nodeType==1&&E&&(a=y+(e.left>=(S.left+S.right)/2?1:0));continue}}else S.top>e.top&&!f&&S.left<=e.left&&S.right>=e.left&&(f=g,p={left:Math.max(S.left,Math.min(S.right,e.left)),top:S.top});!t&&(e.left>=S.right&&e.top>=S.top||e.left>=S.left&&e.top>=S.bottom)&&(a=y+1)}}return!t&&f&&(t=f,o=p,s=0),t&&t.nodeType==3?iC(t,o):!t||s&&t.nodeType==1?{node:n,offset:a}:Pv(t,o)}function iC(n,e){let t=n.nodeValue.length,s=document.createRange();for(let o=0;o<t;o++){s.setEnd(n,o+1),s.setStart(n,o);let a=as(s,1);if(a.top!=a.bottom&&Uh(e,a))return{node:n,offset:o+(e.left>=(a.left+a.right)/2?1:0)}}return{node:n,offset:0}}function Uh(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function oC(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function aC(n,e,t){let{node:s,offset:o}=Pv(e,t),a=-1;if(s.nodeType==1&&!s.firstChild){let c=s.getBoundingClientRect();a=c.left!=c.right&&t.left>(c.left+c.right)/2?1:-1}return n.docView.posFromDOM(s,o,a)}function lC(n,e,t,s){let o=-1;for(let a=e,c=!1;a!=n.dom;){let d=n.docView.nearestDesc(a,!0),f;if(!d)return null;if(d.dom.nodeType==1&&(d.node.isBlock&&d.parent||!d.contentDOM)&&((f=d.dom.getBoundingClientRect()).width||f.height)&&(d.node.isBlock&&d.parent&&(!c&&f.left>s.left||f.top>s.top?o=d.posBefore:(!c&&f.right<s.left||f.bottom<s.top)&&(o=d.posAfter),c=!0),!d.contentDOM&&o<0&&!d.node.isText))return(d.node.isBlock?s.top<(f.top+f.bottom)/2:s.left<(f.left+f.right)/2)?d.posBefore:d.posAfter;a=d.dom.parentNode}return o>-1?o:n.docView.posFromDOM(e,t,-1)}function $v(n,e,t){let s=n.childNodes.length;if(s&&t.top<t.bottom)for(let o=Math.max(0,Math.min(s-1,Math.floor(s*(e.top-t.top)/(t.bottom-t.top))-2)),a=o;;){let c=n.childNodes[a];if(c.nodeType==1){let d=c.getClientRects();for(let f=0;f<d.length;f++){let p=d[f];if(Uh(e,p))return $v(c,e,p)}}if((a=(a+1)%s)==o)break}return n}function cC(n,e){let t=n.dom.ownerDocument,s,o=0,a=JT(t,e.left,e.top);a&&({node:s,offset:o}=a);let c=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),d;if(!c||!n.dom.contains(c.nodeType!=1?c.parentNode:c)){let p=n.dom.getBoundingClientRect();if(!Uh(e,p)||(c=$v(n.dom,e,p),!c))return null}if(Wt)for(let p=c;s&&p;p=ho(p))p.draggable&&(s=void 0);if(c=oC(c,e),s){if(Yn&&s.nodeType==1&&(o=Math.min(o,s.childNodes.length),o<s.childNodes.length)){let g=s.childNodes[o],y;g.nodeName=="IMG"&&(y=g.getBoundingClientRect()).right<=e.left&&y.bottom>e.top&&o++}let p;Fa&&o&&s.nodeType==1&&(p=s.childNodes[o-1]).nodeType==1&&p.contentEditable=="false"&&p.getBoundingClientRect().top>=e.top&&o--,s==n.dom&&o==s.childNodes.length-1&&s.lastChild.nodeType==1&&e.top>s.lastChild.getBoundingClientRect().bottom?d=n.state.doc.content.size:(o==0||s.nodeType!=1||s.childNodes[o-1].nodeName!="BR")&&(d=lC(n,s,o,e))}d==null&&(d=aC(n,c,e));let f=n.docView.nearestDesc(c,!0);return{pos:d,inside:f?f.posAtStart-f.border:-1}}function $b(n){return n.top<n.bottom||n.left<n.right}function as(n,e){let t=n.getClientRects();if(t.length){let s=t[e<0?0:t.length-1];if($b(s))return s}return Array.prototype.find.call(t,$b)||n.getBoundingClientRect()}const uC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Fv(n,e,t){let{node:s,offset:o,atom:a}=n.docView.domFromPos(e,t<0?-1:1),c=Fa||Yn;if(s.nodeType==3)if(c&&(uC.test(s.nodeValue)||(t<0?!o:o==s.nodeValue.length))){let f=as(Nr(s,o,o),t);if(Yn&&o&&/\s/.test(s.nodeValue[o-1])&&o<s.nodeValue.length){let p=as(Nr(s,o-1,o-1),-1);if(p.top==f.top){let g=as(Nr(s,o,o+1),-1);if(g.top!=f.top)return xa(g,g.left<p.left)}}return f}else{let f=o,p=o,g=t<0?1:-1;return t<0&&!o?(p++,g=-1):t>=0&&o==s.nodeValue.length?(f--,g=1):t<0?f--:p++,xa(as(Nr(s,f,p),g),g<0)}if(!n.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&o&&(t<0||o==_n(s))){let f=s.childNodes[o-1];if(f.nodeType==1)return qf(f.getBoundingClientRect(),!1)}if(a==null&&o<_n(s)){let f=s.childNodes[o];if(f.nodeType==1)return qf(f.getBoundingClientRect(),!0)}return qf(s.getBoundingClientRect(),t>=0)}if(a==null&&o&&(t<0||o==_n(s))){let f=s.childNodes[o-1],p=f.nodeType==3?Nr(f,_n(f)-(c?0:1)):f.nodeType==1&&(f.nodeName!="BR"||!f.nextSibling)?f:null;if(p)return xa(as(p,1),!1)}if(a==null&&o<_n(s)){let f=s.childNodes[o];for(;f.pmViewDesc&&f.pmViewDesc.ignoreForCoords;)f=f.nextSibling;let p=f?f.nodeType==3?Nr(f,0,c?0:1):f.nodeType==1?f:null:null;if(p)return xa(as(p,-1),!0)}return xa(as(s.nodeType==3?Nr(s):s,-t),t>=0)}function xa(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function qf(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Qv(n,e,t){let s=n.state,o=n.root.activeElement;s!=e&&n.updateState(e),o!=n.dom&&n.focus();try{return t()}finally{s!=e&&n.updateState(s),o!=n.dom&&o&&o.focus()}}function dC(n,e,t){let s=e.selection,o=t=="up"?s.$from:s.$to;return Qv(n,e,()=>{let{node:a}=n.docView.domFromPos(o.pos,t=="up"?-1:1);for(;;){let d=n.docView.nearestDesc(a,!0);if(!d)break;if(d.node.isBlock){a=d.contentDOM||d.dom;break}a=d.dom.parentNode}let c=Fv(n,o.pos,1);for(let d=a.firstChild;d;d=d.nextSibling){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=Nr(d,0,d.nodeValue.length).getClientRects();else continue;for(let p=0;p<f.length;p++){let g=f[p];if(g.bottom>g.top+1&&(t=="up"?c.top-g.top>(g.bottom-c.top)*2:g.bottom-c.bottom>(c.bottom-g.top)*2))return!1}}return!0})}const fC=/[\u0590-\u08ac]/;function hC(n,e,t){let{$head:s}=e.selection;if(!s.parent.isTextblock)return!1;let o=s.parentOffset,a=!o,c=o==s.parent.content.size,d=n.domSelection();return d?!fC.test(s.parent.textContent)||!d.modify?t=="left"||t=="backward"?a:c:Qv(n,e,()=>{let{focusNode:f,focusOffset:p,anchorNode:g,anchorOffset:y}=n.domSelectionRange(),b=d.caretBidiLevel;d.modify("move",t,"character");let x=s.depth?n.docView.domAfterPos(s.before()):n.dom,{focusNode:S,focusOffset:E}=n.domSelectionRange(),T=S&&!x.contains(S.nodeType==1?S:S.parentNode)||f==S&&p==E;try{d.collapse(g,y),f&&(f!=g||p!=y)&&d.extend&&d.extend(f,p)}catch{}return b!=null&&(d.caretBidiLevel=b),T}):s.pos==s.start()||s.pos==s.end()}let Fb=null,Qb=null,Gb=!1;function pC(n,e,t){return Fb==e&&Qb==t?Gb:(Fb=e,Qb=t,Gb=t=="up"||t=="down"?dC(n,e,t):hC(n,e,t))}const Bn=0,Yb=1,Js=2,cr=3;class Qa{constructor(e,t,s,o){this.parent=e,this.children=t,this.dom=s,this.contentDOM=o,this.dirty=Bn,s.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,s){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,s=this.posAtStart;;t++){let o=this.children[t];if(o==e)return s;s+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,s){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(s<0){let a,c;if(e==this.contentDOM)a=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((c=a.pmViewDesc)&&c.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(c)+c.size:this.posAtStart}else{let a,c;if(e==this.contentDOM)a=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((c=a.pmViewDesc)&&c.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(c):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=t>qt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let a=e;;a=a.parentNode){if(a==this.dom){o=!1;break}if(a.previousSibling)break}if(o==null&&t==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){o=!0;break}if(a.nextSibling)break}}return o??s>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let s=!0,o=e;o;o=o.parentNode){let a=this.getDesc(o),c;if(a&&(!t||a.node))if(s&&(c=a.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))s=!1;else return a}}getDesc(e){let t=e.pmViewDesc;for(let s=t;s;s=s.parent)if(s==this)return t}posFromDOM(e,t,s){for(let o=e;o;o=o.parentNode){let a=this.getDesc(o);if(a)return a.localPosFromDOM(e,t,s)}return-1}descAt(e){for(let t=0,s=0;t<this.children.length;t++){let o=this.children[t],a=s+o.size;if(s==e&&a!=s){for(;!o.border&&o.children.length;)for(let c=0;c<o.children.length;c++){let d=o.children[c];if(d.size){o=d;break}}return o}if(e<a)return o.descAt(e-s-o.border);s=a}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let s=0,o=0;for(let a=0;s<this.children.length;s++){let c=this.children[s],d=a+c.size;if(d>e||c instanceof Yv){o=e-a;break}a=d}if(o)return this.children[s].domFromPos(o-this.children[s].border,t);for(let a;s&&!(a=this.children[s-1]).size&&a instanceof Gv&&a.side>=0;s--);if(t<=0){let a,c=!0;for(;a=s?this.children[s-1]:null,!(!a||a.dom.parentNode==this.contentDOM);s--,c=!1);return a&&t&&c&&!a.border&&!a.domAtom?a.domFromPos(a.size,t):{node:this.contentDOM,offset:a?qt(a.dom)+1:0}}else{let a,c=!0;for(;a=s<this.children.length?this.children[s]:null,!(!a||a.dom.parentNode==this.contentDOM);s++,c=!1);return a&&c&&!a.border&&!a.domAtom?a.domFromPos(0,t):{node:this.contentDOM,offset:a?qt(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,s=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,a=-1;for(let c=s,d=0;;d++){let f=this.children[d],p=c+f.size;if(o==-1&&e<=p){let g=c+f.border;if(e>=g&&t<=p-f.border&&f.node&&f.contentDOM&&this.contentDOM.contains(f.contentDOM))return f.parseRange(e,t,g);e=c;for(let y=d;y>0;y--){let b=this.children[y-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){o=qt(b.dom)+1;break}e-=b.size}o==-1&&(o=0)}if(o>-1&&(p>t||d==this.children.length-1)){t=p;for(let g=d+1;g<this.children.length;g++){let y=this.children[g];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){a=qt(y.dom);break}t+=y.size}a==-1&&(a=this.contentDOM.childNodes.length);break}c=p}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:s}=this.domFromPos(e,0);if(t.nodeType!=1||s==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[s]}setSelection(e,t,s,o=!1){let a=Math.min(e,t),c=Math.max(e,t);for(let x=0,S=0;x<this.children.length;x++){let E=this.children[x],T=S+E.size;if(a>S&&c<T)return E.setSelection(e-S-E.border,t-S-E.border,s,o);S=T}let d=this.domFromPos(e,e?-1:1),f=t==e?d:this.domFromPos(t,t?-1:1),p=s.root.getSelection(),g=s.domSelectionRange(),y=!1;if((Yn||Wt)&&e==t){let{node:x,offset:S}=d;if(x.nodeType==3){if(y=!!(S&&x.nodeValue[S-1]==`
`),y&&S==x.nodeValue.length)for(let E=x,T;E;E=E.parentNode){if(T=E.nextSibling){T.nodeName=="BR"&&(d=f={node:T.parentNode,offset:qt(T)+1});break}let _=E.pmViewDesc;if(_&&_.node&&_.node.isBlock)break}}else{let E=x.childNodes[S-1];y=E&&(E.nodeName=="BR"||E.contentEditable=="false")}}if(Yn&&g.focusNode&&g.focusNode!=f.node&&g.focusNode.nodeType==1){let x=g.focusNode.childNodes[g.focusOffset];x&&x.contentEditable=="false"&&(o=!0)}if(!(o||y&&Wt)&&li(d.node,d.offset,g.anchorNode,g.anchorOffset)&&li(f.node,f.offset,g.focusNode,g.focusOffset))return;let b=!1;if((p.extend||e==t)&&!y){p.collapse(d.node,d.offset);try{e!=t&&p.extend(f.node,f.offset),b=!0}catch{}}if(!b){if(e>t){let S=d;d=f,f=S}let x=document.createRange();x.setEnd(f.node,f.offset),x.setStart(d.node,d.offset),p.removeAllRanges(),p.addRange(x)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let s=0,o=0;o<this.children.length;o++){let a=this.children[o],c=s+a.size;if(s==c?e<=c&&t>=s:e<c&&t>s){let d=s+a.border,f=c-a.border;if(e>=d&&t<=f){this.dirty=e==s||t==c?Js:Yb,e==d&&t==f&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=cr:a.markDirty(e-d,t-d);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?Js:cr}s=c}this.dirty=Js}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let s=e==1?Js:Yb;t.dirty<s&&(t.dirty=s)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Gv extends Qa{constructor(e,t,s,o){let a,c=t.type.toDOM;if(typeof c=="function"&&(c=c(s,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)})),!t.type.spec.raw){if(c.nodeType!=1){let d=document.createElement("span");d.appendChild(c),c=d}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=t,this.widget=t,a=this}matchesWidget(e){return this.dirty==Bn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class mC extends Qa{constructor(e,t,s,o){super(e,[],t,null),this.textDOM=s,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ci extends Qa{constructor(e,t,s,o,a){super(e,[],s,o),this.mark=t,this.spec=a}static create(e,t,s,o){let a=o.nodeViews[t.type.name],c=a&&a(t,o,s);return(!c||!c.dom)&&(c=ui.renderSpec(document,t.type.spec.toDOM(t,s),null,t.attrs)),new ci(e,t,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&cr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=cr&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Bn){let s=this.parent;for(;!s.node;)s=s.parent;s.dirty<this.dirty&&(s.dirty=this.dirty),this.dirty=Bn}}slice(e,t,s){let o=ci.create(this.parent,this.mark,!0,s),a=this.children,c=this.size;t<c&&(a=gh(a,t,c,s)),e>0&&(a=gh(a,0,e,s));for(let d=0;d<a.length;d++)a[d].parent=o;return o.children=a,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class vs extends Qa{constructor(e,t,s,o,a,c,d,f,p){super(e,[],a,c),this.node=t,this.outerDeco=s,this.innerDeco=o,this.nodeDOM=d}static create(e,t,s,o,a,c){let d=a.nodeViews[t.type.name],f,p=d&&d(t,a,()=>{if(!f)return c;if(f.parent)return f.parent.posBeforeChild(f)},s,o),g=p&&p.dom,y=p&&p.contentDOM;if(t.isText){if(!g)g=document.createTextNode(t.text);else if(g.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else g||({dom:g,contentDOM:y}=ui.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!y&&!t.isText&&g.nodeName!="BR"&&(g.hasAttribute("contenteditable")||(g.contentEditable="false"),t.type.spec.draggable&&(g.draggable=!0));let b=g;return g=Jv(g,s,t),p?f=new gC(e,t,s,o,g,y||null,b,p,a,c+1):t.isText?new Jc(e,t,s,o,g,b,a):new vs(e,t,s,o,g,y||null,b,a,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let s=this.children[t];if(this.dom.contains(s.dom.parentNode)){e.contentElement=s.dom.parentNode;break}}e.contentElement||(e.getContent=()=>W.empty)}return e}matchesNode(e,t,s){return this.dirty==Bn&&e.eq(this.node)&&Bc(t,this.outerDeco)&&s.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let s=this.node.inlineContent,o=t,a=e.composing?this.localCompositionInfo(e,t):null,c=a&&a.pos>-1?a:null,d=a&&a.pos<0,f=new bC(this,c&&c.node,e);SC(this.node,this.innerDeco,(p,g,y)=>{p.spec.marks?f.syncToMarks(p.spec.marks,s,e):p.type.side>=0&&!y&&f.syncToMarks(g==this.node.childCount?Ke.none:this.node.child(g).marks,s,e),f.placeWidget(p,e,o)},(p,g,y,b)=>{f.syncToMarks(p.marks,s,e);let x;f.findNodeMatch(p,g,y,b)||d&&e.state.selection.from>o&&e.state.selection.to<o+p.nodeSize&&(x=f.findIndexWithChild(a.node))>-1&&f.updateNodeAt(p,g,y,x,e)||f.updateNextNode(p,g,y,e,b,o)||f.addNode(p,g,y,e,o),o+=p.nodeSize}),f.syncToMarks([],s,e),this.node.isTextblock&&f.addTextblockHacks(),f.destroyRest(),(f.changed||this.dirty==Js)&&(c&&this.protectLocalComposition(e,c),Kv(this.contentDOM,this.children,e),po&&wC(this.dom))}localCompositionInfo(e,t){let{from:s,to:o}=e.state.selection;if(!(e.state.selection instanceof we)||s<t||o>t+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let c=a.nodeValue,d=kC(this.node.content,c,s-t,o-t);return d<0?null:{node:a,pos:d,text:c}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:s,text:o}){if(this.getDesc(t))return;let a=t;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let c=new mC(this,a,t,o);e.input.compositionNodes.push(c),this.children=gh(this.children,s,s+o.length,e,c)}update(e,t,s,o){return this.dirty==cr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,s,o),!0)}updateInner(e,t,s,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=s,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=Bn}updateOuterDeco(e){if(Bc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,s=this.dom;this.dom=Xv(this.dom,this.nodeDOM,mh(this.outerDeco,this.node,t),mh(e,this.node,t)),this.dom!=s&&(s.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Kb(n,e,t,s,o){Jv(s,e,n);let a=new vs(void 0,n,e,t,s,s,s,o,0);return a.contentDOM&&a.updateChildren(o,0),a}class Jc extends vs{constructor(e,t,s,o,a,c,d){super(e,t,s,o,a,null,c,d,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,s,o){return this.dirty==cr||this.dirty!=Bn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Bn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=Bn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,s){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,s)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,s){let o=this.node.cut(e,t),a=document.createTextNode(o.text);return new Jc(this.parent,o,this.outerDeco,this.innerDeco,a,a,s)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=cr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Yv extends Qa{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Bn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class gC extends vs{constructor(e,t,s,o,a,c,d,f,p,g){super(e,t,s,o,a,c,d,p,g),this.spec=f}update(e,t,s,o){if(this.dirty==cr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,t,s);return a&&this.updateInner(e,t,s,o),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,s,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,s,o){this.spec.setSelection?this.spec.setSelection(e,t,s.root):super.setSelection(e,t,s,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Kv(n,e,t){let s=n.firstChild,o=!1;for(let a=0;a<e.length;a++){let c=e[a],d=c.dom;if(d.parentNode==n){for(;d!=s;)s=Xb(s),o=!0;s=s.nextSibling}else o=!0,n.insertBefore(d,s);if(c instanceof ci){let f=s?s.previousSibling:n.lastChild;Kv(c.contentDOM,c.children,t),s=f?f.nextSibling:n.firstChild}}for(;s;)s=Xb(s),o=!0;o&&t.trackWrites==n&&(t.trackWrites=null)}const Aa=function(n){n&&(this.nodeName=n)};Aa.prototype=Object.create(null);const Zs=[new Aa];function mh(n,e,t){if(n.length==0)return Zs;let s=t?Zs[0]:new Aa,o=[s];for(let a=0;a<n.length;a++){let c=n[a].type.attrs;if(c){c.nodeName&&o.push(s=new Aa(c.nodeName));for(let d in c){let f=c[d];f!=null&&(t&&o.length==1&&o.push(s=new Aa(e.isInline?"span":"div")),d=="class"?s.class=(s.class?s.class+" ":"")+f:d=="style"?s.style=(s.style?s.style+";":"")+f:d!="nodeName"&&(s[d]=f))}}}return o}function Xv(n,e,t,s){if(t==Zs&&s==Zs)return e;let o=e;for(let a=0;a<s.length;a++){let c=s[a],d=t[a];if(a){let f;d&&d.nodeName==c.nodeName&&o!=n&&(f=o.parentNode)&&f.nodeName.toLowerCase()==c.nodeName||(f=document.createElement(c.nodeName),f.pmIsDeco=!0,f.appendChild(o),d=Zs[0]),o=f}yC(o,d||Zs[0],c)}return o}function yC(n,e,t){for(let s in e)s!="class"&&s!="style"&&s!="nodeName"&&!(s in t)&&n.removeAttribute(s);for(let s in t)s!="class"&&s!="style"&&s!="nodeName"&&t[s]!=e[s]&&n.setAttribute(s,t[s]);if(e.class!=t.class){let s=e.class?e.class.split(" ").filter(Boolean):[],o=t.class?t.class.split(" ").filter(Boolean):[];for(let a=0;a<s.length;a++)o.indexOf(s[a])==-1&&n.classList.remove(s[a]);for(let a=0;a<o.length;a++)s.indexOf(o[a])==-1&&n.classList.add(o[a]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let s=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=s.exec(e.style);)n.style.removeProperty(o[1])}t.style&&(n.style.cssText+=t.style)}}function Jv(n,e,t){return Xv(n,n,Zs,mh(e,t,n.nodeType!=1))}function Bc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Xb(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class bC{constructor(e,t,s){this.lock=t,this.view=s,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=vC(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let s=e;s<t;s++)this.top.children[s].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,s){let o=0,a=this.stack.length>>1,c=Math.min(a,e.length);for(;o<c&&(o==a-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<a;)this.destroyRest(),this.top.dirty=Bn,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);let d=-1;for(let f=this.index;f<Math.min(this.index+3,this.top.children.length);f++){let p=this.top.children[f];if(p.matchesMark(e[a])&&!this.isLocked(p.dom)){d=f;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let f=ci.create(this.top,e[a],t,s);this.top.children.splice(this.index,0,f),this.top=f,this.changed=!0}this.index=0,a++}}findNodeMatch(e,t,s,o){let a=-1,c;if(o>=this.preMatch.index&&(c=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&c.matchesNode(e,t,s))a=this.top.children.indexOf(c,this.index);else for(let d=this.index,f=Math.min(this.top.children.length,d+5);d<f;d++){let p=this.top.children[d];if(p.matchesNode(e,t,s)&&!this.preMatch.matched.has(p)){a=d;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,t,s,o,a){let c=this.top.children[o];return c.dirty==cr&&c.dom==c.contentDOM&&(c.dirty=Js),c.update(e,t,s,a)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let s=e.pmViewDesc;if(s){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==s)return o}return-1}e=t}}updateNextNode(e,t,s,o,a,c){for(let d=this.index;d<this.top.children.length;d++){let f=this.top.children[d];if(f instanceof vs){let p=this.preMatch.matched.get(f);if(p!=null&&p!=a)return!1;let g=f.dom,y,b=this.isLocked(g)&&!(e.isText&&f.node&&f.node.isText&&f.nodeDOM.nodeValue==e.text&&f.dirty!=cr&&Bc(t,f.outerDeco));if(!b&&f.update(e,t,s,o))return this.destroyBetween(this.index,d),f.dom!=g&&(this.changed=!0),this.index++,!0;if(!b&&(y=this.recreateWrapper(f,e,t,s,o,c)))return this.destroyBetween(this.index,d),this.top.children[this.index]=y,y.contentDOM&&(y.dirty=Js,y.updateChildren(o,c+1),y.dirty=Bn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,s,o,a,c){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Bc(s,e.outerDeco)||!o.eq(e.innerDeco))return null;let d=vs.create(this.top,t,s,o,a,c);if(d.contentDOM){d.children=e.children,e.children=[];for(let f of d.children)f.parent=d}return e.destroy(),d}addNode(e,t,s,o,a){let c=vs.create(this.top,e,t,s,o,a);c.contentDOM&&c.updateChildren(o,a+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,t,s){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let a=new Gv(this.top,e,t,s);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ci;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Jc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Wt||$t)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let s=document.createElement(e);e=="IMG"&&(s.className="ProseMirror-separator",s.alt=""),e=="BR"&&(s.className="ProseMirror-trailingBreak");let o=new Yv(this.top,[],s,null);t!=this.top?t.children.push(o):t.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function vC(n,e){let t=e,s=t.children.length,o=n.childCount,a=new Map,c=[];e:for(;o>0;){let d;for(;;)if(s){let p=t.children[s-1];if(p instanceof ci)t=p,s=p.children.length;else{d=p,s--;break}}else{if(t==e)break e;s=t.parent.children.indexOf(t),t=t.parent}let f=d.node;if(f){if(f!=n.child(o-1))break;--o,a.set(d,o),c.push(d)}}return{index:o,matched:a,matches:c.reverse()}}function xC(n,e){return n.type.side-e.type.side}function SC(n,e,t,s){let o=e.locals(n),a=0;if(o.length==0){for(let p=0;p<n.childCount;p++){let g=n.child(p);s(g,o,e.forChild(a,g),p),a+=g.nodeSize}return}let c=0,d=[],f=null;for(let p=0;;){let g,y;for(;c<o.length&&o[c].to==a;){let T=o[c++];T.widget&&(g?(y||(y=[g])).push(T):g=T)}if(g)if(y){y.sort(xC);for(let T=0;T<y.length;T++)t(y[T],p,!!f)}else t(g,p,!!f);let b,x;if(f)x=-1,b=f,f=null;else if(p<n.childCount)x=p,b=n.child(p++);else break;for(let T=0;T<d.length;T++)d[T].to<=a&&d.splice(T--,1);for(;c<o.length&&o[c].from<=a&&o[c].to>a;)d.push(o[c++]);let S=a+b.nodeSize;if(b.isText){let T=S;c<o.length&&o[c].from<T&&(T=o[c].from);for(let _=0;_<d.length;_++)d[_].to<T&&(T=d[_].to);T<S&&(f=b.cut(T-a),b=b.cut(0,T-a),S=T,x=-1)}else for(;c<o.length&&o[c].to<S;)c++;let E=b.isInline&&!b.isLeaf?d.filter(T=>!T.inline):d.slice();s(b,E,e.forChild(a,b),x),a=S}}function wC(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function kC(n,e,t,s){for(let o=0,a=0;o<n.childCount&&a<=s;){let c=n.child(o++),d=a;if(a+=c.nodeSize,!c.isText)continue;let f=c.text;for(;o<n.childCount;){let p=n.child(o++);if(a+=p.nodeSize,!p.isText)break;f+=p.text}if(a>=t){if(a>=s&&f.slice(s-e.length-d,s-d)==e)return s-e.length;let p=d<s?f.lastIndexOf(e,s-d-1):-1;if(p>=0&&p+e.length+d>=t)return d+p;if(t==s&&f.length>=s+e.length-d&&f.slice(s-d,s-d+e.length)==e)return s}}return-1}function gh(n,e,t,s,o){let a=[];for(let c=0,d=0;c<n.length;c++){let f=n[c],p=d,g=d+=f.size;p>=t||g<=e?a.push(f):(p<e&&a.push(f.slice(0,e-p,s)),o&&(a.push(o),o=void 0),g>t&&a.push(f.slice(t-p,f.size,s)))}return a}function Vh(n,e=null){let t=n.domSelectionRange(),s=n.state.doc;if(!t.focusNode)return null;let o=n.docView.nearestDesc(t.focusNode),a=o&&o.size==0,c=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(c<0)return null;let d=s.resolve(c),f,p;if(Xc(t)){for(f=c;o&&!o.node;)o=o.parent;let y=o.node;if(o&&y.isAtom&&ye.isSelectable(y)&&o.parent&&!(y.isInline&&KT(t.focusNode,t.focusOffset,o.dom))){let b=o.posBefore;p=new ye(c==b?d:s.resolve(b))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let y=c,b=c;for(let x=0;x<t.rangeCount;x++){let S=t.getRangeAt(x);y=Math.min(y,n.docView.posFromDOM(S.startContainer,S.startOffset,1)),b=Math.max(b,n.docView.posFromDOM(S.endContainer,S.endOffset,-1))}if(y<0)return null;[f,c]=b==n.state.selection.anchor?[b,y]:[y,b],d=s.resolve(c)}else f=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(f<0)return null}let g=s.resolve(f);if(!p){let y=e=="pointer"||n.state.selection.head<d.pos&&!a?1:-1;p=Ih(n,g,d,y)}return p}function Zv(n){return n.editable?n.hasFocus():ex(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Rr(n,e=!1){let t=n.state.selection;if(Wv(n,t),!!Zv(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&$t){let s=n.domSelectionRange(),o=n.domObserver.currentSelection;if(s.anchorNode&&o.anchorNode&&li(s.anchorNode,s.anchorOffset,o.anchorNode,o.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)TC(n);else{let{anchor:s,head:o}=t,a,c;Jb&&!(t instanceof we)&&(t.$from.parent.inlineContent||(a=Zb(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(c=Zb(n,t.to))),n.docView.setSelection(s,o,n,e),Jb&&(a&&Wb(a),c&&Wb(c)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&EC(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Jb=Wt||$t&&Vv<63;function Zb(n,e){let{node:t,offset:s}=n.docView.domFromPos(e,0),o=s<t.childNodes.length?t.childNodes[s]:null,a=s?t.childNodes[s-1]:null;if(Wt&&o&&o.contentEditable=="false")return Uf(o);if((!o||o.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(o)return Uf(o);if(a)return Uf(a)}}function Uf(n){return n.contentEditable="true",Wt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Wb(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function EC(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),s=t.anchorNode,o=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=s||t.anchorOffset!=o)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Zv(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function TC(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let s=n.cursorWrapper.dom,o=s.nodeName=="IMG";o?t.setStart(s.parentNode,qt(s)+1):t.setStart(s,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!o&&!n.state.selection.visible&&un&&bs<=11&&(s.disabled=!0,s.disabled=!1)}function Wv(n,e){if(e instanceof ye){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(e0(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else e0(n)}function e0(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Ih(n,e,t,s){return n.someProp("createSelectionBetween",o=>o(n,e,t))||we.between(e,t,s)}function t0(n){return n.editable&&!n.hasFocus()?!1:ex(n)}function ex(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function CC(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return li(e.node,e.offset,t.anchorNode,t.anchorOffset)}function yh(n,e){let{$anchor:t,$head:s}=n.selection,o=e>0?t.max(s):t.min(s),a=o.parent.inlineContent?o.depth?n.doc.resolve(e>0?o.after():o.before()):null:o;return a&&Ne.findFrom(a,e)}function ls(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function n0(n,e,t){let s=n.state.selection;if(s instanceof we)if(t.indexOf("s")>-1){let{$head:o}=s,a=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let c=n.state.doc.resolve(o.pos+a.nodeSize*(e<0?-1:1));return ls(n,new we(s.$anchor,c))}else if(s.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let o=yh(n.state,e);return o&&o instanceof ye?ls(n,o):!1}else if(!(zn&&t.indexOf("m")>-1)){let o=s.$head,a=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,c;if(!a||a.isText)return!1;let d=e<0?o.pos-a.nodeSize:o.pos;return a.isAtom||(c=n.docView.descAt(d))&&!c.contentDOM?ye.isSelectable(a)?ls(n,new ye(e<0?n.state.doc.resolve(o.pos-a.nodeSize):o)):Fa?ls(n,new we(n.state.doc.resolve(e<0?d:d+a.nodeSize))):!1:!1}}else return!1;else{if(s instanceof ye&&s.node.isInline)return ls(n,new we(e>0?s.$to:s.$from));{let o=yh(n.state,e);return o?ls(n,o):!1}}}function Lc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Oa(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function to(n,e){return e<0?MC(n):NC(n)}function MC(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let o,a,c=!1;for(Yn&&t.nodeType==1&&s<Lc(t)&&Oa(t.childNodes[s],-1)&&(c=!0);;)if(s>0){if(t.nodeType!=1)break;{let d=t.childNodes[s-1];if(Oa(d,-1))o=t,a=--s;else if(d.nodeType==3)t=d,s=t.nodeValue.length;else break}}else{if(tx(t))break;{let d=t.previousSibling;for(;d&&Oa(d,-1);)o=t.parentNode,a=qt(d),d=d.previousSibling;if(d)t=d,s=Lc(t);else{if(t=t.parentNode,t==n.dom)break;s=0}}}c?bh(n,t,s):o&&bh(n,o,a)}function NC(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let o=Lc(t),a,c;for(;;)if(s<o){if(t.nodeType!=1)break;let d=t.childNodes[s];if(Oa(d,1))a=t,c=++s;else break}else{if(tx(t))break;{let d=t.nextSibling;for(;d&&Oa(d,1);)a=d.parentNode,c=qt(d)+1,d=d.nextSibling;if(d)t=d,s=0,o=Lc(t);else{if(t=t.parentNode,t==n.dom)break;s=o=0}}}a&&bh(n,a,c)}function tx(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function AC(n,e){for(;n&&e==n.childNodes.length&&!$a(n);)e=qt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function OC(n,e){for(;n&&!e&&!$a(n);)e=qt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function bh(n,e,t){if(e.nodeType!=3){let a,c;(c=AC(e,t))?(e=c,t=0):(a=OC(e,t))&&(e=a,t=a.nodeValue.length)}let s=n.domSelection();if(!s)return;if(Xc(s)){let a=document.createRange();a.setEnd(e,t),a.setStart(e,t),s.removeAllRanges(),s.addRange(a)}else s.extend&&s.extend(e,t);n.domObserver.setCurSelection();let{state:o}=n;setTimeout(()=>{n.state==o&&Rr(n)},50)}function r0(n,e){let t=n.state.doc.resolve(e);if(!($t||ZT)&&t.parent.inlineContent){let o=n.coordsAtPos(e);if(e>t.start()){let a=n.coordsAtPos(e-1),c=(a.top+a.bottom)/2;if(c>o.top&&c<o.bottom&&Math.abs(a.left-o.left)>1)return a.left<o.left?"ltr":"rtl"}if(e<t.end()){let a=n.coordsAtPos(e+1),c=(a.top+a.bottom)/2;if(c>o.top&&c<o.bottom&&Math.abs(a.left-o.left)>1)return a.left>o.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function s0(n,e,t){let s=n.state.selection;if(s instanceof we&&!s.empty||t.indexOf("s")>-1||zn&&t.indexOf("m")>-1)return!1;let{$from:o,$to:a}=s;if(!o.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let c=yh(n.state,e);if(c&&c instanceof ye)return ls(n,c)}if(!o.parent.inlineContent){let c=e<0?o:a,d=s instanceof Sn?Ne.near(c,e):Ne.findFrom(c,e);return d?ls(n,d):!1}return!1}function i0(n,e){if(!(n.state.selection instanceof we))return!0;let{$head:t,$anchor:s,empty:o}=n.state.selection;if(!t.sameParent(s))return!0;if(!o)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(a&&!a.isText){let c=n.state.tr;return e<0?c.delete(t.pos-a.nodeSize,t.pos):c.delete(t.pos,t.pos+a.nodeSize),n.dispatch(c),!0}return!1}function o0(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function RC(n){if(!Wt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let s=e.firstChild;o0(n,s,"true"),setTimeout(()=>o0(n,s,"false"),20)}return!1}function DC(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function jC(n,e){let t=e.keyCode,s=DC(e);if(t==8||zn&&t==72&&s=="c")return i0(n,-1)||to(n,-1);if(t==46&&!e.shiftKey||zn&&t==68&&s=="c")return i0(n,1)||to(n,1);if(t==13||t==27)return!0;if(t==37||zn&&t==66&&s=="c"){let o=t==37?r0(n,n.state.selection.from)=="ltr"?-1:1:-1;return n0(n,o,s)||to(n,o)}else if(t==39||zn&&t==70&&s=="c"){let o=t==39?r0(n,n.state.selection.from)=="ltr"?1:-1:1;return n0(n,o,s)||to(n,o)}else{if(t==38||zn&&t==80&&s=="c")return s0(n,-1,s)||to(n,-1);if(t==40||zn&&t==78&&s=="c")return RC(n)||s0(n,1,s)||to(n,1);if(s==(zn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Hh(n,e){n.someProp("transformCopied",x=>{e=x(e,n)});let t=[],{content:s,openStart:o,openEnd:a}=e;for(;o>1&&a>1&&s.childCount==1&&s.firstChild.childCount==1;){o--,a--;let x=s.firstChild;t.push(x.type.name,x.attrs!=x.type.defaultAttrs?x.attrs:null),s=x.content}let c=n.someProp("clipboardSerializer")||ui.fromSchema(n.state.schema),d=ax(),f=d.createElement("div");f.appendChild(c.serializeFragment(s,{document:d}));let p=f.firstChild,g,y=0;for(;p&&p.nodeType==1&&(g=ox[p.nodeName.toLowerCase()]);){for(let x=g.length-1;x>=0;x--){let S=d.createElement(g[x]);for(;f.firstChild;)S.appendChild(f.firstChild);f.appendChild(S),y++}p=f.firstChild}p&&p.nodeType==1&&p.setAttribute("data-pm-slice",`${o} ${a}${y?` -${y}`:""} ${JSON.stringify(t)}`);let b=n.someProp("clipboardTextSerializer",x=>x(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:f,text:b,slice:e}}function nx(n,e,t,s,o){let a=o.parent.type.spec.code,c,d;if(!t&&!e)return null;let f=e&&(s||a||!t);if(f){if(n.someProp("transformPastedText",b=>{e=b(e,a||s,n)}),a)return e?new ue(W.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):ue.empty;let y=n.someProp("clipboardTextParser",b=>b(e,o,s,n));if(y)d=y;else{let b=o.marks(),{schema:x}=n.state,S=ui.fromSchema(x);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(E=>{let T=c.appendChild(document.createElement("p"));E&&T.appendChild(S.serializeNode(x.text(E,b)))})}}else n.someProp("transformPastedHTML",y=>{t=y(t,n)}),c=LC(t),Fa&&qC(c);let p=c&&c.querySelector("[data-pm-slice]"),g=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(g&&g[3])for(let y=+g[3];y>0;y--){let b=c.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;c=b}if(d||(d=(n.someProp("clipboardParser")||n.someProp("domParser")||ys.fromSchema(n.state.schema)).parseSlice(c,{preserveWhitespace:!!(f||g),context:o,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!zC.test(b.parentNode.nodeName)?{ignore:!0}:null}})),g)d=UC(a0(d,+g[1],+g[2]),g[4]);else if(d=ue.maxOpen(_C(d.content,o),!0),d.openStart||d.openEnd){let y=0,b=0;for(let x=d.content.firstChild;y<d.openStart&&!x.type.spec.isolating;y++,x=x.firstChild);for(let x=d.content.lastChild;b<d.openEnd&&!x.type.spec.isolating;b++,x=x.lastChild);d=a0(d,y,b)}return n.someProp("transformPasted",y=>{d=y(d,n)}),d}const zC=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function _C(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let o=e.node(t).contentMatchAt(e.index(t)),a,c=[];if(n.forEach(d=>{if(!c)return;let f=o.findWrapping(d.type),p;if(!f)return c=null;if(p=c.length&&a.length&&sx(f,a,d,c[c.length-1],0))c[c.length-1]=p;else{c.length&&(c[c.length-1]=ix(c[c.length-1],a.length));let g=rx(d,f);c.push(g),o=o.matchType(g.type),a=f}}),c)return W.from(c)}return n}function rx(n,e,t=0){for(let s=e.length-1;s>=t;s--)n=e[s].create(null,W.from(n));return n}function sx(n,e,t,s,o){if(o<n.length&&o<e.length&&n[o]==e[o]){let a=sx(n,e,t,s.lastChild,o+1);if(a)return s.copy(s.content.replaceChild(s.childCount-1,a));if(s.contentMatchAt(s.childCount).matchType(o==n.length-1?t.type:n[o+1]))return s.copy(s.content.append(W.from(rx(t,n,o+1))))}}function ix(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,ix(n.lastChild,e-1)),s=n.contentMatchAt(n.childCount).fillBefore(W.empty,!0);return n.copy(t.append(s))}function vh(n,e,t,s,o,a){let c=e<0?n.firstChild:n.lastChild,d=c.content;return n.childCount>1&&(a=0),o<s-1&&(d=vh(d,e,t,s,o+1,a)),o>=t&&(d=e<0?c.contentMatchAt(0).fillBefore(d,a<=o).append(d):d.append(c.contentMatchAt(c.childCount).fillBefore(W.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,c.copy(d))}function a0(n,e,t){return e<n.openStart&&(n=new ue(vh(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new ue(vh(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const ox={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let l0=null;function ax(){return l0||(l0=document.implementation.createHTMLDocument("title"))}let Vf=null;function BC(n){let e=window.trustedTypes;return e?(Vf||(Vf=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Vf.createHTML(n)):n}function LC(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=ax().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(n),o;if((o=s&&ox[s[1].toLowerCase()])&&(n=o.map(a=>"<"+a+">").join("")+n+o.map(a=>"</"+a+">").reverse().join("")),t.innerHTML=BC(n),o)for(let a=0;a<o.length;a++)t=t.querySelector(o[a])||t;return t}function qC(n){let e=n.querySelectorAll($t?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let s=e[t];s.childNodes.length==1&&s.textContent==" "&&s.parentNode&&s.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),s)}}function UC(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,s;try{s=JSON.parse(e)}catch{return n}let{content:o,openStart:a,openEnd:c}=n;for(let d=s.length-2;d>=0;d-=2){let f=t.nodes[s[d]];if(!f||f.hasRequiredAttrs())break;o=W.from(f.create(s[d+1],o)),a++,c++}return new ue(o,a,c)}const en={},tn={},VC={touchstart:!0,touchmove:!0};class IC{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function HC(n){for(let e in en){let t=en[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=s=>{$C(n,s)&&!Ph(n,s)&&(n.editable||!(s.type in tn))&&t(n,s)},VC[e]?{passive:!0}:void 0)}Wt&&n.dom.addEventListener("input",()=>null),xh(n)}function ms(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function PC(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function xh(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=s=>Ph(n,s))})}function Ph(n,e){return n.someProp("handleDOMEvents",t=>{let s=t[e.type];return s?s(n,e)||e.defaultPrevented:!1})}function $C(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function FC(n,e){!Ph(n,e)&&en[e.type]&&(n.editable||!(e.type in tn))&&en[e.type](n,e)}tn.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!cx(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Ar&&$t&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),po&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let s=Date.now();n.input.lastIOSEnter=s,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==s&&(n.someProp("handleKeyDown",o=>o(n,Ks(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",s=>s(n,t))||jC(n,t)?t.preventDefault():ms(n,"key")};tn.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};tn.keypress=(n,e)=>{let t=e;if(cx(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||zn&&t.metaKey)return;if(n.someProp("handleKeyPress",o=>o(n,t))){t.preventDefault();return}let s=n.state.selection;if(!(s instanceof we)||!s.$from.sameParent(s.$to)){let o=String.fromCharCode(t.charCode);!/[\r\n]/.test(o)&&!n.someProp("handleTextInput",a=>a(n,s.$from.pos,s.$to.pos,o))&&n.dispatch(n.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}};function Zc(n){return{left:n.clientX,top:n.clientY}}function QC(n,e){let t=e.x-n.clientX,s=e.y-n.clientY;return t*t+s*s<100}function $h(n,e,t,s,o){if(s==-1)return!1;let a=n.state.doc.resolve(s);for(let c=a.depth+1;c>0;c--)if(n.someProp(e,d=>c>a.depth?d(n,t,a.nodeAfter,a.before(c),o,!0):d(n,t,a.node(c),a.before(c),o,!1)))return!0;return!1}function co(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let s=n.state.tr.setSelection(e);s.setMeta("pointer",!0),n.dispatch(s)}function GC(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),s=t.nodeAfter;return s&&s.isAtom&&ye.isSelectable(s)?(co(n,new ye(t)),!0):!1}function YC(n,e){if(e==-1)return!1;let t=n.state.selection,s,o;t instanceof ye&&(s=t.node);let a=n.state.doc.resolve(e);for(let c=a.depth+1;c>0;c--){let d=c>a.depth?a.nodeAfter:a.node(c);if(ye.isSelectable(d)){s&&t.$from.depth>0&&c>=t.$from.depth&&a.before(t.$from.depth+1)==t.$from.pos?o=a.before(t.$from.depth):o=a.before(c);break}}return o!=null?(co(n,ye.create(n.state.doc,o)),!0):!1}function KC(n,e,t,s,o){return $h(n,"handleClickOn",e,t,s)||n.someProp("handleClick",a=>a(n,e,s))||(o?YC(n,t):GC(n,t))}function XC(n,e,t,s){return $h(n,"handleDoubleClickOn",e,t,s)||n.someProp("handleDoubleClick",o=>o(n,e,s))}function JC(n,e,t,s){return $h(n,"handleTripleClickOn",e,t,s)||n.someProp("handleTripleClick",o=>o(n,e,s))||ZC(n,t,s)}function ZC(n,e,t){if(t.button!=0)return!1;let s=n.state.doc;if(e==-1)return s.inlineContent?(co(n,we.create(s,0,s.content.size)),!0):!1;let o=s.resolve(e);for(let a=o.depth+1;a>0;a--){let c=a>o.depth?o.nodeAfter:o.node(a),d=o.before(a);if(c.inlineContent)co(n,we.create(s,d+1,d+1+c.content.size));else if(ye.isSelectable(c))co(n,ye.create(s,d));else continue;return!0}}function Fh(n){return qc(n)}const lx=zn?"metaKey":"ctrlKey";en.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let s=Fh(n),o=Date.now(),a="singleClick";o-n.input.lastClick.time<500&&QC(t,n.input.lastClick)&&!t[lx]&&(n.input.lastClick.type=="singleClick"?a="doubleClick":n.input.lastClick.type=="doubleClick"&&(a="tripleClick")),n.input.lastClick={time:o,x:t.clientX,y:t.clientY,type:a};let c=n.posAtCoords(Zc(t));c&&(a=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new WC(n,c,t,!!s)):(a=="doubleClick"?XC:JC)(n,c.pos,c.inside,t)?t.preventDefault():ms(n,"pointer"))};class WC{constructor(e,t,s,o){this.view=e,this.pos=t,this.event=s,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!s[lx],this.allowDefault=s.shiftKey;let a,c;if(t.inside>-1)a=e.state.doc.nodeAt(t.inside),c=t.inside;else{let g=e.state.doc.resolve(t.pos);a=g.parent,c=g.depth?g.before():0}const d=o?null:s.target,f=d?e.docView.nearestDesc(d,!0):null;this.target=f&&f.dom.nodeType==1?f.dom:null;let{selection:p}=e.state;(s.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||p instanceof ye&&p.from<=c&&p.to>c)&&(this.mightDrag={node:a,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Yn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ms(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Rr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Zc(e))),this.updateAllowDefault(e),this.allowDefault||!t?ms(this.view,"pointer"):KC(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Wt&&this.mightDrag&&!this.mightDrag.node.isAtom||$t&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(co(this.view,Ne.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):ms(this.view,"pointer")}move(e){this.updateAllowDefault(e),ms(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}en.touchstart=n=>{n.input.lastTouch=Date.now(),Fh(n),ms(n,"pointer")};en.touchmove=n=>{n.input.lastTouch=Date.now(),ms(n,"pointer")};en.contextmenu=n=>Fh(n);function cx(n,e){return n.composing?!0:Wt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const eM=Ar?5e3:-1;tn.compositionstart=tn.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof we&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(s=>s.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),qc(n,!0),n.markCursor=null;else if(qc(n,!e.selection.empty),Yn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let s=n.domSelectionRange();for(let o=s.focusNode,a=s.focusOffset;o&&o.nodeType==1&&a!=0;){let c=a<0?o.lastChild:o.childNodes[a-1];if(!c)break;if(c.nodeType==3){let d=n.domSelection();d&&d.collapse(c,c.nodeValue.length);break}else o=c,a=-1}}n.input.composing=!0}ux(n,eM)};tn.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,ux(n,20))};function ux(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>qc(n),e))}function dx(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=nM());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function tM(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=GT(e.focusNode,e.focusOffset),s=YT(e.focusNode,e.focusOffset);if(t&&s&&t!=s){let o=s.pmViewDesc,a=n.domObserver.lastChangedTextNode;if(t==a||s==a)return a;if(!o||!o.isText(s.nodeValue))return s;if(n.input.compositionNode==s){let c=t.pmViewDesc;if(!(!c||!c.isText(t.nodeValue)))return s}}return t||s}function nM(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function qc(n,e=!1){if(!(Ar&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),dx(n),e||n.docView&&n.docView.dirty){let t=Vh(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function rM(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let s=getSelection(),o=document.createRange();o.selectNodeContents(e),n.dom.blur(),s.removeAllRanges(),s.addRange(o),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Ua=un&&bs<15||po&&WT<604;en.copy=tn.cut=(n,e)=>{let t=e,s=n.state.selection,o=t.type=="cut";if(s.empty)return;let a=Ua?null:t.clipboardData,c=s.content(),{dom:d,text:f}=Hh(n,c);a?(t.preventDefault(),a.clearData(),a.setData("text/html",d.innerHTML),a.setData("text/plain",f)):rM(n,d),o&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sM(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function iM(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,s=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(s.contentEditable="true"),s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus();let o=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),s.parentNode&&s.parentNode.removeChild(s),t?Va(n,s.value,null,o,e):Va(n,s.textContent,s.innerHTML,o,e)},50)}function Va(n,e,t,s,o){let a=nx(n,e,t,s,n.state.selection.$from);if(n.someProp("handlePaste",f=>f(n,o,a||ue.empty)))return!0;if(!a)return!1;let c=sM(a),d=c?n.state.tr.replaceSelectionWith(c,s):n.state.tr.replaceSelection(a);return n.dispatch(d.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function fx(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}tn.paste=(n,e)=>{let t=e;if(n.composing&&!Ar)return;let s=Ua?null:t.clipboardData,o=n.input.shiftKey&&n.input.lastKeyCode!=45;s&&Va(n,fx(s),s.getData("text/html"),o,t)?t.preventDefault():iM(n,t)};class hx{constructor(e,t,s){this.slice=e,this.move=t,this.node=s}}const oM=zn?"altKey":"ctrlKey";function px(n,e){let t=n.someProp("dragCopies",s=>!s(e));return t??!e[oM]}en.dragstart=(n,e)=>{let t=e,s=n.input.mouseDown;if(s&&s.done(),!t.dataTransfer)return;let o=n.state.selection,a=o.empty?null:n.posAtCoords(Zc(t)),c;if(!(a&&a.pos>=o.from&&a.pos<=(o instanceof ye?o.to-1:o.to))){if(s&&s.mightDrag)c=ye.create(n.state.doc,s.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let y=n.docView.nearestDesc(t.target,!0);y&&y.node.type.spec.draggable&&y!=n.docView&&(c=ye.create(n.state.doc,y.posBefore))}}let d=(c||n.state.selection).content(),{dom:f,text:p,slice:g}=Hh(n,d);(!t.dataTransfer.files.length||!$t||Vv>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Ua?"Text":"text/html",f.innerHTML),t.dataTransfer.effectAllowed="copyMove",Ua||t.dataTransfer.setData("text/plain",p),n.dragging=new hx(g,px(n,t),c)};en.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};tn.dragover=tn.dragenter=(n,e)=>e.preventDefault();tn.drop=(n,e)=>{let t=e,s=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let o=n.posAtCoords(Zc(t));if(!o)return;let a=n.state.doc.resolve(o.pos),c=s&&s.slice;c?n.someProp("transformPasted",S=>{c=S(c,n)}):c=nx(n,fx(t.dataTransfer),Ua?null:t.dataTransfer.getData("text/html"),!1,a);let d=!!(s&&px(n,t));if(n.someProp("handleDrop",S=>S(n,t,c||ue.empty,d))){t.preventDefault();return}if(!c)return;t.preventDefault();let f=c?Dv(n.state.doc,a.pos,c):a.pos;f==null&&(f=a.pos);let p=n.state.tr;if(d){let{node:S}=s;S?S.replace(p):p.deleteSelection()}let g=p.mapping.map(f),y=c.openStart==0&&c.openEnd==0&&c.content.childCount==1,b=p.doc;if(y?p.replaceRangeWith(g,g,c.content.firstChild):p.replaceRange(g,g,c),p.doc.eq(b))return;let x=p.doc.resolve(g);if(y&&ye.isSelectable(c.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(c.content.firstChild))p.setSelection(new ye(x));else{let S=p.mapping.map(f);p.mapping.maps[p.mapping.maps.length-1].forEach((E,T,_,F)=>S=F),p.setSelection(Ih(n,x,p.doc.resolve(S)))}n.focus(),n.dispatch(p.setMeta("uiEvent","drop"))};en.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Rr(n)},20))};en.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};en.beforeinput=(n,e)=>{if($t&&Ar&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:s}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=s||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",a=>a(n,Ks(8,"Backspace")))))return;let{$cursor:o}=n.state.selection;o&&o.pos>0&&n.dispatch(n.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let n in tn)en[n]=tn[n];function Ia(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Uc{constructor(e,t){this.toDOM=e,this.spec=t||ri,this.side=this.spec.side||0}map(e,t,s,o){let{pos:a,deleted:c}=e.mapResult(t.from+o,this.side<0?-1:1);return c?null:new xn(a-s,a-s,this)}valid(){return!0}eq(e){return this==e||e instanceof Uc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ia(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class xs{constructor(e,t){this.attrs=e,this.spec=t||ri}map(e,t,s,o){let a=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-s,c=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-s;return a>=c?null:new xn(a,c,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof xs&&Ia(this.attrs,e.attrs)&&Ia(this.spec,e.spec)}static is(e){return e.type instanceof xs}destroy(){}}class Qh{constructor(e,t){this.attrs=e,this.spec=t||ri}map(e,t,s,o){let a=e.mapResult(t.from+o,1);if(a.deleted)return null;let c=e.mapResult(t.to+o,-1);return c.deleted||c.pos<=a.pos?null:new xn(a.pos-s,c.pos-s,this)}valid(e,t){let{index:s,offset:o}=e.content.findIndex(t.from),a;return o==t.from&&!(a=e.child(s)).isText&&o+a.nodeSize==t.to}eq(e){return this==e||e instanceof Qh&&Ia(this.attrs,e.attrs)&&Ia(this.spec,e.spec)}destroy(){}}class xn{constructor(e,t,s){this.from=e,this.to=t,this.type=s}copy(e,t){return new xn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,s){return this.type.map(e,this,t,s)}static widget(e,t,s){return new xn(e,e,new Uc(t,s))}static inline(e,t,s,o){return new xn(e,t,new xs(s,o))}static node(e,t,s,o){return new xn(e,t,new Qh(s,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof xs}get widget(){return this.type instanceof Uc}}const so=[],ri={};class pt{constructor(e,t){this.local=e.length?e:so,this.children=t.length?t:so}static create(e,t){return t.length?Vc(t,e,0,ri):Pt}find(e,t,s){let o=[];return this.findInner(e??0,t??1e9,o,0,s),o}findInner(e,t,s,o,a){for(let c=0;c<this.local.length;c++){let d=this.local[c];d.from<=t&&d.to>=e&&(!a||a(d.spec))&&s.push(d.copy(d.from+o,d.to+o))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<t&&this.children[c+1]>e){let d=this.children[c]+1;this.children[c+2].findInner(e-d,t-d,s,o+d,a)}}map(e,t,s){return this==Pt||e.maps.length==0?this:this.mapInner(e,t,0,0,s||ri)}mapInner(e,t,s,o,a){let c;for(let d=0;d<this.local.length;d++){let f=this.local[d].map(e,s,o);f&&f.type.valid(t,f)?(c||(c=[])).push(f):a.onRemove&&a.onRemove(this.local[d].spec)}return this.children.length?aM(this.children,c||[],e,t,s,o,a):c?new pt(c.sort(si),so):Pt}add(e,t){return t.length?this==Pt?pt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,s){let o,a=0;e.forEach((d,f)=>{let p=f+s,g;if(g=gx(t,d,p)){for(o||(o=this.children.slice());a<o.length&&o[a]<f;)a+=3;o[a]==f?o[a+2]=o[a+2].addInner(d,g,p+1):o.splice(a,0,f,f+d.nodeSize,Vc(g,d,p+1,ri)),a+=3}});let c=mx(a?yx(t):t,-s);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||c.splice(d--,1);return new pt(c.length?this.local.concat(c).sort(si):this.local,o||this.children)}remove(e){return e.length==0||this==Pt?this:this.removeInner(e,0)}removeInner(e,t){let s=this.children,o=this.local;for(let a=0;a<s.length;a+=3){let c,d=s[a]+t,f=s[a+1]+t;for(let g=0,y;g<e.length;g++)(y=e[g])&&y.from>d&&y.to<f&&(e[g]=null,(c||(c=[])).push(y));if(!c)continue;s==this.children&&(s=this.children.slice());let p=s[a+2].removeInner(c,d+1);p!=Pt?s[a+2]=p:(s.splice(a,3),a-=3)}if(o.length){for(let a=0,c;a<e.length;a++)if(c=e[a])for(let d=0;d<o.length;d++)o[d].eq(c,t)&&(o==this.local&&(o=this.local.slice()),o.splice(d--,1))}return s==this.children&&o==this.local?this:o.length||s.length?new pt(o,s):Pt}forChild(e,t){if(this==Pt)return this;if(t.isLeaf)return pt.empty;let s,o;for(let d=0;d<this.children.length;d+=3)if(this.children[d]>=e){this.children[d]==e&&(s=this.children[d+2]);break}let a=e+1,c=a+t.content.size;for(let d=0;d<this.local.length;d++){let f=this.local[d];if(f.from<c&&f.to>a&&f.type instanceof xs){let p=Math.max(a,f.from)-a,g=Math.min(c,f.to)-a;p<g&&(o||(o=[])).push(f.copy(p,g))}}if(o){let d=new pt(o.sort(si),so);return s?new us([d,s]):d}return s||Pt}eq(e){if(this==e)return!0;if(!(e instanceof pt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Gh(this.localsInner(e))}localsInner(e){if(this==Pt)return so;if(e.inlineContent||!this.local.some(xs.is))return this.local;let t=[];for(let s=0;s<this.local.length;s++)this.local[s].type instanceof xs||t.push(this.local[s]);return t}forEachSet(e){e(this)}}pt.empty=new pt([],[]);pt.removeOverlap=Gh;const Pt=pt.empty;class us{constructor(e){this.members=e}map(e,t){const s=this.members.map(o=>o.map(e,t,ri));return us.from(s)}forChild(e,t){if(t.isLeaf)return pt.empty;let s=[];for(let o=0;o<this.members.length;o++){let a=this.members[o].forChild(e,t);a!=Pt&&(a instanceof us?s=s.concat(a.members):s.push(a))}return us.from(s)}eq(e){if(!(e instanceof us)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,s=!0;for(let o=0;o<this.members.length;o++){let a=this.members[o].localsInner(e);if(a.length)if(!t)t=a;else{s&&(t=t.slice(),s=!1);for(let c=0;c<a.length;c++)t.push(a[c])}}return t?Gh(s?t:t.sort(si)):so}static from(e){switch(e.length){case 0:return Pt;case 1:return e[0];default:return new us(e.every(t=>t instanceof pt)?e:e.reduce((t,s)=>t.concat(s instanceof pt?s:s.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function aM(n,e,t,s,o,a,c){let d=n.slice();for(let p=0,g=a;p<t.maps.length;p++){let y=0;t.maps[p].forEach((b,x,S,E)=>{let T=E-S-(x-b);for(let _=0;_<d.length;_+=3){let F=d[_+1];if(F<0||b>F+g-y)continue;let Y=d[_]+g-y;x>=Y?d[_+1]=b<=Y?-2:-1:b>=g&&T&&(d[_]+=T,d[_+1]+=T)}y+=T}),g=t.maps[p].map(g,-1)}let f=!1;for(let p=0;p<d.length;p+=3)if(d[p+1]<0){if(d[p+1]==-2){f=!0,d[p+1]=-1;continue}let g=t.map(n[p]+a),y=g-o;if(y<0||y>=s.content.size){f=!0;continue}let b=t.map(n[p+1]+a,-1),x=b-o,{index:S,offset:E}=s.content.findIndex(y),T=s.maybeChild(S);if(T&&E==y&&E+T.nodeSize==x){let _=d[p+2].mapInner(t,T,g+1,n[p]+a+1,c);_!=Pt?(d[p]=y,d[p+1]=x,d[p+2]=_):(d[p+1]=-2,f=!0)}else f=!0}if(f){let p=lM(d,n,e,t,o,a,c),g=Vc(p,s,0,c);e=g.local;for(let y=0;y<d.length;y+=3)d[y+1]<0&&(d.splice(y,3),y-=3);for(let y=0,b=0;y<g.children.length;y+=3){let x=g.children[y];for(;b<d.length&&d[b]<x;)b+=3;d.splice(b,0,g.children[y],g.children[y+1],g.children[y+2])}}return new pt(e.sort(si),d)}function mx(n,e){if(!e||!n.length)return n;let t=[];for(let s=0;s<n.length;s++){let o=n[s];t.push(new xn(o.from+e,o.to+e,o.type))}return t}function lM(n,e,t,s,o,a,c){function d(f,p){for(let g=0;g<f.local.length;g++){let y=f.local[g].map(s,o,p);y?t.push(y):c.onRemove&&c.onRemove(f.local[g].spec)}for(let g=0;g<f.children.length;g+=3)d(f.children[g+2],f.children[g]+p+1)}for(let f=0;f<n.length;f+=3)n[f+1]==-1&&d(n[f+2],e[f]+a+1);return t}function gx(n,e,t){if(e.isLeaf)return null;let s=t+e.nodeSize,o=null;for(let a=0,c;a<n.length;a++)(c=n[a])&&c.from>t&&c.to<s&&((o||(o=[])).push(c),n[a]=null);return o}function yx(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Vc(n,e,t,s){let o=[],a=!1;e.forEach((d,f)=>{let p=gx(n,d,f+t);if(p){a=!0;let g=Vc(p,d,t+f+1,s);g!=Pt&&o.push(f,f+d.nodeSize,g)}});let c=mx(a?yx(n):n,-t).sort(si);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||(s.onRemove&&s.onRemove(c[d].spec),c.splice(d--,1));return c.length||o.length?new pt(c,o):Pt}function si(n,e){return n.from-e.from||n.to-e.to}function Gh(n){let e=n;for(let t=0;t<e.length-1;t++){let s=e[t];if(s.from!=s.to)for(let o=t+1;o<e.length;o++){let a=e[o];if(a.from==s.from){a.to!=s.to&&(e==n&&(e=n.slice()),e[o]=a.copy(a.from,s.to),c0(e,o+1,a.copy(s.to,a.to)));continue}else{a.from<s.to&&(e==n&&(e=n.slice()),e[t]=s.copy(s.from,a.from),c0(e,o,s.copy(a.from,s.to)));break}}}return e}function c0(n,e,t){for(;e<n.length&&si(t,n[e])>0;)e++;n.splice(e,0,t)}function If(n){let e=[];return n.someProp("decorations",t=>{let s=t(n.state);s&&s!=Pt&&e.push(s)}),n.cursorWrapper&&e.push(pt.create(n.state.doc,[n.cursorWrapper.deco])),us.from(e)}const cM={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},uM=un&&bs<=11;class dM{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class fM{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new dM,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(s=>{for(let o=0;o<s.length;o++)this.queue.push(s[o]);un&&bs<=11&&s.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),uM&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,cM)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(t0(this.view)){if(this.suppressingSelectionUpdates)return Rr(this.view);if(un&&bs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&li(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,s;for(let a=e.focusNode;a;a=ho(a))t.add(a);for(let a=e.anchorNode;a;a=ho(a))if(t.has(a)){s=a;break}let o=s&&this.view.docView.nearestDesc(s);if(o&&o.ignoreMutation({type:"selection",target:s.nodeType==3?s.parentNode:s}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let s=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(s)&&t0(e)&&!this.ignoreSelectionChange(s),a=-1,c=-1,d=!1,f=[];if(e.editable)for(let g=0;g<t.length;g++){let y=this.registerMutation(t[g],f);y&&(a=a<0?y.from:Math.min(y.from,a),c=c<0?y.to:Math.max(y.to,c),y.typeOver&&(d=!0))}if(Yn&&f.length){let g=f.filter(y=>y.nodeName=="BR");if(g.length==2){let[y,b]=g;y.parentNode&&y.parentNode.parentNode==b.parentNode?b.remove():y.remove()}else{let{focusNode:y}=this.currentSelection;for(let b of g){let x=b.parentNode;x&&x.nodeName=="LI"&&(!y||mM(e,y)!=x)&&b.remove()}}}let p=null;a<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Xc(s)&&(p=Vh(e))&&p.eq(Ne.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Rr(e),this.currentSelection.set(s),e.scrollToSelection()):(a>-1||o)&&(a>-1&&(e.docView.markDirty(a,c),hM(e)),this.handleDOMChange(a,c,d,f),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(s)||Rr(e),this.currentSelection.set(s))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let s=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(s==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!s||s.ignoreMutation(e))return null;if(e.type=="childList"){for(let g=0;g<e.addedNodes.length;g++){let y=e.addedNodes[g];t.push(y),y.nodeType==3&&(this.lastChangedTextNode=y)}if(s.contentDOM&&s.contentDOM!=s.dom&&!s.contentDOM.contains(e.target))return{from:s.posBefore,to:s.posAfter};let o=e.previousSibling,a=e.nextSibling;if(un&&bs<=11&&e.addedNodes.length)for(let g=0;g<e.addedNodes.length;g++){let{previousSibling:y,nextSibling:b}=e.addedNodes[g];(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(o=y),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(a=b)}let c=o&&o.parentNode==e.target?qt(o)+1:0,d=s.localPosFromDOM(e.target,c,-1),f=a&&a.parentNode==e.target?qt(a):e.target.childNodes.length,p=s.localPosFromDOM(e.target,f,1);return{from:d,to:p}}else return e.type=="attributes"?{from:s.posAtStart-s.border,to:s.posAtEnd+s.border}:(this.lastChangedTextNode=e.target,{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let u0=new WeakMap,d0=!1;function hM(n){if(!u0.has(n)&&(u0.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Yn,d0)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),d0=!0}}function f0(n,e){let t=e.startContainer,s=e.startOffset,o=e.endContainer,a=e.endOffset,c=n.domAtPos(n.state.selection.anchor);return li(c.node,c.offset,o,a)&&([t,s,o,a]=[o,a,t,s]),{anchorNode:t,anchorOffset:s,focusNode:o,focusOffset:a}}function pM(n,e){if(e.getComposedRanges){let o=e.getComposedRanges(n.root)[0];if(o)return f0(n,o)}let t;function s(o){o.preventDefault(),o.stopImmediatePropagation(),t=o.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",s,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",s,!0),t?f0(n,t):null}function mM(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let s=n.docView.nearestDesc(t,!0);if(s&&s.node.isBlock)return t}return null}function gM(n,e,t){let{node:s,fromOffset:o,toOffset:a,from:c,to:d}=n.docView.parseRange(e,t),f=n.domSelectionRange(),p,g=f.anchorNode;if(g&&n.dom.contains(g.nodeType==1?g:g.parentNode)&&(p=[{node:g,offset:f.anchorOffset}],Xc(f)||p.push({node:f.focusNode,offset:f.focusOffset})),$t&&n.input.lastKeyCode===8)for(let T=a;T>o;T--){let _=s.childNodes[T-1],F=_.pmViewDesc;if(_.nodeName=="BR"&&!F){a=T;break}if(!F||F.size)break}let y=n.state.doc,b=n.someProp("domParser")||ys.fromSchema(n.state.schema),x=y.resolve(c),S=null,E=b.parse(s,{topNode:x.parent,topMatch:x.parent.contentMatchAt(x.index()),topOpen:!0,from:o,to:a,preserveWhitespace:x.parent.type.whitespace=="pre"?"full":!0,findPositions:p,ruleFromNode:yM,context:x});if(p&&p[0].pos!=null){let T=p[0].pos,_=p[1]&&p[1].pos;_==null&&(_=T),S={anchor:T+c,head:_+c}}return{doc:E,sel:S,from:c,to:d}}function yM(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Wt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Wt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const bM=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function vM(n,e,t,s,o){let a=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let re=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,de=Vh(n,re);if(de&&!n.state.selection.eq(de)){if($t&&Ar&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",Ce=>Ce(n,Ks(13,"Enter"))))return;let ke=n.state.tr.setSelection(de);re=="pointer"?ke.setMeta("pointer",!0):re=="key"&&ke.scrollIntoView(),a&&ke.setMeta("composition",a),n.dispatch(ke)}return}let c=n.state.doc.resolve(e),d=c.sharedDepth(t);e=c.before(d+1),t=n.state.doc.resolve(t).after(d+1);let f=n.state.selection,p=gM(n,e,t),g=n.state.doc,y=g.slice(p.from,p.to),b,x;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(b=n.state.selection.to,x="end"):(b=n.state.selection.from,x="start"),n.input.lastKeyCode=null;let S=wM(y.content,p.doc.content,p.from,b,x);if(S&&n.input.domChangeCount++,(po&&n.input.lastIOSEnter>Date.now()-225||Ar)&&o.some(re=>re.nodeType==1&&!bM.test(re.nodeName))&&(!S||S.endA>=S.endB)&&n.someProp("handleKeyDown",re=>re(n,Ks(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!S)if(s&&f instanceof we&&!f.empty&&f.$head.sameParent(f.$anchor)&&!n.composing&&!(p.sel&&p.sel.anchor!=p.sel.head))S={start:f.from,endA:f.to,endB:f.to};else{if(p.sel){let re=h0(n,n.state.doc,p.sel);if(re&&!re.eq(n.state.selection)){let de=n.state.tr.setSelection(re);a&&de.setMeta("composition",a),n.dispatch(de)}}return}n.state.selection.from<n.state.selection.to&&S.start==S.endB&&n.state.selection instanceof we&&(S.start>n.state.selection.from&&S.start<=n.state.selection.from+2&&n.state.selection.from>=p.from?S.start=n.state.selection.from:S.endA<n.state.selection.to&&S.endA>=n.state.selection.to-2&&n.state.selection.to<=p.to&&(S.endB+=n.state.selection.to-S.endA,S.endA=n.state.selection.to)),un&&bs<=11&&S.endB==S.start+1&&S.endA==S.start&&S.start>p.from&&p.doc.textBetween(S.start-p.from-1,S.start-p.from+1)=="  "&&(S.start--,S.endA--,S.endB--);let E=p.doc.resolveNoCache(S.start-p.from),T=p.doc.resolveNoCache(S.endB-p.from),_=g.resolve(S.start),F=E.sameParent(T)&&E.parent.inlineContent&&_.end()>=S.endA,Y;if((po&&n.input.lastIOSEnter>Date.now()-225&&(!F||o.some(re=>re.nodeName=="DIV"||re.nodeName=="P"))||!F&&E.pos<p.doc.content.size&&(!E.sameParent(T)||!E.parent.inlineContent)&&!/\S/.test(p.doc.textBetween(E.pos,T.pos,"",""))&&(Y=Ne.findFrom(p.doc.resolve(E.pos+1),1,!0))&&Y.head>E.pos)&&n.someProp("handleKeyDown",re=>re(n,Ks(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>S.start&&SM(g,S.start,S.endA,E,T)&&n.someProp("handleKeyDown",re=>re(n,Ks(8,"Backspace")))){Ar&&$t&&n.domObserver.suppressSelectionUpdates();return}$t&&S.endB==S.start&&(n.input.lastChromeDelete=Date.now()),Ar&&!F&&E.start()!=T.start()&&T.parentOffset==0&&E.depth==T.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==S.endA&&(S.endB-=2,T=p.doc.resolveNoCache(S.endB-p.from),setTimeout(()=>{n.someProp("handleKeyDown",function(re){return re(n,Ks(13,"Enter"))})},20));let H=S.start,U=S.endA,R,Z,le;if(F){if(E.pos==T.pos)un&&bs<=11&&E.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Rr(n),20)),R=n.state.tr.delete(H,U),Z=g.resolve(S.start).marksAcross(g.resolve(S.endA));else if(S.endA==S.endB&&(le=xM(E.parent.content.cut(E.parentOffset,T.parentOffset),_.parent.content.cut(_.parentOffset,S.endA-_.start()))))R=n.state.tr,le.type=="add"?R.addMark(H,U,le.mark):R.removeMark(H,U,le.mark);else if(E.parent.child(E.index()).isText&&E.index()==T.index()-(T.textOffset?0:1)){let re=E.parent.textBetween(E.parentOffset,T.parentOffset);if(n.someProp("handleTextInput",de=>de(n,H,U,re)))return;R=n.state.tr.insertText(re,H,U)}}if(R||(R=n.state.tr.replace(H,U,p.doc.slice(S.start-p.from,S.endB-p.from))),p.sel){let re=h0(n,R.doc,p.sel);re&&!($t&&n.composing&&re.empty&&(S.start!=S.endB||n.input.lastChromeDelete<Date.now()-100)&&(re.head==H||re.head==R.mapping.map(U)-1)||un&&re.empty&&re.head==H)&&R.setSelection(re)}Z&&R.ensureMarks(Z),a&&R.setMeta("composition",a),n.dispatch(R.scrollIntoView())}function h0(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Ih(n,e.resolve(t.anchor),e.resolve(t.head))}function xM(n,e){let t=n.firstChild.marks,s=e.firstChild.marks,o=t,a=s,c,d,f;for(let g=0;g<s.length;g++)o=s[g].removeFromSet(o);for(let g=0;g<t.length;g++)a=t[g].removeFromSet(a);if(o.length==1&&a.length==0)d=o[0],c="add",f=g=>g.mark(d.addToSet(g.marks));else if(o.length==0&&a.length==1)d=a[0],c="remove",f=g=>g.mark(d.removeFromSet(g.marks));else return null;let p=[];for(let g=0;g<e.childCount;g++)p.push(f(e.child(g)));if(W.from(p).eq(n))return{mark:d,type:c}}function SM(n,e,t,s,o){if(t-e<=o.pos-s.pos||Hf(s,!0,!1)<o.pos)return!1;let a=n.resolve(e);if(!s.parent.isTextblock){let d=a.nodeAfter;return d!=null&&t==e+d.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let c=n.resolve(Hf(a,!0,!0));return!c.parent.isTextblock||c.pos>t||Hf(c,!0,!1)<t?!1:s.parent.content.cut(s.parentOffset).eq(c.parent.content)}function Hf(n,e,t){let s=n.depth,o=e?n.end():n.pos;for(;s>0&&(e||n.indexAfter(s)==n.node(s).childCount);)s--,o++,e=!1;if(t){let a=n.node(s).maybeChild(n.indexAfter(s));for(;a&&!a.isLeaf;)a=a.firstChild,o++}return o}function wM(n,e,t,s,o){let a=n.findDiffStart(e,t);if(a==null)return null;let{a:c,b:d}=n.findDiffEnd(e,t+n.size,t+e.size);if(o=="end"){let f=Math.max(0,a-Math.min(c,d));s-=c+f-a}if(c<a&&n.size<e.size){let f=s<=a&&s>=c?a-s:0;a-=f,a&&a<e.size&&p0(e.textBetween(a-1,a+1))&&(a+=f?1:-1),d=a+(d-c),c=a}else if(d<a){let f=s<=a&&s>=d?a-s:0;a-=f,a&&a<n.size&&p0(n.textBetween(a-1,a+1))&&(a+=f?1:-1),c=a+(c-d),d=a}return{start:a,endA:c,endB:d}}function p0(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class kM{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new IC,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(v0),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=y0(this),g0(this),this.nodeViews=b0(this),this.docView=Kb(this.state.doc,m0(this),If(this),this.dom,this),this.domObserver=new fM(this,(s,o,a,c)=>vM(this,s,o,a,c)),this.domObserver.start(),HC(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&xh(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(v0),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let s in this._props)t[s]=this._props[s];t.state=this.state;for(let s in e)t[s]=e[s];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var s;let o=this.state,a=!1,c=!1;e.storedMarks&&this.composing&&(dx(this),c=!0),this.state=e;let d=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(d||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let x=b0(this);TM(x,this.nodeViews)&&(this.nodeViews=x,a=!0)}(d||t.handleDOMEvents!=this._props.handleDOMEvents)&&xh(this),this.editable=y0(this),g0(this);let f=If(this),p=m0(this),g=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",y=a||!this.docView.matchesNode(e.doc,p,f);(y||!e.selection.eq(o.selection))&&(c=!0);let b=g=="preserve"&&c&&this.dom.style.overflowAnchor==null&&nC(this);if(c){this.domObserver.stop();let x=y&&(un||$t)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&EM(o.selection,e.selection);if(y){let S=$t?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=tM(this)),(a||!this.docView.update(e.doc,p,f,this))&&(this.docView.updateOuterDeco(p),this.docView.destroy(),this.docView=Kb(e.doc,p,f,this.dom,this)),S&&!this.trackWrites&&(x=!0)}x||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&CC(this))?Rr(this,x):(Wv(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((s=this.dragging)===null||s===void 0)&&s.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),g=="reset"?this.dom.scrollTop=0:g=="to selection"?this.scrollToSelection():b&&rC(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof ye){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Pb(this,t.getBoundingClientRect(),e)}else Pb(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let s=this.directPlugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let s=this.state.plugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let s=this.pluginViews[t];s.update&&s.update(this,e)}}updateDraggedNode(e,t){let s=e.node,o=-1;if(this.state.doc.nodeAt(s.from)==s.node)o=s.from;else{let a=s.from+(this.state.doc.content.size-t.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==s.node&&(o=a)}this.dragging=new hx(e.slice,e.move,o<0?void 0:ye.create(this.state.doc,o))}someProp(e,t){let s=this._props&&this._props[e],o;if(s!=null&&(o=t?t(s):s))return o;for(let c=0;c<this.directPlugins.length;c++){let d=this.directPlugins[c].props[e];if(d!=null&&(o=t?t(d):d))return o}let a=this.state.plugins;if(a)for(let c=0;c<a.length;c++){let d=a[c].props[e];if(d!=null&&(o=t?t(d):d))return o}}hasFocus(){if(un){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&sC(this.dom),Rr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return cC(this,e)}coordsAtPos(e,t=1){return Fv(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,s=-1){let o=this.docView.posFromDOM(e,t,s);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,t){return pC(this,t||this.state,e)}pasteHTML(e,t){return Va(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Va(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Hh(this,e)}destroy(){this.docView&&(PC(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],If(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,FT())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return FC(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Wt&&this.root.nodeType===11&&XT(this.dom.ownerDocument)==this.dom&&pM(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function m0(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let s in t)s=="class"?e.class+=" "+t[s]:s=="style"?e.style=(e.style?e.style+";":"")+t[s]:!e[s]&&s!="contenteditable"&&s!="nodeName"&&(e[s]=String(t[s]))}),e.translate||(e.translate="no"),[xn.node(0,n.state.doc.content.size,e)]}function g0(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:xn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function y0(n){return!n.someProp("editable",e=>e(n.state)===!1)}function EM(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function b0(n){let e=Object.create(null);function t(s){for(let o in s)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=s[o])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function TM(n,e){let t=0,s=0;for(let o in n){if(n[o]!=e[o])return!0;t++}for(let o in e)s++;return t!=s}function v0(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ss={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ic={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},CM=typeof navigator<"u"&&/Mac/.test(navigator.platform),MM=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ut=0;Ut<10;Ut++)Ss[48+Ut]=Ss[96+Ut]=String(Ut);for(var Ut=1;Ut<=24;Ut++)Ss[Ut+111]="F"+Ut;for(var Ut=65;Ut<=90;Ut++)Ss[Ut]=String.fromCharCode(Ut+32),Ic[Ut]=String.fromCharCode(Ut);for(var Pf in Ss)Ic.hasOwnProperty(Pf)||(Ic[Pf]=Ss[Pf]);function NM(n){var e=CM&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||MM&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Ic:Ss)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const AM=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function OM(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let s,o,a,c;for(let d=0;d<e.length-1;d++){let f=e[d];if(/^(cmd|meta|m)$/i.test(f))c=!0;else if(/^a(lt)?$/i.test(f))s=!0;else if(/^(c|ctrl|control)$/i.test(f))o=!0;else if(/^s(hift)?$/i.test(f))a=!0;else if(/^mod$/i.test(f))AM?c=!0:o=!0;else throw new Error("Unrecognized modifier name: "+f)}return s&&(t="Alt-"+t),o&&(t="Ctrl-"+t),c&&(t="Meta-"+t),a&&(t="Shift-"+t),t}function RM(n){let e=Object.create(null);for(let t in n)e[OM(t)]=n[t];return e}function $f(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function DM(n){return new nn({props:{handleKeyDown:bx(n)}})}function bx(n){let e=RM(n);return function(t,s){let o=NM(s),a,c=e[$f(o,s)];if(c&&c(t.state,t.dispatch,t))return!0;if(o.length==1&&o!=" "){if(s.shiftKey){let d=e[$f(o,s,!1)];if(d&&d(t.state,t.dispatch,t))return!0}if((s.shiftKey||s.altKey||s.metaKey||o.charCodeAt(0)>127)&&(a=Ss[s.keyCode])&&a!=o){let d=e[$f(a,s)];if(d&&d(t.state,t.dispatch,t))return!0}}return!1}}const Yh=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function vx(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const xx=(n,e,t)=>{let s=vx(n,t);if(!s)return!1;let o=Kh(s);if(!o){let c=s.blockRange(),d=c&&vo(c);return d==null?!1:(e&&e(n.tr.lift(c,d).scrollIntoView()),!0)}let a=o.nodeBefore;if(Ax(n,o,e,-1))return!0;if(s.parent.content.size==0&&(mo(a,"end")||ye.isSelectable(a)))for(let c=s.depth;;c--){let d=Yc(n.doc,s.before(c),s.after(c),ue.empty);if(d&&d.slice.size<d.to-d.from){if(e){let f=n.tr.step(d);f.setSelection(mo(a,"end")?Ne.findFrom(f.doc.resolve(f.mapping.map(o.pos,-1)),-1):ye.create(f.doc,o.pos-a.nodeSize)),e(f.scrollIntoView())}return!0}if(c==1||s.node(c-1).childCount>1)break}return a.isAtom&&o.depth==s.depth-1?(e&&e(n.tr.delete(o.pos-a.nodeSize,o.pos).scrollIntoView()),!0):!1},jM=(n,e,t)=>{let s=vx(n,t);if(!s)return!1;let o=Kh(s);return o?Sx(n,o,e):!1},zM=(n,e,t)=>{let s=kx(n,t);if(!s)return!1;let o=Xh(s);return o?Sx(n,o,e):!1};function Sx(n,e,t){let s=e.nodeBefore,o=s,a=e.pos-1;for(;!o.isTextblock;a--){if(o.type.spec.isolating)return!1;let g=o.lastChild;if(!g)return!1;o=g}let c=e.nodeAfter,d=c,f=e.pos+1;for(;!d.isTextblock;f++){if(d.type.spec.isolating)return!1;let g=d.firstChild;if(!g)return!1;d=g}let p=Yc(n.doc,a,f,ue.empty);if(!p||p.from!=a||p instanceof Nt&&p.slice.size>=f-a)return!1;if(t){let g=n.tr.step(p);g.setSelection(we.create(g.doc,a)),t(g.scrollIntoView())}return!0}function mo(n,e,t=!1){for(let s=n;s;s=e=="start"?s.firstChild:s.lastChild){if(s.isTextblock)return!0;if(t&&s.childCount!=1)return!1}return!1}const wx=(n,e,t)=>{let{$head:s,empty:o}=n.selection,a=s;if(!o)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):s.parentOffset>0)return!1;a=Kh(s)}let c=a&&a.nodeBefore;return!c||!ye.isSelectable(c)?!1:(e&&e(n.tr.setSelection(ye.create(n.doc,a.pos-c.nodeSize)).scrollIntoView()),!0)};function Kh(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function kx(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Ex=(n,e,t)=>{let s=kx(n,t);if(!s)return!1;let o=Xh(s);if(!o)return!1;let a=o.nodeAfter;if(Ax(n,o,e,1))return!0;if(s.parent.content.size==0&&(mo(a,"start")||ye.isSelectable(a))){let c=Yc(n.doc,s.before(),s.after(),ue.empty);if(c&&c.slice.size<c.to-c.from){if(e){let d=n.tr.step(c);d.setSelection(mo(a,"start")?Ne.findFrom(d.doc.resolve(d.mapping.map(o.pos)),1):ye.create(d.doc,d.mapping.map(o.pos))),e(d.scrollIntoView())}return!0}}return a.isAtom&&o.depth==s.depth-1?(e&&e(n.tr.delete(o.pos,o.pos+a.nodeSize).scrollIntoView()),!0):!1},Tx=(n,e,t)=>{let{$head:s,empty:o}=n.selection,a=s;if(!o)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):s.parentOffset<s.parent.content.size)return!1;a=Xh(s)}let c=a&&a.nodeAfter;return!c||!ye.isSelectable(c)?!1:(e&&e(n.tr.setSelection(ye.create(n.doc,a.pos)).scrollIntoView()),!0)};function Xh(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const _M=(n,e)=>{let t=n.selection,s=t instanceof ye,o;if(s){if(t.node.isTextblock||!ks(n.doc,t.from))return!1;o=t.from}else if(o=Gc(n.doc,t.from,-1),o==null)return!1;if(e){let a=n.tr.join(o);s&&a.setSelection(ye.create(a.doc,o-n.doc.resolve(o).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},BM=(n,e)=>{let t=n.selection,s;if(t instanceof ye){if(t.node.isTextblock||!ks(n.doc,t.to))return!1;s=t.to}else if(s=Gc(n.doc,t.to,1),s==null)return!1;return e&&e(n.tr.join(s).scrollIntoView()),!0},LM=(n,e)=>{let{$from:t,$to:s}=n.selection,o=t.blockRange(s),a=o&&vo(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)},Cx=(n,e)=>{let{$head:t,$anchor:s}=n.selection;return!t.parent.type.spec.code||!t.sameParent(s)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Jh(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const qM=(n,e)=>{let{$head:t,$anchor:s}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(s))return!1;let o=t.node(-1),a=t.indexAfter(-1),c=Jh(o.contentMatchAt(a));if(!c||!o.canReplaceWith(a,a,c))return!1;if(e){let d=t.after(),f=n.tr.replaceWith(d,d,c.createAndFill());f.setSelection(Ne.near(f.doc.resolve(d),1)),e(f.scrollIntoView())}return!0},Mx=(n,e)=>{let t=n.selection,{$from:s,$to:o}=t;if(t instanceof Sn||s.parent.inlineContent||o.parent.inlineContent)return!1;let a=Jh(o.parent.contentMatchAt(o.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let c=(!s.parentOffset&&o.index()<o.parent.childCount?s:o).pos,d=n.tr.insert(c,a.createAndFill());d.setSelection(we.create(d.doc,c+1)),e(d.scrollIntoView())}return!0},Nx=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let a=t.before();if(Or(n.doc,a))return e&&e(n.tr.split(a).scrollIntoView()),!0}let s=t.blockRange(),o=s&&vo(s);return o==null?!1:(e&&e(n.tr.lift(s,o).scrollIntoView()),!0)};function UM(n){return(e,t)=>{let{$from:s,$to:o}=e.selection;if(e.selection instanceof ye&&e.selection.node.isBlock)return!s.parentOffset||!Or(e.doc,s.pos)?!1:(t&&t(e.tr.split(s.pos).scrollIntoView()),!0);if(!s.depth)return!1;let a=[],c,d,f=!1,p=!1;for(let x=s.depth;;x--)if(s.node(x).isBlock){f=s.end(x)==s.pos+(s.depth-x),p=s.start(x)==s.pos-(s.depth-x),d=Jh(s.node(x-1).contentMatchAt(s.indexAfter(x-1))),a.unshift(f&&d?{type:d}:null),c=x;break}else{if(x==1)return!1;a.unshift(null)}let g=e.tr;(e.selection instanceof we||e.selection instanceof Sn)&&g.deleteSelection();let y=g.mapping.map(s.pos),b=Or(g.doc,y,a.length,a);if(b||(a[0]=d?{type:d}:null,b=Or(g.doc,y,a.length,a)),!b)return!1;if(g.split(y,a.length,a),!f&&p&&s.node(c).type!=d){let x=g.mapping.map(s.before(c)),S=g.doc.resolve(x);d&&s.node(c-1).canReplaceWith(S.index(),S.index()+1,d)&&g.setNodeMarkup(g.mapping.map(s.before(c)),d)}return t&&t(g.scrollIntoView()),!0}}const VM=UM(),IM=(n,e)=>{let{$from:t,to:s}=n.selection,o,a=t.sharedDepth(s);return a==0?!1:(o=t.before(a),e&&e(n.tr.setSelection(ye.create(n.doc,o))),!0)};function HM(n,e,t){let s=e.nodeBefore,o=e.nodeAfter,a=e.index();return!s||!o||!s.type.compatibleContent(o.type)?!1:!s.content.size&&e.parent.canReplace(a-1,a)?(t&&t(n.tr.delete(e.pos-s.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(o.isTextblock||ks(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function Ax(n,e,t,s){let o=e.nodeBefore,a=e.nodeAfter,c,d,f=o.type.spec.isolating||a.type.spec.isolating;if(!f&&HM(n,e,t))return!0;let p=!f&&e.parent.canReplace(e.index(),e.index()+1);if(p&&(c=(d=o.contentMatchAt(o.childCount)).findWrapping(a.type))&&d.matchType(c[0]||a.type).validEnd){if(t){let x=e.pos+a.nodeSize,S=W.empty;for(let _=c.length-1;_>=0;_--)S=W.from(c[_].create(null,S));S=W.from(o.copy(S));let E=n.tr.step(new At(e.pos-1,x,e.pos,x,new ue(S,1,0),c.length,!0)),T=E.doc.resolve(x+2*c.length);T.nodeAfter&&T.nodeAfter.type==o.type&&ks(E.doc,T.pos)&&E.join(T.pos),t(E.scrollIntoView())}return!0}let g=a.type.spec.isolating||s>0&&f?null:Ne.findFrom(e,1),y=g&&g.$from.blockRange(g.$to),b=y&&vo(y);if(b!=null&&b>=e.depth)return t&&t(n.tr.lift(y,b).scrollIntoView()),!0;if(p&&mo(a,"start",!0)&&mo(o,"end")){let x=o,S=[];for(;S.push(x),!x.isTextblock;)x=x.lastChild;let E=a,T=1;for(;!E.isTextblock;E=E.firstChild)T++;if(x.canReplace(x.childCount,x.childCount,E.content)){if(t){let _=W.empty;for(let Y=S.length-1;Y>=0;Y--)_=W.from(S[Y].copy(_));let F=n.tr.step(new At(e.pos-S.length,e.pos+a.nodeSize,e.pos+T,e.pos+a.nodeSize-T,new ue(_,S.length,0),0,!0));t(F.scrollIntoView())}return!0}}return!1}function Ox(n){return function(e,t){let s=e.selection,o=n<0?s.$from:s.$to,a=o.depth;for(;o.node(a).isInline;){if(!a)return!1;a--}return o.node(a).isTextblock?(t&&t(e.tr.setSelection(we.create(e.doc,n<0?o.start(a):o.end(a)))),!0):!1}}const PM=Ox(-1),$M=Ox(1);function FM(n,e=null){return function(t,s){let{$from:o,$to:a}=t.selection,c=o.blockRange(a),d=c&&Lh(c,n,e);return d?(s&&s(t.tr.wrap(c,d).scrollIntoView()),!0):!1}}function x0(n,e=null){return function(t,s){let o=!1;for(let a=0;a<t.selection.ranges.length&&!o;a++){let{$from:{pos:c},$to:{pos:d}}=t.selection.ranges[a];t.doc.nodesBetween(c,d,(f,p)=>{if(o)return!1;if(!(!f.isTextblock||f.hasMarkup(n,e)))if(f.type==n)o=!0;else{let g=t.doc.resolve(p),y=g.index();o=g.parent.canReplaceWith(y,y+1,n)}})}if(!o)return!1;if(s){let a=t.tr;for(let c=0;c<t.selection.ranges.length;c++){let{$from:{pos:d},$to:{pos:f}}=t.selection.ranges[c];a.setBlockType(d,f,n,e)}s(a.scrollIntoView())}return!0}}function Zh(...n){return function(e,t,s){for(let o=0;o<n.length;o++)if(n[o](e,t,s))return!0;return!1}}Zh(Yh,xx,wx);Zh(Yh,Ex,Tx);Zh(Cx,Mx,Nx,VM);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function QM(n,e=null){return function(t,s){let{$from:o,$to:a}=t.selection,c=o.blockRange(a);if(!c)return!1;let d=s?t.tr:null;return GM(d,c,n,e)?(s&&s(d.scrollIntoView()),!0):!1}}function GM(n,e,t,s=null){let o=!1,a=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let f=c.resolve(e.start-2);a=new zc(f,f,e.depth),e.endIndex<e.parent.childCount&&(e=new zc(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let d=Lh(a,t,s,e);return d?(n&&YM(n,e,d,o,t),!0):!1}function YM(n,e,t,s,o){let a=W.empty;for(let g=t.length-1;g>=0;g--)a=W.from(t[g].type.create(t[g].attrs,a));n.step(new At(e.start-(s?2:0),e.end,e.start,e.end,new ue(a,0,0),t.length,!0));let c=0;for(let g=0;g<t.length;g++)t[g].type==o&&(c=g+1);let d=t.length-c,f=e.start+t.length-(s?2:0),p=e.parent;for(let g=e.startIndex,y=e.endIndex,b=!0;g<y;g++,b=!1)!b&&Or(n.doc,f,d)&&(n.split(f,d),f+=2*d),f+=p.child(g).nodeSize;return n}function KM(n){return function(e,t){let{$from:s,$to:o}=e.selection,a=s.blockRange(o,c=>c.childCount>0&&c.firstChild.type==n);return a?t?s.node(a.depth-1).type==n?XM(e,t,n,a):JM(e,t,a):!0:!1}}function XM(n,e,t,s){let o=n.tr,a=s.end,c=s.$to.end(s.depth);a<c&&(o.step(new At(a-1,c,a,c,new ue(W.from(t.create(null,s.parent.copy())),1,0),1,!0)),s=new zc(o.doc.resolve(s.$from.pos),o.doc.resolve(c),s.depth));const d=vo(s);if(d==null)return!1;o.lift(s,d);let f=o.doc.resolve(o.mapping.map(a,-1)-1);return ks(o.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&o.join(f.pos),e(o.scrollIntoView()),!0}function JM(n,e,t){let s=n.tr,o=t.parent;for(let x=t.end,S=t.endIndex-1,E=t.startIndex;S>E;S--)x-=o.child(S).nodeSize,s.delete(x-1,x+1);let a=s.doc.resolve(t.start),c=a.nodeAfter;if(s.mapping.map(t.end)!=t.start+a.nodeAfter.nodeSize)return!1;let d=t.startIndex==0,f=t.endIndex==o.childCount,p=a.node(-1),g=a.index(-1);if(!p.canReplace(g+(d?0:1),g+1,c.content.append(f?W.empty:W.from(o))))return!1;let y=a.pos,b=y+c.nodeSize;return s.step(new At(y-(d?1:0),b+(f?1:0),y+1,b-1,new ue((d?W.empty:W.from(o.copy(W.empty))).append(f?W.empty:W.from(o.copy(W.empty))),d?0:1,f?0:1),d?0:1)),e(s.scrollIntoView()),!0}function ZM(n){return function(e,t){let{$from:s,$to:o}=e.selection,a=s.blockRange(o,p=>p.childCount>0&&p.firstChild.type==n);if(!a)return!1;let c=a.startIndex;if(c==0)return!1;let d=a.parent,f=d.child(c-1);if(f.type!=n)return!1;if(t){let p=f.lastChild&&f.lastChild.type==d.type,g=W.from(p?n.create():null),y=new ue(W.from(n.create(null,W.from(d.type.create(null,g)))),p?3:1,0),b=a.start,x=a.end;t(e.tr.step(new At(b-(p?3:1),x,b,x,y,1,!0)).scrollIntoView())}return!0}}function Wc(n){const{state:e,transaction:t}=n;let{selection:s}=t,{doc:o}=t,{storedMarks:a}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return s},get doc(){return o},get tr(){return s=t.selection,o=t.doc,a=t.storedMarks,t}}}class eu{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:s}=this,{view:o}=t,{tr:a}=s,c=this.buildProps(a);return Object.fromEntries(Object.entries(e).map(([d,f])=>[d,(...g)=>{const y=f(...g)(c);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(a),y}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:s,editor:o,state:a}=this,{view:c}=o,d=[],f=!!e,p=e||a.tr,g=()=>(!f&&t&&!p.getMeta("preventDispatch")&&!this.hasCustomState&&c.dispatch(p),d.every(b=>b===!0)),y={...Object.fromEntries(Object.entries(s).map(([b,x])=>[b,(...E)=>{const T=this.buildProps(p,t),_=x(...E)(T);return d.push(_),y}])),run:g};return y}createCan(e){const{rawCommands:t,state:s}=this,o=!1,a=e||s.tr,c=this.buildProps(a,o);return{...Object.fromEntries(Object.entries(t).map(([f,p])=>[f,(...g)=>p(...g)({...c,dispatch:void 0})])),chain:()=>this.createChain(a,o)}}buildProps(e,t=!0){const{rawCommands:s,editor:o,state:a}=this,{view:c}=o,d={tr:e,editor:o,view:c,state:Wc({state:a,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(s).map(([f,p])=>[f,(...g)=>p(...g)(d)]))}};return d}}class WM{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const s=this.callbacks[e];return s&&s.forEach(o=>o.apply(this,t)),this}off(e,t){const s=this.callbacks[e];return s&&(t?this.callbacks[e]=s.filter(o=>o!==t):delete this.callbacks[e]),this}once(e,t){const s=(...o)=>{this.off(e,s),t.apply(this,o)};return this.on(e,s)}removeAllListeners(){this.callbacks={}}}function me(n,e,t){return n.config[e]===void 0&&n.parent?me(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?me(n.parent,e,t):null}):n.config[e]}function tu(n){const e=n.filter(o=>o.type==="extension"),t=n.filter(o=>o.type==="node"),s=n.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:s}}function Rx(n){const e=[],{nodeExtensions:t,markExtensions:s}=tu(n),o=[...t,...s],a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(c=>{const d={name:c.name,options:c.options,storage:c.storage,extensions:o},f=me(c,"addGlobalAttributes",d);if(!f)return;f().forEach(g=>{g.types.forEach(y=>{Object.entries(g.attributes).forEach(([b,x])=>{e.push({type:y,name:b,attribute:{...a,...x}})})})})}),o.forEach(c=>{const d={name:c.name,options:c.options,storage:c.storage},f=me(c,"addAttributes",d);if(!f)return;const p=f();Object.entries(p).forEach(([g,y])=>{const b={...a,...y};typeof b?.default=="function"&&(b.default=b.default()),b?.isRequired&&b?.default===void 0&&delete b.default,e.push({type:c.name,name:g,attribute:b})})}),e}function Rt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Ft(...n){return n.filter(e=>!!e).reduce((e,t)=>{const s={...e};return Object.entries(t).forEach(([o,a])=>{if(!s[o]){s[o]=a;return}if(o==="class"){const d=a?String(a).split(" "):[],f=s[o]?s[o].split(" "):[],p=d.filter(g=>!f.includes(g));s[o]=[...f,...p].join(" ")}else if(o==="style"){const d=a?a.split(";").map(g=>g.trim()).filter(Boolean):[],f=s[o]?s[o].split(";").map(g=>g.trim()).filter(Boolean):[],p=new Map;f.forEach(g=>{const[y,b]=g.split(":").map(x=>x.trim());p.set(y,b)}),d.forEach(g=>{const[y,b]=g.split(":").map(x=>x.trim());p.set(y,b)}),s[o]=Array.from(p.entries()).map(([g,y])=>`${g}: ${y}`).join("; ")}else s[o]=a}),s},{})}function Sh(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,s)=>Ft(t,s),{})}function Dx(n){return typeof n=="function"}function Oe(n,e=void 0,...t){return Dx(n)?e?n.bind(e)(...t):n(...t):n}function eN(n={}){return Object.keys(n).length===0&&n.constructor===Object}function tN(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function S0(n,e){return"style"in n?n:{...n,getAttrs:t=>{const s=n.getAttrs?n.getAttrs(t):n.attrs;if(s===!1)return!1;const o=e.reduce((a,c)=>{const d=c.attribute.parseHTML?c.attribute.parseHTML(t):tN(t.getAttribute(c.name));return d==null?a:{...a,[c.name]:d}},{});return{...s,...o}}}}function w0(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&eN(t)?!1:t!=null))}function nN(n,e){var t;const s=Rx(n),{nodeExtensions:o,markExtensions:a}=tu(n),c=(t=o.find(p=>me(p,"topNode")))===null||t===void 0?void 0:t.name,d=Object.fromEntries(o.map(p=>{const g=s.filter(_=>_.type===p.name),y={name:p.name,options:p.options,storage:p.storage,editor:e},b=n.reduce((_,F)=>{const Y=me(F,"extendNodeSchema",y);return{..._,...Y?Y(p):{}}},{}),x=w0({...b,content:Oe(me(p,"content",y)),marks:Oe(me(p,"marks",y)),group:Oe(me(p,"group",y)),inline:Oe(me(p,"inline",y)),atom:Oe(me(p,"atom",y)),selectable:Oe(me(p,"selectable",y)),draggable:Oe(me(p,"draggable",y)),code:Oe(me(p,"code",y)),whitespace:Oe(me(p,"whitespace",y)),linebreakReplacement:Oe(me(p,"linebreakReplacement",y)),defining:Oe(me(p,"defining",y)),isolating:Oe(me(p,"isolating",y)),attrs:Object.fromEntries(g.map(_=>{var F;return[_.name,{default:(F=_?.attribute)===null||F===void 0?void 0:F.default}]}))}),S=Oe(me(p,"parseHTML",y));S&&(x.parseDOM=S.map(_=>S0(_,g)));const E=me(p,"renderHTML",y);E&&(x.toDOM=_=>E({node:_,HTMLAttributes:Sh(_,g)}));const T=me(p,"renderText",y);return T&&(x.toText=T),[p.name,x]})),f=Object.fromEntries(a.map(p=>{const g=s.filter(T=>T.type===p.name),y={name:p.name,options:p.options,storage:p.storage,editor:e},b=n.reduce((T,_)=>{const F=me(_,"extendMarkSchema",y);return{...T,...F?F(p):{}}},{}),x=w0({...b,inclusive:Oe(me(p,"inclusive",y)),excludes:Oe(me(p,"excludes",y)),group:Oe(me(p,"group",y)),spanning:Oe(me(p,"spanning",y)),code:Oe(me(p,"code",y)),attrs:Object.fromEntries(g.map(T=>{var _;return[T.name,{default:(_=T?.attribute)===null||_===void 0?void 0:_.default}]}))}),S=Oe(me(p,"parseHTML",y));S&&(x.parseDOM=S.map(T=>S0(T,g)));const E=me(p,"renderHTML",y);return E&&(x.toDOM=T=>E({mark:T,HTMLAttributes:Sh(T,g)})),[p.name,x]}));return new Sv({topNode:c,nodes:d,marks:f})}function Ff(n,e){return e.nodes[n]||e.marks[n]||null}function k0(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Wh(n,e){const t=ui.fromSchema(e).serializeFragment(n),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(t),o.innerHTML}const rN=(n,e=500)=>{let t="";const s=n.parentOffset;return n.parent.nodesBetween(Math.max(0,s-e),s,(o,a,c,d)=>{var f,p;const g=((p=(f=o.type.spec).toText)===null||p===void 0?void 0:p.call(f,{node:o,pos:a,parent:c,index:d}))||o.textContent||"%leaf%";t+=o.isAtom&&!o.isText?g:g.slice(0,Math.max(0,s-a))}),t};function ep(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class nu{constructor(e){this.find=e.find,this.handler=e.handler}}const sN=(n,e)=>{if(ep(e))return e.exec(n);const t=e(n);if(!t)return null;const s=[t.text];return s.index=t.index,s.input=n,s.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),s.push(t.replaceWith)),s};function yc(n){var e;const{editor:t,from:s,to:o,text:a,rules:c,plugin:d}=n,{view:f}=t;if(f.composing)return!1;const p=f.state.doc.resolve(s);if(p.parent.type.spec.code||!((e=p.nodeBefore||p.nodeAfter)===null||e===void 0)&&e.marks.find(b=>b.type.spec.code))return!1;let g=!1;const y=rN(p)+a;return c.forEach(b=>{if(g)return;const x=sN(y,b.find);if(!x)return;const S=f.state.tr,E=Wc({state:f.state,transaction:S}),T={from:s-(x[0].length-a.length),to:o},{commands:_,chain:F,can:Y}=new eu({editor:t,state:E});b.handler({state:E,range:T,match:x,commands:_,chain:F,can:Y})===null||!S.steps.length||(S.setMeta(d,{transform:S,from:s,to:o,text:a}),f.dispatch(S),g=!0)}),g}function iN(n){const{editor:e,rules:t}=n,s=new nn({state:{init(){return null},apply(o,a,c){const d=o.getMeta(s);if(d)return d;const f=o.getMeta("applyInputRules");return!!f&&setTimeout(()=>{let{text:g}=f;typeof g=="string"?g=g:g=Wh(W.from(g),c.schema);const{from:y}=f,b=y+g.length;yc({editor:e,from:y,to:b,text:g,rules:t,plugin:s})}),o.selectionSet||o.docChanged?null:a}},props:{handleTextInput(o,a,c,d){return yc({editor:e,from:a,to:c,text:d,rules:t,plugin:s})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:a}=o.state.selection;a&&yc({editor:e,from:a.pos,to:a.pos,text:"",rules:t,plugin:s})}),!1)},handleKeyDown(o,a){if(a.key!=="Enter")return!1;const{$cursor:c}=o.state.selection;return c?yc({editor:e,from:c.pos,to:c.pos,text:`
`,rules:t,plugin:s}):!1}},isInputRules:!0});return s}function oN(n){return Object.prototype.toString.call(n).slice(8,-1)}function bc(n){return oN(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function ru(n,e){const t={...n};return bc(n)&&bc(e)&&Object.keys(e).forEach(s=>{bc(e[s])&&bc(n[s])?t[s]=ru(n[s],e[s]):t[s]=e[s]}),t}class ws{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Oe(me(this,"addOptions",{name:this.name}))),this.storage=Oe(me(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ws(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>ru(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new ws(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Oe(me(t,"addOptions",{name:t.name})),t.storage=Oe(me(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:s}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const c=o.marks();if(!!!c.find(p=>p?.type.name===t.name))return!1;const f=c.find(p=>p?.type.name===t.name);return f&&s.removeStoredMark(f),s.insertText(" ",o.pos),e.view.dispatch(s),!0}return!1}}function aN(n){return typeof n=="number"}class lN{constructor(e){this.find=e.find,this.handler=e.handler}}const cN=(n,e,t)=>{if(ep(e))return[...n.matchAll(e)];const s=e(n,t);return s?s.map(o=>{const a=[o.text];return a.index=o.index,a.input=n,a.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(o.replaceWith)),a}):[]};function uN(n){const{editor:e,state:t,from:s,to:o,rule:a,pasteEvent:c,dropEvent:d}=n,{commands:f,chain:p,can:g}=new eu({editor:e,state:t}),y=[];return t.doc.nodesBetween(s,o,(x,S)=>{if(!x.isTextblock||x.type.spec.code)return;const E=Math.max(s,S),T=Math.min(o,S+x.content.size),_=x.textBetween(E-S,T-S,void 0,"￼");cN(_,a.find,c).forEach(Y=>{if(Y.index===void 0)return;const H=E+Y.index+1,U=H+Y[0].length,R={from:t.tr.mapping.map(H),to:t.tr.mapping.map(U)},Z=a.handler({state:t,range:R,match:Y,commands:f,chain:p,can:g,pasteEvent:c,dropEvent:d});y.push(Z)})}),y.every(x=>x!==null)}let vc=null;const dN=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function fN(n){const{editor:e,rules:t}=n;let s=null,o=!1,a=!1,c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,d;try{d=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{d=null}const f=({state:g,from:y,to:b,rule:x,pasteEvt:S})=>{const E=g.tr,T=Wc({state:g,transaction:E});if(!(!uN({editor:e,state:T,from:Math.max(y-1,0),to:b.b-1,rule:x,pasteEvent:S,dropEvent:d})||!E.steps.length)){try{d=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{d=null}return c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,E}};return t.map(g=>new nn({view(y){const b=S=>{var E;s=!((E=y.dom.parentElement)===null||E===void 0)&&E.contains(S.target)?y.dom.parentElement:null,s&&(vc=e)},x=()=>{vc&&(vc=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",x),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",x)}}},props:{handleDOMEvents:{drop:(y,b)=>{if(a=s===y.dom.parentElement,d=b,!a){const x=vc;x&&setTimeout(()=>{const S=x.state.selection;S&&x.commands.deleteRange({from:S.from,to:S.to})},10)}return!1},paste:(y,b)=>{var x;const S=(x=b.clipboardData)===null||x===void 0?void 0:x.getData("text/html");return c=b,o=!!S?.includes("data-pm-slice"),!1}}},appendTransaction:(y,b,x)=>{const S=y[0],E=S.getMeta("uiEvent")==="paste"&&!o,T=S.getMeta("uiEvent")==="drop"&&!a,_=S.getMeta("applyPasteRules"),F=!!_;if(!E&&!T&&!F)return;if(F){let{text:U}=_;typeof U=="string"?U=U:U=Wh(W.from(U),x.schema);const{from:R}=_,Z=R+U.length,le=dN(U);return f({rule:g,state:x,from:R,to:{b:Z},pasteEvt:le})}const Y=b.doc.content.findDiffStart(x.doc.content),H=b.doc.content.findDiffEnd(x.doc.content);if(!(!aN(Y)||!H||Y===H.b))return f({rule:g,state:x,from:Y,to:H,pasteEvt:c})}}))}function hN(n){const e=n.filter((t,s)=>n.indexOf(t)!==s);return Array.from(new Set(e))}class ao{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=ao.resolve(e),this.schema=nN(this.extensions,t),this.setupExtensions()}static resolve(e){const t=ao.sort(ao.flatten(e)),s=hN(t.map(o=>o.name));return s.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${s.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const s={name:t.name,options:t.options,storage:t.storage},o=me(t,"addExtensions",s);return o?[t,...this.flatten(o())]:t}).flat(10)}static sort(e){return e.sort((s,o)=>{const a=me(s,"priority")||100,c=me(o,"priority")||100;return a>c?-1:a<c?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const s={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Ff(t.name,this.schema)},o=me(t,"addCommands",s);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,t=ao.sort([...this.extensions].reverse()),s=[],o=[],a=t.map(c=>{const d={name:c.name,options:c.options,storage:c.storage,editor:e,type:Ff(c.name,this.schema)},f=[],p=me(c,"addKeyboardShortcuts",d);let g={};if(c.type==="mark"&&me(c,"exitable",d)&&(g.ArrowRight=()=>ws.handleExit({editor:e,mark:c})),p){const E=Object.fromEntries(Object.entries(p()).map(([T,_])=>[T,()=>_({editor:e})]));g={...g,...E}}const y=DM(g);f.push(y);const b=me(c,"addInputRules",d);k0(c,e.options.enableInputRules)&&b&&s.push(...b());const x=me(c,"addPasteRules",d);k0(c,e.options.enablePasteRules)&&x&&o.push(...x());const S=me(c,"addProseMirrorPlugins",d);if(S){const E=S();f.push(...E)}return f}).flat();return[iN({editor:e,rules:s}),...fN({editor:e,rules:o}),...a]}get attributes(){return Rx(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=tu(this.extensions);return Object.fromEntries(t.filter(s=>!!me(s,"addNodeView")).map(s=>{const o=this.attributes.filter(f=>f.type===s.name),a={name:s.name,options:s.options,storage:s.storage,editor:e,type:Rt(s.name,this.schema)},c=me(s,"addNodeView",a);if(!c)return[];const d=(f,p,g,y,b)=>{const x=Sh(f,o);return c()({node:f,view:p,getPos:g,decorations:y,innerDecorations:b,editor:e,extension:s,HTMLAttributes:x})};return[s.name,d]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const s={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Ff(e.name,this.schema)};e.type==="mark"&&(!((t=Oe(me(e,"keepOnSplit",s)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const o=me(e,"onBeforeCreate",s),a=me(e,"onCreate",s),c=me(e,"onUpdate",s),d=me(e,"onSelectionUpdate",s),f=me(e,"onTransaction",s),p=me(e,"onFocus",s),g=me(e,"onBlur",s),y=me(e,"onDestroy",s);o&&this.editor.on("beforeCreate",o),a&&this.editor.on("create",a),c&&this.editor.on("update",c),d&&this.editor.on("selectionUpdate",d),f&&this.editor.on("transaction",f),p&&this.editor.on("focus",p),g&&this.editor.on("blur",g),y&&this.editor.on("destroy",y)})}}class Qt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Oe(me(this,"addOptions",{name:this.name}))),this.storage=Oe(me(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Qt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>ru(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Qt({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Oe(me(t,"addOptions",{name:t.name})),t.storage=Oe(me(t,"addStorage",{name:t.name,options:t.options})),t}}function jx(n,e,t){const{from:s,to:o}=e,{blockSeparator:a=`

`,textSerializers:c={}}=t||{};let d="";return n.nodesBetween(s,o,(f,p,g,y)=>{var b;f.isBlock&&p>s&&(d+=a);const x=c?.[f.type.name];if(x)return g&&(d+=x({node:f,pos:p,parent:g,index:y,range:e})),!1;f.isText&&(d+=(b=f?.text)===null||b===void 0?void 0:b.slice(Math.max(s,p)-p,o-p))}),d}function zx(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const pN=Qt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new nn({key:new Kn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:s,selection:o}=e,{ranges:a}=o,c=Math.min(...a.map(g=>g.$from.pos)),d=Math.max(...a.map(g=>g.$to.pos)),f=zx(t);return jx(s,{from:c,to:d},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:f})}}})]}}),mN=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window?.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),gN=(n=!1)=>({commands:e})=>e.setContent("",n),yN=()=>({state:n,tr:e,dispatch:t})=>{const{selection:s}=e,{ranges:o}=s;return t&&o.forEach(({$from:a,$to:c})=>{n.doc.nodesBetween(a.pos,c.pos,(d,f)=>{if(d.type.isText)return;const{doc:p,mapping:g}=e,y=p.resolve(g.map(f)),b=p.resolve(g.map(f+d.nodeSize)),x=y.blockRange(b);if(!x)return;const S=vo(x);if(d.type.isTextblock){const{defaultType:E}=y.parent.contentMatchAt(y.index());e.setNodeMarkup(x.start,E)}(S||S===0)&&e.lift(x,S)})}),!0},bN=n=>e=>n(e),vN=()=>({state:n,dispatch:e})=>Mx(n,e),xN=(n,e)=>({editor:t,tr:s})=>{const{state:o}=t,a=o.doc.slice(n.from,n.to);s.deleteRange(n.from,n.to);const c=s.mapping.map(e);return s.insert(c,a.content),s.setSelection(new we(s.doc.resolve(c-1))),!0},SN=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,s=t.$anchor.node();if(s.content.size>0)return!1;const o=n.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===s.type){if(e){const d=o.before(a),f=o.after(a);n.delete(d,f).scrollIntoView()}return!0}return!1},wN=n=>({tr:e,state:t,dispatch:s})=>{const o=Rt(n,t.schema),a=e.selection.$anchor;for(let c=a.depth;c>0;c-=1)if(a.node(c).type===o){if(s){const f=a.before(c),p=a.after(c);e.delete(f,p).scrollIntoView()}return!0}return!1},kN=n=>({tr:e,dispatch:t})=>{const{from:s,to:o}=n;return t&&e.delete(s,o),!0},EN=()=>({state:n,dispatch:e})=>Yh(n,e),TN=()=>({commands:n})=>n.keyboardShortcut("Enter"),CN=()=>({state:n,dispatch:e})=>qM(n,e);function Hc(n,e,t={strict:!0}){const s=Object.keys(e);return s.length?s.every(o=>t.strict?e[o]===n[o]:ep(e[o])?e[o].test(n[o]):e[o]===n[o]):!0}function _x(n,e,t={}){return n.find(s=>s.type===e&&Hc(Object.fromEntries(Object.keys(t).map(o=>[o,s.attrs[o]])),t))}function E0(n,e,t={}){return!!_x(n,e,t)}function tp(n,e,t){var s;if(!n||!e)return;let o=n.parent.childAfter(n.parentOffset);if((!o.node||!o.node.marks.some(g=>g.type===e))&&(o=n.parent.childBefore(n.parentOffset)),!o.node||!o.node.marks.some(g=>g.type===e)||(t=t||((s=o.node.marks[0])===null||s===void 0?void 0:s.attrs),!_x([...o.node.marks],e,t)))return;let c=o.index,d=n.start()+o.offset,f=c+1,p=d+o.node.nodeSize;for(;c>0&&E0([...n.parent.child(c-1).marks],e,t);)c-=1,d-=n.parent.child(c).nodeSize;for(;f<n.parent.childCount&&E0([...n.parent.child(f).marks],e,t);)p+=n.parent.child(f).nodeSize,f+=1;return{from:d,to:p}}function Ts(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const MN=(n,e={})=>({tr:t,state:s,dispatch:o})=>{const a=Ts(n,s.schema),{doc:c,selection:d}=t,{$from:f,from:p,to:g}=d;if(o){const y=tp(f,a,e);if(y&&y.from<=p&&y.to>=g){const b=we.create(c,y.from,y.to);t.setSelection(b)}}return!0},NN=n=>e=>{const t=typeof n=="function"?n(e):n;for(let s=0;s<t.length;s+=1)if(t[s](e))return!0;return!1};function Bx(n){return n instanceof we}function Ws(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Lx(n,e=null){if(!e)return null;const t=Ne.atStart(n),s=Ne.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return s;const o=t.from,a=s.to;return e==="all"?we.create(n,Ws(0,o,a),Ws(n.content.size,o,a)):we.create(n,Ws(e,o,a),Ws(e,o,a))}function AN(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function np(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const ON=(n=null,e={})=>({editor:t,view:s,tr:o,dispatch:a})=>{e={scrollIntoView:!0,...e};const c=()=>{(np()||AN())&&s.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(s.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};if(s.hasFocus()&&n===null||n===!1)return!0;if(a&&n===null&&!Bx(t.state.selection))return c(),!0;const d=Lx(o.doc,n)||t.state.selection,f=t.state.selection.eq(d);return a&&(f||o.setSelection(d),f&&o.storedMarks&&o.setStoredMarks(o.storedMarks),c()),!0},RN=(n,e)=>t=>n.every((s,o)=>e(s,{...t,index:o})),DN=(n,e)=>({tr:t,commands:s})=>s.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),qx=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const s=e[t];s.nodeType===3&&s.nodeValue&&/^(\n\s\s|\n)$/.test(s.nodeValue)?n.removeChild(s):s.nodeType===1&&qx(s)}return n};function xc(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return qx(t)}function Pc(n,e,t){if(n instanceof gs||n instanceof W)return n;t={slice:!0,parseOptions:{},...t};const s=typeof n=="object"&&n!==null,o=typeof n=="string";if(s)try{if(Array.isArray(n)&&n.length>0)return W.fromArray(n.map(d=>e.nodeFromJSON(d)));const c=e.nodeFromJSON(n);return t.errorOnInvalidContent&&c.check(),c}catch(a){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",a),Pc("",e,t)}if(o){if(t.errorOnInvalidContent){let c=!1,d="";const f=new Sv({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:p=>(c=!0,d=typeof p=="string"?p:p.outerHTML,null)}]}})});if(t.slice?ys.fromSchema(f).parseSlice(xc(n),t.parseOptions):ys.fromSchema(f).parse(xc(n),t.parseOptions),t.errorOnInvalidContent&&c)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${d}`)})}const a=ys.fromSchema(e);return t.slice?a.parseSlice(xc(n),t.parseOptions).content:a.parse(xc(n),t.parseOptions)}return Pc("",e,t)}function jN(n,e,t){const s=n.steps.length-1;if(s<e)return;const o=n.steps[s];if(!(o instanceof Nt||o instanceof At))return;const a=n.mapping.maps[s];let c=0;a.forEach((d,f,p,g)=>{c===0&&(c=g)}),n.setSelection(Ne.near(n.doc.resolve(c),t))}const zN=n=>!("type"in n),_N=(n,e,t)=>({tr:s,dispatch:o,editor:a})=>{var c;if(o){t={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let d;try{d=Pc(e,a.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(c=t.errorOnInvalidContent)!==null&&c!==void 0?c:a.options.enableContentCheck})}catch(S){return a.emit("contentError",{editor:a,error:S,disableCollaboration:()=>{a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}}),!1}let{from:f,to:p}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},g=!0,y=!0;if((zN(d)?d:[d]).forEach(S=>{S.check(),g=g?S.isText&&S.marks.length===0:!1,y=y?S.isBlock:!1}),f===p&&y){const{parent:S}=s.doc.resolve(f);S.isTextblock&&!S.type.spec.code&&!S.childCount&&(f-=1,p+=1)}let x;if(g){if(Array.isArray(e))x=e.map(S=>S.text||"").join("");else if(e instanceof W){let S="";e.forEach(E=>{E.text&&(S+=E.text)}),x=S}else typeof e=="object"&&e&&e.text?x=e.text:x=e;s.insertText(x,f,p)}else x=d,s.replaceWith(f,p,x);t.updateSelection&&jN(s,s.steps.length-1,-1),t.applyInputRules&&s.setMeta("applyInputRules",{from:f,text:x}),t.applyPasteRules&&s.setMeta("applyPasteRules",{from:f,text:x})}return!0},BN=()=>({state:n,dispatch:e})=>_M(n,e),LN=()=>({state:n,dispatch:e})=>BM(n,e),qN=()=>({state:n,dispatch:e})=>xx(n,e),UN=()=>({state:n,dispatch:e})=>Ex(n,e),VN=()=>({state:n,dispatch:e,tr:t})=>{try{const s=Gc(n.doc,n.selection.$from.pos,-1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},IN=()=>({state:n,dispatch:e,tr:t})=>{try{const s=Gc(n.doc,n.selection.$from.pos,1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},HN=()=>({state:n,dispatch:e})=>jM(n,e),PN=()=>({state:n,dispatch:e})=>zM(n,e);function Ux(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function $N(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let s,o,a,c;for(let d=0;d<e.length-1;d+=1){const f=e[d];if(/^(cmd|meta|m)$/i.test(f))c=!0;else if(/^a(lt)?$/i.test(f))s=!0;else if(/^(c|ctrl|control)$/i.test(f))o=!0;else if(/^s(hift)?$/i.test(f))a=!0;else if(/^mod$/i.test(f))np()||Ux()?c=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${f}`)}return s&&(t=`Alt-${t}`),o&&(t=`Ctrl-${t}`),c&&(t=`Meta-${t}`),a&&(t=`Shift-${t}`),t}const FN=n=>({editor:e,view:t,tr:s,dispatch:o})=>{const a=$N(n).split(/-(?!$)/),c=a.find(p=>!["Alt","Ctrl","Meta","Shift"].includes(p)),d=new KeyboardEvent("keydown",{key:c==="Space"?" ":c,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),f=e.captureTransaction(()=>{t.someProp("handleKeyDown",p=>p(t,d))});return f?.steps.forEach(p=>{const g=p.map(s.mapping);g&&o&&s.maybeStep(g)}),!0};function Ha(n,e,t={}){const{from:s,to:o,empty:a}=n.selection,c=e?Rt(e,n.schema):null,d=[];n.doc.nodesBetween(s,o,(y,b)=>{if(y.isText)return;const x=Math.max(s,b),S=Math.min(o,b+y.nodeSize);d.push({node:y,from:x,to:S})});const f=o-s,p=d.filter(y=>c?c.name===y.node.type.name:!0).filter(y=>Hc(y.node.attrs,t,{strict:!1}));return a?!!p.length:p.reduce((y,b)=>y+b.to-b.from,0)>=f}const QN=(n,e={})=>({state:t,dispatch:s})=>{const o=Rt(n,t.schema);return Ha(t,o,e)?LM(t,s):!1},GN=()=>({state:n,dispatch:e})=>Nx(n,e),YN=n=>({state:e,dispatch:t})=>{const s=Rt(n,e.schema);return KM(s)(e,t)},KN=()=>({state:n,dispatch:e})=>Cx(n,e);function su(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function T0(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((s,o)=>(t.includes(o)||(s[o]=n[o]),s),{})}const XN=(n,e)=>({tr:t,state:s,dispatch:o})=>{let a=null,c=null;const d=su(typeof n=="string"?n:n.name,s.schema);return d?(d==="node"&&(a=Rt(n,s.schema)),d==="mark"&&(c=Ts(n,s.schema)),o&&t.selection.ranges.forEach(f=>{s.doc.nodesBetween(f.$from.pos,f.$to.pos,(p,g)=>{a&&a===p.type&&t.setNodeMarkup(g,void 0,T0(p.attrs,e)),c&&p.marks.length&&p.marks.forEach(y=>{c===y.type&&t.addMark(g,g+p.nodeSize,c.create(T0(y.attrs,e)))})})}),!0):!1},JN=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),ZN=()=>({tr:n,dispatch:e})=>{if(e){const t=new Sn(n.doc);n.setSelection(t)}return!0},WN=()=>({state:n,dispatch:e})=>wx(n,e),eA=()=>({state:n,dispatch:e})=>Tx(n,e),tA=()=>({state:n,dispatch:e})=>IM(n,e),nA=()=>({state:n,dispatch:e})=>$M(n,e),rA=()=>({state:n,dispatch:e})=>PM(n,e);function wh(n,e,t={},s={}){return Pc(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:s.errorOnInvalidContent})}const sA=(n,e=!1,t={},s={})=>({editor:o,tr:a,dispatch:c,commands:d})=>{var f,p;const{doc:g}=a;if(t.preserveWhitespace!=="full"){const y=wh(n,o.schema,t,{errorOnInvalidContent:(f=s.errorOnInvalidContent)!==null&&f!==void 0?f:o.options.enableContentCheck});return c&&a.replaceWith(0,g.content.size,y).setMeta("preventUpdate",!e),!0}return c&&a.setMeta("preventUpdate",!e),d.insertContentAt({from:0,to:g.content.size},n,{parseOptions:t,errorOnInvalidContent:(p=s.errorOnInvalidContent)!==null&&p!==void 0?p:o.options.enableContentCheck})};function Vx(n,e){const t=Ts(e,n.schema),{from:s,to:o,empty:a}=n.selection,c=[];a?(n.storedMarks&&c.push(...n.storedMarks),c.push(...n.selection.$head.marks())):n.doc.nodesBetween(s,o,f=>{c.push(...f.marks)});const d=c.find(f=>f.type.name===t.name);return d?{...d.attrs}:{}}function iA(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function oA(n,e){for(let t=n.depth;t>0;t-=1){const s=n.node(t);if(e(s))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:s}}}function rp(n){return e=>oA(e.$from,n)}function aA(n,e){const t={from:0,to:n.content.size};return jx(n,t,e)}function lA(n,e){const t=Rt(e,n.schema),{from:s,to:o}=n.selection,a=[];n.doc.nodesBetween(s,o,d=>{a.push(d)});const c=a.reverse().find(d=>d.type.name===t.name);return c?{...c.attrs}:{}}function cA(n,e){const t=su(typeof e=="string"?e:e.name,n.schema);return t==="node"?lA(n,e):t==="mark"?Vx(n,e):{}}function Ix(n,e,t){const s=[];return n===e?t.resolve(n).marks().forEach(o=>{const a=t.resolve(n),c=tp(a,o.type);c&&s.push({mark:o,...c})}):t.nodesBetween(n,e,(o,a)=>{!o||o?.nodeSize===void 0||s.push(...o.marks.map(c=>({from:a,to:a+o.nodeSize,mark:c})))}),s}function Cc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([s])=>{const o=n.find(a=>a.type===e&&a.name===s);return o?o.attribute.keepOnSplit:!1}))}function kh(n,e,t={}){const{empty:s,ranges:o}=n.selection,a=e?Ts(e,n.schema):null;if(s)return!!(n.storedMarks||n.selection.$from.marks()).filter(y=>a?a.name===y.type.name:!0).find(y=>Hc(y.attrs,t,{strict:!1}));let c=0;const d=[];if(o.forEach(({$from:y,$to:b})=>{const x=y.pos,S=b.pos;n.doc.nodesBetween(x,S,(E,T)=>{if(!E.isText&&!E.marks.length)return;const _=Math.max(x,T),F=Math.min(S,T+E.nodeSize),Y=F-_;c+=Y,d.push(...E.marks.map(H=>({mark:H,from:_,to:F})))})}),c===0)return!1;const f=d.filter(y=>a?a.name===y.mark.type.name:!0).filter(y=>Hc(y.mark.attrs,t,{strict:!1})).reduce((y,b)=>y+b.to-b.from,0),p=d.filter(y=>a?y.mark.type!==a&&y.mark.type.excludes(a):!0).reduce((y,b)=>y+b.to-b.from,0);return(f>0?f+p:f)>=c}function uA(n,e,t={}){if(!e)return Ha(n,null,t)||kh(n,null,t);const s=su(e,n.schema);return s==="node"?Ha(n,e,t):s==="mark"?kh(n,e,t):!1}function C0(n,e){const{nodeExtensions:t}=tu(e),s=t.find(c=>c.name===n);if(!s)return!1;const o={name:s.name,options:s.options,storage:s.storage},a=Oe(me(s,"group",o));return typeof a!="string"?!1:a.split(" ").includes("list")}function iu(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var s;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((s=n.text)!==null&&s!==void 0?s:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let o=!0;return n.content.forEach(a=>{o!==!1&&(iu(a,{ignoreWhitespace:t,checkChildren:e})||(o=!1))}),o}return!1}function dA(n){return n instanceof ye}function fA(n,e,t){var s;const{selection:o}=e;let a=null;if(Bx(o)&&(a=o.$cursor),a){const d=(s=n.storedMarks)!==null&&s!==void 0?s:a.marks();return!!t.isInSet(d)||!d.some(f=>f.type.excludes(t))}const{ranges:c}=o;return c.some(({$from:d,$to:f})=>{let p=d.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(d.pos,f.pos,(g,y,b)=>{if(p)return!1;if(g.isInline){const x=!b||b.type.allowsMarkType(t),S=!!t.isInSet(g.marks)||!g.marks.some(E=>E.type.excludes(t));p=x&&S}return!p}),p})}const hA=(n,e={})=>({tr:t,state:s,dispatch:o})=>{const{selection:a}=t,{empty:c,ranges:d}=a,f=Ts(n,s.schema);if(o)if(c){const p=Vx(s,f);t.addStoredMark(f.create({...p,...e}))}else d.forEach(p=>{const g=p.$from.pos,y=p.$to.pos;s.doc.nodesBetween(g,y,(b,x)=>{const S=Math.max(x,g),E=Math.min(x+b.nodeSize,y);b.marks.find(_=>_.type===f)?b.marks.forEach(_=>{f===_.type&&t.addMark(S,E,f.create({..._.attrs,...e}))}):t.addMark(S,E,f.create(e))})});return fA(s,t,f)},pA=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),mA=(n,e={})=>({state:t,dispatch:s,chain:o})=>{const a=Rt(n,t.schema);let c;return t.selection.$anchor.sameParent(t.selection.$head)&&(c=t.selection.$anchor.parent.attrs),a.isTextblock?o().command(({commands:d})=>x0(a,{...c,...e})(t)?!0:d.clearNodes()).command(({state:d})=>x0(a,{...c,...e})(d,s)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},gA=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,o=Ws(n,0,s.content.size),a=ye.create(s,o);e.setSelection(a)}return!0},yA=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,{from:o,to:a}=typeof n=="number"?{from:n,to:n}:n,c=we.atStart(s).from,d=we.atEnd(s).to,f=Ws(o,c,d),p=Ws(a,c,d),g=we.create(s,f,p);e.setSelection(g)}return!0},bA=n=>({state:e,dispatch:t})=>{const s=Rt(n,e.schema);return ZM(s)(e,t)};function M0(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const s=t.filter(o=>e?.includes(o.type.name));n.tr.ensureMarks(s)}}const vA=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:s,editor:o})=>{const{selection:a,doc:c}=e,{$from:d,$to:f}=a,p=o.extensionManager.attributes,g=Cc(p,d.node().type.name,d.node().attrs);if(a instanceof ye&&a.node.isBlock)return!d.parentOffset||!Or(c,d.pos)?!1:(s&&(n&&M0(t,o.extensionManager.splittableMarks),e.split(d.pos).scrollIntoView()),!0);if(!d.parent.isBlock)return!1;const y=f.parentOffset===f.parent.content.size,b=d.depth===0?void 0:iA(d.node(-1).contentMatchAt(d.indexAfter(-1)));let x=y&&b?[{type:b,attrs:g}]:void 0,S=Or(e.doc,e.mapping.map(d.pos),1,x);if(!x&&!S&&Or(e.doc,e.mapping.map(d.pos),1,b?[{type:b}]:void 0)&&(S=!0,x=b?[{type:b,attrs:g}]:void 0),s){if(S&&(a instanceof we&&e.deleteSelection(),e.split(e.mapping.map(d.pos),1,x),b&&!y&&!d.parentOffset&&d.parent.type!==b)){const E=e.mapping.map(d.before()),T=e.doc.resolve(E);d.node(-1).canReplaceWith(T.index(),T.index()+1,b)&&e.setNodeMarkup(e.mapping.map(d.before()),b)}n&&M0(t,o.extensionManager.splittableMarks),e.scrollIntoView()}return S},xA=(n,e={})=>({tr:t,state:s,dispatch:o,editor:a})=>{var c;const d=Rt(n,s.schema),{$from:f,$to:p}=s.selection,g=s.selection.node;if(g&&g.isBlock||f.depth<2||!f.sameParent(p))return!1;const y=f.node(-1);if(y.type!==d)return!1;const b=a.extensionManager.attributes;if(f.parent.content.size===0&&f.node(-1).childCount===f.indexAfter(-1)){if(f.depth===2||f.node(-3).type!==d||f.index(-2)!==f.node(-2).childCount-1)return!1;if(o){let _=W.empty;const F=f.index(-1)?1:f.index(-2)?2:3;for(let le=f.depth-F;le>=f.depth-3;le-=1)_=W.from(f.node(le).copy(_));const Y=f.indexAfter(-1)<f.node(-2).childCount?1:f.indexAfter(-2)<f.node(-3).childCount?2:3,H={...Cc(b,f.node().type.name,f.node().attrs),...e},U=((c=d.contentMatch.defaultType)===null||c===void 0?void 0:c.createAndFill(H))||void 0;_=_.append(W.from(d.createAndFill(null,U)||void 0));const R=f.before(f.depth-(F-1));t.replace(R,f.after(-Y),new ue(_,4-F,0));let Z=-1;t.doc.nodesBetween(R,t.doc.content.size,(le,re)=>{if(Z>-1)return!1;le.isTextblock&&le.content.size===0&&(Z=re+1)}),Z>-1&&t.setSelection(we.near(t.doc.resolve(Z))),t.scrollIntoView()}return!0}const x=p.pos===f.end()?y.contentMatchAt(0).defaultType:null,S={...Cc(b,y.type.name,y.attrs),...e},E={...Cc(b,f.node().type.name,f.node().attrs),...e};t.delete(f.pos,p.pos);const T=x?[{type:d,attrs:S},{type:x,attrs:E}]:[{type:d,attrs:S}];if(!Or(t.doc,f.pos,2))return!1;if(o){const{selection:_,storedMarks:F}=s,{splittableMarks:Y}=a.extensionManager,H=F||_.$to.parentOffset&&_.$from.marks();if(t.split(f.pos,2,T).scrollIntoView(),!H||!o)return!0;const U=H.filter(R=>Y.includes(R.type.name));t.ensureMarks(U)}return!0},Qf=(n,e)=>{const t=rp(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(s===void 0)return!0;const o=n.doc.nodeAt(s);return t.node.type===o?.type&&ks(n.doc,t.pos)&&n.join(t.pos),!0},Gf=(n,e)=>{const t=rp(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(t.start).after(t.depth);if(s===void 0)return!0;const o=n.doc.nodeAt(s);return t.node.type===o?.type&&ks(n.doc,s)&&n.join(s),!0},SA=(n,e,t,s={})=>({editor:o,tr:a,state:c,dispatch:d,chain:f,commands:p,can:g})=>{const{extensions:y,splittableMarks:b}=o.extensionManager,x=Rt(n,c.schema),S=Rt(e,c.schema),{selection:E,storedMarks:T}=c,{$from:_,$to:F}=E,Y=_.blockRange(F),H=T||E.$to.parentOffset&&E.$from.marks();if(!Y)return!1;const U=rp(R=>C0(R.type.name,y))(E);if(Y.depth>=1&&U&&Y.depth-U.depth<=1){if(U.node.type===x)return p.liftListItem(S);if(C0(U.node.type.name,y)&&x.validContent(U.node.content)&&d)return f().command(()=>(a.setNodeMarkup(U.pos,x),!0)).command(()=>Qf(a,x)).command(()=>Gf(a,x)).run()}return!t||!H||!d?f().command(()=>g().wrapInList(x,s)?!0:p.clearNodes()).wrapInList(x,s).command(()=>Qf(a,x)).command(()=>Gf(a,x)).run():f().command(()=>{const R=g().wrapInList(x,s),Z=H.filter(le=>b.includes(le.type.name));return a.ensureMarks(Z),R?!0:p.clearNodes()}).wrapInList(x,s).command(()=>Qf(a,x)).command(()=>Gf(a,x)).run()},wA=(n,e={},t={})=>({state:s,commands:o})=>{const{extendEmptyMarkRange:a=!1}=t,c=Ts(n,s.schema);return kh(s,c,e)?o.unsetMark(c,{extendEmptyMarkRange:a}):o.setMark(c,e)},kA=(n,e,t={})=>({state:s,commands:o})=>{const a=Rt(n,s.schema),c=Rt(e,s.schema),d=Ha(s,a,t);let f;return s.selection.$anchor.sameParent(s.selection.$head)&&(f=s.selection.$anchor.parent.attrs),d?o.setNode(c,f):o.setNode(a,{...f,...t})},EA=(n,e={})=>({state:t,commands:s})=>{const o=Rt(n,t.schema);return Ha(t,o,e)?s.lift(o):s.wrapIn(o,e)},TA=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let s=0;s<t.length;s+=1){const o=t[s];let a;if(o.spec.isInputRules&&(a=o.getState(n))){if(e){const c=n.tr,d=a.transform;for(let f=d.steps.length-1;f>=0;f-=1)c.step(d.steps[f].invert(d.docs[f]));if(a.text){const f=c.doc.resolve(a.from).marks();c.replaceWith(a.from,a.to,n.schema.text(a.text,f))}else c.delete(a.from,a.to)}return!0}}return!1},CA=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:s,ranges:o}=t;return s||e&&o.forEach(a=>{n.removeMark(a.$from.pos,a.$to.pos)}),!0},MA=(n,e={})=>({tr:t,state:s,dispatch:o})=>{var a;const{extendEmptyMarkRange:c=!1}=e,{selection:d}=t,f=Ts(n,s.schema),{$from:p,empty:g,ranges:y}=d;if(!o)return!0;if(g&&c){let{from:b,to:x}=d;const S=(a=p.marks().find(T=>T.type===f))===null||a===void 0?void 0:a.attrs,E=tp(p,f,S);E&&(b=E.from,x=E.to),t.removeMark(b,x,f)}else y.forEach(b=>{t.removeMark(b.$from.pos,b.$to.pos,f)});return t.removeStoredMark(f),!0},NA=(n,e={})=>({tr:t,state:s,dispatch:o})=>{let a=null,c=null;const d=su(typeof n=="string"?n:n.name,s.schema);return d?(d==="node"&&(a=Rt(n,s.schema)),d==="mark"&&(c=Ts(n,s.schema)),o&&t.selection.ranges.forEach(f=>{const p=f.$from.pos,g=f.$to.pos;let y,b,x,S;t.selection.empty?s.doc.nodesBetween(p,g,(E,T)=>{a&&a===E.type&&(x=Math.max(T,p),S=Math.min(T+E.nodeSize,g),y=T,b=E)}):s.doc.nodesBetween(p,g,(E,T)=>{T<p&&a&&a===E.type&&(x=Math.max(T,p),S=Math.min(T+E.nodeSize,g),y=T,b=E),T>=p&&T<=g&&(a&&a===E.type&&t.setNodeMarkup(T,void 0,{...E.attrs,...e}),c&&E.marks.length&&E.marks.forEach(_=>{if(c===_.type){const F=Math.max(T,p),Y=Math.min(T+E.nodeSize,g);t.addMark(F,Y,c.create({..._.attrs,...e}))}}))}),b&&(y!==void 0&&t.setNodeMarkup(y,void 0,{...b.attrs,...e}),c&&b.marks.length&&b.marks.forEach(E=>{c===E.type&&t.addMark(x,S,c.create({...E.attrs,...e}))}))}),!0):!1},AA=(n,e={})=>({state:t,dispatch:s})=>{const o=Rt(n,t.schema);return FM(o,e)(t,s)},OA=(n,e={})=>({state:t,dispatch:s})=>{const o=Rt(n,t.schema);return QM(o,e)(t,s)};var RA=Object.freeze({__proto__:null,blur:mN,clearContent:gN,clearNodes:yN,command:bN,createParagraphNear:vN,cut:xN,deleteCurrentNode:SN,deleteNode:wN,deleteRange:kN,deleteSelection:EN,enter:TN,exitCode:CN,extendMarkRange:MN,first:NN,focus:ON,forEach:RN,insertContent:DN,insertContentAt:_N,joinBackward:qN,joinDown:LN,joinForward:UN,joinItemBackward:VN,joinItemForward:IN,joinTextblockBackward:HN,joinTextblockForward:PN,joinUp:BN,keyboardShortcut:FN,lift:QN,liftEmptyBlock:GN,liftListItem:YN,newlineInCode:KN,resetAttributes:XN,scrollIntoView:JN,selectAll:ZN,selectNodeBackward:WN,selectNodeForward:eA,selectParentNode:tA,selectTextblockEnd:nA,selectTextblockStart:rA,setContent:sA,setMark:hA,setMeta:pA,setNode:mA,setNodeSelection:gA,setTextSelection:yA,sinkListItem:bA,splitBlock:vA,splitListItem:xA,toggleList:SA,toggleMark:wA,toggleNode:kA,toggleWrap:EA,undoInputRule:TA,unsetAllMarks:CA,unsetMark:MA,updateAttributes:NA,wrapIn:AA,wrapInList:OA});const DA=Qt.create({name:"commands",addCommands(){return{...RA}}}),jA=Qt.create({name:"drop",addProseMirrorPlugins(){return[new nn({key:new Kn("tiptapDrop"),props:{handleDrop:(n,e,t,s)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:s})}}})]}}),zA=Qt.create({name:"editable",addProseMirrorPlugins(){return[new nn({key:new Kn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),_A=new Kn("focusEvents"),BA=Qt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new nn({key:_A,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const s=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1},blur:(e,t)=>{n.isFocused=!1;const s=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1}}}})]}}),LA=Qt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:d})=>{const{selection:f,doc:p}=d,{empty:g,$anchor:y}=f,{pos:b,parent:x}=y,S=y.parent.isTextblock&&b>0?d.doc.resolve(b-1):y,E=S.parent.type.spec.isolating,T=y.pos-y.parentOffset,_=E&&S.parent.childCount===1?T===y.pos:Ne.atStart(p).from===b;return!g||!x.type.isTextblock||x.textContent.length||!_||_&&y.parent.type.name==="paragraph"?!1:c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.deleteCurrentNode(),()=>c.joinForward(),()=>c.selectNodeForward()]),s={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...s},a={...s,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return np()||Ux()?a:o},addProseMirrorPlugins(){return[new nn({key:new Kn("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(E=>E.getMeta("composition")))return;const s=n.some(E=>E.docChanged)&&!e.doc.eq(t.doc),o=n.some(E=>E.getMeta("preventClearDocument"));if(!s||o)return;const{empty:a,from:c,to:d}=e.selection,f=Ne.atStart(e.doc).from,p=Ne.atEnd(e.doc).to;if(a||!(c===f&&d===p)||!iu(t.doc))return;const b=t.tr,x=Wc({state:t,transaction:b}),{commands:S}=new eu({editor:this.editor,state:x});if(S.clearNodes(),!!b.steps.length)return b}})]}}),qA=Qt.create({name:"paste",addProseMirrorPlugins(){return[new nn({key:new Kn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),UA=Qt.create({name:"tabindex",addProseMirrorPlugins(){return[new nn({key:new Kn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Xs{get name(){return this.node.type.name}constructor(e,t,s=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=s,this.resolvedPos=e,this.editor=t,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,s=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,s=this.to-1}this.editor.commands.insertContentAt({from:t,to:s},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Xs(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Xs(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Xs(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,s)=>{const o=t.isBlock&&!t.isTextblock,a=t.isAtom&&!t.isText,c=this.pos+s+(a?0:1),d=this.resolvedPos.doc.resolve(c);if(!o&&d.depth<=this.depth)return;const f=new Xs(d,this.editor,o,o?t:null);o&&(f.actualDepth=this.depth+1),e.push(new Xs(d,this.editor,o,o?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let s=null,o=this.parent;for(;o&&!s;){if(o.node.type.name===e)if(Object.keys(t).length>0){const a=o.node.attrs,c=Object.keys(t);for(let d=0;d<c.length;d+=1){const f=c[d];if(a[f]!==t[f])break}}else s=o;o=o.parent}return s}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},s=!1){let o=[];if(!this.children||this.children.length===0)return o;const a=Object.keys(t);return this.children.forEach(c=>{s&&o.length>0||(c.node.type.name===e&&a.every(f=>t[f]===c.node.attrs[f])&&o.push(c),!(s&&o.length>0)&&(o=o.concat(c.querySelectorAll(e,t,s))))}),o}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const VA=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function IA(n,e,t){const s=document.querySelector("style[data-tiptap-style]");if(s!==null)return s;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(o),o}class HA extends WM{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:s,moved:o})=>this.options.onDrop(t,s,o)),this.on("paste",({event:t,slice:s})=>this.options.onPaste(t,s)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=IA(VA,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const s=Dx(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:s});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let s=t;if([].concat(e).forEach(a=>{const c=typeof a=="string"?`${a}$`:a.key;s=s.filter(d=>!d.key.startsWith(c))}),t.length===s.length)return;const o=this.state.reconfigure({plugins:s});return this.view.updateState(o),o}createExtensionManager(){var e,t;const o=[...this.options.enableCoreExtensions?[zA,pN.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),DA,BA,LA,UA,jA,qA].filter(a=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[a.name]!==!1:!0):[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(a?.type));this.extensionManager=new ao(o,this)}createCommandManager(){this.commandManager=new eu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=wh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(c){if(!(c instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(c.message))throw c;this.emit("contentError",{editor:this,error:c,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(d=>d.name!=="collaboration"),this.createExtensionManager()}}),t=wh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const s=Lx(t,this.options.autofocus);this.view=new kM(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:oo.create({doc:t,selection:s||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const a=this.view.dom;a.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(c=>{var d;return(d=this.capturedTransaction)===null||d===void 0?void 0:d.step(c)});return}const t=this.state.apply(e),s=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),s&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),a=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),a&&this.emit("blur",{editor:this,event:a.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return cA(this.state,e)}isActive(e,t){const s=typeof e=="string"?e:null,o=typeof e=="string"?t:e;return uA(this.state,s,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Wh(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:s={}}=e||{};return aA(this.state.doc,{blockSeparator:t,textSerializers:{...zx(this.schema),...s}})}get isEmpty(){return iu(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var s;return((s=this.$doc)===null||s===void 0?void 0:s.querySelector(e,t))||null}$nodes(e,t){var s;return((s=this.$doc)===null||s===void 0?void 0:s.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Xs(t,this)}get $doc(){return this.$pos(0)}}function go(n){return new nu({find:n.find,handler:({state:e,range:t,match:s})=>{const o=Oe(n.getAttributes,void 0,s);if(o===!1||o===null)return null;const{tr:a}=e,c=s[s.length-1],d=s[0];if(c){const f=d.search(/\S/),p=t.from+d.indexOf(c),g=p+c.length;if(Ix(t.from,t.to,e.doc).filter(x=>x.mark.type.excluded.find(E=>E===n.type&&E!==x.mark.type)).filter(x=>x.to>p).length)return null;g<t.to&&a.delete(g,t.to),p>t.from&&a.delete(t.from+f,p);const b=t.from+f+c.length;a.addMark(t.from+f,b,n.type.create(o||{})),a.removeStoredMark(n.type)}}})}function Hx(n){return new nu({find:n.find,handler:({state:e,range:t,match:s})=>{const o=Oe(n.getAttributes,void 0,s)||{},{tr:a}=e,c=t.from;let d=t.to;const f=n.type.create(o);if(s[1]){const p=s[0].lastIndexOf(s[1]);let g=c+p;g>d?g=d:d=g+s[1].length;const y=s[0][s[0].length-1];a.insertText(y,c+s[0].length-1),a.replaceWith(g,d,f)}else if(s[0]){const p=n.type.isInline?c:c-1;a.insert(p,n.type.create(o)).delete(a.mapping.map(c),a.mapping.map(d))}a.scrollIntoView()}})}function Eh(n){return new nu({find:n.find,handler:({state:e,range:t,match:s})=>{const o=e.doc.resolve(t.from),a=Oe(n.getAttributes,void 0,s)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,a)}})}function Pa(n){return new nu({find:n.find,handler:({state:e,range:t,match:s,chain:o})=>{const a=Oe(n.getAttributes,void 0,s)||{},c=e.tr.delete(t.from,t.to),f=c.doc.resolve(t.from).blockRange(),p=f&&Lh(f,n.type,a);if(!p)return null;if(c.wrap(f,p),n.keepMarks&&n.editor){const{selection:y,storedMarks:b}=e,{splittableMarks:x}=n.editor.extensionManager,S=b||y.$to.parentOffset&&y.$from.marks();if(S){const E=S.filter(T=>x.includes(T.type.name));c.ensureMarks(E)}}if(n.keepAttributes){const y=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(y,a).run()}const g=c.doc.resolve(t.from-1).nodeBefore;g&&g.type===n.type&&ks(c.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(s,g))&&c.join(t.from-1)}})}let qn=class Th{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Oe(me(this,"addOptions",{name:this.name}))),this.storage=Oe(me(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Th(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>ru(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Th(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Oe(me(t,"addOptions",{name:t.name})),t.storage=Oe(me(t,"addStorage",{name:t.name,options:t.options})),t}};function yo(n){return new lN({find:n.find,handler:({state:e,range:t,match:s,pasteEvent:o})=>{const a=Oe(n.getAttributes,void 0,s,o);if(a===!1||a===null)return null;const{tr:c}=e,d=s[s.length-1],f=s[0];let p=t.to;if(d){const g=f.search(/\S/),y=t.from+f.indexOf(d),b=y+d.length;if(Ix(t.from,t.to,e.doc).filter(S=>S.mark.type.excluded.find(T=>T===n.type&&T!==S.mark.type)).filter(S=>S.to>y).length)return null;b<t.to&&c.delete(b,t.to),y>t.from&&c.delete(t.from+g,y),p=t.from+g+d.length,c.addMark(t.from+g,p,n.type.create(a||{})),c.removeStoredMark(n.type)}}})}function PA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Px={exports:{}},Yf={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0;function $A(){if(N0)return Yf;N0=1;var n=J;function e(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var t=typeof Object.is=="function"?Object.is:e,s=n.useState,o=n.useEffect,a=n.useLayoutEffect,c=n.useDebugValue;function d(y,b){var x=b(),S=s({inst:{value:x,getSnapshot:b}}),E=S[0].inst,T=S[1];return a(function(){E.value=x,E.getSnapshot=b,f(E)&&T({inst:E})},[y,x,b]),o(function(){return f(E)&&T({inst:E}),y(function(){f(E)&&T({inst:E})})},[y]),c(x),x}function f(y){var b=y.getSnapshot;y=y.value;try{var x=b();return!t(y,x)}catch{return!0}}function p(y,b){return b()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return Yf.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,Yf}Px.exports=$A();var sp=Px.exports;const FA=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},QA=({contentComponent:n})=>{const e=sp.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return J.createElement(J.Fragment,null,Object.values(e))};function GA(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,s){e={...e,[t]:Fc.createPortal(s.reactElement,s.element,t)},n.forEach(o=>o())},removeRenderer(t){const s={...e};delete s[t],e=s,n.forEach(o=>o())}}}class YA extends J.Component{constructor(e){var t;super(e),this.editorContentRef=J.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=GA(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(s=>s.hasContentComponentInitialized?s:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...s}=this.props;return J.createElement(J.Fragment,null,J.createElement("div",{ref:FA(t,this.editorContentRef),...s}),e?.contentComponent&&J.createElement(QA,{contentComponent:e.contentComponent}))}}const KA=A.forwardRef((n,e)=>{const t=J.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return J.createElement(YA,{key:t,innerRef:e,...n})}),$x=J.memo(KA);var XA=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,o,a;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(o=s;o--!==0;)if(!n(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;for(o of e.entries())if(!n(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(s=e.length,s!=t.length)return!1;for(o=s;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),s=a.length,s!==Object.keys(t).length)return!1;for(o=s;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[o]))return!1;for(o=s;o--!==0;){var c=a[o];if(!(c==="_owner"&&e.$$typeof)&&!n(e[c],t[c]))return!1}return!0}return e!==e&&t!==t},JA=PA(XA),Fx={exports:{}},Kf={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0;function ZA(){if(A0)return Kf;A0=1;var n=J,e=sp;function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var s=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,a=n.useRef,c=n.useEffect,d=n.useMemo,f=n.useDebugValue;return Kf.useSyncExternalStoreWithSelector=function(p,g,y,b,x){var S=a(null);if(S.current===null){var E={hasValue:!1,value:null};S.current=E}else E=S.current;S=d(function(){function _(R){if(!F){if(F=!0,Y=R,R=b(R),x!==void 0&&E.hasValue){var Z=E.value;if(x(Z,R))return H=Z}return H=R}if(Z=H,s(Y,R))return Z;var le=b(R);return x!==void 0&&x(Z,le)?Z:(Y=R,H=le)}var F=!1,Y,H,U=y===void 0?null:y;return[function(){return _(g())},U===null?void 0:function(){return _(U())}]},[g,y,b,x]);var T=o(p,S[0],S[1]);return c(function(){E.hasValue=!0,E.value=T},[T]),f(T),T},Kf}Fx.exports=ZA();var WA=Fx.exports;const eO=typeof window<"u"?A.useLayoutEffect:A.useEffect;class tO{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(o=>o())},s=this.editor;return s.on("transaction",t),()=>{s.off("transaction",t)}}}}function nO(n){var e;const[t]=A.useState(()=>new tO(n.editor)),s=WA.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:JA);return eO(()=>t.watch(n.editor),[n.editor,t]),A.useDebugValue(s),s}const rO=!1,Ch=typeof window>"u",sO=Ch||!!(typeof window<"u"&&window.next);class ip{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Ch||sO?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...s)=>{var o,a;return(a=(o=this.options.current).onBeforeCreate)===null||a===void 0?void 0:a.call(o,...s)},onBlur:(...s)=>{var o,a;return(a=(o=this.options.current).onBlur)===null||a===void 0?void 0:a.call(o,...s)},onCreate:(...s)=>{var o,a;return(a=(o=this.options.current).onCreate)===null||a===void 0?void 0:a.call(o,...s)},onDestroy:(...s)=>{var o,a;return(a=(o=this.options.current).onDestroy)===null||a===void 0?void 0:a.call(o,...s)},onFocus:(...s)=>{var o,a;return(a=(o=this.options.current).onFocus)===null||a===void 0?void 0:a.call(o,...s)},onSelectionUpdate:(...s)=>{var o,a;return(a=(o=this.options.current).onSelectionUpdate)===null||a===void 0?void 0:a.call(o,...s)},onTransaction:(...s)=>{var o,a;return(a=(o=this.options.current).onTransaction)===null||a===void 0?void 0:a.call(o,...s)},onUpdate:(...s)=>{var o,a;return(a=(o=this.options.current).onUpdate)===null||a===void 0?void 0:a.call(o,...s)},onContentError:(...s)=>{var o,a;return(a=(o=this.options.current).onContentError)===null||a===void 0?void 0:a.call(o,...s)},onDrop:(...s)=>{var o,a;return(a=(o=this.options.current).onDrop)===null||a===void 0?void 0:a.call(o,...s)},onPaste:(...s)=>{var o,a;return(a=(o=this.options.current).onPaste)===null||a===void 0?void 0:a.call(o,...s)}};return new HA(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(s=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(s)?!0:s==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((o,a)=>{var c;return o===((c=t.extensions)===null||c===void 0?void 0:c[a])}):e[s]===t[s])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?ip.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((s,o)=>s===e[o]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function Qx(n={},e=[]){const t=A.useRef(n);t.current=n;const[s]=A.useState(()=>new ip(t)),o=sp.useSyncExternalStore(s.subscribe,s.getEditor,s.getServerSnapshot);return A.useDebugValue(o),A.useEffect(s.onRender(e)),nO({editor:o,selector:({transactionNumber:a})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&a===0?0:a+1}),o}const iO=A.createContext({editor:null});iO.Consumer;const oO=A.createContext({onDragStart:void 0}),aO=()=>A.useContext(oO);J.forwardRef((n,e)=>{const{onDragStart:t}=aO(),s=n.as||"div";return J.createElement(s,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const lO=/^\s*>\s$/,cO=qn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",Ft(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Pa({find:lO,type:this.type})]}}),uO=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,dO=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,fO=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,hO=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,pO=ws.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",Ft(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[go({find:uO,type:this.type}),go({find:fO,type:this.type})]},addPasteRules(){return[yo({find:dO,type:this.type}),yo({find:hO,type:this.type})]}}),mO="listItem",O0="textStyle",R0=/^\s*([-+*])\s$/,gO=qn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Ft(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(mO,this.editor.getAttributes(O0)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Pa({find:R0,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Pa({find:R0,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(O0),editor:this.editor})),[n]}}),yO=/(^|[^`])`([^`]+)`(?!`)/,bO=/(^|[^`])`([^`]+)`(?!`)/g,vO=ws.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Ft(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[go({find:yO,type:this.type})]},addPasteRules(){return[yo({find:bO,type:this.type})]}}),xO=/^```([a-z]+)?[\s\n]$/,SO=/^~~~([a-z]+)?[\s\n]$/,wO=qn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,a=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(c=>c.startsWith(t)).map(c=>c.replace(t,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Ft(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:s,empty:o}=t;if(!o||s.parent.type!==this.type)return!1;const a=s.parentOffset===s.parent.nodeSize-2,c=s.parent.textContent.endsWith(`

`);return!a||!c?!1:n.chain().command(({tr:d})=>(d.delete(s.pos-2,s.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:s}=e,{$from:o,empty:a}=t;if(!a||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const d=o.after();return d===void 0?!1:s.nodeAt(d)?n.commands.command(({tr:p})=>(p.setSelection(Ne.near(s.resolve(d))),!0)):n.commands.exitCode()}}},addInputRules(){return[Eh({find:xO,type:this.type,getAttributes:n=>({language:n[1]})}),Eh({find:SO,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new nn({key:new Kn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),s=e.clipboardData.getData("vscode-editor-data"),o=s?JSON.parse(s):void 0,a=o?.mode;if(!t||!a)return!1;const{tr:c,schema:d}=n.state,f=d.text(t.replace(/\r\n?/g,`
`));return c.replaceSelectionWith(this.type.create({language:a},f)),c.selection.$from.parent.type!==this.type&&c.setSelection(we.near(c.doc.resolve(Math.max(0,c.selection.from-2)))),c.setMeta("paste",!0),n.dispatch(c),!0}}})]}}),kO=qn.create({name:"doc",topNode:!0,content:"block+"});function EO(n={}){return new nn({view(e){return new TO(e,n)}})}class TO{constructor(e,t){var s;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(s=t.width)!==null&&s!==void 0?s:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let a=c=>{this[o](c)};return e.dom.addEventListener(o,a),{name:o,handler:a}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,s,o=this.editorView.dom,a=o.getBoundingClientRect(),c=a.width/o.offsetWidth,d=a.height/o.offsetHeight;if(t){let y=e.nodeBefore,b=e.nodeAfter;if(y||b){let x=this.editorView.nodeDOM(this.cursorPos-(y?y.nodeSize:0));if(x){let S=x.getBoundingClientRect(),E=y?S.bottom:S.top;y&&b&&(E=(E+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let T=this.width/2*d;s={left:S.left,right:S.right,top:E-T,bottom:E+T}}}}if(!s){let y=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*c;s={left:y.left-b,right:y.left+b,top:y.top,bottom:y.bottom}}let f=this.editorView.dom.offsetParent;this.element||(this.element=f.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let p,g;if(!f||f==document.body&&getComputedStyle(f).position=="static")p=-pageXOffset,g=-pageYOffset;else{let y=f.getBoundingClientRect(),b=y.width/f.offsetWidth,x=y.height/f.offsetHeight;p=y.left-f.scrollLeft*b,g=y.top-f.scrollTop*x}this.element.style.left=(s.left-p)/c+"px",this.element.style.top=(s.top-g)/d+"px",this.element.style.width=(s.right-s.left)/c+"px",this.element.style.height=(s.bottom-s.top)/d+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),s=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),o=s&&s.type.spec.disableDropCursor,a=typeof o=="function"?o(this.editorView,t,e):o;if(t&&!a){let c=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let d=Dv(this.editorView.state.doc,c,this.editorView.dragging.slice);d!=null&&(c=d)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const CO=Qt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[EO(this.options)]}});class rt extends Ne{constructor(e){super(e,e)}map(e,t){let s=e.resolve(t.map(this.head));return rt.valid(s)?new rt(s):Ne.near(s)}content(){return ue.empty}eq(e){return e instanceof rt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new rt(e.resolve(t.pos))}getBookmark(){return new op(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!MO(e)||!NO(e))return!1;let s=t.type.spec.allowGapCursor;if(s!=null)return s;let o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,t,s=!1){e:for(;;){if(!s&&rt.valid(e))return e;let o=e.pos,a=null;for(let c=e.depth;;c--){let d=e.node(c);if(t>0?e.indexAfter(c)<d.childCount:e.index(c)>0){a=d.child(t>0?e.indexAfter(c):e.index(c)-1);break}else if(c==0)return null;o+=t;let f=e.doc.resolve(o);if(rt.valid(f))return f}for(;;){let c=t>0?a.firstChild:a.lastChild;if(!c){if(a.isAtom&&!a.isText&&!ye.isSelectable(a)){e=e.doc.resolve(o+a.nodeSize*t),s=!1;continue e}break}a=c,o+=t;let d=e.doc.resolve(o);if(rt.valid(d))return d}return null}}}rt.prototype.visible=!1;rt.findFrom=rt.findGapCursorFrom;Ne.jsonID("gapcursor",rt);class op{constructor(e){this.pos=e}map(e){return new op(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return rt.valid(t)?new rt(t):Ne.near(t)}}function MO(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),s=n.node(e);if(t==0){if(s.type.spec.isolating)return!0;continue}for(let o=s.child(t-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function NO(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),s=n.node(e);if(t==s.childCount){if(s.type.spec.isolating)return!0;continue}for(let o=s.child(t);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function AO(){return new nn({props:{decorations:jO,createSelectionBetween(n,e,t){return e.pos==t.pos&&rt.valid(t)?new rt(t):null},handleClick:RO,handleKeyDown:OO,handleDOMEvents:{beforeinput:DO}}})}const OO=bx({ArrowLeft:Sc("horiz",-1),ArrowRight:Sc("horiz",1),ArrowUp:Sc("vert",-1),ArrowDown:Sc("vert",1)});function Sc(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(s,o,a){let c=s.selection,d=e>0?c.$to:c.$from,f=c.empty;if(c instanceof we){if(!a.endOfTextblock(t)||d.depth==0)return!1;f=!1,d=s.doc.resolve(e>0?d.after():d.before())}let p=rt.findGapCursorFrom(d,e,f);return p?(o&&o(s.tr.setSelection(new rt(p))),!0):!1}}function RO(n,e,t){if(!n||!n.editable)return!1;let s=n.state.doc.resolve(e);if(!rt.valid(s))return!1;let o=n.posAtCoords({left:t.clientX,top:t.clientY});return o&&o.inside>-1&&ye.isSelectable(n.state.doc.nodeAt(o.inside))?!1:(n.dispatch(n.state.tr.setSelection(new rt(s))),!0)}function DO(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof rt))return!1;let{$from:t}=n.state.selection,s=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!s)return!1;let o=W.empty;for(let c=s.length-1;c>=0;c--)o=W.from(s[c].createAndFill(null,o));let a=n.state.tr.replace(t.pos,t.pos,new ue(o,0,0));return a.setSelection(we.near(a.doc.resolve(t.pos+1))),n.dispatch(a),!1}function jO(n){if(!(n.selection instanceof rt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",pt.create(n.doc,[xn.widget(n.selection.head,e,{key:"gapcursor"})])}const zO=Qt.create({name:"gapCursor",addProseMirrorPlugins(){return[AO()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Oe(me(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),_O=qn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Ft(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:s})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:o,storedMarks:a}=t;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:c}=this.options,{splittableMarks:d}=s.extensionManager,f=a||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:p,dispatch:g})=>{if(g&&f&&c){const y=f.filter(b=>d.includes(b.type.name));p.ensureMarks(y)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),BO=qn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Ft(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Eh({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var $c=200,Ot=function(){};Ot.prototype.append=function(e){return e.length?(e=Ot.from(e),!this.length&&e||e.length<$c&&this.leafAppend(e)||this.length<$c&&e.leafPrepend(this)||this.appendInner(e)):this};Ot.prototype.prepend=function(e){return e.length?Ot.from(e).append(this):this};Ot.prototype.appendInner=function(e){return new LO(this,e)};Ot.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Ot.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Ot.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ot.prototype.forEach=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length),t<=s?this.forEachInner(e,t,s,0):this.forEachInvertedInner(e,t,s,0)};Ot.prototype.map=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length);var o=[];return this.forEach(function(a,c){return o.push(e(a,c))},t,s),o};Ot.from=function(e){return e instanceof Ot?e:e&&e.length?new Gx(e):Ot.empty};var Gx=function(n){function e(s){n.call(this),this.values=s}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,a){return o==0&&a==this.length?this:new e(this.values.slice(o,a))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,a,c,d){for(var f=a;f<c;f++)if(o(this.values[f],d+f)===!1)return!1},e.prototype.forEachInvertedInner=function(o,a,c,d){for(var f=a-1;f>=c;f--)if(o(this.values[f],d+f)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=$c)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=$c)return new e(o.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Ot);Ot.empty=new Gx([]);var LO=function(n){function e(t,s){n.call(this),this.left=t,this.right=s,this.length=t.length+s.length,this.depth=Math.max(t.depth,s.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(s){return s<this.left.length?this.left.get(s):this.right.get(s-this.left.length)},e.prototype.forEachInner=function(s,o,a,c){var d=this.left.length;if(o<d&&this.left.forEachInner(s,o,Math.min(a,d),c)===!1||a>d&&this.right.forEachInner(s,Math.max(o-d,0),Math.min(this.length,a)-d,c+d)===!1)return!1},e.prototype.forEachInvertedInner=function(s,o,a,c){var d=this.left.length;if(o>d&&this.right.forEachInvertedInner(s,o-d,Math.max(a,d)-d,c+d)===!1||a<d&&this.left.forEachInvertedInner(s,Math.min(o,d),a,c)===!1)return!1},e.prototype.sliceInner=function(s,o){if(s==0&&o==this.length)return this;var a=this.left.length;return o<=a?this.left.slice(s,o):s>=a?this.right.slice(s-a,o-a):this.left.slice(s,a).append(this.right.slice(0,o-a))},e.prototype.leafAppend=function(s){var o=this.right.leafAppend(s);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(s){var o=this.left.leafPrepend(s);if(o)return new e(o,this.right)},e.prototype.appendInner=function(s){return this.left.depth>=Math.max(this.right.depth,s.depth)+1?new e(this.left,new e(this.right,s)):new e(this,s)},e}(Ot);const qO=500;class Qn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}let o,a;t&&(o=this.remapping(s,this.items.length),a=o.maps.length);let c=e.tr,d,f,p=[],g=[];return this.items.forEach((y,b)=>{if(!y.step){o||(o=this.remapping(s,b+1),a=o.maps.length),a--,g.push(y);return}if(o){g.push(new ir(y.map));let x=y.step.map(o.slice(a)),S;x&&c.maybeStep(x).doc&&(S=c.mapping.maps[c.mapping.maps.length-1],p.push(new ir(S,void 0,void 0,p.length+g.length))),a--,S&&o.appendMap(S,a)}else c.maybeStep(y.step);if(y.selection)return d=o?y.selection.map(o.slice(a)):y.selection,f=new Qn(this.items.slice(0,s).append(g.reverse().concat(p)),this.eventCount-1),!1},this.items.length,0),{remaining:f,transform:c,selection:d}}addTransform(e,t,s,o){let a=[],c=this.eventCount,d=this.items,f=!o&&d.length?d.get(d.length-1):null;for(let g=0;g<e.steps.length;g++){let y=e.steps[g].invert(e.docs[g]),b=new ir(e.mapping.maps[g],y,t),x;(x=f&&f.merge(b))&&(b=x,g?a.pop():d=d.slice(0,d.length-1)),a.push(b),t&&(c++,t=void 0),o||(f=b)}let p=c-s.depth;return p>VO&&(d=UO(d,p),c-=p),new Qn(d.append(a),c)}remapping(e,t){let s=new La;return this.items.forEach((o,a)=>{let c=o.mirrorOffset!=null&&a-o.mirrorOffset>=e?s.maps.length-o.mirrorOffset:void 0;s.appendMap(o.map,c)},e,t),s}addMaps(e){return this.eventCount==0?this:new Qn(this.items.append(e.map(t=>new ir(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let s=[],o=Math.max(0,this.items.length-t),a=e.mapping,c=e.steps.length,d=this.eventCount;this.items.forEach(b=>{b.selection&&d--},o);let f=t;this.items.forEach(b=>{let x=a.getMirror(--f);if(x==null)return;c=Math.min(c,x);let S=a.maps[x];if(b.step){let E=e.steps[x].invert(e.docs[x]),T=b.selection&&b.selection.map(a.slice(f+1,x));T&&d++,s.push(new ir(S,E,T))}else s.push(new ir(S))},o);let p=[];for(let b=t;b<c;b++)p.push(new ir(a.maps[b]));let g=this.items.slice(0,o).append(p).append(s),y=new Qn(g,d);return y.emptyItemCount()>qO&&(y=y.compress(this.items.length-s.length)),y}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),s=t.maps.length,o=[],a=0;return this.items.forEach((c,d)=>{if(d>=e)o.push(c),c.selection&&a++;else if(c.step){let f=c.step.map(t.slice(s)),p=f&&f.getMap();if(s--,p&&t.appendMap(p,s),f){let g=c.selection&&c.selection.map(t.slice(s));g&&a++;let y=new ir(p.invert(),f,g),b,x=o.length-1;(b=o.length&&o[x].merge(y))?o[x]=b:o.push(y)}}else c.map&&s--},this.items.length,0),new Qn(Ot.from(o.reverse()),a)}}Qn.empty=new Qn(Ot.empty,0);function UO(n,e){let t;return n.forEach((s,o)=>{if(s.selection&&e--==0)return t=o,!1}),n.slice(t)}class ir{constructor(e,t,s,o){this.map=e,this.step=t,this.selection=s,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new ir(t.getMap().invert(),t,this.selection)}}}class cs{constructor(e,t,s,o,a){this.done=e,this.undone=t,this.prevRanges=s,this.prevTime=o,this.prevComposition=a}}const VO=20;function IO(n,e,t,s){let o=t.getMeta(ii),a;if(o)return o.historyState;t.getMeta($O)&&(n=new cs(n.done,n.undone,null,0,-1));let c=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(c&&c.getMeta(ii))return c.getMeta(ii).redo?new cs(n.done.addTransform(t,void 0,s,Mc(e)),n.undone,D0(t.mapping.maps),n.prevTime,n.prevComposition):new cs(n.done,n.undone.addTransform(t,void 0,s,Mc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let d=t.getMeta("composition"),f=n.prevTime==0||!c&&n.prevComposition!=d&&(n.prevTime<(t.time||0)-s.newGroupDelay||!HO(t,n.prevRanges)),p=c?Xf(n.prevRanges,t.mapping):D0(t.mapping.maps);return new cs(n.done.addTransform(t,f?e.selection.getBookmark():void 0,s,Mc(e)),Qn.empty,p,t.time,d??n.prevComposition)}else return(a=t.getMeta("rebased"))?new cs(n.done.rebased(t,a),n.undone.rebased(t,a),Xf(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new cs(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Xf(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function HO(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((s,o)=>{for(let a=0;a<e.length;a+=2)s<=e[a+1]&&o>=e[a]&&(t=!0)}),t}function D0(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((s,o,a,c)=>e.push(a,c));return e}function Xf(n,e){if(!n)return null;let t=[];for(let s=0;s<n.length;s+=2){let o=e.map(n[s],1),a=e.map(n[s+1],-1);o<=a&&t.push(o,a)}return t}function PO(n,e,t){let s=Mc(e),o=ii.get(e).spec.config,a=(t?n.undone:n.done).popEvent(e,s);if(!a)return null;let c=a.selection.resolve(a.transform.doc),d=(t?n.done:n.undone).addTransform(a.transform,e.selection.getBookmark(),o,s),f=new cs(t?d:a.remaining,t?a.remaining:d,null,0,-1);return a.transform.setSelection(c).setMeta(ii,{redo:t,historyState:f})}let Jf=!1,j0=null;function Mc(n){let e=n.plugins;if(j0!=e){Jf=!1,j0=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Jf=!0;break}}return Jf}const ii=new Kn("history"),$O=new Kn("closeHistory");function FO(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new nn({key:ii,state:{init(){return new cs(Qn.empty,Qn.empty,null,0,-1)},apply(e,t,s){return IO(t,s,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let s=t.inputType,o=s=="historyUndo"?Kx:s=="historyRedo"?Xx:null;return o?(t.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function Yx(n,e){return(t,s)=>{let o=ii.getState(t);if(!o||(n?o.undone:o.done).eventCount==0)return!1;if(s){let a=PO(o,t,n);a&&s(e?a.scrollIntoView():a)}return!0}}const Kx=Yx(!1,!0),Xx=Yx(!0,!0),QO=Qt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>Kx(n,e),redo:()=>({state:n,dispatch:e})=>Xx(n,e)}},addProseMirrorPlugins(){return[FO(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),GO=qn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Ft(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:s,$to:o}=t,a=n();return s.parentOffset===0?a.insertContentAt({from:Math.max(s.pos-1,0),to:o.pos},{type:this.name}):dA(t)?a.insertContentAt(o.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({tr:c,dispatch:d})=>{var f;if(d){const{$to:p}=c.selection,g=p.end();if(p.nodeAfter)p.nodeAfter.isTextblock?c.setSelection(we.create(c.doc,p.pos+1)):p.nodeAfter.isBlock?c.setSelection(ye.create(c.doc,p.pos)):c.setSelection(we.create(c.doc,p.pos));else{const y=(f=p.parent.type.contentMatch.defaultType)===null||f===void 0?void 0:f.create();y&&(c.insert(g,y),c.setSelection(we.create(c.doc,g+1)))}c.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Hx({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),YO=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,KO=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,XO=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,JO=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,ZO=ws.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Ft(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[go({find:YO,type:this.type}),go({find:XO,type:this.type})]},addPasteRules(){return[yo({find:KO,type:this.type}),yo({find:JO,type:this.type})]}}),WO=qn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Ft(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),e2="listItem",z0="textStyle",_0=/^(\d+)\.\s$/,t2=qn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Ft(this.options.HTMLAttributes,t),0]:["ol",Ft(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(e2,this.editor.getAttributes(z0)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Pa({find:_0,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Pa({find:_0,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(z0)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),n2=qn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Ft(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),r2=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,s2=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,i2=ws.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Ft(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[go({find:r2,type:this.type})]},addPasteRules(){return[yo({find:s2,type:this.type})]}}),o2=qn.create({name:"text",group:"inline"}),Jx=Qt.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(pO.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(cO.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(gO.configure(this.options.bulletList)),this.options.code!==!1&&n.push(vO.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(wO.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(kO.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(CO.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(zO.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(_O.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(BO.configure(this.options.heading)),this.options.history!==!1&&n.push(QO.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(GO.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(ZO.configure(this.options.italic)),this.options.listItem!==!1&&n.push(WO.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(t2.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(n2.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(i2.configure(this.options.strike)),this.options.text!==!1&&n.push(o2.configure(this.options.text)),n}}),a2=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Zx=qn.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",Ft(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[Hx({find:a2,type:this.type,getAttributes:n=>{const[,,e,t,s]=n;return{src:t,alt:e,title:s}}})]}}),l2=Qt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new nn({key:new Kn("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:s}=e,o=[];if(!t)return null;const a=this.editor.isEmpty;return n.descendants((c,d)=>{const f=s>=d&&s<=d+c.nodeSize,p=!c.isLeaf&&iu(c);if((f||!this.options.showOnlyCurrent)&&p){const g=[this.options.emptyNodeClass];a&&g.push(this.options.emptyEditorClass);const y=xn.node(d,d+c.nodeSize,{class:g.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:c,pos:d,hasAnchor:f}):this.options.placeholder});o.push(y)}return this.options.includeChildren}),pt.create(n,o)}}})]}});function c2({editor:n}){return n?v.jsxs("div",{className:"border-b p-2 flex flex-wrap gap-2",children:[v.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleBold().run(),disabled:!n.can().chain().focus().toggleBold().run(),className:`px-2 py-1 rounded ${n.isActive("bold")?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"bold"}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleItalic().run(),disabled:!n.can().chain().focus().toggleItalic().run(),className:`px-2 py-1 rounded ${n.isActive("italic")?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"italic"}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleStrike().run(),disabled:!n.can().chain().focus().toggleStrike().run(),className:`px-2 py-1 rounded ${n.isActive("strike")?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"strike"}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().setParagraph().run(),className:`px-2 py-1 rounded ${n.isActive("paragraph")?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"paragraph"}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleHeading({level:1}).run(),className:`px-2 py-1 rounded ${n.isActive("heading",{level:1})?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"h1"}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleHeading({level:2}).run(),className:`px-2 py-1 rounded ${n.isActive("heading",{level:2})?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"h2"}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleHeading({level:3}).run(),className:`px-2 py-1 rounded ${n.isActive("heading",{level:3})?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"h3"}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleBulletList().run(),className:`px-2 py-1 rounded ${n.isActive("bulletList")?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"bullet list"}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().toggleOrderedList().run(),className:`px-2 py-1 rounded ${n.isActive("orderedList")?"bg-emerald-600 text-white":"hover:bg-gray-100"}`,children:"ordered list"}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().undo().run(),disabled:!n.can().chain().focus().undo().run(),className:"px-2 py-1 rounded hover:bg-gray-100",children:"undo"}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().redo().run(),disabled:!n.can().chain().focus().redo().run(),className:"px-2 py-1 rounded hover:bg-gray-100",children:"redo"})]}):null}function u2({content:n}){const e=Qx({extensions:[Jx,Zx],content:n,editable:!1});return v.jsx($x,{editor:e})}function d2({userId:n}){const e=Ln(_e.profiles.get,{userId:n});return e?v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-100",children:e.pictureUrl?v.jsx("img",{src:e.pictureUrl,alt:e.name,className:"w-full h-full object-cover"}):v.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"?"})}),v.jsxs("div",{children:[v.jsx("div",{className:"font-medium",children:e.name}),v.jsxs("div",{className:"text-sm text-gray-500",children:[e.relationship," of Emily"]})]})]}):null}function f2(){const n=Ln(_e.profiles.getCurrentProfile),{results:e,status:t,loadMore:s}=W0(_e.posts.list,n?{paginationOpts:{numItems:20}}:"skip",{initialNumItems:20}),o=st(_e.posts.create),a=st(_e.posts.remove),c=st(_e.media.generateUploadUrl),d=Ln(_e.auth.loggedInUser),[f,p]=A.useState(""),[g,y]=A.useState(!1),b=Qx({extensions:[Jx,Zx.configure({inline:!0,allowBase64:!0}),l2.configure({placeholder:"Share your words"})],content:""}),x=A.useMemo(()=>["What song instantly reminds you of Em?","Share a tiny memory that still makes you smile.","If you could send Em a note today, what would it say?","A picture in words: describe a place you shared with Em.","Two words that capture Em's vibe—go!","What would you play for Em on a long drive?","Tell the group something small but golden about Em."],[]),S=A.useCallback((H,U)=>{if(!b)return;const R=U?"Dear Em, ":"Hey everyone, ";b.commands.setContent({type:"doc",content:[{type:"paragraph",content:[{type:"text",text:R+H}]}]}),b.commands.focus("end"),p("")},[b]),E=A.useCallback(async H=>{if(b)try{y(!0);const U=await c(),R=await fetch(U,{method:"POST",headers:{"Content-Type":H.type},body:H});if(!R.ok)throw new Error("Failed to upload image");const{storageId:Z}=await R.json(),le=await fetch(`/api/storage/${Z}`).then(re=>re.text());b.chain().focus().setImage({src:le}).run()}catch(U){console.error("Failed to upload image:",U),Ve.error("Failed to upload image")}finally{y(!1)}},[b,c]),T=A.useCallback(H=>{H.preventDefault();const U=H.dataTransfer?.files[0];U&&U.type.startsWith("image/")&&E(U)},[E]),_=A.useCallback(H=>{const U=H.clipboardData?.files[0];U&&U.type.startsWith("image/")&&(H.preventDefault(),E(U))},[E]);async function F(H){if(H.preventDefault(),!(!b||!f.trim()))try{const U=b.getJSON();await o({title:f,content:{type:"doc",content:U.content||[]}}),p(""),b.commands.setContent(""),Ve.success("Post created successfully!")}catch(U){Ve.error("Failed to create post"),console.error(U)}}async function Y(H){if(confirm("Are you sure you want to delete this post?"))try{await a({id:H}),Ve.success("Post deleted successfully!")}catch(U){Ve.error("Failed to delete post"),console.error(U)}}return n?v.jsxs("div",{className:"max-w-3xl mx-auto",children:[v.jsxs("div",{className:"flex items-end justify-between mb-3",children:[v.jsx("h1",{className:"text-2xl font-bold",children:"Messages to Emily"}),v.jsx("span",{className:"text-sm opacity-70",children:"A cozy feed for our little group"})]}),v.jsxs("div",{className:"glass-elevated glass-3d rounded-2xl border mb-6 p-3",children:[v.jsx("div",{className:"text-sm mb-2 font-medium",children:"Try an icebreaker"}),v.jsxs("div",{className:"flex gap-2 flex-wrap",children:[x.map((H,U)=>v.jsx("button",{type:"button",className:"px-3 py-2 text-sm rounded-xl border border-black/20 bg-white/60 hover:bg-white/80",onClick:()=>S(H,!1),title:"Prefill composer with this prompt",children:H},U)),v.jsx("button",{type:"button",className:"px-3 py-2 text-sm rounded-xl border border-black/20 bg-white/60 hover:bg-white/80",onClick:()=>S("I wanted to tell you...",!0),title:"Write a note to Emily",children:"Write to Emily"})]})]}),v.jsxs("div",{className:"mb-8 space-y-4 glass-elevated glass-3d rounded-2xl border p-3",children:[v.jsx("input",{type:"text",value:f,onChange:H=>p(H.target.value),placeholder:"Add a title (optional)",className:"w-full p-2 border rounded-xl text-base bg-white/60",required:!0}),v.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white/50",children:[v.jsx(c2,{editor:b}),v.jsxs("div",{className:"relative",onDrop:T,onDragOver:H=>H.preventDefault(),onPaste:_,children:[g&&v.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center text-sm",children:"Uploading image..."}),v.jsx($x,{editor:b,className:"prose max-w-none p-4"})]})]}),v.jsx("form",{onSubmit:H=>{F(H)},className:"flex justify-end gap-3",children:v.jsx("button",{type:"submit",disabled:!f.trim()||!b?.getText().trim(),className:"ep-btn ep-btn--pink",children:"Share Memory"})})]}),v.jsx("div",{className:"space-y-4",children:e?.map(H=>v.jsxs("article",{className:"glass-elevated glass-3d rounded-2xl border overflow-hidden",children:[v.jsxs("div",{className:"p-4 border-b bg-white/50",children:[v.jsxs("div",{className:"flex justify-between items-start mb-2",children:[v.jsx(d2,{userId:H.authorId}),H.authorId===d?._id&&v.jsx("button",{type:"button",onClick:()=>{Y(H._id)},className:"text-red-600 hover:text-red-700 text-sm",children:"Delete"})]}),H.title&&v.jsx("h2",{className:"text-lg font-semibold",children:H.title}),v.jsx("div",{className:"text-xs opacity-60 mt-1",children:new Date(H._creationTime).toLocaleDateString()})]}),v.jsx("div",{className:"prose max-w-none p-4 bg-white/60",children:v.jsx(u2,{content:H.content})}),v.jsx("div",{className:"border-t bg-white/50",children:v.jsx(iv,{targetType:"post",targetId:H._id})})]},H._id))}),t==="CanLoadMore"&&v.jsx("div",{className:"mt-8 flex justify-center",children:v.jsx("button",{type:"button",onClick:()=>s(20),className:"bg-emerald-600 text-white px-6 py-2 rounded-full hover:bg-emerald-700",children:"Load More"})}),t==="LoadingMore"&&v.jsx("div",{className:"mt-8 flex justify-center",children:v.jsx("div",{className:"bg-emerald-100 text-emerald-800 px-6 py-2 rounded-full",children:"Loading..."})})]}):v.jsxs("div",{className:"max-w-4xl mx-auto",children:[v.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-8",children:"Messages to Emily"}),v.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg text-amber-800",children:"Please complete your profile to view and share memories."})]})}function h2(){return v.jsxs("div",{className:"max-w-3xl mx-auto prose",children:[v.jsx("h1",{className:"text-3xl font-bold text-emerald-800 mb-8",children:"About Emerald Palace"}),v.jsx("p",{className:"text-lg text-gray-700",children:"Welcome to Emerald Palace, a digital memorial for Emily Parsonson. Contribute to a private collection of photographs, videos, and written memories shared with Emily's beloved family and friends."}),v.jsx("p",{className:"text-lg text-gray-700",children:'Upload photos or video to the "Photographs & Videos" gallery or write a blog post in the "Memories" blog. Please make sure to select the relationship to Emily that best describes you on the "Profile" page. You can share photos & videos with specific groups of users, or everyone which is the default. For any issues, please contact benj.br@icloud.com'})]})}function Wx(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=Wx(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function p2(){for(var n,e,t=0,s="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=Wx(n))&&(s&&(s+=" "),s+=e);return s}const ap="-",m2=n=>{const e=y2(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:c=>{const d=c.split(ap);return d[0]===""&&d.length!==1&&d.shift(),eS(d,e)||g2(c)},getConflictingClassGroupIds:(c,d)=>{const f=t[c]||[];return d&&s[c]?[...f,...s[c]]:f}}},eS=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),o=s?eS(n.slice(1),s):void 0;if(o)return o;if(e.validators.length===0)return;const a=n.join(ap);return e.validators.find(({validator:c})=>c(a))?.classGroupId},B0=/^\[(.+)\]$/,g2=n=>{if(B0.test(n)){const e=B0.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},y2=n=>{const{theme:e,classGroups:t}=n,s={nextPart:new Map,validators:[]};for(const o in t)Mh(t[o],s,o,e);return s},Mh=(n,e,t,s)=>{n.forEach(o=>{if(typeof o=="string"){const a=o===""?e:L0(e,o);a.classGroupId=t;return}if(typeof o=="function"){if(b2(o)){Mh(o(s),e,t,s);return}e.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([a,c])=>{Mh(c,L0(e,a),t,s)})})},L0=(n,e)=>{let t=n;return e.split(ap).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},b2=n=>n.isThemeGetter,v2=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const o=(a,c)=>{t.set(a,c),e++,e>n&&(e=0,s=t,t=new Map)};return{get(a){let c=t.get(a);if(c!==void 0)return c;if((c=s.get(a))!==void 0)return o(a,c),c},set(a,c){t.has(a)?t.set(a,c):o(a,c)}}},Nh="!",Ah=":",x2=Ah.length,S2=n=>{const{prefix:e,experimentalParseClassName:t}=n;let s=o=>{const a=[];let c=0,d=0,f=0,p;for(let S=0;S<o.length;S++){let E=o[S];if(c===0&&d===0){if(E===Ah){a.push(o.slice(f,S)),f=S+x2;continue}if(E==="/"){p=S;continue}}E==="["?c++:E==="]"?c--:E==="("?d++:E===")"&&d--}const g=a.length===0?o:o.substring(f),y=w2(g),b=y!==g,x=p&&p>f?p-f:void 0;return{modifiers:a,hasImportantModifier:b,baseClassName:y,maybePostfixModifierPosition:x}};if(e){const o=e+Ah,a=s;s=c=>c.startsWith(o)?a(c.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const o=s;s=a=>t({className:a,parseClassName:o})}return s},w2=n=>n.endsWith(Nh)?n.substring(0,n.length-1):n.startsWith(Nh)?n.substring(1):n,k2=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const o=[];let a=[];return s.forEach(c=>{c[0]==="["||e[c]?(o.push(...a.sort(),c),a=[]):a.push(c)}),o.push(...a.sort()),o}},E2=n=>({cache:v2(n.cacheSize),parseClassName:S2(n),sortModifiers:k2(n),...m2(n)}),T2=/\s+/,C2=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:o,sortModifiers:a}=e,c=[],d=n.trim().split(T2);let f="";for(let p=d.length-1;p>=0;p-=1){const g=d[p],{isExternal:y,modifiers:b,hasImportantModifier:x,baseClassName:S,maybePostfixModifierPosition:E}=t(g);if(y){f=g+(f.length>0?" "+f:f);continue}let T=!!E,_=s(T?S.substring(0,E):S);if(!_){if(!T){f=g+(f.length>0?" "+f:f);continue}if(_=s(S),!_){f=g+(f.length>0?" "+f:f);continue}T=!1}const F=a(b).join(":"),Y=x?F+Nh:F,H=Y+_;if(c.includes(H))continue;c.push(H);const U=o(_,T);for(let R=0;R<U.length;++R){const Z=U[R];c.push(Y+Z)}f=g+(f.length>0?" "+f:f)}return f};function M2(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=tS(e))&&(s&&(s+=" "),s+=t);return s}const tS=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=tS(n[s]))&&(t&&(t+=" "),t+=e);return t};function N2(n,...e){let t,s,o,a=c;function c(f){const p=e.reduce((g,y)=>y(g),n());return t=E2(p),s=t.cache.get,o=t.cache.set,a=d,d(f)}function d(f){const p=s(f);if(p)return p;const g=C2(f,t);return o(f,g),g}return function(){return a(M2.apply(null,arguments))}}const Mt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},nS=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,rS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,A2=/^\d+\/\d+$/,O2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,R2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,D2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,j2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,z2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,no=n=>A2.test(n),ze=n=>!!n&&!Number.isNaN(Number(n)),ss=n=>!!n&&Number.isInteger(Number(n)),q0=n=>n.endsWith("%")&&ze(n.slice(0,-1)),is=n=>O2.test(n),_2=()=>!0,B2=n=>R2.test(n)&&!D2.test(n),lp=()=>!1,L2=n=>j2.test(n),q2=n=>z2.test(n),U2=n=>!he(n)&&!pe(n),V2=n=>xo(n,oS,lp),he=n=>nS.test(n),Gs=n=>xo(n,aS,B2),Zf=n=>xo(n,J2,ze),I2=n=>xo(n,sS,lp),H2=n=>xo(n,iS,q2),P2=n=>xo(n,lp,L2),pe=n=>rS.test(n),Sa=n=>So(n,aS),$2=n=>So(n,Z2),F2=n=>So(n,sS),Q2=n=>So(n,oS),G2=n=>So(n,iS),Y2=n=>So(n,W2,!0),xo=(n,e,t)=>{const s=nS.exec(n);return s?s[1]?e(s[1]):t(s[2]):!1},So=(n,e,t=!1)=>{const s=rS.exec(n);return s?s[1]?e(s[1]):t:!1},sS=n=>n==="position",K2=new Set(["image","url"]),iS=n=>K2.has(n),X2=new Set(["length","size","percentage"]),oS=n=>X2.has(n),aS=n=>n==="length",J2=n=>n==="number",Z2=n=>n==="family-name",W2=n=>n==="shadow",eR=()=>{const n=Mt("color"),e=Mt("font"),t=Mt("text"),s=Mt("font-weight"),o=Mt("tracking"),a=Mt("leading"),c=Mt("breakpoint"),d=Mt("container"),f=Mt("spacing"),p=Mt("radius"),g=Mt("shadow"),y=Mt("inset-shadow"),b=Mt("drop-shadow"),x=Mt("blur"),S=Mt("perspective"),E=Mt("aspect"),T=Mt("ease"),_=Mt("animate"),F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto","contain","none"],R=()=>[pe,he,f],Z=()=>[no,"full","auto",...R()],le=()=>[ss,"none","subgrid",pe,he],re=()=>["auto",{span:["full",ss,pe,he]},ss,pe,he],de=()=>[ss,"auto",pe,he],ke=()=>["auto","min","max","fr",pe,he],Ce=()=>["start","end","center","between","around","evenly","stretch","baseline"],ne=()=>["start","end","center","stretch"],se=()=>["auto",...R()],te=()=>[no,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],N=()=>[n,pe,he],L=()=>[q0,Sa,Gs],$=()=>["","none","full",p,pe,he],ce=()=>["",ze,Sa,Gs],C=()=>["solid","dashed","dotted","double"],P=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ee=()=>["","none",x,pe,he],D=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",pe,he],X=()=>["none",ze,pe,he],ie=()=>["none",ze,pe,he],z=()=>[ze,pe,he],ae=()=>[no,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[is],breakpoint:[is],color:[_2],container:[is],"drop-shadow":[is],ease:["in","out","in-out"],font:[U2],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[is],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[is],shadow:[is],spacing:["px",ze],text:[is],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",no,he,pe,E]}],container:["container"],columns:[{columns:[ze,he,pe,d]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),he,pe]}],overflow:[{overflow:H()}],"overflow-x":[{"overflow-x":H()}],"overflow-y":[{"overflow-y":H()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Z()}],"inset-x":[{"inset-x":Z()}],"inset-y":[{"inset-y":Z()}],start:[{start:Z()}],end:[{end:Z()}],top:[{top:Z()}],right:[{right:Z()}],bottom:[{bottom:Z()}],left:[{left:Z()}],visibility:["visible","invisible","collapse"],z:[{z:[ss,"auto",pe,he]}],basis:[{basis:[no,"full","auto",d,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ze,no,"auto","initial","none",he]}],grow:[{grow:["",ze,pe,he]}],shrink:[{shrink:["",ze,pe,he]}],order:[{order:[ss,"first","last","none",pe,he]}],"grid-cols":[{"grid-cols":le()}],"col-start-end":[{col:re()}],"col-start":[{"col-start":de()}],"col-end":[{"col-end":de()}],"grid-rows":[{"grid-rows":le()}],"row-start-end":[{row:re()}],"row-start":[{"row-start":de()}],"row-end":[{"row-end":de()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ke()}],"auto-rows":[{"auto-rows":ke()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...Ce(),"normal"]}],"justify-items":[{"justify-items":[...ne(),"normal"]}],"justify-self":[{"justify-self":["auto",...ne()]}],"align-content":[{content:["normal",...Ce()]}],"align-items":[{items:[...ne(),"baseline"]}],"align-self":[{self:["auto",...ne(),"baseline"]}],"place-content":[{"place-content":Ce()}],"place-items":[{"place-items":[...ne(),"baseline"]}],"place-self":[{"place-self":["auto",...ne()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:se()}],mx:[{mx:se()}],my:[{my:se()}],ms:[{ms:se()}],me:[{me:se()}],mt:[{mt:se()}],mr:[{mr:se()}],mb:[{mb:se()}],ml:[{ml:se()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:te()}],w:[{w:[d,"screen",...te()]}],"min-w":[{"min-w":[d,"screen","none",...te()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[c]},...te()]}],h:[{h:["screen",...te()]}],"min-h":[{"min-h":["screen","none",...te()]}],"max-h":[{"max-h":["screen",...te()]}],"font-size":[{text:["base",t,Sa,Gs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,pe,Zf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",q0,he]}],"font-family":[{font:[$2,he,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,pe,he]}],"line-clamp":[{"line-clamp":[ze,"none",pe,Zf]}],leading:[{leading:[a,...R()]}],"list-image":[{"list-image":["none",pe,he]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",pe,he]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:N()}],"text-color":[{text:N()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...C(),"wavy"]}],"text-decoration-thickness":[{decoration:[ze,"from-font","auto",pe,Gs]}],"text-decoration-color":[{decoration:N()}],"underline-offset":[{"underline-offset":[ze,"auto",pe,he]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pe,he]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pe,he]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),F2,I2]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",Q2,V2]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ss,pe,he],radial:["",pe,he],conic:[ss,pe,he]},G2,H2]}],"bg-color":[{bg:N()}],"gradient-from-pos":[{from:L()}],"gradient-via-pos":[{via:L()}],"gradient-to-pos":[{to:L()}],"gradient-from":[{from:N()}],"gradient-via":[{via:N()}],"gradient-to":[{to:N()}],rounded:[{rounded:$()}],"rounded-s":[{"rounded-s":$()}],"rounded-e":[{"rounded-e":$()}],"rounded-t":[{"rounded-t":$()}],"rounded-r":[{"rounded-r":$()}],"rounded-b":[{"rounded-b":$()}],"rounded-l":[{"rounded-l":$()}],"rounded-ss":[{"rounded-ss":$()}],"rounded-se":[{"rounded-se":$()}],"rounded-ee":[{"rounded-ee":$()}],"rounded-es":[{"rounded-es":$()}],"rounded-tl":[{"rounded-tl":$()}],"rounded-tr":[{"rounded-tr":$()}],"rounded-br":[{"rounded-br":$()}],"rounded-bl":[{"rounded-bl":$()}],"border-w":[{border:ce()}],"border-w-x":[{"border-x":ce()}],"border-w-y":[{"border-y":ce()}],"border-w-s":[{"border-s":ce()}],"border-w-e":[{"border-e":ce()}],"border-w-t":[{"border-t":ce()}],"border-w-r":[{"border-r":ce()}],"border-w-b":[{"border-b":ce()}],"border-w-l":[{"border-l":ce()}],"divide-x":[{"divide-x":ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...C(),"hidden","none"]}],"divide-style":[{divide:[...C(),"hidden","none"]}],"border-color":[{border:N()}],"border-color-x":[{"border-x":N()}],"border-color-y":[{"border-y":N()}],"border-color-s":[{"border-s":N()}],"border-color-e":[{"border-e":N()}],"border-color-t":[{"border-t":N()}],"border-color-r":[{"border-r":N()}],"border-color-b":[{"border-b":N()}],"border-color-l":[{"border-l":N()}],"divide-color":[{divide:N()}],"outline-style":[{outline:[...C(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ze,pe,he]}],"outline-w":[{outline:["",ze,Sa,Gs]}],"outline-color":[{outline:[n]}],shadow:[{shadow:["","none",g,Y2,P2]}],"shadow-color":[{shadow:N()}],"inset-shadow":[{"inset-shadow":["none",pe,he,y]}],"inset-shadow-color":[{"inset-shadow":N()}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:N()}],"ring-offset-w":[{"ring-offset":[ze,Gs]}],"ring-offset-color":[{"ring-offset":N()}],"inset-ring-w":[{"inset-ring":ce()}],"inset-ring-color":[{"inset-ring":N()}],opacity:[{opacity:[ze,pe,he]}],"mix-blend":[{"mix-blend":[...P(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":P()}],filter:[{filter:["","none",pe,he]}],blur:[{blur:ee()}],brightness:[{brightness:[ze,pe,he]}],contrast:[{contrast:[ze,pe,he]}],"drop-shadow":[{"drop-shadow":["","none",b,pe,he]}],grayscale:[{grayscale:["",ze,pe,he]}],"hue-rotate":[{"hue-rotate":[ze,pe,he]}],invert:[{invert:["",ze,pe,he]}],saturate:[{saturate:[ze,pe,he]}],sepia:[{sepia:["",ze,pe,he]}],"backdrop-filter":[{"backdrop-filter":["","none",pe,he]}],"backdrop-blur":[{"backdrop-blur":ee()}],"backdrop-brightness":[{"backdrop-brightness":[ze,pe,he]}],"backdrop-contrast":[{"backdrop-contrast":[ze,pe,he]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ze,pe,he]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ze,pe,he]}],"backdrop-invert":[{"backdrop-invert":["",ze,pe,he]}],"backdrop-opacity":[{"backdrop-opacity":[ze,pe,he]}],"backdrop-saturate":[{"backdrop-saturate":[ze,pe,he]}],"backdrop-sepia":[{"backdrop-sepia":["",ze,pe,he]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",pe,he]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ze,"initial",pe,he]}],ease:[{ease:["linear","initial",T,pe,he]}],delay:[{delay:[ze,pe,he]}],animate:[{animate:["none",_,pe,he]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,pe,he]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:X()}],"rotate-x":[{"rotate-x":X()}],"rotate-y":[{"rotate-y":X()}],"rotate-z":[{"rotate-z":X()}],scale:[{scale:ie()}],"scale-x":[{"scale-x":ie()}],"scale-y":[{"scale-y":ie()}],"scale-z":[{"scale-z":ie()}],"scale-3d":["scale-3d"],skew:[{skew:z()}],"skew-x":[{"skew-x":z()}],"skew-y":[{"skew-y":z()}],transform:[{transform:[pe,he,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ae()}],"translate-x":[{"translate-x":ae()}],"translate-y":[{"translate-y":ae()}],"translate-z":[{"translate-z":ae()}],"translate-none":["translate-none"],accent:[{accent:N()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:N()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pe,he]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pe,he]}],fill:[{fill:["none",...N()]}],"stroke-w":[{stroke:[ze,Sa,Gs,Zf]}],stroke:[{stroke:["none",...N()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},tR=N2(eR);function lS(...n){return tR(p2(n))}const nR=["Friend","Partner","Family","Parent","Former Partner","Colleague","School"];async function rR(n,e=256){const t=document.createElement("canvas");t.width=e,t.height=e;const s=t.getContext("2d");let o=0;for(let p=0;p<n.length;p++)o+=n.charCodeAt(p);const a=()=>Math.sin(o++)*1e4%1,c=Math.floor(a()*360),d=s.createRadialGradient(e/2,e/2,0,e/2,e/2,e);d.addColorStop(0,`hsl(${c}, 70%, 60%)`),d.addColorStop(1,`hsl(${(c+60)%360}, 70%, 35%)`),s.fillStyle=d,s.fillRect(0,0,e,e);const f=a()>.5?"🧜‍♀️":"🧜‍♂️";return s.font=`${e*.6}px serif`,s.textAlign="center",s.textBaseline="middle",s.fillText(f,e/2,e/2),new Promise(p=>t.toBlob(g=>p(g),"image/png"))}const sR=()=>v.jsx("div",{className:"text-white/90 leading-relaxed",children:v.jsx("p",{children:"We're honoured you're here to celebrate Emily. This gentle guide will set up your profile while the background settles in."})}),iR=({data:n,onChange:e})=>v.jsxs("div",{className:"space-y-3",children:[v.jsx("label",{className:"text-sm text-white/80",children:"Your full name"}),v.jsx("input",{value:n.name,onChange:t=>e("name",t.target.value),className:"w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 focus:outline-none focus:ring-2 focus:ring-emerald-400 placeholder-white/50",placeholder:"Enter your name"})]}),oR=({data:n,onChange:e})=>v.jsxs("div",{className:"space-y-3",children:[v.jsx("label",{className:"text-sm text-white/80",children:"Select the relationship that best describes you"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:nR.map(t=>v.jsx("button",{type:"button",onClick:()=>e("relationship",t),className:lS("px-3 py-1.5 rounded-full border text-sm",n.relationship===t?"bg-emerald-500/90 border-emerald-300 text-white":"bg-white/10 border-white/20 text-white/90 hover:bg-white/15"),children:t},t))})]}),Wf=({data:n,onChange:e,field:t,label:s,placeholder:o})=>v.jsxs("div",{className:"space-y-3",children:[v.jsx("label",{className:"text-sm text-white/80",children:s}),v.jsx("textarea",{value:n[t],onChange:a=>e(t,a.target.value),rows:5,className:"w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 focus:outline-none focus:ring-2 focus:ring-emerald-400 placeholder-white/50",placeholder:o})]}),aR=({avatarUrl:n,onGenerateAvatar:e,working:t})=>v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[minmax(0,1fr)_280px] gap-6 items-center",children:[v.jsxs("div",{className:"order-2 md:order-1",children:[v.jsx("p",{className:"text-white/90 mb-3",children:"We've prepared a majestic mermaid portrait as your profile picture. You can regenerate it or keep this one."}),v.jsx("div",{className:"flex gap-3",children:v.jsx("button",{type:"button",onClick:e,className:"modern-primary-btn",disabled:t,children:t?"Generating…":"Regenerate"})})]}),v.jsx("div",{className:"order-1 md:order-2",children:v.jsx("div",{className:"w-64 h-64 rounded-2xl overflow-hidden bg-black/30 border border-white/20 shadow-lg mx-auto",children:n?v.jsx("img",{src:n,alt:"Generated mermaid avatar",className:"w-full h-full object-cover"}):v.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/60",children:"No preview yet"})})})]}),wc=[{id:"welcome",title:"Welcome — and thank you for being here.",component:sR,validate:()=>!0},{id:"name",title:"What is your name?",component:iR,validate:n=>!!n.name.trim()},{id:"relationship",title:"How did you know Emily?",component:oR,validate:n=>!!n.relationship},{id:"memory",title:"What is your favourite memory of her?",component:n=>v.jsx(Wf,{...n,field:"memory",label:"Share a favourite memory",placeholder:"Write a few lines…",minLength:10}),validate:n=>n.memory.trim().length>=10},{id:"miss",title:"What do you miss most?",component:n=>v.jsx(Wf,{...n,field:"miss",label:"What do you miss most?",placeholder:"Write from the heart…",minLength:3}),validate:n=>n.miss.trim().length>=3},{id:"thankful",title:"What are you thankful for?",component:n=>v.jsx(Wf,{...n,field:"thankful",label:"What are you thankful for?",placeholder:"Share your gratitude…",minLength:3}),validate:n=>n.thankful.trim().length>=3},{id:"avatar",title:"A majestic mermaid — your profile picture",component:aR,validate:()=>!0}];function lR({onComplete:n}){const[e,t]=A.useState(0),[s,o]=A.useState(!1),[a,c]=A.useState({name:"",relationship:"",memory:"",miss:"",thankful:""}),[d,f]=A.useState(null),[p,g]=A.useState(null),y=st(_e.profiles.generateUploadUrl),b=st(_e.profiles.update),x=st(_e.profiles.updatePicture),S=wc[e],E=S.id==="avatar",T=S.validate(a)&&(!E||!!p),_=A.useCallback((U,R)=>{c(Z=>({...Z,[U]:R}))},[]),F=A.useCallback(async()=>{o(!0);try{const U=[a.name||"Friend",a.relationship||"Friend",a.memory.slice(0,24),a.miss.slice(0,24),a.thankful.slice(0,24)].join("|"),R=await rR(U||"emerald-palace"),Z=URL.createObjectURL(R);d&&URL.revokeObjectURL(d),f(Z),g(R)}catch(U){console.error(U),Ve.error("Could not generate an avatar. Please try again.")}finally{o(!1)}},[a,d]);A.useEffect(()=>{S.id==="avatar"&&!p&&!s&&F()},[S.id,p,s,F]);const Y=async()=>{if(T){if(S.id!=="avatar"){t(U=>Math.min(U+1,wc.length-1));return}if(!a.name.trim()||!a.relationship){Ve.error("Please provide your name and relationship."),t(wc.findIndex(U=>U.id==="name"));return}if(!p){Ve.error("Please generate an avatar.");return}o(!0);try{await b({name:a.name.trim(),relationship:a.relationship});const U=await y(),R=await fetch(U,{method:"POST",headers:{"Content-Type":"image/png"},body:p});if(!R.ok)throw new Error("Image upload failed");const{storageId:Z}=await R.json();await x({storageId:Z}),Ve.success("Welcome — your profile is ready!"),n()}catch(U){console.error(U),Ve.error("Something went wrong onboarding. Please try again.")}finally{o(!1)}}},H=()=>t(U=>Math.max(U-1,0));return v.jsxs("div",{className:"max-w-3xl mx-auto mt-6 p-6 rounded-2xl glass-elevated text-white shadow-lg",children:[v.jsx("div",{className:"mb-6 flex items-center gap-2",children:wc.map((U,R)=>v.jsx("div",{className:lS("h-1.5 rounded-full transition-all flex-1",R<=e?"bg-emerald-400":"bg-white/20"),"aria-hidden":!0},U.id))}),v.jsx("h1",{className:"text-2xl font-semibold mb-2",children:S.title}),S.subtitle&&v.jsx("p",{className:"text-sm text-white/80 mb-4",children:S.subtitle}),v.jsx(S.component,{data:a,onChange:_,onGenerateAvatar:()=>void F(),avatarUrl:d,working:s}),v.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[v.jsx("button",{type:"button",onClick:H,disabled:e===0||s,className:"px-4 py-2 rounded-xl bg-white/10 border border-white/20 text-white/90 hover:bg-white/15 disabled:opacity-50",children:"Back"}),v.jsx("button",{type:"button",onClick:()=>void Y(),disabled:!T||s,className:"modern-primary-btn",children:E?s?"Setting up…":"Finish":"Next"})]})]})}function cR(){const{isAuthenticated:n}=bo(),{signOut:e}=sv();return n?v.jsx("button",{className:"px-4 py-2 rounded-lg transition-colors bg-blue-500 text-white",onClick:()=>void e(),children:"Sign out"}):null}const uR=["Friend","Partner","Family","Parent","Former Partner","Colleague","School"];function dR(){const n=Ln(_e.auth.loggedInUser),e=Ln(_e.profiles.getCurrentProfile),t=st(_e.profiles.update),s=st(_e.profiles.updatePicture),o=st(_e.profiles.generateUploadUrl),[a,c]=A.useState(!1),[d,f]=A.useState(""),[p,g]=A.useState("Friend"),[y,b]=A.useState(""),[x,S]=A.useState(""),[E,T]=A.useState(""),[_,F]=A.useState(!1);if(A.useEffect(()=>{e&&(f(e.name),g(e.relationship))},[e]),!n)return null;if(!e)return v.jsx(lR,{onComplete:()=>{}});async function Y(R){if(R.preventDefault(),!!d)try{await t({name:d,relationship:p}),Ve.success("Profile updated successfully!")}catch(Z){Ve.error("Failed to update profile"),console.error(Z)}}async function H(R){const Z=R.target.files?.[0];if(Z)try{if(!e?.name){Ve.error("Please enter your name and relationship to Emily and click save first. Then retry uploading a profile picture.");return}c(!0);const le=await o(),re=await fetch(le,{method:"POST",headers:{"Content-Type":Z.type},body:Z});if(!re.ok)throw new Error("Failed to upload image");const{storageId:de}=await re.json();await s({storageId:de}),Ve.success("Profile picture updated!")}catch(le){Ve.error("Failed to update profile picture"),console.error(le)}finally{c(!1)}}async function U(R){if(R.preventDefault(),!y||!x||!E){Ve.error("Please fill in all password fields");return}if(x!==E){Ve.error("New passwords don't match");return}if(x.length<8){Ve.error("Password must be at least 8 characters long");return}try{F(!0),Ve.success("Password changed successfully!"),b(""),S(""),T("")}catch(Z){Ve.error("Failed to change password"),console.error(Z)}finally{F(!1)}}return v.jsx("div",{className:"min-h-screen bg-transparent",children:v.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Profile Settings"}),v.jsx("p",{className:"text-gray-600",children:"Manage your account and preferences"})]}),v.jsxs("div",{className:"ep-surface--transparent glass-elevated glass-3d rounded-2xl shadow-sm border border-gray-100 p-8 mb-8",children:[v.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Profile Picture"}),v.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-100 border-4 border-white shadow-lg",children:e?.pictureUrl?v.jsx("img",{src:e.pictureUrl,alt:"Profile",className:"w-full h-full object-cover"}):v.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-3xl",children:"👤"})}),a&&v.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:v.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}),v.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[v.jsxs("label",{className:"inline-flex items-center justify-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white font-medium py-3 px-6 rounded-xl cursor-pointer transition-colors shadow-sm",children:[v.jsx("span",{children:"📷"}),v.jsx("span",{children:"Change Picture"}),v.jsx("input",{type:"file",accept:"image/*",onChange:R=>{H(R)},disabled:a,className:"hidden"})]}),v.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"JPG, PNG or GIF. Max size 5MB."})]})]})]}),v.jsxs("div",{className:"ep-surface--transparent glass-elevated glass-3d rounded-2xl shadow-sm border border-gray-100 p-8 mb-8",children:[v.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Personal Information"}),v.jsxs("form",{onSubmit:R=>{Y(R)},className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),v.jsx("input",{id:"name",type:"text",value:d,onChange:R=>f(R.target.value),placeholder:"Enter your full name",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-colors text-gray-900 placeholder-gray-400",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"relationship",className:"block text-sm font-medium text-gray-700 mb-2",children:"Relationship to Emily"}),v.jsx("select",{id:"relationship",value:p,onChange:R=>g(R.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-colors text-gray-900 bg-white",children:uR.map(R=>v.jsx("option",{value:R,children:R},R))})]}),v.jsx("button",{type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-3 px-6 rounded-xl transition-colors shadow-sm",children:"Save Changes"})]})]}),v.jsxs("div",{className:"ep-surface--transparent glass-elevated glass-3d rounded-2xl shadow-sm border border-gray-100 p-8 mb-8",children:[v.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Account Security"}),v.jsxs("form",{onSubmit:R=>{U(R)},className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"current-password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),v.jsx("input",{id:"current-password",type:"password",value:y,onChange:R=>b(R.target.value),placeholder:"Enter current password",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-colors text-gray-900 placeholder-gray-400",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),v.jsx("input",{id:"new-password",type:"password",value:x,onChange:R=>S(R.target.value),placeholder:"Enter new password",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-colors text-gray-900 placeholder-gray-400",required:!0,minLength:8}),v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must be at least 8 characters long"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),v.jsx("input",{id:"confirm-password",type:"password",value:E,onChange:R=>T(R.target.value),placeholder:"Confirm new password",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-colors text-gray-900 placeholder-gray-400",required:!0})]}),v.jsx("button",{type:"submit",disabled:_,className:"w-full bg-gray-900 hover:bg-gray-800 text-white font-semibold py-3 px-6 rounded-xl transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Changing Password...":"Change Password"})]})]}),v.jsxs("div",{className:"ep-surface--transparent glass-elevated glass-3d rounded-2xl shadow-sm border border-gray-100 p-8 mb-8",children:[v.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Account Information"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100",children:[v.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Email"}),v.jsx("span",{className:"text-sm text-gray-900",children:n?.email||"Not provided"})]}),v.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100",children:[v.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Account Type"}),v.jsx("span",{className:"text-sm text-gray-900",children:"Standard User"})]}),v.jsxs("div",{className:"flex justify-between items-center py-3",children:[v.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Member Since"}),v.jsx("span",{className:"text-sm text-gray-900",children:"Recently"})]})]})]}),v.jsxs("div",{className:"ep-surface--transparent glass-elevated glass-3d rounded-2xl shadow-sm border border-gray-100 p-8",children:[v.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Account Actions"}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Sign out of your account. You'll need to sign in again to access your profile and media."}),v.jsx(cR,{})]})]})]})})}const cS=A.createContext(null);function fR(n){return`/videos/${encodeURIComponent(n)}`}function hR(){return["CNCO - Reggaetón Lento (Bailemos).mp4","Caroline Polachek - Ocean of Tears.mp4","Chloe x Halle - Do It .mp4","FKA twigs - thank you song.mp4","Fleetwood Mac - Landslide (Live).mp4","Imogen Heap - Goodnight and Go.mp4","Jimmy Eat World - Sweetness.mp4","JoJo - Leave (Get Out).mp4","JoJo - Too Little Too Late.mp4","Julian Casablancas+The Voidz - Human Sadness.mp4","LANA DEL REY - CARMEN.mp4","LCD Soundsystem - american dream.mp4","Mazzy Star - Fade Into You.mp4","Michelle Branch - Everywhere.mp4","Natasha Bedingfield - Unwritten.mp4","Paris Hilton - Stars Are Blind.mp4","Rina Sawayama - Hurricanes.mp4","The Strokes - Automatic Stop Live Lollapalooza.mp4","The Veronicas - Untouched.mp4","Tinashe - Bouncin.mp4"].map(e=>({name:e,url:fR(e)}))}const $n={volume:"ep:bgVideoVolume",muted:"ep:bgVideoMuted",index:"ep:bgVideoIndex",time:"ep:bgVideoTime"};function pR({children:n}){const[e,t]=A.useState(()=>hR()),[s,o]=A.useState([]),[a,c]=A.useState(0);A.useEffect(()=>{let ne=!0;return(async()=>{try{const se=await Promise.all(e.map(async te=>{const L=decodeURIComponent(te.name).replace(/\.[^.]+$/,""),$=`/videos/hls/${encodeURIComponent(L)}/index.m3u8`;try{if((await fetch($,{method:"HEAD"})).ok)return{...te,url:$}}catch{}return te}));ne&&t(se)}catch{}})(),()=>{ne=!1}},[e]);const[d,f]=A.useState(()=>{try{const ne=localStorage.getItem($n.index);if(ne!==null){const se=Number(ne);if(Number.isFinite(se)&&se>=0&&se<e.length)return se}return e.length>0?Math.floor(Math.random()*e.length):0}catch{return e.length>0?Math.floor(Math.random()*e.length):0}}),[p,g]=A.useState(()=>{try{if(localStorage.getItem($n.index)===null)return 0;const se=localStorage.getItem($n.time),te=se?Number(se):0;return Number.isFinite(te)&&te>=0?te:0}catch{return 0}}),[y,b]=A.useState(()=>{try{const ne=localStorage.getItem($n.muted);return ne===null?!0:ne==="true"}catch{return!0}}),[x,S]=A.useState(()=>{try{const ne=localStorage.getItem($n.volume),se=ne?Number(ne):.5;return Number.isFinite(se)?Math.min(1,Math.max(0,se)):.5}catch{return .5}}),[E,T]=A.useState(!1),_=A.useRef(null),F=A.useCallback((ne,se)=>{const te=[];for(let N=0;N<ne;N++)N!==se&&te.push(N);for(let N=te.length-1;N>0;N--){const L=Math.floor(Math.random()*(N+1)),$=te[N];te[N]=te[L],te[L]=$}return[se,...te]},[]),Y=A.useCallback(ne=>{_.current=ne,ne&&(ne.applyState({muted:y,volume:x}),E?ne.play():ne.pause(),p>0&&ne.seek(p))},[p,E,y,x]),H=A.useCallback(ne=>{const se=(ne+e.length)%e.length;f(se);try{localStorage.setItem($n.index,String(se))}catch{}g(0);try{localStorage.setItem($n.time,"0")}catch{}o(F(e.length,se)),c(0)},[e.length,F]),U=A.useCallback(ne=>{const se=Math.max(0,ne||0);g(se);try{localStorage.setItem($n.time,String(se))}catch{}},[]),R=A.useCallback(ne=>{b(ne);try{localStorage.setItem($n.muted,ne?"true":"false")}catch{}_.current?.applyState({muted:ne})},[]),Z=A.useCallback(ne=>{const se=Math.min(1,Math.max(0,ne));S(se);try{localStorage.setItem($n.volume,String(se))}catch{}_.current?.applyState({volume:se})},[]),le=A.useCallback(()=>{T(!0),_.current?.play()},[]),re=A.useCallback(()=>{T(!1),_.current?.pause()},[]),de=A.useCallback(()=>{if(e.length===0)return;if(s.length!==e.length){const $=F(e.length,d%Math.max(1,e.length));o($),c(0),f($[0]);try{localStorage.setItem($n.index,String($[0]))}catch{}return}const ne=a+1;if(ne<s.length){const $=s[ne];c(ne),H($);return}const se=s[s.length-1];let te=F(e.length,se);te=[te[0],...te.slice(1)];const N=te[1%te.length]??se,L=F(e.length,N);o(L),c(0),H(N)},[e.length,s,a,d,F,H]),ke=A.useCallback(()=>{if(e.length!==0)if(a>0&&s.length===e.length){const ne=s[a-1];c(a-1),H(ne)}else H(d-1)},[e.length,a,s,d,H]),Ce={playlist:e,currentIndex:d,setIndex:H,currentTime:p,setCurrentTime:U,isPlaying:E,play:le,pause:re,muted:y,setMuted:R,volume:x,setVolume:Z,next:de,prev:ke,registerDomControls:Y};return v.jsx(cS.Provider,{value:Ce,children:n})}function cp(){const n=A.useContext(cS);if(!n)throw new Error("useVideo must be used within a VideoProvider");return n}function mR({filename:n}){const{isPlaying:e,play:t,pause:s,muted:o,setMuted:a,volume:c,setVolume:d,next:f,prev:p,currentIndex:g,playlist:y}=cp(),[b,x]=A.useState(()=>{try{return document.documentElement.classList.contains("ep-lowfx")}catch{return!1}});A.useEffect(()=>{const R=document.documentElement,Z=()=>{try{x(R.classList.contains("ep-lowfx"))}catch{}};Z();const le=new MutationObserver(Z);try{le.observe(R,{attributes:!0,attributeFilter:["class"]})}catch{}const re=de=>{try{x(!!de.detail)}catch{}};return document.addEventListener("ep:lowfx-toggle",re),()=>{le.disconnect(),document.removeEventListener("ep:lowfx-toggle",re)}},[]);const S=()=>{e?s():t()},[E,T]=A.useState(!1),[_,F]=A.useState(!1);A.useEffect(()=>{const R=Z=>{try{F(!!Z.detail)}catch{}};return window.addEventListener("ep:playlist-state",R),()=>window.removeEventListener("ep:playlist-state",R)},[]);const Y=R=>{let Z=R;for(;Z;){const le=(Z.tagName||"").toUpperCase();if(le==="BUTTON"||le==="A"||le==="INPUT"||le==="SELECT"||le==="TEXTAREA")return!0;try{if(Z.hasAttribute&&Z.hasAttribute("data-no-toggle"))return!0}catch{}Z=Z.parentElement}return!1},[H,U]=A.useState(!1);return v.jsxs("div",{className:"ep-bg-controls",role:"button",tabIndex:0,"aria-label":"Background video controls — toggle songs list","aria-expanded":_,"aria-controls":"playlist-panel",style:{maxWidth:"min(92vw, 980px)",flexWrap:"nowrap"},onClick:R=>{if(!Y(R.target))try{window.dispatchEvent(new Event("ep:playlist-toggle"))}catch{}},onKeyDown:R=>{if(R.key==="Enter"||R.key===" "){R.preventDefault();try{window.dispatchEvent(new Event("ep:playlist-toggle"))}catch{}}},children:[v.jsxs("div",{className:"ep-bg-filename relative flex items-center gap-2","aria-live":"polite",title:`Now playing: ${n}`,children:[v.jsx("span",{className:"sr-only",children:"Current track: "}),v.jsxs("span",{className:"ep-bg-marquee pr-8 hidden md:inline-block","aria-hidden":"true",children:[n,"   "]}),v.jsx("div",{className:"flex items-center gap-2 md:hidden",children:v.jsx("span",{className:"truncate max-w-[52vw] text-sm","aria-hidden":"true",children:n.replace(/\.mp4$/i,"")})}),v.jsx("button",{onClick:()=>U(!H),className:"absolute right-0 top-1/2 -translate-y-1/2 info-button","aria-label":"Information about the music playlist",title:"Learn about Em's music collection",children:"ℹ"}),H&&v.jsxs("div",{className:"info-tooltip absolute top-full left-0 mt-2 max-w-sm z-50",children:[v.jsx("div",{className:"font-semibold mb-1",children:"🎵 Em's Favorite Songs"}),v.jsx("p",{className:"mb-2",children:"These are some of Em's most cherished songs that have special meaning. Each track tells a story and captures a moment in time."}),v.jsxs("p",{className:"text-xs opacity-90",children:["💡 ",v.jsx("strong",{children:"Want to add more?"}),' Use the "Suggest More" button in the playlist to submit your favorite songs!']}),v.jsx("div",{className:"absolute bottom-full left-4 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-black"})]})]}),v.jsxs("button",{type:"button",className:"ep-bg-btn ep-btn group","aria-label":e?"Pause background video playback":"Resume background video playback","aria-pressed":e,onClick:S,title:e?"Click to pause video":"Click to play video",children:[v.jsx("span",{className:"text-lg transition-transform group-hover:scale-110","aria-hidden":"true",children:e?"❚❚":"▶"}),v.jsxs("span",{className:"sr-only",children:[e?"Pause":"Play"," background video"]})]}),v.jsxs("button",{type:"button",className:"ep-bg-btn ep-btn group","aria-label":"Skip to previous track in playlist",onClick:p,disabled:y.length<=1,title:y.length<=1?"Only one track available":"Go to previous track",children:[v.jsx("span",{className:"text-lg transition-transform group-hover:scale-110","aria-hidden":"true",children:"⏮"}),v.jsx("span",{className:"sr-only",children:"Previous track"})]}),v.jsxs("button",{type:"button",className:"ep-bg-btn ep-btn group","aria-label":"Skip to next track in playlist",onClick:f,disabled:y.length<=1,title:y.length<=1?"Only one track available":"Go to next track",children:[v.jsx("span",{className:"text-lg transition-transform group-hover:scale-110","aria-hidden":"true",children:"⏭"}),v.jsx("span",{className:"sr-only",children:"Next track"})]}),v.jsxs("button",{type:"button",className:"ep-bg-btn group","aria-label":o?"Enable background video audio":"Disable background video audio","aria-pressed":o,onClick:()=>{const R=!o;a(R),R||(c===0&&d(.5),e||t())},title:o?"Click to unmute audio":"Click to mute audio",children:[v.jsx("span",{className:"text-lg transition-transform group-hover:scale-110","aria-hidden":"true",children:o?"🔇":"🔊"}),v.jsxs("span",{className:"sr-only",children:[o?"Unmute":"Mute"," background video"]})]}),v.jsxs("button",{type:"button",className:"ep-bg-btn ep-btn group","aria-label":b?"Disable performance mode (higher quality visuals)":"Enable performance mode (reduced visual effects)","aria-pressed":b,title:b?"Performance mode: ON - Click to enable full visual effects":"Performance mode: OFF - Click to reduce visual effects for better performance",onClick:()=>{const R=!b;try{document.dispatchEvent(new CustomEvent("ep:lowfx-toggle",{detail:R}))}catch{}x(R)},children:[v.jsx("span",{className:"text-sm font-medium transition-transform group-hover:scale-110","aria-hidden":"true",children:b?"FX-":"FX"}),v.jsxs("span",{className:"sr-only",children:[b?"Disable":"Enable"," performance mode"]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("label",{htmlFor:"bg-volume-slider",className:"sr-only",children:"Background video volume control"}),v.jsx("input",{id:"bg-volume-slider",className:"ep-bg-volume",type:"range",min:0,max:1,step:.01,"aria-label":`Background video volume: ${Math.round(c*100)}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(c*100),"aria-valuetext":`${Math.round(c*100)} percent volume`,value:c,onChange:R=>{const Z=parseFloat(R.target.value);d(Z),Z>0?(o&&a(!1),e||t()):o||a(!0)}}),v.jsxs("span",{className:"text-xs opacity-70 sr-only","aria-live":"polite",children:["Volume: ",Math.round(c*100),"%"]})]}),v.jsxs("div",{className:"relative md:hidden",children:[v.jsx("button",{type:"button",className:"ep-bg-btn ep-btn","aria-haspopup":"menu","aria-expanded":E,"aria-label":"More controls",onClick:()=>T(R=>!R),children:"•••"}),E&&v.jsx("div",{role:"menu",className:"absolute right-0 bottom-full mb-2 bg-white/90 border border-black rounded-xl p-2 shadow-xl flex flex-col min-w-[140px] z-10",children:v.jsx("button",{role:"menuitem",className:"ep-btn ep-btn--pink mb-2",onClick:()=>{T(!1);try{document.dispatchEvent(new Event("ep:lowfx-toggle"))}catch{}},children:"Toggle FX"})})]}),v.jsxs("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",children:["Background video: ",e?"playing":"paused",", volume ",Math.round(c*100),"%, ",o?"muted":"unmuted"]})]})}function gR({isOpen:n,onClose:e}){const[t,s]=A.useState(""),[o,a]=A.useState(!1),c=async d=>{d.preventDefault(),t.trim()&&(a(!0),setTimeout(()=>{console.log("Song suggestion submitted:",t),alert("Thank you for your suggestion! We'll review it and add it to the collection if it fits Em's style."),s(""),a(!1),e()},2e3))};return n?v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999]",role:"dialog","aria-modal":"true","aria-labelledby":"suggestion-title",children:v.jsxs("div",{className:"bg-white/95 backdrop-blur-md rounded-2xl p-6 max-w-md w-full mx-4 border border-black/20 shadow-2xl",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h2",{id:"suggestion-title",className:"text-lg font-semibold",children:"💡 Suggest a Song"}),v.jsx("button",{onClick:e,className:"w-8 h-8 rounded-full bg-black/10 hover:bg-black/20 flex items-center justify-center transition-colors","aria-label":"Close suggestion modal",children:"✕"})]}),v.jsxs("form",{onSubmit:d=>{c(d)},className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"song-suggestion",className:"block text-sm font-medium mb-2",children:"What song would you like to suggest?"}),v.jsx("textarea",{id:"song-suggestion",value:t,onChange:d=>s(d.target.value),placeholder:"Enter the song title and artist (e.g., 'Dream On by Aerosmith')",className:"w-full p-3 border border-black/30 rounded-xl bg-white/50 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-black/30 resize-none",rows:3,required:!0,disabled:o})]}),v.jsx("div",{className:"text-xs opacity-70",children:"💝 Help us build Em's perfect playlist! We'll review all suggestions and add songs that match the collection's vibe."}),v.jsxs("div",{className:"flex gap-3 pt-2",children:[v.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-black/30 rounded-xl bg-white/50 hover:bg-white/70 transition-colors",disabled:o,children:"Cancel"}),v.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-black text-white rounded-xl hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!t.trim()||o,children:o?"Sending...":"Submit Suggestion"})]})]})]})}):null}function yR(){const{playlist:n,currentIndex:e,setIndex:t}=cp(),[s,o]=A.useState(!1),[a,c]=A.useState(!1),d=f=>{t(f),o(!1)};return J.useEffect(()=>{const f=()=>o(g=>!g),p=()=>o(!0);return window.addEventListener("ep:playlist-toggle",f),window.addEventListener("ep:playlist-open",p),()=>{window.removeEventListener("ep:playlist-toggle",f),window.removeEventListener("ep:playlist-open",p)}},[]),J.useEffect(()=>{try{window.dispatchEvent(new CustomEvent("ep:playlist-state",{detail:s}))}catch{}},[s]),v.jsxs(v.Fragment,{children:[s&&v.jsxs("div",{id:"playlist-panel",className:"ep-playlist-panel",role:"region","aria-label":"Music playlist",children:[v.jsxs("div",{className:"ep-playlist-header",children:[v.jsx("h3",{className:"text-sm font-medium text-gray-800",children:"Now Playing"}),v.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 p-1","aria-label":"Close playlist",children:"✕"})]}),v.jsxs("div",{className:"ep-playlist-content",children:[v.jsx("div",{className:"ep-playlist-songs",children:n.map((f,p)=>v.jsx("button",{onClick:()=>d(p),className:`ep-playlist-song ${p===e?"ep-playlist-song-active":""}`,"aria-label":`Play ${f.name.replace(".mp4","")}`,"aria-current":p===e?"true":"false",role:"listitem",tabIndex:0,onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),d(p))},children:v.jsxs("div",{className:"ep-song-info",children:[v.jsx("span",{className:"ep-song-number",children:(p+1).toString().padStart(2,"0")}),v.jsxs("div",{className:"ep-song-details",children:[v.jsx("span",{className:"ep-song-title",children:f.name.replace(".mp4","")}),p===e&&v.jsx("span",{className:"ep-now-playing",children:"▶ Now Playing"})]})]})},p))}),v.jsx("div",{className:"ep-recommendation-section",children:v.jsxs("button",{onClick:()=>c(!0),className:"ep-recommend-btn ep-btn ep-btn--pink","aria-label":"Suggest more songs to add to the playlist",title:"Open suggestion form",children:[v.jsx("span",{className:"text-sm",children:"💡"}),v.jsx("span",{className:"ml-2 text-xs",children:"Suggest More"})]})})]})]}),v.jsx(gR,{isOpen:a,onClose:()=>c(!1)})]})}const bR="modulepreload",vR=function(n){return"/"+n},U0={},xR=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let c=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=d?.nonce||d?.getAttribute("nonce");o=c(t.map(p=>{if(p=vR(p),p in U0)return;U0[p]=!0;const g=p.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":bR,g||(b.as="script"),b.crossOrigin="",b.href=p,f&&b.setAttribute("nonce",f),document.head.appendChild(b),g)return new Promise((x,S)=>{b.addEventListener("load",x),b.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},SR=A.forwardRef(({src:n,...e},t)=>{const s=A.useRef(null),o=A.useRef(null);A.useEffect(()=>{const c=t?.current??s.current;if(!c){console.error("[HlsPlayer] No video element found");return}console.log("[HlsPlayer] Initializing with src:",n);let d;const f=typeof n=="string"&&n.toLowerCase().includes(".m3u8");console.log("[HlsPlayer] Is HLS manifest:",f,"src:",n);const p=!!(c.canPlayType&&c.canPlayType("application/vnd.apple.mpegurl"));console.log("[HlsPlayer] Native HLS support:",p);let g=!1;async function y(){if(!f){console.log("[HlsPlayer] Setting direct src:",n);try{c.src!==n&&(c.src=n,console.log("[HlsPlayer] Direct src set successfully"))}catch(b){console.error("[HlsPlayer] Failed to set direct src:",b)}return}if(p){console.log("[HlsPlayer] Using native HLS support");try{c.src!==n&&(c.src=n,console.log("[HlsPlayer] Native HLS src set"))}catch(b){console.error("[HlsPlayer] Failed to set native HLS src:",b)}return}try{const b=await xR(()=>import("./hls-B4EgoNQ5.js"),[]);if(g)return;const x=b?.default??b;if(!x||!x.isSupported?.()){console.warn("[HlsPlayer] HLS.js not supported, falling back to direct src");try{c.src=n}catch{}return}if(o.current){try{o.current.destroy()}catch{}o.current=null}const S={maxBufferLength:45,maxMaxBufferLength:90,maxBufferSize:60*1e3*1e3,maxBufferHole:.5,abrEwmaDefaultEstimate:8e5,abrEwmaSlowFactor:2.5,abrEwmaFastFactor:.7,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,maxSeekHole:1.5,maxFragLookUpTolerance:.25,enableWorker:!0,loader:void 0,fLoader:void 0,pLoader:void 0,capLevelToPlayerSize:!0,startLevel:-1,autoStartLoad:!0,testBandwidth:!0};try{const re=c.clientWidth||window.innerWidth||0;re&&re<600&&(S.maxBufferLength=20,S.maxMaxBufferLength=40,S.maxBufferSize=30*1e3*1e3,S.abrEwmaDefaultEstimate=4e5,S.abrEwmaSlowFactor=3.5,S.abrEwmaFastFactor=.5)}catch{}const E=e.hlsConfig||{},T={...S,...E};try{new URL(n,window.location.origin).toString()}catch{try{n=n.split("/").map(de=>de.includes(".m3u8")?de:encodeURIComponent(de)).join("/")}catch{}}const _=x,F=new _(T);o.current=F,F.attachMedia(c),F.on(x.Events.MEDIA_ATTACHED,()=>{console.log("[HlsPlayer] Media attached, loading source:",n);try{F.loadSource(n)}catch(re){console.error("[HlsPlayer] Failed to load source:",re)}try{c.setAttribute("data-hls-managed","true")}catch{}}),F.on(x.Events.MANIFEST_LOADED,(re,de)=>{console.log("[HlsPlayer] Manifest loaded successfully:",de)}),F.on(x.Events.FRAG_LOADED,(re,de)=>{console.log("[HlsPlayer] Fragment loaded:",de.frag.url)});const Y=!!e.debug,H=(re,de)=>{if(console.error("[HlsPlayer] HLS Error:",de.type,de.details,de),de.response&&console.error("[HlsPlayer] Response details:",de.response),de.fatal)switch(de.type){case x.ErrorTypes.NETWORK_ERROR:if(console.warn("[HlsPlayer] Network error, attempting recovery"),de.response&&de.response.code===404){console.warn("[HlsPlayer] HLS manifest not found, falling back to original source");try{const ke=n.replace(/^\/videos\/hls\/[^/]+\/index\.m3u8$/,Ce=>{const ne=Ce.split("/")[3];return`/videos/${decodeURIComponent(ne)}.mp4`});if(ke!==n){console.log("[HlsPlayer] Falling back to MP4:",ke),c.src=ke,c.load();return}}catch(ke){console.error("[HlsPlayer] Fallback failed:",ke)}}F.startLoad();break;case x.ErrorTypes.MEDIA_ERROR:console.warn("[HlsPlayer] Media error, attempting recovery"),F.recoverMediaError();break;default:console.error("[HlsPlayer] Fatal error, destroying instance"),F.destroy();break}},U=(re,de)=>{Y&&console.debug("[HlsPlayer] level switched",de)},R=(re,de)=>{Y&&console.debug("[HlsPlayer] frag buffered",de)},Z=(re,de)=>{Y&&console.debug("[HlsPlayer] buffer appended",de)},le=(re,de)=>{Y&&console.debug("[HlsPlayer] buffer EOS",de)};F.on(x.Events.ERROR,H),F.on(x.Events.LEVEL_SWITCHED,U),F.on(x.Events.FRAG_BUFFERED,R),F.on(x.Events.BUFFER_APPENDED,Z),F.on(x.Events.BUFFER_EOS,le),d=()=>{try{F.off(x.Events.ERROR,H),F.off(x.Events.LEVEL_SWITCHED,U),F.off(x.Events.FRAG_BUFFERED,R),F.off(x.Events.BUFFER_APPENDED,Z),F.off(x.Events.BUFFER_EOS,le)}catch{}}}catch(b){console.warn("[HlsPlayer] dynamic import or init failed, falling back to direct src",b);try{try{c.removeAttribute("data-hls-managed")}catch{}c.src=n}catch{}}}return y(),()=>{if(g=!0,o.current){try{d?.()}catch{}try{const b=o.current;b&&typeof b.destroy=="function"&&b.destroy()}catch{}o.current=null}try{const b=s.current;b&&typeof b.removeAttribute=="function"&&b.removeAttribute("data-hls-managed")}catch{}}},[n,t]);const a=c=>{if(s.current=c,!!t)if(typeof t=="function")try{t(c)}catch{}else try{t.current=c}catch{}};return v.jsx("video",{ref:a,...e})});function wR(){try{return!!(navigator.connection||navigator.mozConnection||navigator.webkitConnection)?.saveData}catch{return!1}}let wa=null;function kR(){const{playlist:n,currentIndex:e,setIndex:t,next:s,isPlaying:o,play:a,pause:c,muted:d,volume:f,currentTime:p,setCurrentTime:g,registerDomControls:y}=cp(),{isAuthenticated:b}=bo(),x=A.useRef(null),S=A.useRef(null),E=A.useRef(null),T=A.useRef(!1),_=A.useRef(!0),[F,Y]=A.useState(!1),H=A.useRef(0),U=A.useRef([]),R=A.useRef(!1),Z=A.useRef(!1),le=A.useRef(0),[re,de]=A.useState(!1),[ke,Ce]=A.useState(0),[ne,se]=A.useState(!1),[te,N]=A.useState(!1),L=A.useMemo(wR,[]),$=n[e]?.url??"",ce=n[e]?.name??"",C=(...D)=>console.debug("[BGV]",...D),P=A.useCallback(D=>{if(D&&!Z.current){document.documentElement.classList.add("ep-lowfx"),Z.current=!0;try{sessionStorage.setItem("ep:lowfx","1")}catch{}C("lowfx: enabled")}else if(!D&&Z.current){document.documentElement.classList.remove("ep-lowfx"),Z.current=!1;try{sessionStorage.removeItem("ep:lowfx")}catch{}C("lowfx: disabled")}},[]);A.useEffect(()=>{let D=!1;try{D=!!sessionStorage.getItem("ep:lowfx")}catch{}return L&&(D=!0),P(D),()=>P(!1)},[L,P]),A.useEffect(()=>{const D=x.current;if(!D)return;let X=!1;const ie=D.requestVideoFrameCallback,z=D.cancelVideoFrameCallback;if(typeof ie=="function"){let oe=null,Ee,Be=0,be=0;const Le=120,St=55,Ze=qe=>{if(!X){if(Ee!==void 0&&qe-Ee>St&&Be++,Ee=qe,be++,be>=Le){const yt=Be/be;C("lowfx sample",{spikes:Be,samples:be,ratio:yt}),yt>.15&&P(!0),Be=0,be=0}oe=ie.call(D,Ze)}};return oe=ie.call(D,Ze),()=>{if(X=!0,oe&&typeof z=="function")try{z.call(D,oe)}catch{}}}const ae=window.setInterval(()=>{try{const oe=D.getVideoPlaybackQuality?.();if(oe&&oe.totalVideoFrames>0){const Ee=oe.droppedVideoFrames/oe.totalVideoFrames;C("lowfx quality",{dropped:oe.droppedVideoFrames,total:oe.totalVideoFrames,ratio:Ee.toFixed(3)}),Ee>.1&&P(!0)}else{const Ee=D.webkitDroppedFrameCount??0,Be=D.webkitDecodedFrameCount??0;if(Be>0){const be=Ee/Be;C("lowfx quality (webkit)",{dropped:Ee,decoded:Be,ratio:be.toFixed(3)}),be>.1&&P(!0)}}}catch{}},2e3);return()=>{window.clearInterval(ae)}},[$,P]);function ee(D,X){const ie=new Set,z=[D,D.normalize?.("NFC"),D.normalize?.("NFD"),D.normalize?.("NFKC"),D.normalize?.("NFKD")].filter(oe=>typeof oe=="string"),ae=[oe=>encodeURIComponent(oe),oe=>encodeURI(oe),oe=>oe];ie.add(X);for(const oe of z)for(const Ee of ae){const Be=Ee(oe);ie.add(`/videos/${Be}`)}return Array.from(ie)}return A.useEffect(()=>(y({play:()=>{const X=x.current;X&&X.play().catch(()=>{})},pause:()=>{x.current?.pause()},seek:X=>{if(x.current)try{x.current.currentTime=Math.max(0,X||0)}catch{}},applyState:X=>{x.current&&(typeof X.muted=="boolean"&&(_.current=X.muted,X.muted?x.current.muted=!0:T.current&&(x.current.muted=!1)),typeof X.volume=="number"&&(x.current.volume=Math.min(1,Math.max(0,X.volume))))}}),()=>y(null)),[y]),A.useEffect(()=>{const D=x.current;if(!D)return;de(!1),R.current=!1;const X=ee(ce,$);U.current=X,H.current=0,D.volume=f,C("init",{requestedName:ce,primarySrc:$,firstAttempt:D.src,totalCandidates:U.current.length});const ie=qe=>{if(wa&&wa!==qe&&!wa.paused)try{wa.pause()}catch{}wa=qe},z=async qe=>{ie(qe);try{await qe.play(),se(!1),R.current=!0,C("play() success",{currentTime:qe.currentTime,muted:qe.muted,volume:qe.volume,src:qe.currentSrc})}catch(yt){if(C("play() failed",{name:yt?.name,message:yt?.message}),yt&&(yt.name==="NotAllowedError"||yt.name==="AbortError")){qe.muted=!0;try{await qe.play(),se(!1),R.current=!0,C("retry play() muted success",{src:qe.currentSrc})}catch(ut){C("retry play() muted failed",{name:ut?.name,message:ut?.message})}}}},ae=()=>{if(de(!0),N(!1),C("loadedmetadata",{currentSrc:D.currentSrc,duration:D.duration}),Number.isFinite(p)&&p>0){let qe=Math.max(0,p);const yt=D.duration;Number.isFinite(yt)&&qe>=yt-1&&(qe=0);try{D.currentTime=qe}catch{}C("restore time",{requested:p,applied:D.currentTime,duration:D.duration})}z(D)},oe=()=>{N(!1),de(!0),R.current=!0,C("canplay",{readyState:D.readyState,src:D.src}),z(D)},Ee=()=>{N(!1),de(!0),R.current=!0,C("canplaythrough",{readyState:D.readyState,src:D.src}),z(D)},Be=()=>{ie(D)},be=()=>{C("ended, advancing (next)",{from:e});try{s()}catch{}},Le=()=>{E.current&&cancelAnimationFrame(E.current),E.current=requestAnimationFrame(()=>{const qe=performance.now();qe-le.current>=500&&(g(D.currentTime||0),le.current=qe)})},St=()=>{const qe=D.error;C("error",{code:qe?.code,message:qe?.message,currentSrc:D.currentSrc,attempt:H.current+1})};D.addEventListener("loadedmetadata",ae),D.addEventListener("canplay",oe),D.addEventListener("canplaythrough",Ee),D.addEventListener("play",Be),D.addEventListener("ended",be),D.addEventListener("timeupdate",Le),D.addEventListener("error",St);const Ze=()=>{T.current=!0,Y(!0),_.current||(D.muted=!1),z(D)};return document.addEventListener("pointerdown",Ze,{once:!0,passive:!0,capture:!0}),document.addEventListener("keydown",Ze,{once:!0,capture:!0}),()=>{D.removeEventListener("loadedmetadata",ae),D.removeEventListener("canplay",oe),D.removeEventListener("canplaythrough",Ee),D.removeEventListener("play",Be),D.removeEventListener("ended",be),D.removeEventListener("timeupdate",Le),D.removeEventListener("error",St),document.removeEventListener("pointerdown",Ze,!0),document.removeEventListener("keydown",Ze,!0)}},[$,ce,e,g,t,L,f,s,P,p]),A.useEffect(()=>{const D=()=>{const X=x.current;if(X)if(document.hidden)try{X.pause()}catch{}else o&&X.play().catch(()=>{})};return document.addEventListener("visibilitychange",D),()=>document.removeEventListener("visibilitychange",D)},[o,c]),A.useEffect(()=>{const D=(e+1+n.length)%n.length,X=n[D]?.url,ie=S.current;if(!ie||!X)return;ie.preload=L?"none":"metadata";const z=typeof X=="string"&&X.toLowerCase().endsWith(".m3u8"),ae=!!(ie.canPlayType&&ie.canPlayType("application/vnd.apple.mpegurl"));if(!(z&&!ae))try{ie.src=X,ie.load()}catch{}},[e,n,L]),A.useEffect(()=>{const D=X=>{try{const ie=X.detail;P(!!ie)}catch{}};return document.addEventListener("ep:lowfx-toggle",D),()=>{document.removeEventListener("ep:lowfx-toggle",D)}},[P]),A.useEffect(()=>{const D=x.current;if(D&&b){D.preload=L?"metadata":"auto";try{D.load()}catch{}d&&D.play().then(()=>se(!1)).catch(X=>{X&&(X.name==="NotAllowedError"||String(X).includes("NotAllowedError"))&&(se(!0),c())})}},[b,d,L,c,P]),A.useEffect(()=>{if(!b)return;const D=()=>{T.current=!0,Y(!0);const X=x.current;X&&!_.current&&(X.muted=!1),o||(a(),se(!1))};return window.addEventListener("pointerdown",D,{once:!0}),window.addEventListener("keydown",D,{once:!0}),()=>{window.removeEventListener("pointerdown",D),window.removeEventListener("keydown",D)}},[b,o,a]),A.useEffect(()=>{L||!b&&!o&&d&&a()},[b,o,a,L,d]),A.useEffect(()=>{const D=re?.35:0,X=requestAnimationFrame(()=>Ce(D));return C("ready->opacity",{ready:re,opacity:D,src:$}),()=>cancelAnimationFrame(X)},[re,$]),v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",style:{opacity:ke},children:[v.jsx(SR,{ref:x,className:"ep-bg-video-el",src:$,muted:F?d:!0,playsInline:!0,loop:!1,autoPlay:!0,"aria-hidden":"true",preload:L?"metadata":"auto",controls:!1,disablePictureInPicture:!0,disableRemotePlayback:!0},$),v.jsx("div",{className:"ep-bg-video-blur"})]}),v.jsx("video",{ref:S,style:{display:"none"},"aria-hidden":"true",preload:"metadata",muted:!0}),b&&v.jsx(mR,{filename:ce}),b&&v.jsx(yR,{}),b&&ne&&v.jsx("div",{className:"ep-bg-controls",role:"region","aria-label":"Enable background video",children:v.jsx("button",{type:"button",className:"ep-bg-btn glassmorphic-btn",onClick:()=>{T.current=!0,se(!1);const D=x.current;D&&D.play().catch(()=>{})},children:"Enable background video"})})]})}function ER({isOpen:n,onClose:e}){const t=st(_e.media.generateUploadUrl),s=st(_e.media.create),[o,a]=A.useState(null),[c,d]=A.useState(""),[f,p]=A.useState(""),[g,y]=A.useState(!1),b=A.useMemo(()=>o?o.type.startsWith("image/")?"image":o.type.startsWith("video/")?"video":null:null,[o]);if(!n)return null;async function x(S){if(S.preventDefault(),!(!o||!b||!c)){y(!0);try{const E=await t({}),T=await fetch(E,{method:"POST",body:o}),{storageId:_}=await T.json();await s({title:c,caption:f||void 0,type:b,storageId:_,visibleTo:[],category:void 0}),e(),a(null),d(""),p("")}catch(E){console.error("upload failed",E)}finally{y(!1)}}}return v.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 backdrop-blur-sm",role:"dialog","aria-modal":"true","aria-labelledby":"upload-title",children:v.jsxs("div",{className:"bg-white/95 rounded-2xl border border-black/20 shadow-2xl w-full max-w-md mx-4 p-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h2",{id:"upload-title",className:"text-lg font-semibold",children:"Upload"}),v.jsx("button",{type:"button",onClick:e,className:"w-8 h-8 rounded-full bg-black/10 hover:bg-black/20 flex items-center justify-center","aria-label":"Close upload modal",children:"✕"})]}),v.jsxs("form",{onSubmit:x,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"upload-file",className:"block text-sm font-medium mb-2",children:"Select file"}),v.jsx("input",{id:"upload-file",type:"file",accept:"image/*,video/*",onChange:S=>a(S.target.files?.[0]??null)})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"upload-title-input",className:"block text-sm font-medium mb-2",children:"Title"}),v.jsx("input",{id:"upload-title-input",className:"w-full p-3 border border-black/30 rounded-xl bg-white/60",value:c,onChange:S=>d(S.target.value),required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"upload-caption-input",className:"block text-sm font-medium mb-2",children:"Caption (optional)"}),v.jsx("textarea",{id:"upload-caption-input",className:"w-full p-3 border border-black/30 rounded-xl bg-white/60",rows:3,value:f,onChange:S=>p(S.target.value)})]}),v.jsx("div",{className:"text-xs opacity-70",children:"The upload will be attributed to your account."}),v.jsxs("div",{className:"flex gap-3 pt-2",children:[v.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-black/30 rounded-xl bg-white/50 hover:bg-white/70",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:!o||!b||!c||g,className:"flex-1 px-4 py-2 bg-black text-white rounded-xl hover:bg-gray-800 disabled:opacity-50",children:g?"Uploading…":"Upload"})]})]})]})})}function TR(n){const e=[];return n.childNodes.forEach(t=>{if(t.nodeType===Node.TEXT_NODE){const s=t.data.trim();s&&e.push({type:"paragraph",content:[{type:"text",text:s}]});return}if(t.nodeType===Node.ELEMENT_NODE){const s=t;if(s.tagName==="P"){const o=[];s.childNodes.forEach(a=>{if(a.nodeType===Node.TEXT_NODE){const c=a.data;c&&o.push({type:"text",text:c})}else if(a.nodeType===Node.ELEMENT_NODE){const c=a;c.tagName==="B"||c.tagName==="STRONG"?o.push({type:"text",text:c.innerText,marks:[{type:"bold"}]}):c.tagName==="I"||c.tagName==="EM"?o.push({type:"text",text:c.innerText,marks:[{type:"italic"}]}):c.tagName==="A"&&o.push({type:"text",text:c.innerText,marks:[{type:"link",href:c.getAttribute("href")}]})}}),e.push({type:"paragraph",content:o.length?o:[{type:"text",text:""}]})}}}),{type:"doc",content:e.length?e:[{type:"paragraph",content:[{type:"text",text:""}]}]}}function CR({isOpen:n,onClose:e}){const t=st(_e.posts.create),[s,o]=A.useState(""),[a,c]=A.useState(!1);if(!n)return null;async function d(f){f.preventDefault();const p=document.getElementById("post-editor");if(!p)return;const g=TR(p);if(s.trim()){c(!0);try{await t({title:s.trim(),content:g}),e(),o(""),p&&(p.innerHTML="<p></p>")}finally{c(!1)}}}return v.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 backdrop-blur-sm",role:"dialog","aria-modal":"true","aria-labelledby":"post-title",children:v.jsxs("div",{className:"bg-white/95 rounded-2xl border border-black/20 shadow-2xl w-full max-w-2xl mx-4 p-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h2",{id:"post-title",className:"text-lg font-semibold",children:"New Post"}),v.jsx("button",{type:"button",onClick:e,className:"w-8 h-8 rounded-full bg-black/10 hover:bg-black/20 flex items-center justify-center","aria-label":"Close post modal",children:"✕"})]}),v.jsxs("form",{onSubmit:d,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"post-title-input",className:"block text-sm font-medium mb-2",children:"Title"}),v.jsx("input",{id:"post-title-input",className:"w-full p-3 border border-black/30 rounded-xl bg-white/60",value:s,onChange:f=>o(f.target.value),placeholder:"Give your post a title",required:!0})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2 text-xs mb-2 opacity-80",children:[v.jsx("span",{children:"Formatting:"}),v.jsxs("span",{children:[v.jsx("b",{children:"B"})," bold"]}),v.jsxs("span",{children:[v.jsx("i",{children:"I"})," italic"]}),v.jsx("span",{children:"Paste links"})]}),v.jsx("div",{id:"post-editor",className:"w-full min-h-[160px] p-3 border border-black/30 rounded-xl bg-white/60",contentEditable:!0,suppressContentEditableWarning:!0,role:"textbox","aria-multiline":"true",children:v.jsx("p",{})})]}),v.jsx("div",{className:"text-xs opacity-70",children:"This post will be attributed to your account."}),v.jsxs("div",{className:"flex gap-3 pt-2",children:[v.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-black/30 rounded-xl bg-white/50 hover:bg-white/70",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:!s.trim()||a,className:"flex-1 px-4 py-2 bg-black text-white rounded-xl hover:bg-gray-800 disabled:opacity-50",children:a?"Posting…":"Post"})]})]})]})})}function MR(){const{isAuthenticated:n}=bo(),[e,t]=A.useState(!1),[s,o]=A.useState(!1),[a,c]=A.useState(!1),[d,f]=A.useState(!1);if(!n)return null;const p=()=>{f(!0);const y=new CustomEvent("actionButtonClick",{detail:{action:"post",source:"floating-button"}});window.dispatchEvent(y)},g=()=>{c(!0);const y=new CustomEvent("actionButtonClick",{detail:{action:"upload",source:"floating-button"}});window.dispatchEvent(y)};return v.jsxs("div",{className:"ep-action-buttons",role:"region","aria-label":"Quick action buttons",children:[v.jsxs("div",{className:"relative",children:[v.jsxs("button",{onClick:g,className:"ep-action-btn ep-upload-btn ep-btn group","aria-label":"Upload media or files to your timeline","aria-describedby":"upload-info",title:"Upload media or files (opens file picker)",children:[v.jsx("span",{className:"text-2xl transition-transform group-hover:scale-110","aria-hidden":"true",children:"⬆"}),v.jsx("span",{className:"sr-only",children:"Upload content"})]}),v.jsx("div",{id:"upload-info",className:"sr-only","aria-hidden":"false",children:"Use the upload button to add photos, videos, or documents to your timeline. Files are securely stored and shared."})]}),v.jsxs("div",{className:"relative",children:[v.jsxs("button",{onClick:p,className:"ep-action-btn ep-post-btn ep-btn group","aria-label":"Write a new message to Emily","aria-describedby":"post-info",title:"Write a new message to Emily (opens composer)",children:[v.jsx("span",{className:"text-2xl transition-transform group-hover:scale-110","aria-hidden":"true",children:"📝"}),v.jsx("span",{className:"sr-only",children:"Create message"})]}),v.jsx("div",{id:"post-info",className:"sr-only","aria-hidden":"false",children:"Use the message button to write a new message to Emily; opens the composer."})]}),v.jsx("div",{className:"sr-only","aria-live":"polite",id:"action-instructions",children:"Use the upload button to add media files, or the message button to write to Emily."}),v.jsx(ER,{isOpen:a,onClose:()=>c(!1)}),v.jsx(CR,{isOpen:d,onClose:()=>f(!1)})]})}function NR(){const[n,e]=A.useState("profile"),[t,s]=A.useState(!1),{isAuthenticated:o}=bo();A.useEffect(()=>{s(!1)},[n]),A.useEffect(()=>{const d=document.body,f=d.style.overflow;return t?d.style.overflow="hidden":d.style.overflow=f||"",()=>{d.style.overflow=f||""}},[t]),A.useEffect(()=>{if(!t)return;const d=f=>{f.key==="Escape"&&s(!1)};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t]);const a=()=>{const d=document.querySelector("main");d&&(d.focus(),d.scrollIntoView({behavior:"smooth"}))},c=[{id:"gallery",label:"Timeline"},{id:"blog",label:"Messages"},{id:"about",label:"About"}];return A.useEffect(()=>{if(o)try{sessionStorage.getItem("ep:welcomedBack")||(Ve("Welcome back! Visit Messages to share.",{action:{label:"Open Messages",onClick:()=>e("blog")}}),sessionStorage.setItem("ep:welcomedBack","1"))}catch{}},[o]),v.jsxs(v.Fragment,{children:[v.jsx("a",{href:"#main-content",onClick:a,className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 glassmorphic-btn px-4 py-2 text-sm font-medium rounded-lg",children:"Skip to main content"}),v.jsx(kR,{}),v.jsxs("div",{className:"relative z-[10] min-h-screen flex flex-col bg-transparent",children:[v.jsxs("header",{className:"sticky top-0 z-10 glass-elevated glass-3d text-contrast p-6 mx-4 mt-4 rounded-2xl",role:"banner",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:"/logo2.png",alt:"Emerald Palace",className:"w-10 h-10"}),v.jsx("h2",{className:"text-3xl font-semibold",children:"Emerald Palace"})]}),v.jsx("nav",{className:"hidden md:flex gap-2 items-center",role:"navigation","aria-label":"Main navigation",children:c.map(d=>v.jsxs("button",{onClick:()=>e(d.id),className:`ep-btn ${n===d.id?"ep-btn--pink":""}`,"aria-current":n===d.id?"page":void 0,"aria-describedby":`${d.id}-description`,title:`Navigate to ${d.label} page`,children:[d.label,v.jsxs("span",{id:`${d.id}-description`,className:"sr-only",children:[d.id==="gallery"&&"View and explore your timeline of memories",d.id==="blog"&&"Open Messages to write notes to Emily and read what others have shared",d.id==="about"&&"Learn more about Emerald Palace"]})]},d.id))}),v.jsx("div",{className:"ml-auto hidden md:flex items-center gap-3",children:v.jsx("button",{onClick:()=>e("profile"),className:`ep-btn ${n==="profile"?"ep-btn--pink":""}`,"aria-current":n==="profile"?"page":void 0,title:"Go to your profile",children:"👤 Profile"})}),v.jsxs("button",{onClick:()=>s(!t),className:"md:hidden ml-auto p-3 hover:bg-white/10 rounded-lg flex items-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/30","aria-label":t?"Close navigation menu":"Open navigation menu","aria-expanded":t,"aria-controls":"mobile-navigation",title:t?"Close menu":"Open menu",children:[v.jsxs("span",{className:"sr-only",children:[t?"Close":"Open"," menu"]}),v.jsx("span",{className:"text-sm font-medium",children:"Menu"}),v.jsxs("div",{className:"w-6 h-5 relative flex flex-col justify-between","aria-hidden":"true",children:[v.jsx("span",{className:`block h-0.5 w-full bg-current transform transition-transform duration-200 ${t?"rotate-45 translate-y-2":""}`}),v.jsx("span",{className:`block h-0.5 w-full bg-current transition-opacity duration-200 ${t?"opacity-0":""}`}),v.jsx("span",{className:`block h-0.5 w-full bg-current transform transition-transform duration-200 ${t?"-rotate-45 -translate-y-2":""}`})]})]})]}),t&&v.jsxs(v.Fragment,{children:[v.jsx("button",{type:"button","aria-label":"Close menu backdrop",className:"ep-slide-overlay md:hidden",onClick:()=>s(!1)}),v.jsxs("nav",{id:"mobile-navigation",className:"ep-slide-menu open md:hidden",role:"dialog","aria-modal":"true","aria-label":"Mobile navigation menu",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("div",{className:"font-semibold",children:"Menu"}),v.jsx("button",{type:"button",className:"ep-btn",onClick:()=>s(!1),"aria-label":"Close menu",children:"Close"})]}),c.map((d,f)=>v.jsx("button",{onClick:()=>{e(d.id),s(!1)},className:"ep-btn ep-btn--pink ep-menu-link","aria-current":n===d.id?"page":void 0,autoFocus:f===0,children:d.label},d.id)),v.jsx("div",{className:"mt-4",children:v.jsx("button",{onClick:()=>{e("profile"),s(!1)},className:"ep-btn ep-btn--pink ep-menu-link","aria-current":n==="profile"?"page":void 0,children:"👤 Profile"})})]})]})]}),v.jsxs("main",{id:"main-content",className:"flex-1 p-6 mx-4 mb-4",role:"main",tabIndex:-1,children:[v.jsx(aE,{children:v.jsxs("div",{className:"max-w-md mx-auto glass-elevated glass-3d rounded-2xl border border-white/20 p-6 text-contrast",role:"region","aria-labelledby":"welcome-heading",children:[v.jsx("div",{className:"flex justify-center mb-8",children:v.jsx("img",{src:"/logo2.png",alt:"Emerald Palace logo",className:"w-20 h-20"})}),v.jsx("h1",{id:"welcome-heading",className:"text-4xl font-bold text-center mb-8 text-contrast",children:"Welcome to Emerald Palace"}),v.jsxs("p",{className:"text-center text-white/90 text-contrast-shadow mb-8",role:"status","aria-live":"polite",children:[v.jsx("span",{className:"sr-only",children:"Welcome message: "}),"Save your profile by signing up with an email and make a password. Otherwise, sign in anonymously without an email.",v.jsx("span",{className:"sr-only",children:"Use the form below to get started."})]}),v.jsx(PE,{})]})}),v.jsxs(oE,{children:[v.jsxs("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",children:[n==="profile"&&"Profile page: View and manage your personal information and settings.",n==="gallery"&&"Timeline page: Explore and manage your media collection and memories.",n==="blog"&&"Messages page: Send messages to Emily and read what others have shared.",n==="about"&&"About page: Learn more about Emerald Palace and how to use it."]}),n==="profile"&&v.jsx(dR,{}),n==="gallery"&&v.jsx(GE,{}),n==="blog"&&v.jsx(f2,{}),n==="about"&&v.jsx(h2,{})]})]}),v.jsx(MR,{}),v.jsx(HE,{})]})]})}let Oh=null;try{const n="https://ardent-walrus-494.convex.cloud";Oh=new Qk(n)}catch(n){const e=document.getElementById("root");e&&(e.innerText=`App initialization error: ${n?.message??String(n)}`)}Oh&&Cw.createRoot(document.getElementById("root")).render(v.jsx(A.StrictMode,{children:v.jsx(mE,{client:Oh,children:v.jsx(pR,{children:v.jsx(NR,{})})})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{(async()=>{try{const n=await navigator.serviceWorker.register("/sw.js");if(console.debug("[SW] registered",n),n.waiting)try{n.waiting.postMessage("skipWaiting")}catch{}n.addEventListener("updatefound",()=>{const e=n.installing;e&&e.addEventListener("statechange",()=>{if(e.state==="installed"&&navigator.serviceWorker.controller)try{n.waiting?.postMessage("skipWaiting")}catch{}})})}catch(n){console.debug("[SW] registration failed",n)}})()});
